/* esm.sh - esbuild bundle(d3-drag@3.0.0) esnext production */
import{dispatch as R}from"/v124/d3-dispatch@3.0.1/esnext/d3-dispatch.mjs";import{select as K,pointer as N}from"/v124/d3-selection@3.0.0/esnext/d3-selection.mjs";import{select as F}from"/v124/d3-selection@3.0.0/esnext/d3-selection.mjs";var C={passive:!1},p={capture:!0,passive:!1};function j(t){t.stopImmediatePropagation()}function d(t){t.preventDefault(),t.stopImmediatePropagation()}function S(t){var o=t.document.documentElement,i=F(t).on("dragstart.drag",d,p);"onselectstart"in o?i.on("selectstart.drag",d,p):(o.__noselect=o.style.MozUserSelect,o.style.MozUserSelect="none")}function z(t,o){var i=t.document.documentElement,l=F(t).on("dragstart.drag",null);o&&(l.on("click.drag",d,p),setTimeout(function(){l.on("click.drag",null)},0)),"onselectstart"in i?l.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}var x=t=>()=>t;function w(t,{sourceEvent:o,subject:i,target:l,identifier:f,active:h,x:b,y:E,dx:T,dy:y,dispatch:m}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:o,enumerable:!0,configurable:!0},subject:{value:i,enumerable:!0,configurable:!0},target:{value:l,enumerable:!0,configurable:!0},identifier:{value:f,enumerable:!0,configurable:!0},active:{value:h,enumerable:!0,configurable:!0},x:{value:b,enumerable:!0,configurable:!0},y:{value:E,enumerable:!0,configurable:!0},dx:{value:T,enumerable:!0,configurable:!0},dy:{value:y,enumerable:!0,configurable:!0},_:{value:m}})}w.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function V(t){return!t.ctrlKey&&!t.button}function W(){return this.parentNode}function Z(t,o){return o??{x:t.x,y:t.y}}function _(){return navigator.maxTouchPoints||"ontouchstart"in this}function $(){var t=V,o=W,i=Z,l=_,f={},h=R("start","drag","end"),b=0,E,T,y,m,D=0;function a(e){e.on("mousedown.drag",O).filter(l).on("touchstart.drag",G).on("touchmove.drag",H,C).on("touchend.drag touchcancel.drag",J).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function O(e,r){if(!(m||!t.call(this,e,r))){var n=U(this,o.call(this,e,r),e,r,"mouse");n&&(K(e.view).on("mousemove.drag",A,p).on("mouseup.drag",B,p),S(e.view),j(e),y=!1,E=e.clientX,T=e.clientY,n("start",e))}}function A(e){if(d(e),!y){var r=e.clientX-E,n=e.clientY-T;y=r*r+n*n>D}f.mouse("drag",e)}function B(e){K(e.view).on("mousemove.drag mouseup.drag",null),z(e.view,y),d(e),f.mouse("end",e)}function G(e,r){if(t.call(this,e,r)){var n=e.changedTouches,u=o.call(this,e,r),c=n.length,g,v;for(g=0;g<c;++g)(v=U(this,u,e,r,n[g].identifier,n[g]))&&(j(e),v("start",e,n[g]))}}function H(e){var r=e.changedTouches,n=r.length,u,c;for(u=0;u<n;++u)(c=f[r[u].identifier])&&(d(e),c("drag",e,r[u]))}function J(e){var r=e.changedTouches,n=r.length,u,c;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),u=0;u<n;++u)(c=f[r[u].identifier])&&(j(e),c("end",e,r[u]))}function U(e,r,n,u,c,g){var v=h.copy(),s=N(g||n,r),I,X,k;if((k=i.call(e,new w("beforestart",{sourceEvent:n,target:a,identifier:c,active:b,x:s[0],y:s[1],dx:0,dy:0,dispatch:v}),u))!=null)return I=k.x-s[0]||0,X=k.y-s[1]||0,function L(M,Y,Q){var q=s,P;switch(M){case"start":f[c]=L,P=b++;break;case"end":delete f[c],--b;case"drag":s=N(Q||Y,r),P=b;break}v.call(M,e,new w(M,{sourceEvent:Y,subject:k,target:a,identifier:c,active:P,x:s[0]+I,y:s[1]+X,dx:s[0]-q[0],dy:s[1]-q[1],dispatch:v}),u)}}return a.filter=function(e){return arguments.length?(t=typeof e=="function"?e:x(!!e),a):t},a.container=function(e){return arguments.length?(o=typeof e=="function"?e:x(e),a):o},a.subject=function(e){return arguments.length?(i=typeof e=="function"?e:x(e),a):i},a.touchable=function(e){return arguments.length?(l=typeof e=="function"?e:x(!!e),a):l},a.on=function(){var e=h.on.apply(h,arguments);return e===h?a:e},a.clickDistance=function(e){return arguments.length?(D=(e=+e)*e,a):Math.sqrt(D)},a}export{$ as drag,S as dragDisable,z as dragEnable};
//# sourceMappingURL=d3-drag.mjs.map