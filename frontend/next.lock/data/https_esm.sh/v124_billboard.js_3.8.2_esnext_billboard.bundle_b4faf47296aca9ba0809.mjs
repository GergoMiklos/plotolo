import{timeParse as Sa,utcParse as Ra,timeFormat as Ca,utcFormat as La}from"/v124/d3-time-format@4.1.0/esnext/d3-time-format.mjs";import{pointer as Ea,select as L,namespaces as ce,selectAll as Je}from"/v124/d3-selection@3.0.0/esnext/d3-selection.mjs";import{brushSelection as Qe,brushY as Ia,brushX as Oa}from"/v124/d3-brush@3.0.0/esnext/d3-brush.mjs";import{csvParseRows as Pa,csvParse as Da,tsvParseRows as za,tsvParse as Ma}from"/v124/d3-dsv@3.0.1/esnext/d3-dsv.mjs";import{drag as ta}from"/v124/d3-drag@3.0.0/esnext/d3-drag.mjs";import{scaleOrdinal as Xa,scaleLinear as me,scaleSymlog as $a,scaleLog as Fa,scaleTime as Ba,scaleUtc as Na}from"/v124/d3-scale@4.0.2/esnext/d3-scale.mjs";import{transition as Ga}from"/v124/d3-transition@3.0.1/esnext/d3-transition.mjs";import{curveBasis as Va,curveBasisClosed as Ya,curveBasisOpen as Ha,curveBundle as Wa,curveCardinal as Ua,curveCardinalClosed as ja,curveCardinalOpen as Za,curveCatmullRom as qa,curveCatmullRomClosed as Ka,curveCatmullRomOpen as Ja,curveMonotoneX as Qa,curveMonotoneY as tn,curveNatural as en,curveLinearClosed as an,curveLinear as nn,curveStep as rn,curveStepAfter as on,curveStepBefore as sn,pie as cn,arc as Ie,area as ln,line as un}from"/v124/d3-shape@3.2.0/esnext/d3-shape.mjs";import{axisLeft as Oe,axisBottom as Pe,axisTop as dn,axisRight as hn}from"/v124/d3-axis@3.0.0/esnext/d3-axis.mjs";import{easeLinear as gn}from"/v124/d3-ease@3.0.1/esnext/d3-ease.mjs";import{interpolate as ea}from"/v124/d3-interpolate@3.0.1/esnext/d3-interpolate.mjs";import{treemap as fn,hierarchy as pn,treemapBinary as De,treemapDice as vn,treemapSlice as xn,treemapSliceDice as _n,treemapSquarify as mn,treemapResquarify as yn}from"/v124/d3-hierarchy@3.1.2/esnext/d3-hierarchy.mjs";import{zoomIdentity as Dt,zoomTransform as bn,zoom as Tn}from"/v124/d3-zoom@3.0.0/esnext/d3-zoom.mjs";var ie=globalThis||(typeof window<"u"?window:self),$=function(){var e=typeof globalThis=="object"&&globalThis!==null&&globalThis.Object===Object&&globalThis||typeof ie=="object"&&ie!==null&&ie.Object===Object&&ie||typeof self=="object"&&self!==null&&self.Object===Object&&self;return e||Function("return this")()}(),aa=typeof $.requestAnimationFrame=="function",na=typeof $.requestIdleCallback=="function",ia=aa?$.requestAnimationFrame:function(e){return setTimeout(e,1)},Ro=aa?$.cancelAnimationFrame:function(e){return clearTimeout(e)},ra=na?$.requestIdleCallback:ia;na&&$.cancelIdleCallback;var it=$?.document,C={AREA:"area",AREA_LINE_RANGE:"area-line-range",AREA_SPLINE:"area-spline",AREA_SPLINE_RANGE:"area-spline-range",AREA_STEP:"area-step",BAR:"bar",BUBBLE:"bubble",CANDLESTICK:"candlestick",DONUT:"donut",GAUGE:"gauge",LINE:"line",PIE:"pie",POLAR:"polar",RADAR:"radar",SCATTER:"scatter",SPLINE:"spline",STEP:"step",TREEMAP:"treemap"},ge={AREA:"initArea",AREA_LINE_RANGE:"initArea",AREA_SPLINE:"initArea",AREA_SPLINE_RANGE:"initArea",AREA_STEP:"initArea",BAR:"initBar",BUBBLE:"initCircle",CANDLESTICK:"initCandlestick",DONUT:"initArc",GAUGE:"initArc",LINE:"initLine",PIE:"initArc",POLAR:"initPolar",RADAR:"initCircle",SCATTER:"initCircle",SPLINE:"initLine",STEP:"initLine",TREEMAP:"initTreemap"},Ct={Area:[C.AREA,C.AREA_SPLINE,C.AREA_SPLINE_RANGE,C.AREA_LINE_RANGE,C.AREA_STEP],AreaRange:[C.AREA_SPLINE_RANGE,C.AREA_LINE_RANGE],Arc:[C.PIE,C.DONUT,C.GAUGE,C.POLAR,C.RADAR],Line:[C.LINE,C.SPLINE,C.AREA,C.AREA_SPLINE,C.AREA_SPLINE_RANGE,C.AREA_LINE_RANGE,C.STEP,C.AREA_STEP],Step:[C.STEP,C.AREA_STEP],Spline:[C.SPLINE,C.AREA_SPLINE,C.AREA_SPLINE_RANGE]},M=function(){return M=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++){t=arguments[a];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},M.apply(this,arguments)};function ct(e,t,a){if(a||arguments.length===2)for(var n=0,i=t.length,r;n<i;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))}var P=function(e){return e||e===0},D=function(e){return typeof e=="function"},Q=function(e){return typeof e=="string"},I=function(e){return typeof e=="number"},rt=function(e){return typeof e>"u"},N=function(e){return typeof e<"u"},oa=function(e){return typeof e=="boolean"},ze=function(e){return Math.ceil(e/10)*10},jt=function(e){return Math.ceil(e)+.5},zt=function(e){return e[1]-e[0]},Tt=function(e){return typeof e=="object"},Xt=function(e){return rt(e)||e===null||Q(e)&&e.length===0||Tt(e)&&!(e instanceof Date)&&Object.keys(e).length===0||I(e)&&isNaN(e)},J=function(e){return!Xt(e)},B=function(e){return Array.isArray(e)},F=function(e){return e&&!e?.nodeType&&Tt(e)&&!B(e)};function Lt(e,t,a){return N(e[t])?e[t]:a}function wn(e,t){var a=!1;return Object.keys(e).forEach(function(n){return e[n]===t&&(a=!0)}),a}function j(e,t){for(var a=[],n=2;n<arguments.length;n++)a[n-2]=arguments[n];var i=D(e);return i&&e.call.apply(e,ct([t],a,!1)),i}function Re(e,t){var a=0,n=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];!--a&&t.apply.apply(t,ct([this],i,!1))};"duration"in e?e.each(function(){return++a}).on("end",n):(++a,e.call(n))}function Zt(e){return Q(e)?e.replace(/</g,"&lt;").replace(/>/g,"&gt;"):e}function Kt(e,t,a,n){if(a===void 0&&(a=[-1,1]),n===void 0&&(n=!1),!(!e||!Q(t)))if(t.indexOf(`
`)===-1)e.text(t);else{var i=[e.text(),t].map(function(s){return s.replace(/[\s\n]/g,"")});if(i[0]!==i[1]){var r=t.split(`
`),o=n?r.length-1:1;e.html(""),r.forEach(function(s,c){e.append("tspan").attr("x",0).attr("dy","".concat(c===0?a[0]*o:a[1],"em")).text(s)})}}}function sa(e){var t=e.getBBox(),a=t.x,n=t.y,i=t.width,r=t.height;return[{x:a,y:n+r},{x:a,y:n},{x:a+i,y:n},{x:a+i,y:n+r}]}function An(e){var t=e.getBoundingClientRect(),a=t.width,n=t.height,i=sa(e),r=i[0].x,o=Math.min(i[0].y,i[1].y);return{x:r,y:o,width:a,height:n}}function pt(e,t){var a,n=e&&((a=e.touches||e.sourceEvent&&e.sourceEvent.touches)===null||a===void 0?void 0:a[0]),i=Ea(n||e,t);return i.map(function(r){return isNaN(r)?0:r})}function ca(e){var t=e.event,a=e.$el,n=a.subchart.main||a.main,i;return t&&t.type==="brush"?i=t.selection:n&&(i=n.select(".bb-brush").node())&&(i=Qe(i)),i}function qt(e){var t=!("rect"in e)||"rect"in e&&e.hasAttribute("width")&&e.rect.width!==+e.getAttribute("width");return t?e.rect=e.getBoundingClientRect():e.rect}function Rt(e,t,a){e===void 0&&(e=!0),t===void 0&&(t=0),a===void 0&&(a=1e4);var n=$.crypto||$.msCrypto,i=n?t+n.getRandomValues(new Uint32Array(1))[0]%(a-t+1):Math.floor(Math.random()*(a-t)+t);return e?String(i):i}function ye(e,t,a,n,i){if(a>n)return-1;var r=Math.floor((a+n)/2),o=e[r],s=o.x,c=o.w,l=c===void 0?0:c;return i&&(s=e[r].y,l=e[r].h),t>=s&&t<=s+l?r:t<s?ye(e,t,a,r-1,i):ye(e,t,r+1,n,i)}function la(e){var t=ca(e);return t?t[0]===t[1]:!0}function kn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var a=function(n){if(F(n)&&n.constructor){var i=new n.constructor;for(var r in n)i[r]=a(n[r]);return i}return n};return e.map(function(n){return a(n)}).reduce(function(n,i){return M(M({},n),i)})}function ot(e,t){e===void 0&&(e={}),B(t)&&t.forEach(function(n){return ot(e,n)});for(var a in t)/^\d+$/.test(a)||a in e||(e[a]=t[a]);return e}var ut=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};function Sn(e,t){return t===void 0&&(t="-"),e.split(t).map(function(a,n){return n?a.charAt(0).toUpperCase()+a.slice(1).toLowerCase():a.toLowerCase()}).join("")}var It=function(e){return[].slice.call(e)};function Rn(e,t,a){var n=e.rootSelctor,i=e.sheet,r=function(s){return s.replace(/\s?(bb-)/g,".$1").replace(/\.+/g,".")},o="".concat(n," ").concat(r(t)," {").concat(a.join(";"),"}");return i[i.insertRule?"insertRule":"addRule"](o,i.cssRules.length)}function Cn(e){var t=[];return e.forEach(function(a){var n;try{a.cssRules&&a.cssRules.length&&(t=t.concat(It(a.cssRules)))}catch(i){(n=$.console)===null||n===void 0||n.warn("Error while reading rules from ".concat(a.href,": ").concat(i.toString()))}}),t}function Me(e){var t=e?e.transform:null,a=t&&t.baseVal;return a&&a.numberOfItems?a.getItem(0).matrix:{a:0,b:0,c:0,d:0,e:0,f:0}}function be(e){var t=e[0]instanceof Date,a=(t?e.map(Number):e).filter(function(n,i,r){return r.indexOf(n)===i});return t?a.map(function(n){return new Date(n)}):a}function fe(e){return e&&e.length?e.reduce(function(t,a){return t.concat(a)}):[]}function Yt(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];if(!t.length||t.length===1&&!t[0])return e;var n=t.shift();return F(e)&&F(n)&&Object.keys(n).forEach(function(i){var r=n[i];F(r)?(!e[i]&&(e[i]={}),e[i]=Yt(e[i],r)):e[i]=B(r)?r.concat():r}),Yt.apply(void 0,ct([e],t,!1))}function Ht(e,t){t===void 0&&(t=!0);var a;return e[0]instanceof Date?a=t?function(n,i){return n-i}:function(n,i){return i-n}:t&&!e.every(isNaN)?a=function(n,i){return n-i}:t||(a=function(n,i){return n>i&&-1||n<i&&1||n===i&&0}),e.concat().sort(a)}function _t(e,t){var a=t.filter(function(n){return J(n)});return a.length?I(a[0])?a=Math[e].apply(Math,a):a[0]instanceof Date&&(a=Ht(a,e==="min")[0]):a=void 0,a}var oe=function(e,t,a){a===void 0&&(a=1);for(var n=[],i=Math.max(0,Math.ceil((t-e)/a))|0,r=e;r<i;r++)n.push(e+r*a);return n},Ln={mouse:function(){var e=function(){return{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0}};try{return new MouseEvent("t"),function(t,a,n){n===void 0&&(n=e()),t.dispatchEvent(new MouseEvent(a,n))}}catch{return function(t,a,n){n===void 0&&(n=e());var i=it.createEvent("MouseEvent");i.initMouseEvent(a,n.bubbles,n.cancelable,$,0,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),t.dispatchEvent(i)}}}(),touch:function(e,t,a){var n=new Touch(Yt({identifier:Date.now(),target:e,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},a));e.dispatchEvent(new TouchEvent(t,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[n],targetTouches:[],changedTouches:[n]}))}};function Te(e,t){var a=e;for(var n in t)a=a.replace(new RegExp("{=".concat(n,"}"),"g"),t[n]);return a}function mt(e){var t,a;if(e instanceof Date)a=e;else if(Q(e)){var n=this,i=n.config,r=n.format;a=(t=r.dataTime(i.data_xFormat)(e))!==null&&t!==void 0?t:new Date(e)}else I(e)&&!isNaN(e)&&(a=new Date(+e));return(!a||isNaN(+a))&&console&&console.error&&console.error("Failed to parse x '".concat(e,"' to Date object")),a}function Qt(){return it?.hidden===!1||it?.visibilityState==="visible"}function En(e,t){var a=$.DocumentTouch,n=$.matchMedia,i=$.navigator,r=!1;if(t)if(i&&"maxTouchPoints"in i)r=i.maxTouchPoints>0;else if("ontouchmove"in $||a&&it instanceof a)r=!0;else if(n?.("(pointer:coarse)").matches)r=!0;else{var o=i.userAgent;r=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(o)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(o)}var s=e&&["any-hover:hover","any-pointer:fine"].some(function(c){return n?.("(".concat(c,")")).matches});return s&&"mouse"||r&&"touch"||"mouse"}function ua(e,t){t()===!1?ia(function(){return ua(e,t)}):e()}function In(e){var t=e,a=t.config,n="";if(Xt(a.data_type||a.data_types)&&!t[ge.LINE])n="line";else for(var i in ge){var r=C[i];if(t.hasType(r)&&!t[ge[i]]){n=r;break}}n&&On("Please, make sure if %c".concat(Sn(n)),"module has been imported and specified correctly.")}function On(e,t){var a,n="[billboard.js]",i="https://github.com/naver/billboard.js/wiki/CHANGELOG-v2#modularization-by-its-functionality",r=(a=$.console)===null||a===void 0?void 0:a.error;throw r&&(console.error("\u274C ".concat(n," ").concat(e),"background:red;color:white;display:block;font-size:15px",t),console.info("%c\u2139\uFE0F","font-size:15px",i)),Error("".concat(n," ").concat(e.replace(/\%c([a-z-]+)/i,"'$1' ")," ").concat(t))}var z={button:"bb-button",chart:"bb-chart",empty:"bb-empty",main:"bb-main",target:"bb-target",EXPANDED:"_expanded_"},W={arc:"bb-arc",arcLabelLine:"bb-arc-label-line",arcs:"bb-arcs",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsTitle:"bb-chart-arcs-title"},le={area:"bb-area",areas:"bb-areas"},et={axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label"},xt={bar:"bb-bar",bars:"bb-bars",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars"},kt={candlestick:"bb-candlestick",candlesticks:"bb-candlesticks",chartCandlestick:"bb-chart-candlestick",chartCandlesticks:"bb-chart-candlesticks",valueDown:"bb-value-down",valueUp:"bb-value-up"},st={chartCircles:"bb-chart-circles",circle:"bb-circle",circles:"bb-circles"},we={colorPattern:"bb-color-pattern",colorScale:"bb-colorscale"},Pt={dragarea:"bb-dragarea",INCLUDED:"_included_"},dt={chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",gaugeValue:"bb-gauge-value"},V={legend:"bb-legend",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile"},St={chartLine:"bb-chart-line",chartLines:"bb-chart-lines",line:"bb-line",lines:"bb-lines"},vt={eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single"},U={focused:"bb-focused",defocused:"bb-defocused",legendItemFocused:"bb-legend-item-focused",xgridFocus:"bb-xgrid-focus",ygridFocus:"bb-ygrid-focus"},H={grid:"bb-grid",gridLines:"bb-grid-lines",xgrid:"bb-xgrid",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids"},Et={level:"bb-level",levels:"bb-levels"},da={chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars"},Jt={region:"bb-region",regions:"bb-regions"},Z={selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",SELECTED:"_selected_"},at={shape:"bb-shape",shapes:"bb-shapes"},ha={brush:"bb-brush",subchart:"bb-subchart"},lt={chartText:"bb-chart-text",chartTexts:"bb-chart-texts",text:"bb-text",texts:"bb-texts",title:"bb-title",TextOverlapping:"text-overlapping"},se={tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name"},Ce={treemap:"bb-treemap",chartTreemap:"bb-chart-treemap",chartTreemaps:"bb-chart-treemaps"},Ae={buttonZoomReset:"bb-zoom-reset",zoomBrush:"bb-zoom-brush"},X=M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M({},z),W),le),et),xt),kt),st),we),Pt),dt),V),St),vt),U),H),da),Jt),Z),at),ha),lt),se),Ce),Ae),Pn=function(){function e(){var t={chart:null,main:null,svg:null,axis:{x:null,y:null,y2:null,subX:null},defs:null,tooltip:null,legend:null,title:null,subchart:{main:null,bar:null,line:null,area:null},arcs:null,bar:null,candlestick:null,line:null,area:null,circle:null,radar:null,text:null,grid:{main:null,x:null,y:null},gridLines:{main:null,x:null,y:null},region:{main:null,list:null},eventRect:null,zoomResetBtn:null};return t}return e}(),Dn=function(){function e(){return{width:0,width2:0,height:0,height2:0,margin:{top:0,bottom:0,left:0,right:0},margin2:{top:0,bottom:0,left:0,right:0},margin3:{top:0,bottom:0,left:0,right:0},arcWidth:0,arcHeight:0,xAxisHeight:0,hasAxis:!1,hasRadar:!1,hasTreemap:!1,cssRule:{},current:{width:0,height:0,dataMax:0,maxTickWidths:{x:{size:0,ticks:[],clipPath:0,domain:""},y:{size:0,domain:""},y2:{size:0,domain:""}},types:[]},isLegendRight:!1,isLegendInset:!1,isLegendTop:!1,isLegendLeft:!1,legendStep:0,legendItemWidth:0,legendItemHeight:0,legendHasRendered:!1,eventReceiver:{currentIdx:-1,rect:{},data:[],coords:[]},axis:{x:{padding:{left:0,right:0},tickCount:0}},rotatedPadding:{left:30,right:0,top:5},withoutFadeIn:{},inputType:"",datetimeId:"",clip:{id:"",idXAxis:"",idYAxis:"",idXAxisTickTexts:"",idGrid:"",idSubchart:"",path:"",pathXAxis:"",pathYAxis:"",pathXAxisTickTexts:"",pathGrid:""},event:null,dragStart:null,dragging:!1,flowing:!1,cancelClick:!1,mouseover:!1,rendered:!1,transiting:!1,redrawing:!1,resizing:!1,toggling:!1,zooming:!1,hasNegativeValue:!1,hasPositiveValue:!0,orgAreaOpacity:"0.2",orgConfig:{},hiddenTargetIds:[],hiddenLegendIds:[],focusedTargetIds:[],defocusedTargetIds:[],radius:0,innerRadius:0,outerRadius:void 0,innerRadiusRatio:0,gaugeArcWidth:0,radiusExpanded:0,xgridAttr:{x1:null,x2:null,y1:null,y2:null}}}return e}(),Xe={element:Pn,state:Dn},zn=function(){function e(){var t=this;Object.keys(Xe).forEach(function(a){t[a]=new Xe[a]})}return e.prototype.getStore=function(t){return this[t]},e}(),Mn={bindto:"#chart",background:{},clipPath:!0,svg_classname:void 0,size_width:void 0,size_height:void 0,padding:!0,padding_mode:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,resize_timer:!0,onclick:void 0,onover:void 0,onout:void 0,onresize:void 0,onresized:void 0,onbeforeinit:void 0,oninit:void 0,onafterinit:void 0,onrendered:void 0,transition_duration:250,plugins:[],render:{},regions:[]},Xn={boost_useCssRule:!1,boost_useWorker:!1},$n={data_x:void 0,data_idConverter:function(e){return e},data_names:{},data_classes:{},data_type:void 0,data_types:{},data_order:"desc",data_groups:[],data_groupsZeroAs:"positive",data_color:void 0,data_colors:{},data_labels:{},data_labels_backgroundColors:void 0,data_labels_colors:void 0,data_labels_position:{},data_hide:!1,data_filter:void 0,data_onclick:function(){},data_onover:function(){},data_onout:function(){},data_onshown:void 0,data_onhidden:void 0,data_onmin:void 0,data_onmax:void 0,data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:"csv",data_keys:void 0,data_empty_label_text:""},Fn={color_pattern:[],color_tiles:void 0,color_threshold:{},color_onover:void 0},Bn={interaction_enabled:!0,interaction_brighten:!0,interaction_inputType_mouse:!0,interaction_inputType_touch:{}},Nn={legend_show:!0,legend_hide:!1,legend_contents_bindto:void 0,legend_contents_template:"<span style='color:#fff;padding:5px;background-color:{=COLOR}'>{=TITLE}</span>",legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onover:void 0,legend_item_onout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,legend_item_tile_r:5,legend_item_tile_type:"rectangle",legend_usePoint:!1},Gn={title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"center"},Vn={tooltip_show:!0,tooltip_doNotHide:!1,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:{},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_linked:!1,tooltip_linked_name:"",tooltip_onshow:function(){},tooltip_onhide:function(){},tooltip_onshown:function(){},tooltip_onhidden:function(){},tooltip_order:null},$t=function(){function e(){return kn(Mn,Xn,$n,Fn,Bn,Nn,Gn,Vn,e.data)}return e.setOptions=function(t){this.data=t.reduce(function(a,n){return M(M({},a),n)},this.data)},e.data={},e}(),ft={bubbleBaseLength:"$baseLength",colorPattern:"__colorPattern__",dataMinMax:"$dataMinMax",dataTotalSum:"$dataTotalSum",dataTotalPerIndex:"$totalPerIndex",legendItemTextBox:"legendItemTextBox",radarPoints:"$radarPoints",setOverOut:"setOverOut",callOverOutForTouch:"callOverOutForTouch",textRect:"textRect"},Yn=function(){function e(){this.cache={}}return e.prototype.add=function(t,a,n){return n===void 0&&(n=!1),this.cache[t]=n?this.cloneTarget(a):a,this.cache[t]},e.prototype.remove=function(t){var a=this;It(t).forEach(function(n){return delete a.cache[n]})},e.prototype.get=function(t,a){if(a===void 0&&(a=!1),a){for(var n=[],i=0,r=void 0;r=t[i];i++)r in this.cache&&n.push(this.cloneTarget(this.cache[r]));return n}else{var o=this.cache[t];return P(o)?o:null}},e.prototype.reset=function(t){var a=this;for(var n in a.cache)(t||/^\$/.test(n))&&(a.cache[n]=null)},e.prototype.cloneTarget=function(t){return{id:t.id,id_org:t.id_org,values:t.values.map(function(a){return{x:a.x,value:a.value,id:a.id}})}},e}(),Hn=$.setTimeout,Wn=$.clearTimeout;function Un(e){var t=[],a,n=function(){n.clear(),e===!1?ra(function(){t.forEach(function(i){return i()})},{timeout:200}):a=Hn(function(){t.forEach(function(i){return i()})},I(e)?e:200)};return n.clear=function(){a&&(Wn(a),a=null)},n.add=function(i){return t.push(i)},n.remove=function(i){return t.splice(t.indexOf(i),1)},n}function ga(){var e=[],t=function(a,n){function i(){for(var r,o=0,s=0,c=void 0;c=e[s];s++){if(c===!0||!((r=c.empty)===null||r===void 0)&&r.call(c)){o++;continue}if(Qt()===!1){o=e.length;break}try{c.transition()}catch{o++}}return o===e.length}ua(function(){n?.()},i)};return t.add=function(a){B(a)?e=e.concat(a):e.push(a)},t}var pe={};function jn(e,t){var a,n=e.toString(),i=n.replace(/(function|[\s\W\n])/g,"").substring(0,15);return i in pe||(pe[i]=new $.Blob(["".concat((a=t?.map(String).join(";"))!==null&&a!==void 0?a:"",`

			self.onmessage=function({data}) {
				const result = (`).concat(n,`).apply(null, data);
				self.postMessage(result);
			};`)],{type:"text/javascript"})),$.URL.createObjectURL(pe[i])}function ve(e,t,a,n){e===void 0&&(e=!0);var i;if($.Worker&&e){var r=jn(t,n),o=new $.Worker(r);i=function(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];o.postMessage(s),o.onmessage=function(l){return $.URL.revokeObjectURL(r),a(l.data)},o.onerror=function(l){console.error(l)}}}else i=function(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];var l=t.apply(void 0,s);a(l)};return i}function ke(e){var t=[];return e.forEach(function(a,n){var i=a[0];a.forEach(function(r,o){if(o>0){if(typeof t[o-1]>"u"&&(t[o-1]={}),typeof r>"u")throw new Error("Source data is missing a component at (".concat(n,", ").concat(o,")!"));t[o-1][i]=r}})}),t}function Se(e){var t=e[0],a=[];return e.forEach(function(n,i){if(i>0){var r={};n.forEach(function(o,s){if(typeof o>"u")throw new Error("Source data is missing a component at (".concat(i,", ").concat(s,")!"));r[t[s]]=o}),a.push(r)}}),a}function fa(e,t){var a=[],n,i;if(Array.isArray(e)){var r=function(o,s){if(o[s]!==void 0)return o[s];var c=s.replace(/\[(\w+)\]/g,".$1"),l=c.replace(/^\./,"").split("."),u=o;return l.some(function(d){return!(u=u&&d in u?u[d]:void 0)}),u};t.x?n=t.value.concat(t.x):n=t.value,a.push(n),e.forEach(function(o){var s=n.map(function(c){var l=r(o,c);return typeof l>"u"&&(l=null),l});a.push(s)}),i=Se(a)}else Object.keys(e).forEach(function(o){var s,c=e[o].concat();(s=c.unshift)===null||s===void 0||s.call(c,o),a.push(c)}),i=ke(a);return i}function Zn(e,t,a,n,i){t===void 0&&(t="csv");var r=new XMLHttpRequest,o={csv:qn,tsv:Kn,json:fa};r.open("GET",e),a&&Object.keys(a).forEach(function(s){r.setRequestHeader(s,a[s])}),r.onreadystatechange=function(){if(r.readyState===4)if(r.status===200){var s=r.responseText;s&&i.call(this,o[t](t==="json"?JSON.parse(s):s,n))}else throw new Error("".concat(e,": Something went wrong loading!"))},r.send()}function pa(e,t){var a=e.rows(t),n;return a.length===1?(n=[{}],a[0].forEach(function(i){n[0][i]=null})):n=e.parse(t),n}function qn(e){return pa({rows:Pa,parse:Da},e)}function Kn(e){return pa({rows:za,parse:Ma},e)}function $e(e,t){var a=e||t?.data_keys;return a?.x&&(t.data_x=a.x),a}var Jn={convertData:function(e,t){var a=this.config,n=a.boost_useWorker,i=e;if(e.bindto&&(i={},["url","mimeType","headers","keys","json","keys","rows","columns"].forEach(function(r){var o="data_".concat(r);o in e&&(i[r]=e[o])})),i.url&&t)Zn(i.url,i.mimeType,i.headers,$e(i.keys,a),t);else if(i.json)ve(n,fa,t,[ke,Se])(i.json,$e(i.keys,a));else if(i.rows)ve(n,Se,t)(i.rows);else if(i.columns)ve(n,ke,t)(i.columns);else if(e.bindto)throw Error("url or json or rows or columns is required.")},convertDataToTargets:function(e,t){var a=this,n=this,i=n.axis,r=n.config,o=n.state,s=r.data_type,c=!1,l=!1,u=!1;i&&(c=i.isCategorized(),l=i.isTimeSeries(),u=i.isCustomX());var d=Object.keys(e[0]||{}),h=d.length?d.filter(n.isNotX,n):[],g=d.length?d.filter(n.isX,n):[],f;h.forEach(function(x){var _=a.getXKey(x);u||l?g.indexOf(_)>=0?f=(t&&n.data.xs[x]||[]).concat(e.map(function(m){return m[_]}).filter(P).map(function(m,y){return n.generateTargetX(m,x,y)})):r.data_x?f=a.getOtherTargetXs():J(r.data_xs)&&(f=n.getXValuesOfXKey(_,n.data.targets)):f=e.map(function(m,y){return y}),f&&(a.data.xs[x]=f)}),h.forEach(function(x){if(!a.data.xs[x])throw new Error('x is not defined for id = "'.concat(x,'".'))});var p=h.map(function(x,_){var m=r.data_idConverter.bind(n.api)(x),y=n.getXKey(x),T=u&&c,b=T&&e.map(function(S){return S.x}).every(function(S){return r.axis_x_categories.indexOf(S)>-1}),w=e.__append__,A=y===null&&w?n.api.data.values(x).length:0;return{id:m,id_org:x,values:e.map(function(S,k){var O=S[y],q=S[x],R;return q=q!==null&&!isNaN(q)&&!F(q)?+q:B(q)||F(q)?q:null,(T||o.hasRadar)&&_===0&&!rt(O)?(!b&&_===0&&k===0&&!w&&(r.axis_x_categories=[]),R=r.axis_x_categories.indexOf(O),R===-1&&(R=r.axis_x_categories.length,r.axis_x_categories.push(O))):R=n.generateTargetX(O,x,A+k),(rt(q)||n.data.xs[x].length<=k)&&(R=void 0),{x:R,value:q,id:m,index:-1}}).filter(function(S){return N(S.x)})}});if(p.forEach(function(x){var _;r.data_xSort&&(x.values=x.values.sort(function(m,y){var T=m.x||m.x===0?m.x:1/0,b=y.x||y.x===0?y.x:1/0;return T-b})),x.values.forEach(function(m,y){return m.index=y}),(_=n.data.xs[x.id])===null||_===void 0||_.sort(function(m,y){return m-y})}),o.hasNegativeValue=n.hasNegativeValueInTargets(p),o.hasPositiveValue=n.hasPositiveValueInTargets(p),s&&n.isValidChartType(s)){var v=n.mapToIds(p).filter(function(x){return!(x in r.data_types)||!n.isValidChartType(r.data_types[x])});n.setTargetType(v,s)}return p.forEach(function(x){return n.cache.add(x.id_org,x,!0)}),p}},Qn={isX:function(e){var t=this,a=t.config,n=a.data_x&&e===a.data_x,i=J(a.data_xs)&&wn(a.data_xs,e);return n||i},isNotX:function(e){return!this.isX(e)},isStackNormalized:function(){var e=this.config;return!!(e.data_stack_normalize&&e.data_groups.length)},isGrouped:function(e){var t=this.config.data_groups;return e?t.some(function(a){return a.indexOf(e)>=0&&a.length>1}):t.length>0},getXKey:function(e){var t=this,a=t.config;return a.data_x?a.data_x:J(a.data_xs)?a.data_xs[e]:null},getXValuesOfXKey:function(e,t){var a=this,n=t&&J(t)?a.mapToIds(t):[],i;return n.forEach(function(r){a.getXKey(r)===e&&(i=a.data.xs[r])}),i},getIndexByX:function(e,t){var a=this;return t?t.indexOf(Q(e)?e:+e):(a.filterByX(a.data.targets,e)[0]||{index:null}).index},getXValue:function(e,t){var a=this;return e in a.data.xs&&a.data.xs[e]&&P(a.data.xs[e][t])?a.data.xs[e][t]:t},getOtherTargetXs:function(){var e=this,t=Object.keys(e.data.xs);return t.length?e.data.xs[t[0]]:null},getOtherTargetX:function(e){var t=this.getOtherTargetXs();return t&&e<t.length?t[e]:null},addXs:function(e){var t=this,a=t.config;Object.keys(e).forEach(function(n){a.data_xs[n]=e[n]})},isMultipleX:function(){return J(this.config.data_xs)||this.hasType("bubble")||this.hasType("scatter")},addName:function(e){var t=this,a=t.config,n;return e&&(n=a.data_names[e.id],e.name=n!==void 0?n:e.id),e},getAllValuesOnIndex:function(e,t){t===void 0&&(t=!1);var a=this,n=a.filterTargetsToShow(a.data.targets).map(function(i){return a.addName(a.getValueOnIndex(i.values,e))});return t&&(n=n.filter(function(i){return i&&"value"in i&&P(i.value)})),n},getValueOnIndex:function(e,t){var a=e.filter(function(n){return n.index===t});return a.length?a[0]:null},updateTargetX:function(e,t){var a=this;e.forEach(function(n){n.values.forEach(function(i,r){i.x=a.generateTargetX(t[r],n.id,r)}),a.data.xs[n.id]=t})},updateTargetXs:function(e,t){var a=this;e.forEach(function(n){t[n.id]&&a.updateTargetX([n],t[n.id])})},generateTargetX:function(e,t,a){var n=this,i=n.axis,r=i?.isCategorized()?a:e||a;if(i?.isTimeSeries()){var o=mt.bind(n);r=o(e||n.getXValue(t,a))}else i?.isCustomX()&&!i?.isCategorized()&&(r=P(e)?+e:n.getXValue(t,a));return r},updateXs:function(e){e.length&&(this.axis.xs=e.map(function(t){return t.x}))},getPrevX:function(e){var t=this.axis.xs[e-1];return N(t)?t:null},getNextX:function(e){var t=this.axis.xs[e+1];return N(t)?t:null},getBaseValue:function(e){var t=this,a=t.state.hasAxis,n=e.value;return n&&a&&(t.isAreaRangeType(e)?n=t.getRangedData(e,"mid"):t.isBubbleZType(e)&&(n=t.getBubbleZData(n,"y"))),n},getMinMaxValue:function(e){var t=this.getBaseValue.bind(this),a,n;return(e||this.data.targets.map(function(i){return i.values})).forEach(function(i,r){var o=i.map(t).filter(I);a=Math.min.apply(Math,ct([r?a:1/0],o,!1)),n=Math.max.apply(Math,ct([r?n:-1/0],o,!1))}),{min:a,max:n}},getMinMaxData:function(){var e=this,t=ft.dataMinMax,a=e.cache.get(t);if(!a){var n=e.data.targets.map(function(s){return s.values}),i=e.getMinMaxValue(n),r=[],o=[];n.forEach(function(s){var c=e.getFilteredDataByValue(s,i.min),l=e.getFilteredDataByValue(s,i.max);c.length&&(r=r.concat(c)),l.length&&(o=o.concat(l))}),e.cache.add(t,a={min:r,max:o})}return a},getTotalPerIndex:function(){var e=this,t=ft.dataTotalPerIndex,a=e.cache.get(t);return(e.config.data_groups.length||e.isStackNormalized())&&!a&&(a=[],e.data.targets.forEach(function(n){n.values.forEach(function(i,r){a[r]||(a[r]=0),a[r]+=I(i.value)?i.value:0})})),a},getTotalDataSum:function(e){var t=this,a=ft.dataTotalSum,n=t.cache.get(a);if(!I(n)){var i=fe(t.data.targets.map(function(r){return r.values})).map(function(r){return r.value});n=i.length?i.reduce(function(r,o){return r+o}):0,t.cache.add(a,n)}return e&&(n-=t.getHiddenTotalDataSum()),n},getHiddenTotalDataSum:function(){var e=this,t=e.api,a=e.state.hiddenTargetIds,n=0;return a.length&&(n=t.data.values.bind(t)(a).reduce(function(i,r){return i+r})),n},getFilteredDataByValue:function(e,t){var a=this;return e.filter(function(n){return a.getBaseValue(n)===t})},getMaxDataCount:function(){return Math.max.apply(Math,this.data.targets.map(function(e){return e.values.length}))},getMaxDataCountTarget:function(){var e=this.filterTargetsToShow()||[],t=e.length,a=this.config.axis_x_inverted;return t>1?(e=e.map(function(n){return n.values}).reduce(function(n,i){return n.concat(i)}).map(function(n){return n.x}),e=Ht(be(e)).map(function(n,i,r){return{x:n,index:a?r.length-i-1:i}})):t&&(e=e[0].values.concat()),e},mapToIds:function(e){return e.map(function(t){return t.id})},mapToTargetIds:function(e){var t=this;return e?B(e)?e.concat():[e]:t.mapToIds(t.data.targets)},hasTarget:function(e,t){for(var a=this.mapToIds(e),n=0,i=void 0;i=a[n];n++)if(i===t)return!0;return!1},isTargetToShow:function(e){return this.state.hiddenTargetIds.indexOf(e)<0},isLegendToShow:function(e){return this.state.hiddenLegendIds.indexOf(e)<0},filterTargetsToShow:function(e){var t=this;return(e||t.data.targets).filter(function(a){return t.isTargetToShow(a.id)})},mapTargetsToUniqueXs:function(e){var t=this,a=t.axis,n=[];return e?.length&&(n=be(fe(e.map(function(i){return i.values.map(function(r){return+r.x})}))),n=a?.isTimeSeries()?n.map(function(i){return new Date(+i)}):n.map(Number)),Ht(n)},addTargetIds:function(e,t){var a=this.state,n=B(t)?t:[t];n.forEach(function(i){a[e].indexOf(i)<0&&a[e].push(i)})},removeTargetIds:function(e,t){var a=this.state,n=B(t)?t:[t];n.forEach(function(i){var r=a[e].indexOf(i);r>=0&&a[e].splice(r,1)})},addHiddenTargetIds:function(e){this.addTargetIds("hiddenTargetIds",e)},removeHiddenTargetIds:function(e){this.removeTargetIds("hiddenTargetIds",e)},addHiddenLegendIds:function(e){this.addTargetIds("hiddenLegendIds",e)},removeHiddenLegendIds:function(e){this.removeTargetIds("hiddenLegendIds",e)},getValuesAsIdKeyed:function(e){var t=this,a=t.state.hasAxis,n={},i=t.isMultipleX(),r=i?t.mapTargetsToUniqueXs(e).map(function(o){return Q(o)?o:+o}):null;return e.forEach(function(o){var s=[];o.values.filter(function(c){var l=c.value;return P(l)||l===null}).forEach(function(c){var l=c.value;l!==null&&t.isCandlestickType(c)&&(l=B(l)?l.slice(0,4):[l.open,l.high,l.low,l.close]),B(l)?s.push.apply(s,l):F(l)&&"high"in l?s.push.apply(s,Object.values(l)):t.isBubbleZType(c)?s.push(a&&t.getBubbleZData(l,"y")):i?s[t.getIndexByX(c.x,r)]=l:s.push(l)}),n[o.id]=s}),n},checkValueInTargets:function(e,t){for(var a=Object.keys(e),n,i=0;i<a.length;i++){n=e[a[i]].values;for(var r=0;r<n.length;r++)if(t(n[r].value))return!0}return!1},hasMultiTargets:function(){return this.filterTargetsToShow().length>1},hasNegativeValueInTargets:function(e){return this.checkValueInTargets(e,function(t){return t<0})},hasPositiveValueInTargets:function(e){return this.checkValueInTargets(e,function(t){return t>0})},orderTargets:function(e){var t=this,a=ct([],e,!0),n=t.getSortCompareFn();return n&&a.sort(n),a},getSortCompareFn:function(e){e===void 0&&(e=!1);var t=this,a=t.config,n=a.data_order,i=/asc/i.test(n),r=/desc/i.test(n),o;if(i||r){var s=function(c,l){return c+Math.abs(l.value)};o=function(c,l){var u="values"in c?c.values.reduce(s,0):c.value,d="values"in l?l.values.reduce(s,0):l.value;return e?i?u-d:d-u:i?d-u:u-d}}else D(n)&&(o=n.bind(t.api));return o||null},filterByX:function(e,t){return fe(e.map(function(a){return a.values})).filter(function(a){return a.x-t===0})},filterRemoveNull:function(e){var t=this;return e.filter(function(a){return P(t.getBaseValue(a))})},filterByXDomain:function(e,t){return e.map(function(a){return{id:a.id,id_org:a.id_org,values:a.values.filter(function(n){return t[0]<=n.x&&n.x<=t[1]})}})},hasDataLabel:function(){var e=this.config.data_labels;return oa(e)&&e||Tt(e)&&J(e)},getDataIndexFromEvent:function(e){var t=this,a=t.config,n=t.state,i=n.inputType,r=n.eventReceiver,o=r.coords,s=r.rect,c=a.axis_rotated,l=i==="touch"&&e.changedTouches?e.changedTouches[0]:e,u=ye(o,c?l.clientY-s.top:l.clientX-s.left,0,o.length-1,c);return u},getDataLabelLength:function(e,t,a){var n=this,i=[0,0],r=1.3;return n.$el.chart.select("svg").selectAll(".dummy").data([e,t]).enter().append("text").text(function(o){return n.dataLabelFormat(o.id)(o)}).each(function(o,s){i[s]=this.getBoundingClientRect()[a]*r}).remove(),i},isNoneArc:function(e){return this.hasTarget(this.data.targets,e.id)},isArc:function(e){return"data"in e&&this.hasTarget(this.data.targets,e.data.id)},findSameXOfValues:function(e,t){var a=e[t].x,n=[],i;for(i=t-1;i>=0&&a===e[i].x;i--)n.push(e[i]);for(i=t;i<e.length&&a===e[i].x;i++)n.push(e[i]);return n},findClosestFromTargets:function(e,t){var a=this,n=e.map(function(i){return a.findClosest(i.values,t)});return a.findClosest(n,t)},findClosest:function(e,t){var a=this,n=a.config,i=a.$el.main,r=e.filter(function(c){return c&&P(c.value)}),o=n.point_sensitivity,s;return r.filter(function(c){return a.isBarType(c.id)||a.isCandlestickType(c.id)}).forEach(function(c){var l=a.isBarType(c.id)?".".concat(xt.chartBar,".").concat(z.target).concat(a.getTargetSelectorSuffix(c.id)," .").concat(xt.bar,"-").concat(c.index):".".concat(kt.chartCandlestick,".").concat(z.target).concat(a.getTargetSelectorSuffix(c.id)," .").concat(kt.candlestick,"-").concat(c.index," path");!s&&a.isWithinBar(i.select(l).node())&&(s=c)}),r.filter(function(c){return!a.isBarType(c.id)&&!a.isCandlestickType(c.id)}).forEach(function(c){var l=a.dist(c,t);l<o&&(o=l,s=c)}),s},dist:function(e,t){var a=this,n=a.config.axis_rotated,i=a.scale,r=n?1:0,o=n?0:1,s=a.circleY(e,e.index),c=(i.zoom||i.x)(e.x);return Math.sqrt(Math.pow(c-t[r],2)+Math.pow(s-t[o],2))},convertValuesToStep:function(e){var t=this,a=t.axis,n=t.config,i=n.line_step_type,r=a?a.isCategorized():!1,o=B(e)?e.concat():[e];if(!(r||/step\-(after|before)/.test(i)))return e;if(o.length){var s=o[0],c=o[o.length-1],l=s.id,u=s.x;o.unshift({x:--u,value:s.value,id:l}),r&&i==="step-after"&&o.unshift({x:--u,value:s.value,id:l}),u=c.x,o.push({x:++u,value:c.value,id:l}),r&&i==="step-before"&&o.push({x:++u,value:c.value,id:l})}return o},convertValuesToRange:function(e){var t=B(e)?e.concat():[e],a=[];return t.forEach(function(n){var i=n.x,r=n.id;a.push({x:i,id:r,value:n.value[0]}),a.push({x:i,id:r,value:n.value[2]})}),a},updateDataAttributes:function(e,t){var a=this,n=a.config,i=n["data_".concat(e)];return rt(t)||(Object.keys(t).forEach(function(r){i[r]=t[r]}),a.redraw({withLegend:!0})),i},getRangedData:function(e,t,a){t===void 0&&(t=""),a===void 0&&(a="areaRange");var n=e?.value;if(B(n)){var i={areaRange:["high","mid","low"],candlestick:["open","high","low","close","volume"]}[a].indexOf(t);return i>=0&&n?n[i]:void 0}else if(n)return n[t];return n},setRatioForGroupedData:function(e){var t=this,a=t.config;if(a.data_groups.length&&e.some(function(i){return t.isGrouped(i.id)})){var n=function(i){return t.getRatio("index",i,!0)};e.forEach(function(i){"values"in i?i.values.forEach(n):n(i)})}},getRatio:function(e,t,a){a===void 0&&(a=!1);var n=this,i=n.config,r=n.state,o=n.api,s=0;if(t&&o.data.shown().length)if(s=t.ratio||t.value,e==="arc")if(n.pie.padAngle()())s=t.value/n.getTotalDataSum(!0);else{var c=i.gauge_fullCircle?n.getArcLength():n.getStartAngle()*-2,l=n.hasType("gauge")?c:Math.PI*2;s=(t.endAngle-t.startAngle)/l}else if(e==="index"){var u=o.data.values.bind(o),d=this.getTotalPerIndex();if(r.hiddenTargetIds.length){var h=u(r.hiddenTargetIds,!1);h.length&&(h=h.reduce(function(v,x){return v.map(function(_,m){return(I(_)?_:0)+x[m]})}),d=d.map(function(v,x){return v-h[x]}))}var g=d[t.index];t.ratio=I(t.value)&&d&&g?t.value/g:0,s=t.ratio}else if(e==="radar")s=parseFloat(String(Math.max(t.value,0)))/r.current.dataMax*i.radar_size_ratio;else if(e==="bar"){var f=n.getYScaleById.bind(n)(t.id),p=f.domain().reduce(function(v,x){return x-v});s=p===0?0:Math.abs(t.value)/p}else e==="treemap"&&(s/=n.getTotalDataSum(!0));return a&&s?s*100:s},updateDataIndexByX:function(e){var t=this,a=e.reduce(function(n,i,r){return n[Number(i.x)]=r,n},{});t.data.targets.forEach(function(n){n.values.forEach(function(i,r){var o=a[Number(i.x)];o===void 0&&(o=r),i.index=o})})},isBubbleZType:function(e){var t=this;return t.isBubbleType(e)&&(F(e.value)&&("z"in e.value||"y"in e.value)||B(e.value)&&e.value.length>=2)},isBarRangeType:function(e){var t=this,a=e.value;return t.isBarType(e)&&B(a)&&a.length>=2&&a.every(function(n){return I(n)})},getDataById:function(e){var t,a=this.cache.get(e)||this.api.data(e);return(t=a?.[0])!==null&&t!==void 0?t:a}};function va(e,t){t===void 0&&(t=!1);var a=this,n=a.api;t&&a.api.flush(!0),e?.call(n)}var ti={load:function(e,t){var a=this,n=a.data,i=t.append,r=e;r&&(t.filter&&(r=r.filter(t.filter)),(t.type||t.types)&&r.forEach(function(o){var s,c=((s=t.types)===null||s===void 0?void 0:s[o.id])||t.type;a.setTargetType(o.id,c)}),n.targets.forEach(function(o){for(var s=0;s<r.length;s++)if(o.id===r[s].id){o.values=i?o.values.concat(r[s].values):r[s].values,r.splice(s,1);break}}),n.targets=n.targets.concat(r)),a.updateTargets(n.targets),a.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),a.updateTypesElements(),va.call(a,t.done,t.resizeAfter)},loadFromArgs:function(e){var t=this;t.config&&(t.cache.reset(),t.convertData(e,function(a){var n=e.data||a;e.append&&(n.__append__=!0),n&&t.load(t.convertDataToTargets(n),e)}))},unload:function(e,t){var a=this,n=a.state,i=a.$el,r=a.$T,o=t,s=e;if(a.cache.reset(),o||(o=function(){}),s=s.filter(function(l){return a.hasTarget(a.data.targets,l)}),!s||s.length===0){o();return}var c=i.svg.selectAll(s.map(function(l){return a.selectorTarget(l)}));r(c).style("opacity","0").remove().call(Re,o),s.forEach(function(l){n.withoutFadeIn[l]=!1,i.legend&&i.legend.selectAll(".".concat(V.legendItem).concat(a.getTargetSelectorSuffix(l))).remove(),a.data.targets=a.data.targets.filter(function(u){return u.id!==l})}),n.hasTreemap&&a.updateTargetsForTreemap(a.data.targets),a.updateTypesElements()}},ei={selectRectForSingle:function(e,t,a){var n,i,r=this,o=r.config,s=r.$el,c=s.main,l=s.circle,u=o.data_selection_enabled,d=o.data_selection_grouped,h=o.data_selection_isselectable,g=o.tooltip_grouped,f=r.getAllValuesOnIndex(a);if(!(g&&(r.showTooltip(f,e),(n=r.showGridFocus)===null||n===void 0||n.call(r,f),!u||d))){!l&&c.selectAll(".".concat(z.EXPANDED,":not(.").concat(at.shape,"-").concat(a,")")).classed(z.EXPANDED,!1);var p=c.selectAll(".".concat(at.shape,"-").concat(a)).classed(z.EXPANDED,!0).style("cursor",h?"pointer":null).filter(function(v){return r.isWithinShape(this,v)});p.empty()&&!g&&((i=r.hideGridFocus)===null||i===void 0||i.call(r),r.hideTooltip(),!d&&r.setExpand(a)),p.call(function(v){var x,_,m=v.data();u&&(d||h?.bind(r.api)(m))&&t.style("cursor","pointer"),g||(r.showTooltip(m,e),(x=r.showGridFocus)===null||x===void 0||x.call(r,m),(_=r.unexpandCircles)===null||_===void 0||_.call(r),v.each(function(y){return r.setExpand(a,y.id)}))})}},setExpand:function(e,t,a){var n=this,i=n.config,r=n.$el.circle;r&&i.point_focus_expand_enabled&&n.expandCircles(e,t,a),n.expandBarTypeShapes(!0,e,t,a)},expandBarTypeShapes:function(e,t,a,n){e===void 0&&(e=!0);var i=this;["bar","candlestick"].filter(function(r){return i.$el[r]}).forEach(function(r){n&&i.$el[r].classed(z.EXPANDED,!1),i.getShapeByIndex(r,t,a).classed(z.EXPANDED,e)})},setOverOut:function(e,t){var a=this,n=a.config,i=a.state,r=i.hasRadar,o=i.hasTreemap,s=a.$el.main,c=F(t);if(c||t!==-1){var l=n[e?"data_onover":"data_onout"].bind(a.api);if(n.color_onover&&a.setOverColor(e,t,c),c){var u=o?Ce.treemap:W.arc;l(t,s.select(".".concat(u).concat(a.getTargetSelectorSuffix(t.id))).node())}else if(n.tooltip_grouped)e&&(n.point_focus_only&&r?a.showCircleFocus(a.getAllValuesOnIndex(t,!0)):a.setExpand(t,null,!0)),!a.isMultipleX()&&s.selectAll(".".concat(at.shape,"-").concat(t)).each(function(p){l(p,this)});else{var d=a.cache.get(ft.setOverOut)||[],h=s.selectAll(".".concat(at.shape,"-").concat(t)).filter(function(p){return a.isWithinShape(this,p)}),g=h.filter(function(){var p=this;return d.every(function(v){return v!==p})});if(!e||h.empty()||d.length===g.size()&&g.nodes().every(function(p,v){return p!==d[v]}))for(;d.length;){var f=d.pop();n.data_onout.bind(a.api)(L(f).datum(),f)}g.each(function(){e&&(l(L(this).datum(),this),d.push(this))}),a.cache.add(ft.setOverOut,d)}}},callOverOutForTouch:function(e){var t=this,a=t.cache.get(ft.callOverOutForTouch);(F(e)&&a?e.id!==a.id:e!==a)&&((a||I(a))&&t.setOverOut(!1,a),(e||I(e))&&t.setOverOut(!0,e),t.cache.add(ft.callOverOutForTouch,e))},getDraggableSelection:function(){var e=this,t=e.config,a=e.state;return t.interaction_enabled&&t.data_selection_draggable&&e.drag?ta().on("drag",function(n){a.event=n,e.drag(pt(n,this))}).on("start",function(n){a.event=n,e.dragstart(pt(n,this))}).on("end",function(n){a.event=n,e.dragend()}):function(){}},dispatchEvent:function(e,t,a){var n,i=this,r=i.config,o=i.state,s=o.eventReceiver,c=o.hasAxis,l=o.hasRadar,u=o.hasTreemap,d=i.$el,h=d.eventRect,g=d.arcs,f=d.radar,p=d.treemap,v=(n=u&&s.rect||l&&f.axes.select(".".concat(et.axis,"-").concat(t," text"))||h||g?.selectAll(".".concat(z.target," path")).filter(function(k,O){return O===t}))===null||n===void 0?void 0:n.node();if(v){var x=i.isMultipleX(),_=v.getBoundingClientRect(),m=_.width,y=_.left,T=_.top;if(c&&!l&&!x){var b=s.coords[t];m=b.w,y+=b.x,T+=b.y}var w=y+(a?a[0]:0)+(x||r.axis_rotated?0:m/2),A=T+(a?a[1]:0),S={screenX:w,screenY:A,clientX:w,clientY:A};Ln[/^(mouse|click)/.test(e)?"mouse":"touch"](u?p.node():v,e,S)}},setDragStatus:function(e){this.state.dragging=e},unbindZoomEvent:function(){var e=this,t=e.$el,a=t.eventRect,n=t.zoomResetBtn;a?.on(".zoom wheel.zoom .drag",null),n?.on("click",null).style("display","none")},unbindAllEvents:function(){var e,t=this,a=t.$el,n=a.arcs,i=a.eventRect,r=a.legend,o=a.region,s=a.svg,c=a.treemap,l=t.brush,u=["wheel","click","mouseover","mousemove","mouseout","touchstart","touchmove","touchend","touchstart.eventRect","touchmove.eventRect","touchend.eventRect",".brush",".drag",".zoom","wheel.zoom","dblclick.zoom"].join(" ");[s,i,o?.list,l?.getSelection(),n?.selectAll("path"),r?.selectAll("g"),c].forEach(function(d){return d?.on(u,null)}),(e=t.unbindZoomEvent)===null||e===void 0||e.call(t)}},ai={generateClass:function(e,t){return" ".concat(e," ").concat(e+this.getTargetSelectorSuffix(t))},getClass:function(e,t){var a=this,n=/s$/.test(e),i=/^(area|arc|line|treemap)s?$/.test(e),r=n?"id":"index";return function(o){var s=o.data||o,c=(t?a.generateClass(X[n?"shapes":"shape"],s[r]):"")+a.generateClass(X[e],s[i?"id":r]);return c.trim()}},getChartClass:function(e){var t=this;return function(a){return X["chart".concat(e)]+t.classTarget((a.data?a.data:a).id)}},generateExtraLineClass:function(){var e=this,t=e.config.line_classes||[],a=[];return function(n){var i,r=n.id||((i=n.data)===null||i===void 0?void 0:i.id)||n;return a.indexOf(r)<0&&a.push(r),t[a.indexOf(r)%t.length]}},classRegion:function(e,t){return"".concat(this.generateClass(X.region,t)," ").concat("class"in e?e.class:"")},classTarget:function(e){var t=this.config.data_classes[e],a="";return t&&(a=" ".concat(X.target,"-").concat(t)),this.generateClass(X.target,e)+a},classFocus:function(e){return this.classFocused(e)+this.classDefocused(e)},classFocused:function(e){return" ".concat(this.state.focusedTargetIds.indexOf(e.id)>=0?X.focused:"")},classDefocused:function(e){return" ".concat(this.state.defocusedTargetIds.indexOf(e.id)>=0?X.defocused:"")},getTargetSelectorSuffix:function(e){var t=e||e===0?"-".concat(e):"";return t.replace(/([\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\])/g,"-")},selectorTarget:function(e,t,a){t===void 0&&(t=""),a===void 0&&(a="");var n=this.getTargetSelectorSuffix(e);return"".concat(t,".").concat(X.target+n," ").concat(a,", ").concat(t,".").concat(X.circles+n," ").concat(a)},selectorTargets:function(e,t){var a=this,n=e||[];return n.length?n.map(function(i){return a.selectorTarget(i,t)}):null},selectorLegend:function(e){return".".concat(X.legendItem+this.getTargetSelectorSuffix(e))},selectorLegends:function(e){var t=this;return e?.length?e.map(function(a){return t.selectorLegend(a)}):null}},ni={categoryName:function(e){var t=this.config.axis_x_categories;return e<t?.length?t[e]:e}},ii=function(e,t,a){var n=L(e.cloneNode(!0));return n.attr("id",a).insert("rect",":first-child").attr("width",n.attr("width")).attr("height",n.attr("height")).style("fill",t),{id:a,node:n.node()}};function ri(e){var t=ft.colorPattern,a=it.body,n=a[t];if(!n){var i=";",r=e.classed(we.colorPattern,!0).style("background-image");e.classed(we.colorPattern,!1),r.indexOf(i)>-1&&(n=r.replace(/url[^#]*|["'()]|(\s|%20)/g,"").split(i).map(function(o){return o.trim().replace(/[\"'\s]/g,"")}).filter(Boolean),a[t]=n)}return n}var oi=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],si={generateColor:function(){var e=this,t=e.$el,a=e.config,n=a.data_colors,i=a.data_color,r=[],o=J(a.color_pattern)?a.color_pattern:Xa(ri(t.chart)||oi).range(),s=o;if(D(a.color_tiles)){var c=a.color_tiles.bind(e.api)(),l=o.map(function(u,d){var h=u.replace(/[#\(\)\s,]/g,""),g="".concat(e.state.datetimeId,"-pattern-").concat(h,"-").concat(d);return ii(c[d%c.length],u,g)});o=l.map(function(u){return"url(#".concat(u.id,")")}),e.patterns=l}return function(u){var d,h=u.id||((d=u.data)===null||d===void 0?void 0:d.id)||u,g=e.isTypeOf(h,["line","spline","step"])||!a.data_types[h],f;return D(n[h])?f=n[h].bind(e.api)(u):n[h]?f=n[h]:(r.indexOf(h)<0&&r.push(h),f=g?s[r.indexOf(h)%s.length]:o[r.indexOf(h)%o.length],n[h]=f),D(i)?i.bind(e.api)(f,u):f}},generateLevelColor:function(){var e=this,t=e.config,a=t.color_pattern,n=t.color_threshold,i=n.unit==="value",r=n.max||100,o=n.values&&n.values.length?n.values:[];return J(n)?function(s){for(var c=i?s:s*100/r,l=a[a.length-1],u=0,d=o.length;u<d;u++)if(c<=o[u]){l=a[u];break}return l}:null},generateDataLabelBackgroundColorFilter:function(e){var t=this,a=t.$el,n=t.config,i=t.state,r=e||n.data_labels_backgroundColors;if(r){var o=[];Q(r)?o.push(""):F(r)&&(o=Object.keys(r)),o.forEach(function(s){var c="".concat(i.datetimeId,"-labels-bg").concat(t.getTargetSelectorSuffix(s)).concat(e?t.getTargetSelectorSuffix(e):"");a.defs.append("filter").attr("x","0").attr("y","0").attr("width","1").attr("height","1").attr("id",c).html('<feFlood flood-color="'.concat(s===""?r:r[s],'" /><feComposite in="SourceGraphic"/>'))})}},getGradienColortUrl:function(e){return"url(#".concat(this.state.datetimeId,"-gradient").concat(this.getTargetSelectorSuffix(e),")")},updateLinearGradient:function(){var e=this,t=e.config,a=e.data.targets,n=e.state.datetimeId,i=e.$el.defs;a.forEach(function(r){var o="".concat(n,"-gradient").concat(e.getTargetSelectorSuffix(r.id)),s=e.isAreaType(r)&&"area"||e.isBarType(r)&&"bar",c=t.axis_rotated;if(s&&i.select("#".concat(o)).empty()){var l=e.color(r),u=t["".concat(s,"_linearGradient")],d=u.x,h=d===void 0?c?[1,0]:[0,0]:d,g=u.y,f=g===void 0?c?[0,0]:[0,1]:g,p=u.stops,v=p===void 0?[[0,l,1],[1,l,0]]:p,x=i.append("linearGradient").attr("id","".concat(o)).attr("x1",h[0]).attr("x2",h[1]).attr("y1",f[0]).attr("y2",f[1]);v.forEach(function(_){var m=D(_[1])?_[1].bind(e.api)(r.id):_[1];x.append("stop").attr("offset",_[0]).attr("stop-color",m||l).attr("stop-opacity",_[2])})}})},setOverColor:function(e,t){var a=this,n=a.config,i=a.$el.main,r=n.color_onover,o=e?r:a.color;F(o)?o=function(s){var c=s.id;return c in r?r[c]:a.color(c)}:Q(o)?o=function(){return r}:D(r)&&(o=o.bind(a.api)),i.selectAll(F(t)?".".concat(W.arc).concat(a.getTargetSelectorSuffix(t.id)):".".concat(at.shape,"-").concat(t)).style("fill",o)}},ci={getYDomainMinMax:function(e,t){var a=this,n=a.axis,i=a.config,r=t==="min",o=i.data_groups,s=a.mapToIds(e),c=a.getValuesAsIdKeyed(e);if(o.length>0){var l=a["has".concat(r?"Negative":"Positive","ValueInTargets")](e);o.forEach(function(u){var d=u.filter(function(f){return s.indexOf(f)>=0});if(d.length){var h=d[0],g=n.getId(h);l&&c[h]&&(c[h]=c[h].map(function(f){return(r?f<0:f>0)?f:0})),d.filter(function(f,p){return p>0}).forEach(function(f){if(c[f]){var p=n.getId(f);c[f].forEach(function(v,x){var _=+v,m=r?_>0:_<0;p===g&&!(l&&m)&&(c[h][x]+=_)})}})}})}return _t(t,Object.keys(c).map(function(u){return _t(t,c[u])}))},isHiddenTargetWithYDomain:function(e){var t=this;return t.state.hiddenTargetIds.some(function(a){return t.axis.getId(a)===e})},getYDomain:function(e,t,a){var n=this,i=n.axis,r=n.config,o=n.scale,s="axis_".concat(t);if(n.isStackNormalized())return[0,100];var c=o?.[t]&&o[t].type==="log",l=e.filter(function(E){return i.getId(E.id)===t}),u=a?n.filterByXDomain(l,a):l;if(u.length===0)return n.isHiddenTargetWithYDomain(t)?o[t].domain():t==="y2"?o.y.domain():n.getYDomain(e,"y2",a);var d=r["".concat(s,"_min")],h=r["".concat(s,"_max")],g=r["".concat(s,"_center")],f=r["".concat(s,"_inverted")],p=n.hasDataLabel()&&r.axis_rotated,v=n.hasDataLabel()&&!r.axis_rotated,x=n.getYDomainMinMax(u,"min"),_=n.getYDomainMinMax(u,"max"),m=ct([C.BAR,C.BUBBLE,C.SCATTER],Ct.Line,!0).some(function(E){var tt=E.indexOf("area")>-1?"area":E;return n.hasType(E,u,!0)&&r["".concat(tt,"_zerobased")]});x=P(d)?d:P(h)?x<=h?x:h-10:x,_=P(h)?h:P(d)?d<=_?_:d+10:_,isNaN(x)&&(x=0),isNaN(_)&&(_=x),x===_&&(x<0?_=0:x=0);var y=x>=0&&_>=0,T=x<=0&&_<=0;(P(d)&&y||P(h)&&T)&&(m=!1),m&&(y&&(x=0),T&&(_=0));var b=Math.abs(_-x),w={top:b*.1,bottom:b*.1};if(N(g)){var A=Math.max(Math.abs(x),Math.abs(_));_=g+A,x=g-A}if(p){var S=zt(o.y.range()),k=n.getDataLabelLength(x,_,"width").map(function(E){return E/S});["bottom","top"].forEach(function(E,tt){w[E]+=b*(k[tt]/(1-k[0]-k[1]))})}else if(v){var O=n.getDataLabelLength(x,_,"height");["bottom","top"].forEach(function(E,tt){w[E]+=n.convertPixelToScale("y",O[tt],b)})}w=n.getResettedPadding(w);var q=r["".concat(s,"_padding")];J(q)&&["bottom","top"].forEach(function(E){w[E]=i.getPadding(q,E,w[E],b)}),m&&(y&&(w.bottom=x),T&&(w.top=-_));var R=c?[x,_].map(function(E){return E<0?0:E}):[x-w.bottom,_+w.top];return f?R.reverse():R},getXDomainMinMax:function(e,t){var a,n=this,i=n.config["axis_x_".concat(t)],r=_t(t,e.map(function(s){return _t(t,s.values.map(function(c){return c.x}))})),o=F(i)?i.value:i;return o=N(o)&&!((a=n.axis)===null||a===void 0)&&a.isTimeSeries()?mt.bind(this)(o):o,F(i)&&i.fit&&(t==="min"&&o<r||t==="max"&&o>r)&&(o=void 0),N(o)?o:r},getXDomainPadding:function(e,t){var a=this,n=a.axis,i=a.config,r=i.axis_x_padding,o=n.isTimeSeries()&&t,s=zt(e),c;if(n.isCategorized()||o)c=0;else if(a.hasType("bar")){var l=a.getMaxDataCount();c=l>1?s/(l-1)/2:.5}else c=a.getResettedPadding(s*.01);var u=I(r)?{left:r,right:r}:r,d=u.left,h=d===void 0?c:d,g=u.right,f=g===void 0?c:g;if(r.unit==="px"){var p=Math.abs(s+s*.2);h=n.getPadding(r,"left",c,p),f=n.getPadding(r,"right",c,p)}else{var v=s+h+f;if(o&&v){var x=s/t/v;h=h/v/x,f=f/v/x}}return{left:h,right:f}},getXDomain:function(e){var t=this,a=t.axis,n=t.config,i=t.scale.x,r=n.axis_x_inverted,o=[t.getXDomainMinMax(e,"min"),t.getXDomainMinMax(e,"max")],s=o[0],c=s===void 0?0:s,l=o[1],u=l===void 0?0:l;if(i.type!=="log"){var d=a.isCategorized(),h=a.isTimeSeries(),g=t.getXDomainPadding(o),f=o[0],p=o[1];f-p===0&&!d&&(h?(f=new Date(f.getTime()*.5),p=new Date(p.getTime()*1.5)):(f=f===0?1:f*.5,p=p===0?-1:p*1.5)),(f||f===0)&&(c=h?new Date(f.getTime()-g.left):f-g.left),(p||p===0)&&(u=h?new Date(p.getTime()+g.right):p+g.right)}return r?[u,c]:[c,u]},updateXDomain:function(e,t,a,n,i){var r,o=this,s=o.config,c=o.org,l=o.scale,u=l.x,d=l.subX,h=s.zoom_enabled;if(a&&(u.domain(i||Ht(o.getXDomain(e),!s.axis_x_inverted)),c.xDomain=u.domain(),h&&o.zoom.updateScaleExtent(),d.domain(u.domain()),(r=o.brush)===null||r===void 0||r.scale(d)),t){var g=i||!o.brush||la(o)?c.xDomain:ca(o).map(d.invert);u.domain(g),h&&o.zoom.updateScaleExtent()}return n&&u.domain(o.trimXDomain(u.orgDomain())),u.domain()},trimXDomain:function(e){var t=this,a=t.config.axis_x_inverted,n=t.getZoomDomain(),i=n[0],r=n[1];return(a?e[0]>=i:e[0]<=i)&&(e[0]=i,e[1]=+e[1]+(i-e[0])),(a?e[1]<=r:e[1]>=r)&&(e[0]=+e[0]-(e[1]-r),e[1]=r),e},getZoomDomain:function(){var e=this,t=e.config,a=e.org,n=a.xDomain,i=n[0],r=n[1];return N(t.zoom_x_min)&&(i=_t("min",[i,t.zoom_x_min])),N(t.zoom_x_max)&&(r=_t("max",[r,t.zoom_x_max])),[i,r]},convertPixelToScale:function(e,t,a){var n=this,i=n.config,r=n.state,o=i.axis_rotated,s;return e==="x"?s=o?"height":"width":s=o?"width":"height",a*(t/r[s])}};function Fe(e,t,a){var n=e.config,i="axis_".concat(t,"_tick_format"),r=n[i]?n[i]:e.defaultValueFormat;return r.call(e.api,a)}var li={yFormat:function(e){return Fe(this,"y",e)},y2Format:function(e){return Fe(this,"y2",e)},getDefaultValueFormat:function(){var e=this,t=e.defaultArcValueFormat,a=e.yFormat,n=e.y2Format,i=e.hasArcType(null,["gauge","polar","radar"]);return function(r,o,s){var c=i?t:e.axis&&e.axis.getId(s)==="y2"?n:a;return c.call(e,r,o)}},defaultValueFormat:function(e){return P(e)?+e:""},defaultArcValueFormat:function(e,t){return"".concat((t*100).toFixed(1),"%")},defaultPolarValueFormat:function(e){return"".concat(e)},dataLabelFormat:function(e){var t=this,a=t.config.data_labels,n=function(r){return P(r)?+r:""},i=n;return D(a.format)?i=a.format:Tt(a.format)&&(a.format[e]?i=a.format[e]===!0?n:a.format[e]:i=function(){return""}),i.bind(t.api)}};function re(e){var t=this,a=t.getDataById(e),n=t.levelColor?t.levelColor(a.values[0].value):t.color(a);return n}var ui={initLegend:function(){var e=this,t=e.config,a=e.$el;e.legendItemTextBox={},e.state.legendHasRendered=!1,t.legend_show?(t.legend_contents_bindto||(a.legend=e.$el.svg.append("g").classed(V.legend,!0).attr("transform",e.getTranslate("legend"))),e.updateLegend()):e.state.hiddenLegendIds=e.mapToIds(e.data.targets)},updateLegend:function(e,t,a){var n,i=this,r=i.config,o=i.state,s=i.scale,c=i.$el,l=t||{withTransform:!1,withTransitionForTransform:!1,withTransition:!1};l.withTransition=Lt(l,"withTransition",!0),l.withTransitionForTransform=Lt(l,"withTransitionForTransform",!0),r.legend_contents_bindto&&r.legend_contents_template?i.updateLegendTemplate():o.hasTreemap||i.updateLegendElement(e||i.mapToIds(i.data.targets),l,a),(n=c.legend)===null||n===void 0||n.selectAll(".".concat(V.legendItem)).classed(V.legendItemHidden,function(u){var d=!i.isTargetToShow(u);return d&&(this.style.opacity=null),d}),i.updateScales(!1,!s.zoom),i.updateSvgSize(),i.transformAll(l.withTransitionForTransform,a),o.legendHasRendered=!0},updateLegendTemplate:function(){var e=this,t=e.config,a=e.$el,n=L(t.legend_contents_bindto),i=t.legend_contents_template;if(!n.empty()){var r=e.mapToIds(e.data.targets),o=[],s="";r.forEach(function(l){var u=D(i)?i.bind(e.api)(l,e.color(l),e.api.data(l)[0].values):Te(i,{COLOR:e.color(l),TITLE:l});u&&(o.push(l),s+=u)});var c=n.html(s).selectAll(function(){return this.childNodes}).data(o);e.setLegendItem(c),a.legend=n}},updateSizeForLegend:function(e){var t=this,a=t.config,n=t.state,i=n.isLegendTop,r=n.isLegendLeft,o=n.isLegendRight,s=n.isLegendInset,c=n.current,l=e.width,u=e.height,d={top:i?t.getCurrentPaddingTop()+a.legend_inset_y+5.5:c.height-u-t.getCurrentPaddingBottom()-a.legend_inset_y,left:r?t.getCurrentPaddingLeft()+a.legend_inset_x+.5:c.width-l-t.getCurrentPaddingRight()-a.legend_inset_x+.5};t.state.margin3={top:o?0:s?d.top:c.height-u,right:NaN,bottom:0,left:o?c.width-l:s?d.left:0}},transformLegend:function(e){var t=this,a=t.$el.legend,n=t.$T;n(a,e).attr("transform",t.getTranslate("legend"))},updateLegendStep:function(e){this.state.legendStep=e},updateLegendItemWidth:function(e){this.state.legendItemWidth=e},updateLegendItemHeight:function(e){this.state.legendItemHeight=e},updateLegendItemColor:function(e,t){var a=this.$el.legend;a&&a.select(".".concat(V.legendItem,"-").concat(e," line")).style("stroke",t)},getLegendWidth:function(){var e=this,t=e.state,a=t.current.width,n=t.isLegendRight,i=t.isLegendInset,r=t.legendItemWidth,o=t.legendStep;return e.config.legend_show?n||i?r*(o+1):a:0},getLegendHeight:function(){var e,t=this,a=t.state,n=a.current,i=a.isLegendRight,r=a.legendItemHeight,o=a.legendStep,s=((e=t.config.padding)===null||e===void 0?void 0:e.mode)==="fit";return t.config.legend_show?i?n.height:(s?10:Math.max(20,r))*(o+1):0},opacityForUnfocusedLegend:function(e){return e.classed(V.legendItemHidden)?null:"0.3"},toggleFocusLegend:function(e,t){var a=this,n=a.$el.legend,i=a.$T,r=a.mapToTargetIds(e);n&&i(n.selectAll(".".concat(V.legendItem)).filter(function(o){return r.indexOf(o)>=0}).classed(U.legendItemFocused,t)).style("opacity",function(){return t?null:a.opacityForUnfocusedLegend.call(a,L(this))})},revertLegend:function(){var e=this,t=e.$el.legend,a=e.$T;t&&a(t.selectAll(".".concat(V.legendItem)).classed(U.legendItemFocused,!1)).style("opacity",null)},showLegend:function(e){var t=this,a=t.config,n=t.$el,i=t.$T;a.legend_show||(a.legend_show=!0,n.legend?n.legend.style("visibility",null):t.initLegend(),!t.state.legendHasRendered&&t.updateLegend()),t.removeHiddenLegendIds(e),i(n.legend.selectAll(t.selectorLegends(e)).style("visibility",null)).style("opacity",null)},hideLegend:function(e){var t=this,a=t.config,n=t.$el.legend;a.legend_show&&Xt(e)&&(a.legend_show=!1,n.style("visibility","hidden")),t.addHiddenLegendIds(e),n.selectAll(t.selectorLegends(e)).style("opacity","0").style("visibility","hidden")},getLegendItemTextBox:function(e,t){var a=this,n=a.cache,i=a.state,r,o=ft.legendItemTextBox;return e&&(r=!i.redrawing&&n.get(o)||{},r[e]||(r[e]=a.getTextRect(t,V.legendItem),n.add(o,r)),r=r[e]),r},setLegendItem:function(e){var t=this,a=t.$el,n=t.api,i=t.config,r=t.state,o=r.inputType==="touch",s=t.hasType("gauge"),c=i.boost_useCssRule;e.attr("class",function(l){var u=L(this),d=!u.empty()&&u.attr("class")||"";return d+t.generateClass(V.legendItem,l)}).style("visibility",function(l){return t.isLegendToShow(l)?null:"hidden"}),i.interaction_enabled&&(c&&[[".".concat(V.legendItem),"cursor:pointer"],[".".concat(V.legendItem," text"),"pointer-events:none"],[".".concat(V.legendItemPoint," text"),"pointer-events:none"],[".".concat(V.legendItemTile),"pointer-events:none"],[".".concat(V.legendItemEvent),"fill-opacity:0"]].forEach(function(l){var u=l[0],d=l[1];t.setCssRule(!1,u,[d])(a.legend)}),e.style("cursor",t.getStylePropValue("pointer")).on("click",function(l,u){j(i.legend_item_onclick,n,u)||(l.altKey?(n.hide(),n.show(u)):(n.toggle(u),L(this).classed(U.legendItemFocused,!1))),o&&t.hideTooltip()}),!o&&e.on("mouseout",function(l,u){j(i.legend_item_onout,n,u)||(L(this).classed(U.legendItemFocused,!1),s&&t.undoMarkOverlapped(t,".".concat(dt.gaugeValue)),t.api.revert())}).on("mouseover",function(l,u){j(i.legend_item_onover,n,u)||(L(this).classed(U.legendItemFocused,!0),s&&t.markOverlapped(u,t,".".concat(dt.gaugeValue)),!r.transiting&&t.isTargetToShow(u)&&n.focus(u))}))},updateLegendElement:function(e,t){var a=this,n=a.config,i=a.state,r=a.$el.legend,o=a.$T,s=n.legend_item_tile_type,c=s!=="circle",l=n.legend_item_tile_r,u={width:c?n.legend_item_tile_width:l*2,height:c?n.legend_item_tile_height:l*2},d={padding:{top:4,right:10},max:{width:0,height:0},posMin:10,step:0,tileWidth:u.width+5,totalLength:0},h={offsets:{},widths:{},heights:{},margins:[0],steps:{}},g,f,p,v=e.filter(function(b){return!N(n.data_names[b])||n.data_names[b]!==null}),x=t.withTransition,_=a.getUpdateLegendPositions(v,d,h);i.isLegendInset&&(d.step=n.legend_inset_step?n.legend_inset_step:v.length,a.updateLegendStep(d.step)),i.isLegendRight?(g=function(b){return d.max.width*h.steps[b]},f=function(b){return h.margins[h.steps[b]]+h.offsets[b]}):i.isLegendInset?(g=function(b){return d.max.width*h.steps[b]+10},f=function(b){return h.margins[h.steps[b]]+h.offsets[b]}):(g=function(b){return h.margins[h.steps[b]]+h.offsets[b]},f=function(b){return d.max.height*h.steps[b]});var m={xText:function(b,w){return g(b,w)+4+u.width},xRect:function(b,w){return g(b,w)},x1Tile:function(b,w){return g(b,w)-2},x2Tile:function(b,w){return g(b,w)-2+u.width},yText:function(b,w){return f(b,w)+9},yRect:function(b,w){return f(b,w)-5},yTile:function(b,w){return f(b,w)+4}};a.generateLegendItem(v,u,_,m),p=r.select(".".concat(V.legendBackground," rect")),i.isLegendInset&&d.max.width>0&&p.size()===0&&(p=r.insert("g",".".concat(V.legendItem)).attr("class",V.legendBackground).append("rect"));var y=r.selectAll("text").data(v).text(function(b){return N(n.data_names[b])?n.data_names[b]:b}).each(function(b,w){_(this,b,w)});o(y,x).attr("x",m.xText).attr("y",m.yText);var T=r.selectAll("rect.".concat(V.legendItemEvent)).data(v);o(T,x).attr("width",function(b){return h.widths[b]}).attr("height",function(b){return h.heights[b]}).attr("x",m.xRect).attr("y",m.yRect),a.updateLegendItemPos(v,x,m),p&&o(p,x).attr("height",a.getLegendHeight()-12).attr("width",d.max.width*(d.step+1)+10),a.updateLegendItemWidth(d.max.width),a.updateLegendItemHeight(d.max.height),a.updateLegendStep(d.step)},getUpdateLegendPositions:function(e,t,a){var n=this,i=n.config,r=n.state,o=r.isLegendRight||r.isLegendInset;return function(s,c,l){var u=l===0,d=l===e.length-1,h=n.getLegendItemTextBox(c,s),g=h.width+t.tileWidth+(d&&!o?0:t.padding.right)+i.legend_padding,f=h.height+t.padding.top,p=o?f:g,v=o?n.getLegendHeight():n.getLegendWidth(),x,_=function(y,T){T||(x=(v-t.totalLength-p)/2,x<t.posMin&&(x=(v-p)/2,t.totalLength=0,t.step++)),a.steps[y]=t.step,a.margins[t.step]=r.isLegendInset?10:x,a.offsets[y]=t.totalLength,t.totalLength+=p};if(u&&(t.totalLength=0,t.step=0,t.max.width=0,t.max.height=0),i.legend_show&&!n.isLegendToShow(c)){a.widths[c]=0,a.heights[c]=0,a.steps[c]=0,a.offsets[c]=0;return}a.widths[c]=g,a.heights[c]=f,(!t.max.width||g>=t.max.width)&&(t.max.width=g),(!t.max.height||f>=t.max.height)&&(t.max.height=f);var m=o?t.max.height:t.max.width;i.legend_equally?(Object.keys(a.widths).forEach(function(y){return a.widths[y]=t.max.width}),Object.keys(a.heights).forEach(function(y){return a.heights[y]=t.max.height}),x=(v-m*e.length)/2,x<t.posMin?(t.totalLength=0,t.step=0,e.forEach(function(y){return _(y)})):_(c,!0)):_(c)}},generateLegendItem:function(e,t,a,n){var i=this,r=i.config,o=i.state,s=i.$el.legend,c=r.legend_usePoint,l=r.legend_item_tile_r,u=r.legend_item_tile_type,d=u!=="circle",h=o.isLegendRight||o.isLegendInset,g=-200,f=s.selectAll(".".concat(V.legendItem)).data(e).enter().append("g");if(i.setLegendItem(f),f.append("text").text(function(v){return N(r.data_names[v])?r.data_names[v]:v}).each(function(v,x){a(this,v,x)}).style("pointer-events",i.getStylePropValue("none")).attr("x",h?n.xText:g).attr("y",h?g:n.yText),f.append("rect").attr("class",V.legendItemEvent).style("fill-opacity",i.getStylePropValue("0")).attr("x",h?n.xRect:g).attr("y",h?g:n.yRect),c){var p=[];f.append(function(v){var x=J(r.point_pattern)?r.point_pattern:[r.point_type];p.indexOf(v)===-1&&p.push(v);var _=x[p.indexOf(v)%x.length];return _==="rectangle"&&(_="rect"),it.createElementNS(ce.svg,"hasValidPointType"in i&&i.hasValidPointType(_)?_:"use")}).attr("class",V.legendItemPoint).style("fill",re.bind(i)).style("pointer-events",i.getStylePropValue("none")).attr("href",function(v,x,_){var m=_[x],y=m.nodeName.toLowerCase(),T=i.getTargetSelectorSuffix(v);return y==="use"?"#".concat(o.datetimeId,"-point").concat(T):void 0})}else f.append(d?"line":u).attr("class",V.legendItemTile).style("stroke",re.bind(i)).style("pointer-events",i.getStylePropValue("none")).call(function(v){u==="circle"?v.attr("r",l).style("fill",re.bind(i)).attr("cx",h?n.x2Tile:g).attr("cy",h?g:n.yTile):d&&v.attr("stroke-width",t.height).attr("x1",h?n.x1Tile:g).attr("y1",h?g:n.yTile).attr("x2",h?n.x2Tile:g).attr("y2",h?g:n.yTile)})},updateLegendItemPos:function(e,t,a){var n=this,i=n.config,r=n.$el.legend,o=n.$T,s=i.legend_usePoint,c=i.legend_item_tile_type,l=c!=="circle";if(s){var u=r.selectAll(".".concat(V.legendItemPoint)).data(e);o(u,t).each(function(){var d=this.nodeName.toLowerCase(),h=i.point_r,g="x",f="y",p=2,v=2.5,x=null,_=null,m=null;if(d==="circle"){var y=h*.2;g="cx",f="cy",x=h+y,p=h*2,v=-y}else if(d==="rect"){var y=h*2.5;_=y,m=y,v=3}L(this).attr(g,function(T){return a.x1Tile(T)+p}).attr(f,function(T){return a.yTile(T)-v}).attr("r",x).attr("width",_).attr("height",m)})}else{var u=r.selectAll(".".concat(V.legendItemTile)).data(e);o(u,t).style("stroke",re.bind(n)).call(function(h){c==="circle"?h.attr("cx",function(g){var f=a.x2Tile(g);return f-(f-a.x1Tile(g))/2}).attr("cy",a.yTile):l&&h.attr("x1",a.x1Tile).attr("y1",a.yTile).attr("x2",a.x2Tile).attr("y2",a.yTile)})}}},di={redraw:function(e){var t,a,n;e===void 0&&(e={});var i=this,r=i.config,o=i.state,s=i.$el,c=s.main,l=s.treemap;o.redrawing=!0;var u=i.filterTargetsToShow(i.data.targets),d=e.flow,h=e.initializing,g=i.getWithOption(e),f=g.Transition?r.transition_duration:0,p=g.TransitionForExit?f:0,v=g.TransitionForAxis?f:0,x=(t=i.axis)===null||t===void 0?void 0:t.generateTransitions(v);i.updateSizes(h),g.Legend&&r.legend_show?(e.withTransition=!!f,!l&&i.updateLegend(i.mapToIds(i.data.targets),e,x)):g.Dimension&&i.updateDimension(!0),!l&&(!i.hasArcType()||o.hasRadar)&&i.updateCircleY&&(i.circleY=i.updateCircleY()),r.data_empty_label_text&&c.select("text.".concat(lt.text,".").concat(z.empty)).attr("x",o.width/2).attr("y",o.height/2).text(r.data_empty_label_text).style("display",u.length?"none":null),o.hasAxis?(i.axis.redrawAxis(u,g,x,d,h),i.hasGrid()&&i.updateGrid(),r.regions.length&&i.updateRegion(),["bar","candlestick","line","area"].forEach(function(_){var m=ut(_);(/^(line|area)$/.test(_)&&i.hasTypeOf(m)||i.hasType(_))&&i["update".concat(m)](g.TransitionForExit)}),s.text&&c.selectAll(".".concat(Z.selectedCircles)).filter(i.isBarType.bind(i)).selectAll("circle").remove(),r.interaction_enabled&&!d&&g.EventRect&&(i.redrawEventRect(),(a=i.bindZoomEvent)===null||a===void 0||a.call(i))):(s.arcs&&i.redrawArc(f,p,g.Transform),s.radar&&i.redrawRadar(),s.polar&&i.redrawPolar(),l&&i.updateTreemap(p)),!o.resizing&&!l&&(i.hasPointType()||o.hasRadar)&&i.updateCircle(),i.hasDataLabel()&&!i.hasArcType(null,["radar"])&&i.updateText(),(n=i.redrawTitle)===null||n===void 0||n.call(i),h&&i.updateTypesElements(),i.generateRedrawList(u,d,f,g.Subchart),i.callPluginHook("$redraw",e,f)},generateRedrawList:function(e,t,a,n){var i=this,r=i.config,o=i.state,s=i.getDrawShape();o.hasAxis&&r.subchart_show&&i.redrawSubchart(n,a,s);var c=t&&i.generateFlow({targets:e,flow:t,duration:t.duration,shape:s,xv:i.xv.bind(i)}),l=(a||c)&&Qt(),u=i.getRedrawList(s,t,c,l),d=function(){c&&c(),o.redrawing=!1,j(r.onrendered,i.api)};if(d)if(l&&u.length){var h=ga();Ga().duration(a).each(function(){u.reduce(function(g,f){return g.concat(f)},[]).forEach(function(g){return h.add(g)})}).call(h,d)}else o.transiting||d();i.mapToIds(i.data.targets).forEach(function(g){o.withoutFadeIn[g]=!0})},getRedrawList:function(e,t,a,n){var i=this,r=i.config,o=i.state,s=o.hasAxis,c=o.hasRadar,l=o.hasTreemap,u=i.$el.grid,d=e.pos,h=d.cx,g=d.cy,f=d.xForText,p=d.yForText,v=[];return s&&((r.grid_x_lines.length||r.grid_y_lines.length)&&v.push(i.redrawGrid(n)),r.regions.length&&v.push(i.redrawRegion(n)),Object.keys(e.type).forEach(function(x){var _=ut(x),m=e.type[x];(/^(area|line)$/.test(x)&&i.hasTypeOf(_)||i.hasType(x))&&v.push(i["redraw".concat(_)](m,n))}),!t&&u.main&&v.push(i.updateGridFocus())),(!i.hasArcType()||c)&&J(r.data_labels)&&r.data_labels!==!1&&v.push(i.redrawText(f,p,t,n)),(i.hasPointType()||c)&&!r.point_focus_only&&i.redrawCircle&&v.push(i.redrawCircle(h,g,n,a)),l&&v.push(i.redrawTreemap(n)),v},updateAndRedraw:function(e){e===void 0&&(e={});var t=this,a=t.config,n=t.state,i;e.withTransition=Lt(e,"withTransition",!0),e.withTransform=Lt(e,"withTransform",!1),e.withLegend=Lt(e,"withLegend",!1),e.withUpdateXDomain=!0,e.withUpdateOrgXDomain=!0,e.withTransitionForExit=!1,e.withTransitionForTransform=Lt(e,"withTransitionForTransform",e.withTransition),e.withLegend&&a.legend_show||(n.hasAxis&&(i=t.axis.generateTransitions(e.withTransitionForAxis?a.transition_duration:0)),t.updateScales(),t.updateSvgSize(),t.transformAll(e.withTransitionForTransform,i)),t.redraw(e,i)}};function Mt(e,t,a){e===void 0&&(e="linear"),t===void 0&&(t=0),a===void 0&&(a=1);var n={linear:me,log:$a,_log:Fa,time:Ba,utc:Na}[e]();return n.type=e,/_?log/.test(e)&&n.clamp(!0),n.range([t,a])}var hi={getXScale:function(e,t,a,n){var i=this,r=i.scale.zoom||Mt(i.axis.getAxisType("x"),e,t);return i.getCustomizedXScale(a?r.domain(a):r,n)},getYScale:function(e,t,a,n){var i=this,r=Mt(i.axis.getAxisType(e),t,a);return n&&r.domain(n),r},getYScaleById:function(e,t){var a;t===void 0&&(t=!1);var n=((a=this.axis)===null||a===void 0?void 0:a.getId(e))==="y2",i=t?n?"subY2":"subY":n?"y2":"y";return this.scale[i]},getCustomizedXScale:function(e,t){var a=this,n=t||function(){return a.axis.x.tickOffset()},i=a.config.axis_x_inverted,r=function(s,c){var l=e(s)+n();return c?l:Math.ceil(l)};for(var o in e)r[o]=e[o];return r.orgDomain=function(){return e.domain()},r.orgScale=function(){return e},a.axis.isCategorized()&&(r.domain=function(s){var c=s;return arguments.length?(e.domain(c),r):(c=this.orgDomain(),i?[c[0]+1,c[1]]:[c[0],c[1]+1])}),r},updateScales:function(e,t){var a,n;t===void 0&&(t=!0);var i=this,r=i.axis,o=i.config,s=i.format,c=i.org,l=i.scale,u=i.state,d=u.current,h=u.width,g=u.height,f=u.width2,p=u.height2,v=u.hasAxis,x=u.hasTreemap;if(v){var _=o.axis_rotated,m=i.getResettedPadding(1),y={x:_?m:0,y:_?0:g,subX:_?1:0,subY:_?0:p},T={x:_?g:h,y:_?h:m,subX:_?g:h,subY:_?f:1},b=t&&((a=l.x)===null||a===void 0?void 0:a.orgDomain()),w=t&&c.xDomain;l.x=i.getXScale(y.x,T.x,b,function(){return r.x.tickOffset()}),l.subX=i.getXScale(y.x,T.x,w,function(S){var k;return S%1?0:((k=r.subX)!==null&&k!==void 0?k:r.x).tickOffset()}),s.xAxisTick=r.getXAxisTickFormat(),s.subXAxisTick=r.getXAxisTickFormat(!0),r.setAxis("x",l.x,o.axis_x_tick_outer,e),o.subchart_show&&r.setAxis("subX",l.subX,o.axis_x_tick_outer,e),l.y=i.getYScale("y",y.y,T.y,l.y?l.y.domain():o.axis_y_default),l.subY=i.getYScale("y",y.subY,T.subY,l.subY?l.subY.domain():o.axis_y_default),r.setAxis("y",l.y,o.axis_y_tick_outer,e),o.axis_y2_show&&(l.y2=i.getYScale("y2",y.y,T.y,l.y2?l.y2.domain():o.axis_y2_default),l.subY2=i.getYScale("y2",y.subY,T.subY,l.subY2?l.subY2.domain():o.axis_y2_default),r.setAxis("y2",l.y2,o.axis_y2_tick_outer,e))}else if(x){var A=i.getCurrentPadding();l.x=me().rangeRound([A.left,d.width-A.right]),l.y=me().rangeRound([A.top,d.height-A.bottom])}else(n=i.updateArc)===null||n===void 0||n.call(i)},xx:function(e){var t=this,a=t.config,n=t.scale,i=n.x,r=n.zoom,o=a.zoom_enabled&&r?r:i;return e?o(P(e.x)?e.x:e):null},xv:function(e){var t=this,a=t.axis,n=t.config,i=t.scale,r=i.x,o=i.zoom,s=n.zoom_enabled&&o?o:r,c=t.getBaseValue(e);return a.isTimeSeries()?c=mt.call(t,c):a.isCategorized()&&Q(c)&&(c=n.axis_x_categories.indexOf(c)),Math.ceil(s(c))},yv:function(e){var t=this,a=t.scale,n=a.y,i=a.y2,r=e.axis&&e.axis==="y2"?i:n;return Math.ceil(r(t.getBaseValue(e)))},subxx:function(e){return e?this.scale.subX(e.x):null}},gi={getDrawShape:function(){var e=this,t=e.config.axis_rotated,a=e.state,n=a.hasRadar,i=a.hasTreemap,r={type:{},indices:{},pos:{}};if(!i&&["bar","candlestick","line","area"].forEach(function(c){var l=ut(/^(bubble|scatter)$/.test(c)?"line":c);if(e.hasType(c)||e.hasTypeOf(l)||c==="line"&&(e.hasType("bubble")||e.hasType("scatter"))){var u=e.getShapeIndices(e["is".concat(l,"Type")]),d=e["generateDraw".concat(l)];r.indices[c]=u,r.type[c]=d?d.bind(e)(u,!1):void 0}}),!e.hasArcType()||n||i){var o=void 0,s=void 0;i||(o=n?e.radarCircleX:t?e.circleY:e.circleX,s=n?e.radarCircleY:t?e.circleX:e.circleY),r.pos={xForText:e.generateXYForText(r.indices,!0),yForText:e.generateXYForText(r.indices,!1),cx:(o||function(){}).bind(e),cy:(s||function(){}).bind(e)}}return r},getShapeIndices:function(e){var t=this,a=t.config,n=a.data_xs,i=J(n),r={},o=i?{}:0;return i&&be(Object.keys(n).map(function(s){return n[s]})).forEach(function(s){o[s]=0,r[s]={}}),t.filterTargetsToShow(t.data.targets.filter(e,t)).forEach(function(s){for(var c=(s.id in n)?n[s.id]:"",l=c?r[c]:r,u=0,d=void 0;d=a.data_groups[u];u++)if(!(d.indexOf(s.id)<0)){for(var h=0,g=void 0;g=d[h];h++)if(g in l){l[s.id]=l[g];break}}rt(l[s.id])&&(l[s.id]=c?o[c]++:o++,l.__max__=(c?o[c]:o)-1)}),r},getIndices:function(e,t,a){var n=this,i=n.config,r=i.data_xs,o=i.bar_indices_removeNull,s=t.id,c=t.index;if(n.isBarType(s)&&o){var l={};return n.getAllValuesOnIndex(c,!0).forEach(function(u,d){l[u.id]=d,l.__max__=d}),l}return J(r)?e[r[s]]:e},getIndicesMax:function(e){return J(this.config.data_xs)?Object.keys(e).map(function(t){return e[t].__max__||0}).reduce(function(t,a){return t+a}):e.__max__},getShapeX:function(e,t,a){var n=this,i=n.config,r=n.scale,o=a?r.subX:r.zoom||r.x,s=i.bar_overlap,c=i.bar_padding,l=function(d,h){return d+h},u=Tt(e)&&(e._$total.length?e._$total.reduce(l)/2:0);return function(d){var h=n.getIndices(t,d,"getShapeX"),g=d.id in h?h[d.id]:0,f=(h.__max__||0)+1,p=0;if(J(d.x)){var v=o(d.x,!0);if(u){var x=e[d.id]||e._$width;p=s?v-x/2:v-x+e._$total.slice(0,g+1).reduce(l)-u}else p=v-(I(e)?e:e._$width)*(f/2-(s?1:g))}return e&&p&&f>1&&c&&(g&&(p+=c*g),f>2?p-=(f-1)*c/2:f===2&&(p-=c/2)),p}},getShapeY:function(e){var t=this,a=t.isStackNormalized();return function(n){var i=n.value;return I(n)?i=n:a?i=t.getRatio("index",n,!0):t.isBubbleZType(n)?i=t.getBubbleZData(n.value,"y"):t.isBarRangeType(n)&&(i=i[1]),t.getYScaleById(n.id,e)(i)}},getShapeYMin:function(e){var t=this,a=t.axis.getId(e),n=t.scale[a],i=n.domain()[0],r=t.config["axis_".concat(a,"_inverted")];return!t.isGrouped(e)&&!r&&i>0?i:0},getShapeOffsetData:function(e){var t=this,a=t.orderTargets(t.filterTargetsToShow(t.data.targets.filter(e,t))),n=t.isStackNormalized(),i=a.map(function(o){var s=o.values,c={};t.isStepType(o)&&(s=t.convertValuesToStep(s));var l=s.reduce(function(u,d){var h=Number(d.x);return u[h]=d,c[h]=n?t.getRatio("index",d,!0):d.value,u},{});return{id:o.id,rowValues:s,rowValueMapByXValue:l,values:c}}),r=a.reduce(function(o,s,c){var l=s.id;return o[l]=c,o},{});return{indexMapByTargetId:r,shapeOffsetTargets:i}},getShapeOffset:function(e,t,a){var n=this,i=n.getShapeOffsetData(e),r=i.shapeOffsetTargets,o=i.indexMapByTargetId,s=n.config.data_groupsZeroAs;return function(c,l){var u=c.id,d=c.value,h=c.x,g=n.getIndices(t,c),f=n.getYScaleById(u,a);if(n.isBarRangeType(c))return f(d[0]);var p=Number(h),v=f(s==="zero"?0:n.getShapeYMin(u)),x=v;return r.filter(function(_){return _.id!==u&&g[_.id]===g[u]}).forEach(function(_){var m=_.id,y=_.rowValueMapByXValue,T=_.rowValues,b=_.values;if(o[m]<o[u]){var w=b[p],A=T[l];if((!A||Number(A.x)!==p)&&(A=y[p]),A?.value*d>=0&&I(w)){var S=d===0?s==="positive"&&w>0||s==="negative"&&w<0:!0;S&&(x+=f(w)-v)}}}),x}},getBarW:function(e,t,a){var n=this,i=n.config,r=n.org,o=n.scale,s=n.getMaxDataCount(),c=e==="bar"&&i.data_groups.length,l="".concat(e,"_width"),u=o.zoom&&!n.axis.isCategorized()?r.xDomain.map(function(g){return o.zoom(g)}).reduce(function(g,f){return Math.abs(g)+f})/s:t.tickInterval(s),d=function(g){var f=g?i[l][g]:i[l],p=g?f.ratio:i["".concat(l,"_ratio")],v=g?f.max:i["".concat(l,"_max")],x=I(f)?f:a?u*p/a:0;return v&&x>v?v:x},h=d();return!c&&Tt(i[l])&&(h={_$width:h,_$total:[]},n.filterTargetsToShow(n.data.targets).forEach(function(g){i[l][g.id]&&(h[g.id]=d(g.id),h._$total.push(h[g.id]||h._$width))})),h},getShapeByIndex:function(e,t,a){var n=this,i=n.$el,r=P(t)?"-".concat(t):"",o=i[e];return o&&!o.empty()?o=o.filter(function(s){return a?s.id===a:!0}).filter(function(s){return P(t)?s.index===t:!0}):o=(a?i.main.selectAll(".".concat(X["".concat(e,"s")]).concat(n.getTargetSelectorSuffix(a))):i.main).selectAll(".".concat(X[e]).concat(r)),o},isWithinShape:function(e,t){var a,n=this,i=L(e),r;return n.isTargetToShow(t.id)?!((a=n.hasValidPointType)===null||a===void 0)&&a.call(n,e.nodeName)?r=n.isStepType(t)?n.isWithinStep(e,n.getYScaleById(t.id)(t.value)):n.isWithinCircle(e,n.isBubbleType(t)?n.pointSelectR(t)*1.5:0):e.nodeName==="path"&&(r=i.classed(X.bar)?n.isWithinBar(e):!0):r=!1,r},getInterpolate:function(e){var t=this,a=t.getInterpolateType(e);return{basis:Va,"basis-closed":Ya,"basis-open":Ha,bundle:Wa,cardinal:Ua,"cardinal-closed":ja,"cardinal-open":Za,"catmull-rom":qa,"catmull-rom-closed":Ka,"catmull-rom-open":Ja,"monotone-x":Qa,"monotone-y":tn,natural:en,"linear-closed":an,linear:nn,step:rn,"step-after":on,"step-before":sn}[a]},getInterpolateType:function(e){var t=this,a=t.config,n=a.spline_interpolation_type,i=t.isInterpolationType(n)?n:"cardinal";return t.isSplineType(e)?i:t.isStepType(e)?a.line_step_type:"linear"},isWithinBar:function(e){var t=pt(this.state.event,e),a=sa(e),n=a[0],i=a[1],r=Math.min(n.x,i.x),o=Math.min(n.y,i.y),s=this.config.bar_sensitivity,c=e.getBBox(),l=c.width,u=c.height,d=r-s,h=r+l+s,g=o+u+s,f=o-s,p=d<t[0]&&t[0]<h&&f<t[1]&&t[1]<g;return p}},fi={setContainerSize:function(){var e=this,t=e.state;t.current.width=e.getCurrentWidth(),t.current.height=e.getCurrentHeight()},getCurrentWidth:function(){var e=this;return e.config.size_width||e.getParentWidth()},getCurrentHeight:function(){var e=this,t=e.config,a=t.size_height||e.getParentHeight();return a>0?a:320/(e.hasType("gauge")&&!t.gauge_fullCircle?2:1)},getCurrentPaddingTop:function(){var e=this,t=e.config,a=e.state.hasAxis,n=e.$el,i=a?t.axis_y2_axes.length:0,r=P(t.padding_top)?t.padding_top:0;return n.title&&n.title.node()&&(r+=e.getTitlePadding()),i&&t.axis_rotated&&(r+=e.getHorizontalAxisHeight("y2")*i),r},getCurrentPaddingBottom:function(){var e=this,t=e.config,a=e.state.hasAxis,n=t.axis_rotated?"y":"x",i=a?t["axis_".concat(n,"_axes")].length:0,r=P(t.padding_bottom)?t.padding_bottom:0;return r+(i?e.getHorizontalAxisHeight(n)*i:0)},getCurrentPaddingLeft:function(e){var t,a=this,n=a.config,i=a.state.hasAxis,r=n.axis_rotated,o=((t=n.padding)===null||t===void 0?void 0:t.mode)==="fit",s=r?"x":"y",c=i?n["axis_".concat(s,"_axes")].length:0,l=i?a.getAxisWidthByAxisId(s,e):0;o||(l=ze(l));var u=n["axis_".concat(s,"_inner")]||!n["axis_".concat(s,"_show")]?0:l;return P(n.padding_left)?u=n.padding_left+(o&&r?l:0):i&&r&&(u=n.axis_x_show?o?l:Math.max(l,40):1),i&&(o||n["axis_".concat(s,"_inner")])&&n["axis_".concat(s,"_label")].text&&(u+=a.axis.getAxisLabelPosition("y").isOuter?20:0),u+l*c},getCurrentPaddingRight:function(e){var t,a;e===void 0&&(e=!1);var n=this,i=n.config,r=n.state.hasAxis,o=i.axis_rotated,s=((t=i.padding)===null||t===void 0?void 0:t.mode)==="fit",c=s?2:10,l=n.state.isLegendRight?n.getLegendWidth()+20:0,u=r?i.axis_y2_axes.length:0,d=!((a=n.axis)===null||a===void 0)&&a.getAxisLabelPosition("y2").isOuter?20:0,h=e?n.axis.getXAxisTickTextY2Overflow(c):0,g=r&&!i.axis_y2_inner?n.getAxisWidthByAxisId("y2"):1;s||(g=ze(g));var f=o?0:Math.max(g+l,h);return P(i.padding_right)?f=i.padding_right+(s&&(o||!i.axis_y2_show?c:f))+(r&&!s?1:0):n.axis&&o?f=c+l:n.axis&&(!i.axis_y2_show||i.axis_y2_inner)&&(f=Math.max((s&&!i.axis_y2_show?2:1)+l+d,h)),r&&!o&&s&&i.axis_y2_show&&!i.axis_y2_inner&&i.axis_y2_label.text&&(f+=d),f+g*u},getParentRectValue:function(e){for(var t="offset".concat(ut(e)),a=this.$el.chart.node(),n=0;n<30&&a&&a.tagName!=="BODY";){try{n=a.getBoundingClientRect()[e]}catch{t in a&&(n=a[t])}a=a.parentNode}var i=it.body[t];return n>i&&(n=i),n},getParentWidth:function(){return this.getParentRectValue("width")},getParentHeight:function(){var e=this.$el.chart.style("height"),t=0;return e&&(t=/px$/.test(e)?parseInt(e,10):this.getParentRectValue("height")),t},getSvgLeft:function(e){var t=this,a=t.config,n=t.$el,i=a.axis_rotated||!a.axis_rotated&&!a.axis_y_inner,r=a.axis_rotated?et.axisX:et.axisY,o=n.main.select(".".concat(r)).node(),s=o&&i?o.getBoundingClientRect():{right:0},c=n.chart.node().getBoundingClientRect(),l=t.hasArcType(),u=s.right-c.left-(l?0:t.getCurrentPaddingLeft(e));return u>0?u:0},updateDimension:function(e){var t,a=this,n=a.config,i=a.state.hasAxis,r=a.$el;i&&!e&&a.axis.x&&n.axis_rotated&&((t=a.axis.subX)===null||t===void 0||t.create(r.axis.subX)),a.updateScales(e),a.updateSvgSize(),a.transformAll(!1)},updateSvgSize:function(){var e=this,t=e.state,a=t.clip,n=t.current,i=t.hasAxis,r=t.width,o=t.height,s=e.$el.svg;if(s.attr("width",n.width).attr("height",n.height),i){var c=s.select(".".concat(ha.brush," .overlay")),l={width:0,height:0};c.size()&&(l.width=+c.attr("width"),l.height=+c.attr("height")),s.selectAll(["#".concat(a.id),"#".concat(a.idGrid)]).select("rect").attr("width",r).attr("height",o),s.select("#".concat(a.idXAxis)).select("rect").call(e.setXAxisClipPath.bind(e)),s.select("#".concat(a.idYAxis)).select("rect").call(e.setYAxisClipPath.bind(e)),a.idSubchart&&s.select("#".concat(a.idSubchart)).select("rect").attr("width",r).attr("height",l.height)}},getCurrentPadding:function(){var e=this;return{top:e.getCurrentPaddingTop(),bottom:e.getCurrentPaddingBottom(),left:e.getCurrentPaddingLeft(),right:e.getCurrentPaddingRight()}},getResettedPadding:function(e){var t=this,a=t.config,n=I(e),i=n?0:{};return a.padding===!1?!n&&Object.keys(e).forEach(function(r){i[r]=!Xt(a.data_labels)&&a.data_labels!==!1&&r==="top"?e[r]:0}):i=e,i},updateSizes:function(e){var t,a,n,i=this,r=i.config,o=i.state,s=i.$el.legend,c=r.axis_rotated,l=i.hasArcType()||o.hasTreemap,u=((t=r.padding)===null||t===void 0?void 0:t.mode)==="fit";!e&&i.setContainerSize();var d={width:s?i.getLegendWidth():0,height:s?i.getLegendHeight():0};!l&&r.axis_x_show&&r.axis_x_tick_autorotate&&i.updateXAxisTickClip();var h=o.isLegendRight||o.isLegendInset?0:d.height,g=c||l?0:i.getHorizontalAxisHeight("x"),f=r.subchart_axis_x_show&&r.subchart_axis_x_tick_text_show?g:30,p=r.subchart_show&&!l?r.subchart_size_height+f:0,v=i.getCurrentPadding();if(o.margin=!l&&c?{top:i.getHorizontalAxisHeight("y2")+v.top,right:l?0:i.getCurrentPaddingRight(!0),bottom:i.getHorizontalAxisHeight("y")+h+v.bottom,left:p+(l?0:v.left)}:{top:(u?0:4)+v.top,right:l?0:i.getCurrentPaddingRight(!0),bottom:g+p+h+v.bottom,left:l?0:v.left},o.margin=i.getResettedPadding(o.margin),o.margin2=c?{top:o.margin.top,right:NaN,bottom:20+h,left:i.state.rotatedPadding.left}:{top:o.current.height-p-h,right:NaN,bottom:f+h,left:o.margin.left},o.margin3={top:0,right:NaN,bottom:0,left:0},(a=i.updateSizeForLegend)===null||a===void 0||a.call(i,d),o.width=o.current.width-o.margin.left-o.margin.right,o.height=o.current.height-o.margin.top-o.margin.bottom,o.width<0&&(o.width=0),o.height<0&&(o.height=0),o.width2=c?o.margin.left-o.rotatedPadding.left-o.rotatedPadding.right:o.width,o.height2=c?o.height:o.current.height-o.margin2.top-o.margin2.bottom,o.width2<0&&(o.width2=0),o.height2<0&&(o.height2=0),i.hasArcType()){var x=i.hasType("gauge"),_=r.legend_show&&o.isLegendRight;o.arcWidth=o.width-(_?d.width+10:0),o.arcHeight=o.height-(_&&!x?0:10),x&&!r.gauge_fullCircle&&(o.arcHeight+=o.height-i.getPaddingBottomForGauge()),(n=i.updateRadius)===null||n===void 0||n.call(i)}o.isLegendRight&&l&&(o.margin3.left=o.arcWidth/2+o.radiusExpanded*1.1)}},pi={setCssRule:function(e,t,a,n){var i=this,r=i.config,o=i.state,s=o.cssRule,c=o.style;return r.boost_useCssRule?function(l){l.each(function(u){var d=n&&n?.call(i,u),h="".concat(e?".".concat(at.shapes+i.getTargetSelectorSuffix(u.id)):"").concat(t);t in s&&c.sheet.deleteRule(s[h]),i.state.cssRule[h]=Rn(c,h,a.filter(Boolean).map(function(g){return Q(d)&&g.indexOf(":")===-1?"".concat(g,": ").concat(d):g||""}))})}:function(){}},getStylePropValue:function(e){var t=this.config.boost_useCssRule;return t?null:D(e)?e.bind(this):e}};function vi(e){var t="middle";return e>0&&e<=170?t="end":e>190&&e<=360&&(t="start"),t}function xi(e,t,a,n,i){var r,o=this,s=e.value,c=o.isCandlestickType(e),l=I(s)&&s<0||c&&!(!((r=o.getCandlestickData(e))===null||r===void 0)&&r._isUp),u=t.x,d=t.y,h=4,g=h*2;return n?a==="start"?(u+=l?0:g,d+=h):a==="middle"?(u+=g,d-=g):a==="end"&&(l&&(u-=g),d+=h):(a==="start"?(u+=h,l&&(d+=g*2)):a==="middle"?d-=g:a==="end"&&(u-=h,l&&(d+=g*2)),i&&(d+=l?-17:c?13:7)),{x:u,y:d}}var _i={opacityForText:function(e){var t=this;return t.isBarType(e)&&!t.meetsLabelThreshold(Math.abs(t.getRatio("bar",e)),"bar")?"0":t.hasDataLabel?null:"0"},initText:function(){var e=this.$el;e.main.select(".".concat(z.chart)).append("g").attr("class",lt.chartTexts).style("pointer-events",e.treemap?"none":null)},updateTargetsForText:function(e){var t=this,a=t.getChartClass("Text"),n=t.getClass("texts","id"),i=t.classFocus.bind(t),r=t.$el.main.select(".".concat(lt.chartTexts)).selectAll(".".concat(lt.chartText)).data(e).attr("class",function(s){return"".concat(a(s)).concat(i(s)).trim()}),o=r.enter().append("g").style("opacity","0").attr("class",a).call(t.setCssRule(!0," .".concat(lt.text),["fill","pointer-events:none"],t.updateTextColor));o.append("g").attr("class",n)},updateText:function(){var e=this,t=e.$el,a=e.$T,n=e.config,i=e.axis,r=e.getClass("text","index"),o=n.data_labels.centered,s=t.main.selectAll(".".concat(lt.texts)).selectAll(".".concat(lt.text)).data(e.labelishData.bind(e));a(s.exit()).style("fill-opacity","0").remove(),t.text=s.enter().append("text").merge(s).attr("class",r).attr("text-anchor",function(c){var l=n["axis_".concat(i?.getId(c.id),"_inverted")],u=l?c.value>0:c.value<0;if(e.isCandlestickType(c)){var d=e.getCandlestickData(c);u=!d?._isUp}else if(e.isTreemapType(c))return o?"middle":"start";return n.axis_rotated?u?"end":"start":"middle"}).style("fill",e.getStylePropValue(e.updateTextColor)).style("fill-opacity","0").each(function(c,l,u){var d=L(this),h=c.value;if(e.isBubbleZType(c))h=e.getBubbleZData(h,"z");else if(e.isCandlestickType(c)){var g=e.getCandlestickData(c);g&&(h=g.close)}h=e.isTreemapType(c)?e.treemapDataLabelFormat(c)(d):e.dataLabelFormat(c.id)(h,c.id,l,u),I(h)?this.textContent=h:Kt(d,h)})},updateTextColor:function(e){var t=this,a=t.config,n=a.data_labels_colors,i=t.isArcType(e)&&!t.isRadarType(e)||t.isTreemapType(e)?null:t.color(e),r;if(Q(n))r=n;else if(F(n)){var o=(e.data||e).id;r=n[o]}else D(n)&&(r=n.bind(t.api)(i,e));if(t.isCandlestickType(e)&&!D(n)){var s=t.getCandlestickData(e);if(!s?._isUp){var c=a.candlestick_color_down;r=F(c)?c[e.id]:c}}return r||i},updateTextBacgroundColor:function(e){var t=this,a=t.$el,n=t.config,i=n.data_labels_backgroundColors,r="";if(Q(i)||F(i)){var o=Q(i)?"":t.getTargetSelectorSuffix("id"in e?e.id:e.data.id),s=a.defs.select(["filter[id*='labels-bg","']"].join(o));s.size()&&(r="url(#".concat(s.attr("id"),")"))}return r||null},redrawText:function(e,t,a,n){var i=this,r=i.$T,o=i.axis,s=i.config,c=i.state.hasTreemap,l=Rt(!0),u=s.axis_rotated,d=s.data_labels.rotate,h=vi(d),g=d?"rotate(".concat(d,")"):"";return i.$el.text.style("fill",i.getStylePropValue(i.updateTextColor)).attr("filter",i.updateTextBacgroundColor.bind(i)).style("fill-opacity",a?0:i.opacityForText.bind(i)).each(function(f,p){var v=r(c&&this.childElementCount?this.parentNode:this,!!(n&&this.getAttribute("x")),l),x=s["axis_".concat(o?.getId(f.id),"_inverted")],_={x:e.bind(this)(f,p),y:t.bind(this)(f,p)};d&&(_=xi.bind(i)(f,_,h,u,x),v.attr("text-anchor",h)),this.childElementCount||d?v.attr("transform","translate(".concat(_.x," ").concat(_.y,") ").concat(g)):v.attr("x",_.x).attr("y",_.y)}),!0},getTextRect:function(e,t){var a=this,n=e.node?e.node():e;/text/i.test(n.tagName)||(n=n.querySelector("text"));var i=n.textContent,r="".concat(ft.textRect,"-").concat(i.replace(/\W/g,"_")),o=a.cache.get(r);return o||(a.$el.svg.append("text").style("visibility","hidden").style("font",L(n).style("font")).classed(t,!0).text(i).call(function(s){o=qt(s.node())}).remove(),a.cache.add(r,o)),o},generateXYForText:function(e,t){var a=this,n=a.state,i=n.hasRadar,r=n.hasTreemap,o=Object.keys(e),s={},c=t?a.getXForText:a.getYForText;return i&&o.push("radar"),r&&o.push("treemap"),o.forEach(function(l){s[l]=a["generateGet".concat(ut(l),"Points")](e[l],!1)}),function(l,u){var d=a.isAreaType(l)&&"area"||a.isBarType(l)&&"bar"||a.isCandlestickType(l)&&"candlestick"||a.isRadarType(l)&&"radar"||a.isTreemapType(l)&&"treemap"||"line";return c.call(a,s[d](l,u),l,this)}},getCenteredTextPos:function(e,t,a,n){var i=this,r=i.config,o=r.axis_rotated,s=i.isBarType(e),c=i.isTreemapType(e);if(r.data_labels.centered&&(s||c)){var l=qt(a);if(s){var u=e.value>=0;if(o){var d=(u?t[1][1]-t[0][1]:t[0][1]-t[1][1])/2+l.width/2;return u?-d-3:d+2}else{var h=(u?t[0][1]-t[1][1]:t[1][1]-t[0][1])/2+l.height/2;return u?h:-h-2}}else if(c)return n==="x"?(t[1][0]-t[0][0])/2:(t[1][1]-t[0][1])/2+l.height/2}return 0},getTextPos:function(e,t){var a=this.config.data_labels_position;return(e in a?a[e]:a)[t]||0},getXForText:function(e,t,a){var n,i=this,r=i.config,o=i.state,s=r.axis_rotated,c=i.isTreemapType(t),l=e[0][0];if(i.isCandlestickType(t))s?l=!((n=i.getCandlestickData(t))===null||n===void 0)&&n._isUp?e[2][2]+4:e[2][1]-4:l+=(e[1][0]-l)/2;else if(c)l+=r.data_labels.centered?0:5;else if(s){var u=r["axis_".concat(i.axis.getId(t.id),"_inverted")],d=i.isBarType(t)?4:6,h=t.value;l=e[2][1],u?l-=d*(h>0?1:-1):l+=d*(h<0?-1:1)}else l=i.hasType("bar")?(e[2][0]+e[0][0])/2:l;if(t.value===null)if(l>o.width){var g=qt(a).width;l=o.width-g}else l<0&&(l=4);return(s||c)&&(l+=i.getCenteredTextPos(t,e,a,"x")),l+i.getTextPos(t.id,"x")},getYForText:function(e,t,a){var n=this,i=n.axis,r=n.config,o=n.state,s=r.axis_rotated,c=r["axis_".concat(i?.getId(t.id),"_inverted")],l=n.isBarType(t),u=n.isTreemapType(t),d=r.point_r,h=qt(a),g=t.value,f=3,p;if(n.isCandlestickType(t))g=n.getCandlestickData(t),s?(p=e[0][0],p+=(e[1][0]-p)/2+f):(p=g&&g._isUp?e[2][2]-f:e[2][1]+f*4,c&&(p+=15*(g._isUp?1:-1)));else if(u)p=e[0][1]+(r.data_labels.centered?0:h.height+5);else if(s)p=(e[0][0]+e[2][0]+h.height*.6)/2;else if(p=e[2][1],I(d)&&d>5&&(n.isLineType(t)||n.isScatterType(t))&&(f+=r.point_r/2.3),g<0||g===0&&!o.hasPositiveValue&&o.hasNegativeValue)p+=c?l?-3:-5:h.height+(l?-f:f);else{var v=-f*2;l?v=-f:n.isBubbleType(t)&&(v=f),c&&(v=l?10:15),p+=v}if(t.value===null&&!s){var x=h.height;p<x?p=x:p>o.height&&(p=o.height-4)}return(!s||u)&&(p+=n.getCenteredTextPos(t,e,a,"y")),p+n.getTextPos(t.id,"y")},markOverlapped:function(e,t,a){var n=t.$el.arcs.selectAll(a),i=n.filter(function(c){return c.data.id!==e}),r=n.filter(function(c){return c.data.id===e}),o=Me(r.node()),s=function(c,l){return Math.sqrt(Math.pow(c,2)+Math.pow(l,2))};r.node()&&i.each(function(){var c=Me(this),l=L(this),u=s(o.e,o.f)>s(c.e,c.f)?r:l,d=Math.ceil(Math.abs(o.e-c.e))<Math.ceil(u.node().getComputedTextLength()),h=Math.ceil(Math.abs(o.f-c.f))<parseInt(r.style("font-size"),10);l.classed(lt.TextOverlapping,d&&h)})},undoMarkOverlapped:function(e,t){e.$el.arcs.selectAll(t).each(function(){Je([this,this.previousSibling]).classed(lt.TextOverlapping,!1)})},meetsLabelThreshold:function(e,t){e===void 0&&(e=0);var a=this,n=a.config,i=n["".concat(t,"_label_threshold")]||0;return e>=i}};function Be(e,t){e===void 0&&(e="left");var a=I(t),n;return e.indexOf("center")>-1?n=a?t/2:"middle":e.indexOf("right")>-1?n=a?t:"end":n=a?0:"start",n}var mi={initTitle:function(){var e=this,t=e.config,a=e.$el;if(t.title_text){a.title=a.svg.append("g");var n=a.title.append("text").style("text-anchor",Be(t.title_position)).attr("class",lt.title);Kt(n,t.title_text,[.3,1.5])}},redrawTitle:function(){var e=this,t=e.config,a=e.state.current,n=e.$el.title;if(n){var i=e.yForTitle.call(e);/g/i.test(n.node().tagName)?n.attr("transform","translate(".concat(Be(t.title_position,a.width),", ").concat(i,")")):n.attr("x",e.xForTitle.call(e)).attr("y",i)}},xForTitle:function(){var e=this,t=e.config,a=e.state.current,n=t.title_position||"left",i=e.getTextRect(e.$el.title,lt.title).width,r;return/(right|center)/.test(n)?(r=a.width-i,n.indexOf("right")>=0?r=a.width-i-t.title_padding.right:n.indexOf("center")>=0&&(r=(a.width-i)/2)):r=t.title_padding.left||0,r},yForTitle:function(){var e=this;return(e.config.title_padding.top||0)+e.getTextRect(e.$el.title,lt.title).height},getTitlePadding:function(){var e=this;return e.yForTitle()+(e.config.title_padding.bottom||0)}},yi={initTooltip:function(){var e=this,t=e.config,a=e.$el;a.tooltip=L(t.tooltip_contents.bindto),a.tooltip.empty()&&(a.tooltip=a.chart.append("div").attr("class",se.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none")),e.bindTooltipResizePos()},initShowTooltip:function(){var e,t,a=this,n=a.config,i=a.$el,r=a.state,o=r.hasAxis,s=r.hasRadar;if(n.tooltip_init_show){var c=!(o&&s);if(!((e=a.axis)===null||e===void 0)&&e.isTimeSeries()&&Q(n.tooltip_init_x)){var l=a.data.targets[0],u=void 0,d=void 0;for(n.tooltip_init_x=mt.call(a,n.tooltip_init_x),u=0;(d=l.values[u])&&d.x-n.tooltip_init_x!==0;u++);n.tooltip_init_x=u}var h=a.data.targets.map(function(g){var f=c?0:n.tooltip_init_x;return a.addName(g.values[f])});c&&(h=[h[n.tooltip_init_x]]),i.tooltip.html(a.getTooltipHTML(h,(t=a.axis)===null||t===void 0?void 0:t.getXAxisTickFormat(),a.getDefaultValueFormat(),a.color)),n.tooltip_contents.bindto||i.tooltip.style("top",n.tooltip_init_position.top).style("left",n.tooltip_init_position.left).style("display",null)}},getTooltipHTML:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var a=this,n=a.api,i=a.config;return D(i.tooltip_contents)?i.tooltip_contents.bind(n).apply(void 0,e):a.getTooltipContent.apply(a,e)},getTooltipContent:function(e,t,a,n){var i=this,r=i.api,o=i.config,s=i.state,c=i.$el,l=["title","name","value"].map(function(R){var E=o["tooltip_format_".concat(R)];return D(E)?E.bind(r):E}),u=l[0],d=l[1],h=l[2];u=u||t,d=d||function(R){return R},h=h||(s.hasTreemap||i.isStackNormalized()?function(R,E){return"".concat((E*100).toFixed(2),"%")}:a);var g=o.tooltip_order,f=function(R){return i.axis&&i.isBubbleZType(R)?i.getBubbleZData(R.value,"z"):i.getBaseValue(R)},p=i.levelColor?function(R){return i.levelColor(R.value)}:function(R){return n(R)},v=o.tooltip_contents,x=v.template,_=i.mapToTargetIds();if(g===null&&o.data_groups.length){var m=i.orderTargets(i.data.targets).map(function(R){return R.id}).reverse();e.sort(function(R,E){var tt=R?R.value:null,nt=E?E.value:null;return tt>0&&nt>0&&(tt=R.id?m.indexOf(R.id):null,nt=E.id?m.indexOf(E.id):null),tt-nt})}else if(/^(asc|desc)$/.test(g)){var y=g==="asc";e.sort(function(R,E){var tt=R?f(R):null,nt=E?f(E):null;return y?tt-nt:nt-tt})}else D(g)&&e.sort(g.bind(r));var T=i.getTooltipContentTemplate(x),b=e.length,w,A,S,k,O,q=function(){if(A=e[O],!A||!(f(A)||f(A)===0))return"continue";if(rt(w)){var R=(s.hasAxis||s.hasRadar)&&Zt(u?u(A.x):A.x);w=Te(T[0],{CLASS_TOOLTIP:se.tooltip,TITLE:P(R)?x?R:'<tr><th colspan="2">'.concat(R,"</th></tr>"):""})}if(!A.ratio&&c.arcs&&(S=["arc",i.$el.arcs.select("path.".concat(W.arc,"-").concat(A.id)).data()[0]],A.ratio=i.getRatio.apply(i,S)),S=[A.ratio,A.id,A.index,e],k=Zt(h.apply(void 0,ct([f(A)],S,!1))),i.isAreaRangeType(A)){var E=["high","low"].map(function(ne){return Zt(h.apply(void 0,ct([i.getRangedData(A,ne)],S,!1)))}),tt=E[0],nt=E[1];k="<b>Mid:</b> ".concat(k," <b>High:</b> ").concat(tt," <b>Low:</b> ").concat(nt)}else if(i.isCandlestickType(A)){var ht=["open","high","low","close","volume"].map(function(ka){return Zt(h.apply(void 0,ct([i.getRangedData(A,ka,"candlestick")],S,!1)))}),G=ht[0],tt=ht[1],nt=ht[2],Bt=ht[3],K=ht[4];k="<b>Open:</b> ".concat(G," <b>High:</b> ").concat(tt," <b>Low:</b> ").concat(nt," <b>Close:</b> ").concat(Bt).concat(K?" <b>Volume:</b> ".concat(K):"")}else if(i.isBarRangeType(A)){var gt=A.value,wt=gt[0],Nt=gt[1];k="".concat(h(wt)," ~ ").concat(h(Nt))}if(k!==void 0){if(A.name===null)return"continue";var Y=Zt(d.apply(void 0,ct([A.name],S,!1))),yt=p(A),bt={CLASS_TOOLTIP_NAME:se.tooltipName+i.getTargetSelectorSuffix(A.id),COLOR:x||!i.patterns?yt:'<svg><rect style="fill:'.concat(yt,'" width="10" height="10"></rect></svg>'),NAME:Y,VALUE:k};if(x&&F(v.text)){var At=_.indexOf(A.id);Object.keys(v.text).forEach(function(ne){bt[ne]=v.text[ne][At]})}w+=Te(T[1],bt)}};for(O=0;O<b;O++)q();return"".concat(w,"</table>")},getTooltipContentTemplate:function(e){return(e||`<table class="{=CLASS_TOOLTIP}"><tbody>
				{=TITLE}
				{{<tr class="{=CLASS_TOOLTIP_NAME}">
					<td class="name">`.concat(this.patterns?"{=COLOR}":'<span style="background-color:{=COLOR}"></span>',`{=NAME}</td>
					<td class="value">{=VALUE}</td>
				</tr>}}
			</tbody></table>`)).replace(/(\r?\n|\t)/g,"").split(/{{(.*)}}/)},tooltipPosition:function(e,t,a,n){var i=this,r=i.config,o=i.scale,s=i.state,c=s.width,l=s.height,u=s.current,d=s.isLegendRight,h=s.inputType,g=s.event,f=i.hasType("gauge")&&!r.gauge_fullCircle,p=s.hasTreemap,v=i.getSvgLeft(!0),x=v+u.width-i.getCurrentPaddingRight(),_=i.getCurrentPaddingLeft(!0),m=20,y=pt(g,n),T=y[0],b=y[1];if(i.hasArcType()){var w=h==="touch"||i.hasType("radar");w||(b+=f?l:l/2,T+=(c-(d?i.getLegendWidth():0))/2)}else if(!p){var A=o.x(e[0].x);r.axis_rotated?(b=A+m,T+=v+100,x-=v):(b-=5,T=v+_+m+(o.zoom?T:A))}if(T+t+15>x&&(T-=t+(p?0:_)),b+a>u.height){var S=p?0:30;b-=f?a*3:a+S}var k={top:b,left:T};return Object.keys(k).forEach(function(O){k[O]<0&&(k[O]=0)}),k},showTooltip:function(e,t){var a,n,i=this,r=i.config,o=i.scale,s=i.state,c=i.$el.tooltip,l=r.tooltip_contents.bindto,u=e.filter(function(k){return k&&P(i.getBaseValue(k))});if(!(!c||u.length===0||!r.tooltip_show)){var d=c.datum(),h=d||{},g=h.width,f=g===void 0?0:g,p=h.height,v=p===void 0?0:p,x=JSON.stringify(e);if(!d||d.current!==x){var _=e.concat().sort()[0].index;j(r.tooltip_onshow,i.api,e),c.html(i.getTooltipHTML(e,i.axis?i.axis.getXAxisTickFormat():i.categoryName.bind(i),i.getDefaultValueFormat(),i.color)).style("display",null).style("visibility",null).datum(d={index:_,current:x,width:f=c.property("offsetWidth"),height:v=c.property("offsetHeight")}),j(r.tooltip_onshown,i.api,e),i._handleLinkedCharts(!0,_)}if(!l){var m=((a=r.tooltip_position)===null||a===void 0?void 0:a.bind(i.api))||i.tooltipPosition.bind(i),y=pt(s.event,t),T=y[0],b=y[1],w={x:T,y:b},A=(n=e.filter(Boolean))===null||n===void 0?void 0:n.shift();o.x&&A&&"x"in A&&(w.xAxis=o.x(A.x));var S=m(u,f,v,t,w);["top","left"].forEach(function(k){var O=S[k];c.style(k,"".concat(O,"px")),k==="left"&&!d.xPosInPercent&&(d.xPosInPercent=O/s.current.width*100)})}}},bindTooltipResizePos:function(){var e=this,t=e.resizeFunction,a=e.state,n=e.$el.tooltip;t.add(function(){if(n.style("display")==="block"){var i=a.current,r=n.datum(),o=r.width,s=r.xPosInPercent,c=i.width/100*s,l=i.width-(c+o);l<0&&(c+=l),n.style("left","".concat(c,"px"))}})},hideTooltip:function(e){var t=this,a=t.api,n=t.config,i=t.$el.tooltip;if(i&&i.style("display")!=="none"&&(!n.tooltip_doNotHide||e)){var r=JSON.parse(i.datum().current);j(n.tooltip_onhide,a,r),i.style("display","none").style("visibility","hidden").datum(null),j(n.tooltip_onhidden,a,r)}},_handleLinkedCharts:function(e,t){var a=this,n=a.charts,i=a.config,r=a.state.event;if(r?.isTrusted&&i.tooltip_linked&&n.length>1){var o=i.tooltip_linked_name;n.filter(function(s){return s!==a.api}).forEach(function(s){var c=s.internal,l=c.config,u=c.$el,d=l.tooltip_linked,h=l.tooltip_linked_name,g=it.body.contains(u.chart.node());if(d&&o===h&&g){var f=u.tooltip.data()[0],p=t!==f?.index;try{s.tooltip[e&&p?"show":"hide"]({index:t})}catch{}}})}}},bi={getTranslate:function(e,t){t===void 0&&(t=0);var a=this,n=a.config,i=a.state,r=n.axis_rotated,o=0,s,c;if(t&&/^(x|y2?)$/.test(e)&&(o=a.getAxisSize(e)*t),e==="main")s=jt(i.margin.left),c=jt(i.margin.top);else if(e==="context")s=jt(i.margin2.left),c=jt(i.margin2.top);else if(e==="legend")s=i.margin3.left,c=i.margin3.top;else if(e==="x")s=r?-o:0,c=r?0:i.height+o;else if(e==="y")s=r?0:-o,c=r?i.height+o:0;else if(e==="y2")s=r?0:i.width+o,c=r&&o?1-o:0;else if(e==="subX")s=0,c=r?0:i.height2;else if(e==="arc")s=i.arcWidth/2,c=i.arcHeight/2;else if(e==="polar")s=i.arcWidth/2,c=i.arcHeight/2;else if(e==="radar"){var l=a.getRadarSize()[0];s=i.width/2-l,c=jt(i.margin.top)}return"translate(".concat(s,", ").concat(c,")")},transformMain:function(e,t){var a=this,n=a.$el.main,i=a.$T,r=t?.axisX?t.axisX:i(n.select(".".concat(et.axisX)),e),o=t?.axisY?t.axisY:i(n.select(".".concat(et.axisY)),e),s=t?.axisY2?t.axisY2:i(n.select(".".concat(et.axisY2)),e);i(n,e).attr("transform",a.getTranslate("main")),r.attr("transform",a.getTranslate("x")),o.attr("transform",a.getTranslate("y")),s.attr("transform",a.getTranslate("y2")),n.select(".".concat(W.chartArcs)).attr("transform",a.getTranslate("arc"))},transformAll:function(e,t){var a=this,n=a.config,i=a.state,r=i.hasAxis,o=i.hasTreemap,s=a.$el;!o&&a.transformMain(e,t),r&&n.subchart_show&&a.transformContext(e,t),s.legend&&a.transformLegend(e)}},Ti={isValidChartType:function(e){return!!(e&&Object.values(C).indexOf(e)>-1)},setTargetType:function(e,t){var a=this,n=a.config,i=a.state.withoutFadeIn;a.mapToTargetIds(e).forEach(function(r){i[r]=t===n.data_types[r],n.data_types[r]=t}),e||(n.data_type=t)},updateTypesElements:function(){var e=this,t=e.state.current;Object.keys(C).forEach(function(a){var n=C[a],i=e.hasType(n,null,!0),r=t.types.indexOf(n);r===-1&&i?t.types.push(n):r>-1&&!i&&t.types.splice(r,1)}),e.setChartElements()},hasType:function(e,t,a){var n;a===void 0&&(a=!1);var i=this,r=i.config,o=i.state.current,s=r.data_types,c=t||i.data.targets,l=!1;return!a&&((n=o.types)===null||n===void 0?void 0:n.indexOf(e))>-1?l=!0:c?.length?c.forEach(function(u){var d=s[u.id];(d===e||!d&&e==="line")&&(l=!0)}):Object.keys(s).length?Object.keys(s).forEach(function(u){s[u]===e&&(l=!0)}):l=r.data_type===e,l},hasTypeOf:function(e,t,a){var n=this;return a===void 0&&(a=[]),e in Ct?!Ct[e].filter(function(i){return a.indexOf(i)===-1}).every(function(i){return!n.hasType(i,t)}):!1},isTypeOf:function(e,t){var a=Q(e)?e:e.id,n=this.config.data_types[a]||this.config.data_type;return B(t)?t.indexOf(n)>=0:n===t},hasPointType:function(){var e=this;return e.hasTypeOf("Line")||e.hasType("bubble")||e.hasType("scatter")},hasArcType:function(e,t){return this.hasTypeOf("Arc",e,t)},hasMultiArcGauge:function(){return this.hasType("gauge")&&this.config.gauge_type==="multi"},isLineType:function(e){var t=Q(e)?e:e.id;return!this.config.data_types[t]||this.isTypeOf(t,Ct.Line)},isStepType:function(e){return this.isTypeOf(e,Ct.Step)},isSplineType:function(e){return this.isTypeOf(e,Ct.Spline)},isAreaType:function(e){return this.isTypeOf(e,Ct.Area)},isAreaRangeType:function(e){return this.isTypeOf(e,Ct.AreaRange)},isBarType:function(e){return this.isTypeOf(e,"bar")},isBubbleType:function(e){return this.isTypeOf(e,"bubble")},isCandlestickType:function(e){return this.isTypeOf(e,"candlestick")},isScatterType:function(e){return this.isTypeOf(e,"scatter")},isTreemapType:function(e){return this.isTypeOf(e,"treemap")},isPieType:function(e){return this.isTypeOf(e,"pie")},isGaugeType:function(e){return this.isTypeOf(e,"gauge")},isDonutType:function(e){return this.isTypeOf(e,"donut")},isPolarType:function(e){return this.isTypeOf(e,"polar")},isRadarType:function(e){return this.isTypeOf(e,"radar")},isArcType:function(e){return this.isPieType(e)||this.isDonutType(e)||this.isGaugeType(e)||this.isPolarType(e)||this.isRadarType(e)},isCirclePoint:function(e){var t=this.config,a=t.point_pattern,n=!1;return e?.tagName==="circle"?n=!0:n=t.point_type==="circle"&&(!a||B(a)&&a.length===0),n},lineData:function(e){return this.isLineType(e)?[e]:[]},arcData:function(e){return this.isArcType(e.data)?[e]:[]},labelishData:function(e){return this.isBarType(e)||this.isLineType(e)||this.isScatterType(e)||this.isBubbleType(e)||this.isCandlestickType(e)||this.isRadarType(e)||this.isTreemapType(e)?e.values.filter(function(t){return I(t.value)||!!t.value}):[]},barLineBubbleData:function(e){return this.isBarType(e)||this.isLineType(e)||this.isBubbleType(e)?e.values:[]},isInterpolationType:function(e){return["basis","basis-closed","basis-open","bundle","cardinal","cardinal-closed","cardinal-open","catmull-rom","catmull-rom-closed","catmull-rom-open","linear","linear-closed","monotone-x","monotone-y","natural"].indexOf(e)>=0}},Ft=function(){function e(t){this.data={xs:{},targets:[]},this.scale={x:null,y:null,y2:null,subX:null,subY:null,subY2:null,zoom:null},this.org={xScale:null,xDomain:null},this.format={extraLineClasses:null,xAxisTick:null,dataTime:null,defaultAxisTime:null,axisTime:null};var a=this;a.api=t,a.config=new $t,a.cache=new Yn;var n=new zn;a.$el=n.getStore("element"),a.state=n.getStore("state"),a.$T=a.$T.bind(a)}return e.prototype.$T=function(t,a,n){var i=this,r=i.config,o=i.state,s=r.transition_duration,c=r.subchart_show,l=t;if(l){"tagName"in l&&(l=L(l));var u=(a!==!1&&s||a)&&(!o.zooming||o.dragging)&&!o.resizing&&o.rendered&&!c;l=u?l.transition(n).duration(s):l}return l},e.prototype.beforeInit=function(){var t=this;t.callPluginHook("$beforeInit"),j(t.config.onbeforeinit,t.api)},e.prototype.afterInit=function(){var t=this;t.callPluginHook("$afterInit"),j(t.config.onafterinit,t.api)},e.prototype.init=function(){var t=this,a=t.config,n=t.state,i=t.$el,r=a.boost_useCssRule;if(In(t),n.hasRadar=!n.hasAxis&&t.hasType("radar"),n.hasTreemap=!n.hasAxis&&t.hasType("treemap"),n.hasAxis=!t.hasArcType()&&!n.hasTreemap,n.datetimeId="bb-".concat(+new Date*Rt()),r){var o=it.createElement("style");o.type="text/css",it.head.appendChild(o),n.style={rootSelctor:".".concat(n.datetimeId),sheet:o.sheet},i.style=o}var s={element:a.bindto,classname:"bb"};F(a.bindto)&&(s.element=a.bindto.element||"#chart",s.classname=a.bindto.classname||s.classname),i.chart=D(s.element.node)?a.bindto.element:L(s.element||[]),i.chart.empty()&&(i.chart=L(it.body.appendChild(it.createElement("div")))),i.chart.html("").classed(s.classname,!0).classed(n.datetimeId,r).style("position","relative"),t.initParams(),t.initToRender()},e.prototype.initToRender=function(t){var a=this,n=a.config,i=a.state,r=a.$el.chart,o=function(){return r.style("display")==="none"||r.style("visibility")==="hidden"},s=n.render.lazy||o(),c=$.MutationObserver;s&&c&&n.render.observe!==!1&&!t&&new c(function(l,u){o()||(u.disconnect(),!i.rendered&&a.initToRender(!0))}).observe(r.node(),{attributes:!0,attributeFilter:["class","style"]}),(!s||t)&&a.convertData(n,function(l){a.initWithData(l),a.afterInit()})},e.prototype.initParams=function(){var t=this,a=t.config,n=t.format,i=t.state,r=a.axis_rotated;if(t.color=t.generateColor(),t.levelColor=t.generateLevelColor(),a.padding===!1&&(a.axis_x_show=!1,a.axis_y_show=!1,a.axis_y2_show=!1,a.subchart_show=!1),t.hasPointType()&&(t.point=t.generatePoint()),i.hasAxis){t.initClip(),n.extraLineClasses=t.generateExtraLineClass(),n.dataTime=a.data_xLocaltime?Sa:Ra,n.axisTime=a.axis_x_localtime?Ca:La;var o=t.config.zoom_enabled&&t.config.zoom_type==="drag";n.defaultAxisTime=function(s){var c=t.scale,l=c.x,u=c.zoom,d=o?u:u&&l.orgDomain().toString()!==u.domain().toString(),h=s.getMilliseconds()&&".%L"||s.getSeconds()&&".:%S"||s.getMinutes()&&"%I:%M"||s.getHours()&&"%I %p"||s.getDate()!==1&&"%b %d"||d&&s.getDate()===1&&"%b'%y"||s.getMonth()&&"%-m/%-d"||"%Y";return n.axisTime(h)(s)}}i.isLegendRight=a.legend_position==="right",i.isLegendInset=a.legend_position==="inset",i.isLegendTop=a.legend_inset_anchor==="top-left"||a.legend_inset_anchor==="top-right",i.isLegendLeft=a.legend_inset_anchor==="top-left"||a.legend_inset_anchor==="bottom-left",i.rotatedPadding.top=t.getResettedPadding(i.rotatedPadding.top),i.rotatedPadding.right=r&&!a.axis_x_show?0:30,i.inputType=En(a.interaction_inputType_mouse,a.interaction_inputType_touch)},e.prototype.initWithData=function(t){var a,n,i=this,r=i.config,o=i.scale,s=i.state,c=i.$el,l=i.org,u=s.hasAxis,d=s.hasTreemap,h=r.interaction_enabled,g=i.hasType("polar");if(u&&(i.axis=i.getAxisInstance(),r.zoom_enabled&&i.initZoom()),i.data.xs={},i.data.targets=i.convertDataToTargets(t),r.data_filter&&(i.data.targets=i.data.targets.filter(r.data_filter.bind(i.api))),r.data_hide&&i.addHiddenTargetIds(r.data_hide===!0?i.mapToIds(i.data.targets):r.data_hide),r.legend_hide&&i.addHiddenLegendIds(r.legend_hide===!0?i.mapToIds(i.data.targets):r.legend_hide),i.updateSizes(),i.updateScales(!0),u){var f=o.x,p=o.y,v=o.y2,x=o.subX,_=o.subY,m=o.subY2;f&&(f.domain(Ht(i.getXDomain(i.data.targets),!r.axis_x_inverted)),x.domain(f.domain()),l.xDomain=f.domain()),p&&(p.domain(i.getYDomain(i.data.targets,"y")),_.domain(p.domain())),v&&(v.domain(i.getYDomain(i.data.targets,"y2")),m&&m.domain(v.domain()))}if(c.svg=c.chart.append("svg").style("overflow","hidden").style("display","block"),h&&s.inputType){var y=s.inputType==="touch",T=r.onclick,b=r.onover,w=r.onout;c.svg.on("click",T?.bind(i.api)||null).on(y?"touchstart":"mouseenter",b?.bind(i.api)||null).on(y?"touchend":"mouseleave",w?.bind(i.api)||null)}r.svg_classname&&c.svg.attr("class",r.svg_classname);var A=D(r.color_tiles)&&i.patterns;(u||A||g||d||r.data_labels_backgroundColors)&&(c.defs=c.svg.append("defs"),u&&["id","idXAxis","idYAxis","idGrid"].forEach(function(O){i.appendClip(c.defs,s.clip[O])}),i.generateDataLabelBackgroundColorFilter(),A&&i.patterns.forEach(function(O){return c.defs.append(function(){return O.node})})),i.updateSvgSize(),i.bindResize();var S=c.svg.append("g").classed(z.main,!0).attr("transform",d?null:i.getTranslate("main"));if(c.main=S,r.subchart_show&&i.initSubchart(),r.tooltip_show&&i.initTooltip(),r.title_text&&i.initTitle(),!d&&r.legend_show&&i.initLegend(),r.data_empty_label_text&&S.append("text").attr("class","".concat(lt.text," ").concat(z.empty)).attr("text-anchor","middle").attr("dominant-baseline","middle"),u&&(r.regions.length&&i.initRegion(),!r.clipPath&&i.axis.init()),S.append("g").classed(z.chart,!0).attr("clip-path",u?s.clip.path:null),i.callPluginHook("$init"),u&&(h&&((a=i.initEventRect)===null||a===void 0||a.call(i)),i.initGrid(),r.clipPath&&((n=i.axis)===null||n===void 0||n.init())),i.initChartElements(),i.updateTargets(i.data.targets),i.updateDimension(),j(r.oninit,i.api),i.setBackground(),i.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1,initializing:!0}),r.data_onmin||r.data_onmax){var k=i.getMinMaxData();j(r.data_onmin,i.api,k.min),j(r.data_onmax,i.api,k.max)}r.tooltip_show&&i.initShowTooltip(),s.rendered=!0},e.prototype.initChartElements=function(){var t=this,a=t.state,n=a.hasAxis,i=a.hasRadar,r=a.hasTreemap,o=[];if(n)["bar","bubble","candlestick","line"].forEach(function(c){var l=ut(c);(c==="line"&&t.hasTypeOf(l)||t.hasType(c))&&o.push(l)});else if(r)o.push("Treemap");else{var s=t.hasType("polar");i||o.push("Arc","Pie"),t.hasType("gauge")?o.push("Gauge"):i?o.push("Radar"):s&&o.push("Polar")}o.forEach(function(c){t["init".concat(c)]()}),J(t.config.data_labels)&&!t.hasArcType(null,["radar"])&&t.initText()},e.prototype.setChartElements=function(){var t=this,a=t.$el,n=a.chart,i=a.svg,r=a.defs,o=a.main,s=a.tooltip,c=a.legend,l=a.title,u=a.grid,d=a.arcs,h=a.circle,g=a.bar,f=a.candlestick,p=a.line,v=a.area,x=a.text;t.api.$={chart:n,svg:i,defs:r,main:o,tooltip:s,legend:c,title:l,grid:u,arc:d,circles:h,bar:{bars:g},candlestick:f,line:{lines:p,areas:v},text:{texts:x}}},e.prototype.setBackground=function(){var t=this,a=t.config.background,n=t.state,i=t.$el.svg;if(J(a)){var r=i.select("g").insert(a.imgUrl?"image":"rect",":first-child");a.imgUrl?r.attr("href",a.imgUrl):a.color&&r.style("fill",a.color).attr("clip-path",n.clip.path),r.attr("class",a.class||null).attr("width","100%").attr("height","100%")}},e.prototype.updateTargets=function(t){var a,n=this,i=n.state,r=i.hasAxis,o=i.hasRadar,s=i.hasTreemap,c=function(d){return n["updateTargetsFor".concat(d)](t.filter(n["is".concat(d,"Type")].bind(n)))};if(n.updateTargetsForText(t),r)["bar","candlestick","line"].forEach(function(d){var h=ut(d);(d==="line"&&n.hasTypeOf(h)||n.hasType(d))&&c(h)}),n.updateTargetsForSubchart&&n.updateTargetsForSubchart(t);else if(n.hasArcType(t)){var l="Arc";o?l="Radar":n.hasType("polar")&&(l="Polar"),c(l)}else s&&c("Treemap");var u=n.hasType("bubble")||n.hasType("scatter");u&&((a=n.updateTargetForCircle)===null||a===void 0||a.call(n)),n.filterTargetsToShowAtInit(u)},e.prototype.filterTargetsToShowAtInit=function(t){t===void 0&&(t=!1);var a=this,n=a.$el.svg,i=a.$T,r=".".concat(z.target);t&&(r+=", .".concat(st.chartCircles," > .").concat(st.circles)),i(n.selectAll(r).filter(function(o){return a.isTargetToShow(o.id)})).style("opacity",null)},e.prototype.getWithOption=function(t){var a={Dimension:!0,EventRect:!0,Legend:!1,Subchart:!0,Transform:!1,Transition:!0,TrimXDomain:!0,UpdateXAxis:"UpdateXDomain",UpdateXDomain:!1,UpdateOrgXDomain:!1,TransitionForExit:"Transition",TransitionForAxis:"Transition",Y:!0};return Object.keys(a).forEach(function(n){var i=a[n];Q(i)&&(i=a[i]),a[n]=Lt(t,"with".concat(n),i)}),a},e.prototype.initialOpacity=function(t){var a=this,n=a.state.withoutFadeIn,i=a.getBaseValue(t)!==null&&n[t.id]?null:"0";return i},e.prototype.bindResize=function(){var t=this,a=t.config,n=t.state,i=Un(a.resize_timer),r=[];r.push(function(){return j(a.onresize,t.api)}),a.resize_auto&&r.push(function(){n.resizing=!0,a.legend_show&&(t.updateSizes(),t.updateLegend()),t.api.flush(!1)}),r.push(function(){j(a.onresized,t.api),n.resizing=!1}),r.forEach(function(o){return i.add(o)}),t.resizeFunction=i,$.addEventListener("resize",t.resizeFunction=i)},e.prototype.callPluginHook=function(t){for(var a=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];this.config.plugins.forEach(function(r){t==="$beforeInit"&&(r.$$=a,a.api.plugins.push(r)),r[t].apply(r,n)})},e}();ot(Ft.prototype,[Jn,Qn,ti,ni,ai,si,ci,ei,li,ui,di,hi,gi,fi,pi,_i,mi,yi,bi,Ti]);function wi(e){var t=this.config,a,n,i,r=function(){var o=n.shift();if(o&&a&&Tt(a)&&o in a)return a=a[o],r();if(!o)return a};Object.keys(t).forEach(function(o){a=e,n=o.split("_"),i=r(),N(i)&&(t[o]=i)}),this.api&&(this.state.orgConfig=e)}var Ai={resize:function(e){var t=this.internal,a=t.config,n=t.state;n.rendered&&(a.size_width=e?e.width:null,a.size_height=e?e.height:null,n.resizing=!0,this.flush(!1),t.resizeFunction())},flush:function(e){var t,a,n=this.internal,i=n.state,r=n.$el.zoomResetBtn;i.rendered?(i.resizing?(t=n.brush)===null||t===void 0||t.updateResize():(a=n.axis)===null||a===void 0||a.setOrient(),r?.style("display","none"),n.scale.zoom=null,e?n.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withLegend:!0}):n.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1}),!i.resizing&&n.brush&&(n.brush.getSelection().call(n.brush.move),n.unselectRect())):n.initToRender(!0)},destroy:function(){var e=this,t=this.internal,a=t.$el,n=a.chart,i=a.style,r=a.svg;if(J(t)){t.callPluginHook("$willDestroy"),t.charts.splice(t.charts.indexOf(this),1),t.unbindAllEvents(),r.select("*").interrupt(),t.resizeFunction.clear(),$.removeEventListener("resize",t.resizeFunction),n.classed("bb",!1).style("position",null).selectChildren().remove(),i&&i.parentNode.removeChild(i),Object.keys(this).forEach(function(s){s==="internal"&&Object.keys(t).forEach(function(c){t[c]=null}),e[s]=null,delete e[s]});for(var o in this)this[o]=function(){}}return null},config:function(e,t,a){var n=this.internal,i=n.config,r=n.state,o=e?.replace(/\./g,"_"),s;return e&&o in i?N(t)?(i[o]=t,s=t,a&&this.flush()):s=i[o]:(arguments.length===0||Xt(e))&&(s=r.orgConfig),s}},ki={color:function(e){return this.internal.color(e)}},xa=function(e){var t=this.internal.data.targets;if(!rt(e)){var a=B(e)?e:[e];return t.filter(function(n){return a.some(function(i){return i===n.id})})}return t};ot(xa,{shown:function(e){return this.internal.filterTargetsToShow(this.data(e))},values:function(e,t){t===void 0&&(t=!0);var a=null;if(e){var n=this.data(e);B(n)&&(a=[],n.forEach(function(i){var r=i.values.map(function(o){return o.value});t?a=a.concat(r):a.push(r)}))}return a},names:function(e){var t=this.internal;return t.updateDataAttributes("names",e)},colors:function(e){return this.internal.updateDataAttributes("colors",e)},axes:function(e){return this.internal.updateDataAttributes("axes",e)},min:function(){return this.internal.getMinMaxData().min},max:function(){return this.internal.getMinMaxData().max}});var Si={data:xa},Ri=function(e){var t;return(t=$.btoa)===null||t===void 0?void 0:t.call($,encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(a,n){return String.fromCharCode(Number("0x".concat(n)))}))};function Ci(e,t,a){var n=t||a,i=n.width,r=n.height,o=new XMLSerializer,s=e.cloneNode(!0),c=Cn(It(it.styleSheets)).filter(function(g){return g.cssText}).map(function(g){return g.cssText});s.setAttribute("xmlns",ce.xhtml),s.style.margin="0",s.style.padding="0",t.preserveFontStyle&&s.querySelectorAll("text").forEach(function(g){g.innerHTML=""});var l=o.serializeToString(s),u=it.createElement("style");u.appendChild(it.createTextNode(c.join(`
`)));var d=o.serializeToString(u),h='<svg xmlns="'.concat(ce.svg,'" width="').concat(i,'" height="').concat(r,`" 
		viewBox="0 0 `).concat(a.width," ").concat(a.height,`" 
		preserveAspectRatio="`).concat(t?.preserveAspectRatio===!1?"none":"xMinYMid meet",`">
			<foreignObject width="100%" height="100%">
				`).concat(d,`
				`).concat(l.replace(/(url\()[^#]+/g,"$1"),`
			</foreignObject></svg>`).replace(`/
/g`,"%0A");return"data:image/svg+xml;base64,".concat(Ri(h))}function Li(e,t){var a=t.top,n=t.left,i=e.getBBox(),r=i.x,o=i.y,s=e.getScreenCTM(),c=s.a,l=s.b,u=s.c,d=s.d,h=s.e,g=s.f,f=e.getBoundingClientRect(),p=f.width,v=f.height;return{x:c*r+u*o+h-n,y:l*r+d*o+g-a+(v-Math.round(v/4)),width:p,height:v}}function Ei(e){var t=e.getBoundingClientRect(),a=t.left,n=t.top,i=function(o){return o.textContent||o.childElementCount},r=[];return It(e.querySelectorAll("text")).filter(i).forEach(function(o){var s=function(l){var u,d=$.getComputedStyle(l),h=d.fill,g=d.fontFamily,f=d.fontSize,p=d.textAnchor,v=d.transform,x=Li(l,{left:a,top:n}),_=x.x,m=x.y,y=x.width,T=x.height;return u={},u[l.textContent]={x:_,y:m,width:y,height:T,fill:h,fontFamily:g,fontSize:f,textAnchor:p,transform:v},u};if(o.childElementCount>1){var c=[];return It(o.querySelectorAll("tspan")).filter(i).forEach(function(l){r.push(s(l))}),c}else r.push(s(o))}),r}function Ii(e,t){t.forEach(function(a){Object.keys(a).forEach(function(n){var i=a[n],r=i.x,o=i.y,s=i.width,c=i.height,l=i.fill,u=i.fontFamily,d=i.fontSize,h=i.transform;if(e.save(),e.font="".concat(d," ").concat(u),e.fillStyle=l,h==="none")e.fillText(n,r,o);else{var g=h.replace(/(matrix|\(|\))/g,"").split(",");g.splice(4).every(function(f){return+f==0})?(g.push(r+s-s/4),g.push(o-c+c/3)):(g.push(r),g.push(o)),e.transform.apply(e,g),e.fillText(n,0,0)}e.restore()})})}var Oi={export:function(e,t){var a=this,n=this.internal,i=n.state,r=n.$el,o=r.chart,s=r.svg,c=i.current,l=c.width,u=c.height,d=Yt({width:l,height:u,preserveAspectRatio:!0,preserveFontStyle:!1,mimeType:"image/png"},e),h=Ci(o.node(),d,{width:l,height:u}),g=d.preserveFontStyle?Ei(s.node()):[];if(t&&D(t)){var f=new Image;f.crossOrigin="Anonymous",f.onload=function(){var p=it.createElement("canvas"),v=p.getContext("2d");p.width=d.width||l,p.height=d.height||u,v.drawImage(f,0,0),g.length&&(Ii(v,g),g.length=0),t.bind(a)(p.toDataURL(d.mimeType))},f.src=h}return h}},Pi={focus:function(e){var t=this.internal,a=t.state,n=t.mapToTargetIds(e),i=t.$el.svg.selectAll(t.selectorTargets(n.filter(t.isTargetToShow,t)));this.revert(),this.defocus(),i.classed(U.focused,!0).classed(U.defocused,!1),t.hasArcType()&&!a.hasRadar&&(t.expandArc(n),t.hasType("gauge")&&t.markOverlapped(e,t,".".concat(dt.gaugeValue))),t.toggleFocusLegend(n,!0),a.focusedTargetIds=n,a.defocusedTargetIds=a.defocusedTargetIds.filter(function(r){return n.indexOf(r)<0})},defocus:function(e){var t=this.internal,a=t.state,n=t.mapToTargetIds(e),i=t.$el.svg.selectAll(t.selectorTargets(n.filter(t.isTargetToShow,t)));i.classed(U.focused,!1).classed(U.defocused,!0),t.hasArcType(null,["polar"])&&(t.unexpandArc(n),t.hasType("gauge")&&t.undoMarkOverlapped(t,".".concat(dt.gaugeValue))),t.toggleFocusLegend(n,!1),a.focusedTargetIds=a.focusedTargetIds.filter(function(r){return n.indexOf(r)<0}),a.defocusedTargetIds=n},revert:function(e){var t=this.internal,a=t.config,n=t.state,i=t.$el,r=t.mapToTargetIds(e),o=i.svg.selectAll(t.selectorTargets(r));o.classed(U.focused,!1).classed(U.defocused,!1),t.hasArcType(null,["polar"])&&t.unexpandArc(r),a.legend_show&&(t.showLegend(r.filter(t.isLegendToShow.bind(t))),i.legend.selectAll(t.selectorLegends(r)).filter(function(){return L(this).classed(U.legendItemFocused)}).classed(U.legendItemFocused,!1)),n.focusedTargetIds=[],n.defocusedTargetIds=[]}},Di={show:function(e){var t=this.internal;t.showLegend(t.mapToTargetIds(e)),t.updateAndRedraw({withLegend:!0})},hide:function(e){var t=this.internal;t.hideLegend(t.mapToTargetIds(e)),t.updateAndRedraw({withLegend:!0})}},zi={legend:Di},Mi={load:function(e){var t=this.internal,a=t.config;e.xs&&t.addXs(e.xs),"names"in e&&this.data.names(e.names),"classes"in e&&Object.keys(e.classes).forEach(function(n){a.data_classes[n]=e.classes[n]}),"categories"in e&&t.axis.isCategorized()&&(a.axis_x_categories=e.categories),"axes"in e&&Object.keys(e.axes).forEach(function(n){a.data_axes[n]=e.axes[n]}),"colors"in e&&Object.keys(e.colors).forEach(function(n){a.data_colors[n]=e.colors[n]}),"unload"in e&&e.unload!==!1?t.unload(t.mapToTargetIds(e.unload===!0?null:e.unload),function(){ra(function(){return t.loadFromArgs(e)})}):(t.api.tooltip.hide(),t.loadFromArgs(e))},unload:function(e){var t=this.internal,a=e||{};B(a)?a={ids:a}:Q(a)&&(a={ids:[a]});var n=t.mapToTargetIds(a.ids);t.unload(n,function(){t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),t.cache.remove(n),va.call(t,a.done,a.resizeAfter)})}};function Ne(e,t,a){var n=this,i=this.internal,r=i.mapToTargetIds(t),o=i.state.hiddenTargetIds.map(function(l){return r.indexOf(l)>-1&&l}).filter(Boolean);i.state.toggling=!0,i["".concat(e?"remove":"add","HiddenTargetIds")](r);var s=i.$el.svg.selectAll(i.selectorTargets(r)),c=e?null:"0";e&&o.length&&(s.style("display",null),j(i.config.data_onshown,this,o)),i.$T(s).style("opacity",c,"important").call(Re,function(){!e&&o.length===0&&(s.style("display","none"),j(i.config.data_onhidden,n,r)),s.style("opacity",c)}),a.withLegend&&i["".concat(e?"show":"hide","Legend")](r),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),i.state.toggling=!1}var Xi={show:function(e,t){t===void 0&&(t={}),Ne.call(this,!0,e,t)},hide:function(e,t){t===void 0&&(t={}),Ne.call(this,!1,e,t)},toggle:function(e,t){var a=this;t===void 0&&(t={});var n=this.internal,i={show:[],hide:[]};n.mapToTargetIds(e).forEach(function(r){return i[n.isTargetToShow(r)?"hide":"show"].push(r)}),i.show.length&&this.show(i.show,t),i.hide.length&&setTimeout(function(){return a.hide(i.hide,t)},0)}},$i={show:function(e){var t=this.internal,a=t.$el,n=t.config,i=t.state,r=i.eventReceiver,o=i.hasTreemap,s=i.inputType,c,l;if(e.mouse&&(l=e.mouse),e.data){var u=e.data,d=t.getYScaleById(u.id)(u.value);o&&u.id?r.rect=a.main.select("".concat(t.selectorTarget(u.id,void 0,"rect"))):t.isMultipleX()?l=[t.xx(u),d]:(n.tooltip_grouped||(l=[0,d]),c=P(u.index)?u.index:t.getIndexByX(u.x))}else N(e.x)?c=t.getIndexByX(e.x):N(e.index)&&(c=e.index);(s==="mouse"?["mouseover","mousemove"]:["touchstart"]).forEach(function(h){t.dispatchEvent(h,c,l)})},hide:function(){var e,t,a,n=this.internal,i=n.state.inputType,r=n.$el.tooltip,o=r?.datum();if(o){var s=JSON.parse(o.current)[0].index;(i==="mouse"?["mouseout"]:["touchend"]).forEach(function(c){n.dispatchEvent(c,s)})}i==="touch"&&n.callOverOutForTouch(),n.hideTooltip(!0),(e=n.hideGridFocus)===null||e===void 0||e.call(n),(t=n.unexpandCircles)===null||t===void 0||t.call(n),(a=n.expandBarTypeShapes)===null||a===void 0||a.call(n,!1)}},Fi={tooltip:$i},Wt=function(){function e(t){this.plugins=[];var a=new Ft(this);this.internal=a,function n(i,r,o){Object.keys(i).forEach(function(s){var c=D(i[s]),l=r!==o,u=J(i[s]),d=u&&Object.keys(i[s]).length>0;c&&(!l&&d||l)?r[s]=i[s].bind(o):u&&!c?r[s]={}:r[s]=i[s],d&&n(i[s],r[s],o)})}(e.prototype,this,this),wi.call(a,t),a.beforeInit(),a.init()}return e}();ot(Wt.prototype,[Ai,ki,Si,Oi,Pi,zi,Mi,Xi,Fi]);function Ge(e,t,a){var n=e.config,i=function(r,o){var s=I(o)?o:o===!1?void 0:null;s!==null&&(n["axis_".concat(r,"_").concat(t)]=s)};N(a)&&(Tt(a)?Object.keys(a).forEach(function(r){i(r,a[r])}):(I(a)||a===!1)&&["y","y2"].forEach(function(r){i(r,a)}),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))}function Ve(e,t){var a=e.config;return{x:a["axis_x_".concat(t)],y:a["axis_y_".concat(t)],y2:a["axis_y2_".concat(t)]}}var Bi={labels:function(e){var t=this.internal,a;return e&&(Object.keys(e).forEach(function(n){t.axis.setLabelText(n,e[n])}),t.axis.updateLabels()),["x","y","y2"].forEach(function(n){var i=t.axis.getLabelText(n);i&&(!a&&(a={}),a[n]=i)}),a},min:function(e){var t=this.internal;return P(e)||e===!1?Ge(t,"min",e):Ve(t,"min")},max:function(e){var t=this.internal;return P(e)||e===!1?Ge(t,"max",e):Ve(t,"max")},range:function(e){var t=this.axis;if(arguments.length){var a=e.min,n=e.max;N(n)&&t.max(n),N(a)&&t.min(a)}else return{max:t.max(),min:t.min()}}},Ni={axis:Bi},Gi={category:function(e,t){var a=this.internal,n=a.config;return arguments.length>1&&(n.axis_x_categories[e]=t,a.redraw()),n.axis_x_categories[e]},categories:function(e){var t=this.internal,a=t.config;return arguments.length&&(a.axis_x_categories=e,t.redraw()),a.axis_x_categories}};function Le(e,t){var a=this.internal,n=a.config,i=n.transition_duration&&Qt(),r="grid_".concat(t,"_lines");return e&&(n[r]=e,a.updateGrid(),a.redrawGrid(i)),n[r]}function _a(e,t){var a="grid_".concat(t,"_lines");return Le.bind(this)(this.internal.config[a].concat(e||[]),t)}function ma(e,t){this.internal.removeGridLines(e,t)}var ya=function(e){return Le.bind(this)(e,"x")};ot(ya,{add:function(e){return _a.bind(this)(e,"x")},remove:function(e){return ma.bind(this)(e,!0)}});var ba=function(e){return Le.bind(this)(e,"y")};ot(ba,{add:function(e){return _a.bind(this)(e,"y")},remove:function(e){return ma.bind(this)(e,!1)}});var Vi={xgrids:ya,ygrids:ba},Yi={groups:function(e){var t=this.internal,a=t.config;return rt(e)||(a.data_groups=e,t.redraw()),a.data_groups}};function Ta(e,t){t===void 0&&(t=!1);var a=this.internal,n=a.config,i=n.transition_duration&&Qt();return e?(n.regions=t?n.regions.concat(e):e,a.updateRegion(),a.redrawRegion(i),t?n.regions:e):n.regions}var wa=function(e){return Ta.bind(this)(e)};ot(wa,{add:function(e){return Ta.bind(this)(e,!0)},remove:function(e){var t=this.internal,a=t.config,n=t.$T,i=e||{},r=Lt(i,"classes",[Jt.region]),o=t.$el.main.select(".".concat(Jt.regions)).selectAll(r.map(function(s){return".".concat(s)}));return n(o).style("opacity","0").remove(),o=a.regions,Object.keys(i).length?(o=o.filter(function(s){var c=!1;return s.class?(s.class.split(" ").forEach(function(l){r.indexOf(l)>=0&&(c=!0)}),!c):!0}),a.regions=o):a.regions=[],o}});var Hi={regions:wa},Wi={x:function(e){var t=this.internal,a=t.axis,n=t.data,i=a.isCustomX()&&a.isCategorized();return B(e)&&(i?this.categories(e):(t.updateTargetX(n.targets,e),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))),i?this.categories():n.xs},xs:function(e){var t=this.internal;return F(e)&&(t.updateTargetXs(t.data.targets,e),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs}},Ui={flow:function(e){var t=this.internal,a;(e.json||e.rows||e.columns)&&t.convertData(e,function(i){a=i,n()});function n(){var i,r=0,o=0,s,c;if(!(t.state.redrawing||!a||!Qt())){var l=[],u=t.getMaxDataCount(),d=t.convertDataToTargets(a,!0),h=t.axis.isTimeSeries();t.data.targets.forEach(function(p){for(var v=!1,x=0;x<d.length;x++)if(p.id===d[x].id){v=!0,p.values[p.values.length-1]&&(o=p.values[p.values.length-1].index+1),r=d[x].values.length;for(var _=0;_<r;_++)d[x].values[_].index=o+_,h||(d[x].values[_].x=o+_);p.values=p.values.concat(d[x].values),d.splice(x,1);break}!v&&l.push(p.id)}),t.data.targets.forEach(function(p){for(var v=0;v<l.length;v++)if(p.id===l[v]){o=p.values[p.values.length-1].index+1;for(var x=0;x<r;x++)p.values.push({id:p.id,index:o+x,x:h?t.getOtherTargetX(o+x):o+x,value:null})}}),t.data.targets.length&&d.forEach(function(p){for(var v=[],x=t.data.targets[0].values[0].index;x<o;x++)v.push({id:p.id,index:x,x:h?t.getOtherTargetX(x):x,value:null});p.values.forEach(function(_){_.index+=o,h||(_.x+=o)}),p.values=v.concat(p.values)}),t.data.targets=t.data.targets.concat(d);var g=t.data.targets[0],f=g.values[0];N(e.to)?(r=0,c=h?mt.call(t,e.to):e.to,g.values.forEach(function(p){p.x<c&&r++})):N(e.length)&&(r=e.length),u?u===1&&h&&(s=(g.values[g.values.length-1].x-f.x)/2,i=[new Date(+f.x-s),new Date(+f.x+s)]):(h?s=g.values.length>1?g.values[g.values.length-1].x-f.x:f.x-t.getXDomain(t.data.targets)[0]:s=1,i=[f.x-s,f.x]),i&&t.updateXDomain(null,!0,!0,!1,i),t.updateTargets(t.data.targets),t.redraw({flow:{index:f.index,length:r,duration:P(e.duration)?e.duration:t.config.transition_duration,done:e.done,orgDataCount:u},withLegend:!0,withTransition:u>1,withTrimXDomain:!1,withUpdateXAxis:!0})}}}},Ye=function(){function e(t){var a=Mt(),n=t.config,i=t.params;this.owner=t,this.config=n,this.scale=a,(n.noTransition||!i.config.transition_duration)&&(n.withoutTransition=!0),n.range=this.scaleExtent((i.orgXScale||a).range())}return e.getSizeFor1Char=function(t){var a={w:5.5,h:11.5};return!t.empty()&&t.select("text").text("0").call(function(n){try{var i=n.node().getBBox(),r=i.width,o=i.height;r&&o&&(a.w=r,a.h=o)}catch{}finally{n.text("")}}),this.getSizeFor1Char=function(){return a},a},e.prototype.getTickTransformSetter=function(t){var a=this.config,n=t==="x"?function(i){return"translate(".concat(i+a.tickOffset,",0)")}:function(i){return"translate(0,".concat(i,")")};return function(i,r){i.attr("transform",function(o){return P(o)?n(Math.ceil(r(o))):null})}},e.prototype.scaleExtent=function(t){var a=t[0],n=t[t.length-1];return a<n?[a,n]:[n,a]},e.prototype.generateTicks=function(t,a){var n=this.owner.params.tickStepSize,i=t.domain(),r=i[0],o=i[1],s=[];if(a&&n)for(var c=Math.round(r);c<=o;)s.push(c),c+=n;else if(t.ticks){var l=this.config.tickArguments;if(t.type==="log"&&!l){var u=Mt("_log").domain([r>0?r:1,o]).range(t.range());s=u.ticks();for(var d=o.toFixed().length;s.length>15;d--)s=u.ticks(d);s.splice(0,1,r),s.splice(s.length-1,1,o)}else s=t.ticks.apply(t,this.config.tickArguments||[]);s=s.map(function(g){var f=Q(g)&&I(g)&&!isNaN(g)&&Math.round(g*10)/10||g;return f})}else{for(var h=Math.ceil(r);h<o;h++)s.push(h);s.length>0&&s[0]>0&&s.unshift(s[0]-(s[1]-s[0]))}return s},e.prototype.copyScale=function(){var t=this.scale.copy();return t.domain().length||t.domain(this.scale.domain()),t.type=this.scale.type,t},e.prototype.textFormatted=function(t){var a=this.config.tickFormat,n=/\d+\.\d+0{5,}\d$/.test(t)?+String(t).replace(/0+\d$/,""):t,i=a?a(n):n;return N(i)?i:""},e.prototype.transitionise=function(t){var a=this.config,n=t;if(a.withoutTransition)n=t.interrupt();else if(a.transition||!this.owner.params.noTransition)try{n=t.transition(a.transition)}catch{}return n},e}(),ji=function(){function e(t){t===void 0&&(t={});var a={innerTickSize:6,outerTickSize:t.outerTick?6:0,orient:"bottom",range:[],tickArguments:null,tickCentered:null,tickCulling:!0,tickFormat:null,tickLength:9,tickOffset:0,tickPadding:3,tickValues:null,transition:null,noTransition:t.noTransition};a.tickLength=Math.max(a.innerTickSize,0)+a.tickPadding,this.config=a,this.params=t,this.helper=new Ye(this)}return e.prototype.create=function(t){var a=this,n=a.config,i=a.helper,r=a.params,o=i.scale,s=n.orient,c=this.splitTickText.bind(a),l=/^(left|right)$/.test(s),u=/^(top|bottom)$/.test(s),d=i.getTickTransformSetter(u?"x":"y"),h=d===i.axisX?"y":"x",g=/^(top|left)$/.test(s)?-1:1,f=r.tickTextRotate;this.config.range=o.rangeExtent?o.rangeExtent():i.scaleExtent((r.orgXScale||o).range());var p=n.innerTickSize,v=n.tickLength,x=n.range,_=r.id,m=_&&/^(x|y|y2)$/.test(_)?r.config["axis_".concat(_,"_tick_text_position")]:{x:0,y:0},y=_==="subX"?"subchart_axis_x":"axis_".concat(_),T=r.config["".concat(y,"_show")],b={tick:T?r.config["".concat(y,"_tick_show")]:!1,text:T?r.config["".concat(y,"_tick_text_show")]:!1},w;t.each(function(){var A=L(this),S=this.__chart__||o,k=i.copyScale();w=A,this.__chart__=k,n.tickOffset=r.isCategory?Math.ceil((k(1)-k(0))/2):0;var O=A.selectAll(".domain").data([0]);if(O.enter().append("path").attr("class","domain").merge(O).attr("d",function(){var Y=n.outerTickSize*g;return u?"M".concat(x[0],",").concat(Y,"V0H").concat(x[1],"V").concat(Y):"M".concat(Y,",").concat(x[0],"H0V").concat(x[1],"H").concat(Y)}),b.tick||b.text){var q=n.tickValues||i.generateTicks(k,l);a.generatedTicks=q;var R=A.selectAll(".tick").data(q,k),E=R.enter().insert("g",".domain").attr("class","tick"),tt=R.exit().remove();R=E.merge(R),b.tick&&E.append("line"),b.text&&E.append("text");var nt=Ye.getSizeFor1Char(R),ht=[],G=R.select("text").selectAll("tspan").data(function(Y,yt){var bt=r.tickMultiline?c(Y,k,q,l,nt.w):B(i.textFormatted(Y))?i.textFormatted(Y).concat():[i.textFormatted(Y)];return ht[yt]=bt.length,bt.map(function(At){return{index:yt,splitted:At}})});G.exit().remove(),G=G.enter().append("tspan").merge(G).text(function(Y){return Y.splitted}),G.attr("x",u?0:v*g).attr("dx",function(){var Y=0;return/(top|bottom)/.test(s)&&f&&(Y=8*Math.sin(Math.PI*(f/180))*(s==="top"?-1:1)),Y+(m.x||0)}()).attr("dy",function(Y,yt){var bt=".71em",At=0;return s!=="top"&&(At=nt.h,yt===0&&(At=l?-((ht[Y.index]-1)*(nt.h/2)-3):m.y===0?bt:0)),I(At)&&m.y?At+m.y:At||bt});var Bt=R.select("line"),K=R.select("text");if(E.select("line").attr("".concat(h,"2"),p*g),E.select("text").attr(h,v*g),a.setTickLineTextPosition(Bt,K),r.tickTitle){var gt=K.select("title");(gt.empty()?K.append("title"):gt).text(function(Y){return r.tickTitle[Y]})}if(k.bandwidth){var wt=k,Nt=wt.bandwidth()/2;S=function(Y){return wt(Y)+Nt},k=S}else S.bandwidth?S=k:d(tt,k);R=r.owner.state.flowing?i.transitionise(R):r.owner.$T(R),d(E,S),d(R.style("opacity",null),k)}}),this.g=w},e.prototype.getGeneratedTicks=function(t){var a,n=((a=this.generatedTicks)===null||a===void 0?void 0:a.length)-1,i=this.generatedTicks;if(n>t){var r=Math.round(n/t+.1);i=this.generatedTicks.map(function(o,s){return s%r===0?o:null}).filter(function(o){return o!==null}).splice(0,t)}return i},e.prototype.getTickXY=function(){var t=this.config,a={x:0,y:0};return this.params.isCategory&&(a.x=t.tickCentered?0:t.tickOffset,a.y=t.tickCentered?t.tickOffset:0),a},e.prototype.getTickSize=function(t){var a=this.helper.scale,n=this.config,i=n.innerTickSize,r=n.range,o=a(t)+(n.tickCentered?0:n.tickOffset);return r[0]<o&&o<r[1]?i:0},e.prototype.setTickLineTextPosition=function(t,a){var n=this.getTickXY(),i=this.config,r=i.innerTickSize,o=i.orient,s=i.tickLength,c=i.tickOffset,l=this.params.tickTextRotate,u=function(g){var f=["start","end"];return o==="top"&&f.reverse(),g?f[g>0?0:1]:"middle"},d=function(g){return g?"rotate(".concat(g,")"):null},h=function(g){var f=g/(o==="bottom"?15:23);return g?11.5-2.5*f*(g>0?1:-1):s};switch(o){case"bottom":t.attr("x1",n.x).attr("x2",n.x).attr("y2",this.getTickSize.bind(this)),a.attr("x",0).attr("y",h(l)).style("text-anchor",u(l)).attr("transform",d(l));break;case"top":t.attr("x2",0).attr("y2",-r),a.attr("x",0).attr("y",-h(l)*2).style("text-anchor",u(l)).attr("transform",d(l));break;case"left":t.attr("x2",-r).attr("y1",n.y).attr("y2",n.y),a.attr("x",-s).attr("y",c).style("text-anchor","end");break;case"right":t.attr("x2",r).attr("y2",0),a.attr("x",s).attr("y",0).style("text-anchor","start")}},e.prototype.splitTickText=function(t,a,n,i,r){var o=this.params,s=this.helper.textFormatted(t),c=Q(s)&&s.indexOf(`
`)>-1?s.split(`
`):[];if(c.length)return c;if(B(s))return s;var l=o.tickWidth;(!l||l<=0)&&(l=i?95:o.isCategory?Math.ceil(o.isInverted?a(n[0])-a(n[1]):a(n[1])-a(n[0]))-12:110);function u(d,h){for(var g,f,p,v=1;v<h.length;v++)if(h.charAt(v)===" "&&(f=v),g=h.substr(0,v+1),p=r*g.length,l<p)return u(d.concat(h.substr(0,f||v)),h.slice(f?f+1:v));return d.concat(h)}return u(c,String(s))},e.prototype.scale=function(t){return arguments.length?(this.helper.scale=t,this):this.helper.scale},e.prototype.orient=function(t){return arguments.length?(this.config.orient=t in{top:1,right:1,bottom:1,left:1}?String(t):"bottom",this):this.config.orient},e.prototype.tickFormat=function(t){var a=this.config;return arguments.length?(a.tickFormat=t,this):a.tickFormat},e.prototype.tickCentered=function(t){var a=this.config;return arguments.length?(a.tickCentered=t,this):a.tickCentered},e.prototype.tickOffset=function(){return this.config.tickOffset},e.prototype.tickInterval=function(t){var a=this,n=this.config,i=n.outerTickSize,r=n.tickOffset,o=n.tickValues,s;if(this.params.isCategory)s=r*2;else{var c=this.g.select("path.domain").node().getTotalLength()-i*2;s=c/(t||this.g.selectAll("line").size());var l=o?o.map(function(u,d,h){var g=d+1;return g<h.length?a.helper.scale(h[g])-a.helper.scale(u):null}).filter(Boolean):[];s=Math.min.apply(Math,ct(ct([],l,!1),[s],!1))}return s===1/0?0:s},e.prototype.ticks=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var n=this.config;return t.length?(n.tickArguments=It(t),this):n.tickArguments},e.prototype.tickCulling=function(t){var a=this.config;return arguments.length?(a.tickCulling=t,this):a.tickCulling},e.prototype.tickValues=function(t){var a=this,n=this.config;if(D(t))n.tickValues=function(){return t(a.helper.scale.domain())};else{if(!arguments.length)return n.tickValues;n.tickValues=t}return this},e.prototype.setTransition=function(t){return this.config.transition=t,this},e}(),Zi={getAxisInstance:function(){return this.axis||new qi(this)}},qi=function(){function e(t){this.axesList={},this.tick={x:null,y:null,y2:null},this.xs=[],this.orient={x:"bottom",y:"left",y2:"right",subX:"bottom"},this.owner=t,this.setOrient()}return e.prototype.getAxisClassName=function(t){return"".concat(et.axis," ").concat(et["axis".concat(ut(t))])},e.prototype.isHorizontal=function(t,a){var n=t.config.axis_rotated;return a?n:!n},e.prototype.isCategorized=function(){var t=this.owner,a=t.config,n=t.state;return a.axis_x_type.indexOf("category")>=0||n.hasRadar},e.prototype.isCustomX=function(){var t=this.owner.config;return!this.isTimeSeries()&&(t.data_x||J(t.data_xs))},e.prototype.isTimeSeries=function(t){return t===void 0&&(t="x"),this.owner.config["axis_".concat(t,"_type")]==="timeseries"},e.prototype.isLog=function(t){return t===void 0&&(t="x"),this.owner.config["axis_".concat(t,"_type")]==="log"},e.prototype.isTimeSeriesY=function(){return this.isTimeSeries("y")},e.prototype.getAxisType=function(t){t===void 0&&(t="x");var a="linear";return this.isTimeSeries(t)?a=this.owner.config.axis_x_localtime?"time":"utc":this.isLog(t)&&(a="log"),a},e.prototype.init=function(){var t=this,a=this.owner,n=a.config,i=a.$el,r=i.main,o=i.axis,s=a.state.clip,c=n.axis_rotated,l=["x","y"];n.axis_y2_show&&l.push("y2"),l.forEach(function(u){var d=t.getAxisClassName(u),h=et["axis".concat(u.toUpperCase(),"Label")];o[u]=r.append("g").attr("class",d).attr("clip-path",function(){var g=null;return u==="x"?g=s.pathXAxis:u==="y"&&(g=s.pathYAxis),g}).attr("transform",a.getTranslate(u)).style("visibility",n["axis_".concat(u,"_show")]?null:"hidden"),o[u].append("text").attr("class",h).attr("transform",["rotate(-90)",null][u==="x"?+!c:+c]).style("text-anchor",function(){return t.textAnchorForAxisLabel(u)}),t.generateAxes(u)})},e.prototype.setOrient=function(){var t=this.owner,a=t.config,n=a.axis_rotated,i=a.axis_y_inner,r=a.axis_y2_inner;this.orient={x:n?"left":"bottom",y:n?i?"top":"bottom":i?"right":"left",y2:n?r?"bottom":"top":r?"left":"right",subX:n?"left":"bottom"}},e.prototype.generateAxes=function(t){var a=this.owner,n=a.config,i=[],r=n["axis_".concat(t,"_axes")],o=n.axis_rotated,s;t==="x"?s=o?Oe:Pe:t==="y"?s=o?Pe:Oe:t==="y2"&&(s=o?dn:hn),r.length&&r.forEach(function(c){var l=c.tick||{},u=a.scale[t].copy();c.domain&&u.domain(c.domain),i.push(s(u).ticks(l.count).tickFormat(D(l.format)?l.format.bind(a.api):function(d){return d}).tickValues(l.values).tickSizeOuter(l.outer===!1?0:6))}),this.axesList[t]=i},e.prototype.updateAxes=function(){var t=this,a=this.owner,n=a.config,i=a.$el.main,r=a.$T;Object.keys(this.axesList).forEach(function(o){var s=n["axis_".concat(o,"_axes")],c=a.scale[o].copy(),l=c.range();t.axesList[o].forEach(function(u,d){var h=u.scale().range();l.every(function(p,v){return p===h[v]})||u.scale().range(l);var g="".concat(t.getAxisClassName(o),"-").concat(d+1),f=i.select(".".concat(g.replace(/\s/,".")));f.empty()?f=i.append("g").attr("class",g).style("visibility",n["axis_".concat(o,"_show")]?null:"hidden").call(u):(s[d].domain&&c.domain(s[d].domain),r(f).call(u.scale(c))),f.attr("transform",a.getTranslate(o,d+1))})})},e.prototype.setAxis=function(t,a,n,i){var r=this.owner;t!=="subX"&&(this.tick[t]=this.getTickValues(t)),this[t]=this.getAxis(t,a,n,t==="x"&&(r.scale.zoom||r.config.subchart_show||r.state.resizing)?!0:i)},e.prototype.getAxis=function(t,a,n,i,r){var o=this.owner,s=o.config,c=/^(x|subX)$/.test(t),l=c?"x":t,u=c&&this.isCategorized(),d=this.orient[t],h=r?0:o.getAxisTickRotate(l),g;if(c)g=t==="subX"?o.format.subXAxisTick:o.format.xAxisTick;else{var f=s["axis_".concat(t,"_tick_format")];D(f)&&(g=f.bind(o.api))}var p=this.tick[l],v=Yt({outerTick:n,noTransition:i,config:s,id:t,tickTextRotate:h,owner:o},c&&{isCategory:u,isInverted:s.axis_x_inverted,tickMultiline:s.axis_x_tick_multiline,tickWidth:s.axis_x_tick_width,tickTitle:u&&s.axis_x_tick_tooltip&&o.api.categories(),orgXScale:o.scale.x});c||(v.tickStepSize=s["axis_".concat(l,"_tick_stepSize")]);var x=new ji(v).scale(c&&o.scale.zoom||a).orient(d);if(c&&this.isTimeSeries()&&p&&!D(p)){var _=mt.bind(o);p=p.map(function(y){return _(y)})}else!c&&this.isTimeSeriesY()&&(x.ticks(s.axis_y_tick_time_value),p=null);p&&x.tickValues(p),x.tickFormat(g||!c&&o.isStackNormalized()&&function(y){return"".concat(y,"%")}),u&&(x.tickCentered(s.axis_x_tick_centered),Xt(s.axis_x_tick_culling)&&(s.axis_x_tick_culling=!1));var m=s["axis_".concat(l,"_tick_count")];return m&&x.ticks(m),x},e.prototype.updateXAxisTickValues=function(t,a){var n,i=this.owner,r=i.config,o=r.axis_x_tick_fit,s=r.axis_x_tick_count,c;return(o||s&&o)&&(c=i.mapTargetsToUniqueXs(t),this.isCategorized()&&s>c.length&&(s=c.length),c=this.generateTickValues(c,s,this.isTimeSeries())),a?a.tickValues(c):this.x&&(this.x.tickValues(c),(n=this.subX)===null||n===void 0||n.tickValues(c)),c},e.prototype.getId=function(t){var a=this.owner,n=a.config,i=a.scale,r=n.data_axes[t];return(!r||!i[r])&&(r="y"),r},e.prototype.getXAxisTickFormat=function(t){var a=this.owner,n=a.config,i=a.format,r=t&&n.subchart_axis_x_tick_format||n.axis_x_tick_format,o=this.isTimeSeries(),s=this.isCategorized(),c;return r?D(r)?c=r.bind(a.api):o&&(c=function(l){return l?i.axisTime(r)(l):""}):c=o?i.defaultAxisTime:s?a.categoryName:function(l){return l<0?l.toFixed(0):l},D(c)?function(l){return c.apply(a,s?[l,a.categoryName(l)]:[l])}:c},e.prototype.getTickValues=function(t){var a=this.owner,n=a.config["axis_".concat(t,"_tick_values")],i=a["".concat(t,"Axis")];return(D(n)?n.call(a.api):n)||(i?i.tickValues():void 0)},e.prototype.getLabelOptionByAxisId=function(t){return this.owner.config["axis_".concat(t,"_label")]},e.prototype.getLabelText=function(t){var a=this.getLabelOptionByAxisId(t);return Q(a)?a:a?a.text:null},e.prototype.setLabelText=function(t,a){var n=this.owner,i=n.config,r=this.getLabelOptionByAxisId(t);Q(r)?i["axis_".concat(t,"_label")]=a:r&&(r.text=a)},e.prototype.getLabelPosition=function(t,a){var n=this.owner.config.axis_rotated,i=this.getLabelOptionByAxisId(t),r=Tt(i)&&i.position?i.position:a[+!n],o=function(s){return!!~r.indexOf(s)};return{isInner:o("inner"),isOuter:o("outer"),isLeft:o("left"),isCenter:o("center"),isRight:o("right"),isTop:o("top"),isMiddle:o("middle"),isBottom:o("bottom")}},e.prototype.getAxisLabelPosition=function(t){return this.getLabelPosition(t,t==="x"?["inner-top","inner-right"]:["inner-right","inner-top"])},e.prototype.getLabelPositionById=function(t){return this.getAxisLabelPosition(t)},e.prototype.xForAxisLabel=function(t){var a=this.owner,n=a.state,i=n.width,r=n.height,o=this.getAxisLabelPosition(t),s=o.isMiddle?-r/2:0;return this.isHorizontal(a,t!=="x")?s=o.isLeft?0:o.isCenter?i/2:i:o.isBottom&&(s=-r),s},e.prototype.dxForAxisLabel=function(t){var a=this.owner,n=this.getAxisLabelPosition(t),i=n.isBottom?"0.5em":"0";return this.isHorizontal(a,t!=="x")?i=n.isLeft?"0.5em":n.isRight?"-0.5em":"0":n.isTop&&(i="-0.5em"),i},e.prototype.textAnchorForAxisLabel=function(t){var a=this.owner,n=this.getAxisLabelPosition(t),i=n.isMiddle?"middle":"end";return this.isHorizontal(a,t!=="x")?i=n.isLeft?"start":n.isCenter?"middle":"end":n.isBottom&&(i="start"),i},e.prototype.dyForAxisLabel=function(t){var a=this.owner,n=a.config,i=n.axis_rotated,r=this.getAxisLabelPosition(t).isInner,o=n["axis_".concat(t,"_tick_rotate")]?a.getHorizontalAxisHeight(t):0,s=this.getMaxTickWidth(t),c;if(t==="x"){var l=n.axis_x_height;i?c=r?"1.2em":-25-s:r?c="-0.5em":l?c=l-10:o?c=o-10:c="3em"}else c={y:["-0.5em",10,"3em","1.2em",10],y2:["1.2em",-20,"-2.2em","-0.5em",15]}[t],i?r?c=c[0]:o?c=o*(t==="y2"?-1:1)-c[1]:c=c[2]:c=r?c[3]:(c[4]+(n["axis_".concat(t,"_inner")]?0:s+c[4]))*(t==="y"?-1:1);return c},e.prototype.getMaxTickWidth=function(t,a){var n=this.owner,i=n.config,r=n.state.current,o=n.$el,s=o.svg,c=o.chart,l=r.maxTickWidths[t],u=0;if(a||!i["axis_".concat(t,"_show")]||l.size>0&&n.filterTargetsToShow().length===0)return l.size;if(s){var d=/^y2?$/.test(t),h=n.filterTargetsToShow(n.data.targets),g=n.scale[t].copy().domain(n["get".concat(d?"Y":"X","Domain")](h,t)),f=g.domain(),p=f[0]===f[1]&&f.every(function(T){return T>0}),v=B(l.domain)&&l.domain[0]===l.domain[1]&&l.domain.every(function(T){return T>0});if(p||v)return l.size;l.domain=f,d||l.ticks.splice(0);var x=this.getAxis(t,g,!1,!1,!0),_=i["axis_".concat(t,"_tick_count")],m=i["axis_".concat(t,"_tick_values")];!m&&_&&x.tickValues(this.generateTickValues(f,_,d?this.isTimeSeriesY():this.isTimeSeries())),!d&&this.updateXAxisTickValues(h,x);var y=c.append("svg").style("visibility","hidden").style("position","fixed").style("top","0").style("left","0");x.create(y),y.selectAll("text").each(function(T,b){var w=this.getBoundingClientRect().width;u=Math.max(u,w),d||(l.ticks[b]=w)}),y.remove()}return u>0&&(l.size=u),l.size},e.prototype.getXAxisTickTextY2Overflow=function(t){var a=this.owner,n=a.axis,i=a.config,r=a.state,o=a.getAxisTickRotate("x"),s=o>0&&o<90;if((n.isCategorized()||n.isTimeSeries())&&i.axis_x_tick_fit&&!i.axis_x_tick_culling&&!i.axis_x_tick_multiline&&s){var c=r.current.width-a.getCurrentPaddingLeft(),l=this.getXAxisTickMaxOverflow(o,c-t),u=Math.max(0,l)+t;return Math.min(u,c/2)}return 0},e.prototype.getXAxisTickMaxOverflow=function(t,a){for(var n=this.owner,i=n.axis,r=n.config,o=n.state,s=i.isTimeSeries(),c=o.current.maxTickWidths.x.ticks,l=c.length,u=o.axis.x.padding,d=u.left,h=u.right,g=0,f=l-(s&&r.axis_x_tick_fit?.5:0),p=0;p<l;p++){var v=p+1,x=Math.cos(Math.PI*t/180)*c[p],_=v-(s?1:.5)+d;if(!(_<=0)){var m=a-x,y=m/_,T=f-v,b=h*y,w=T*y+b,A=x-y/2-w;g=Math.max(g,A)}}var S=n.filterTargetsToShow(n.data.targets),k=0;if(!s&&r.axis_x_tick_count<=S.length&&S[0].values.length){var O=Mt(n.axis.getAxisType("x"),0,a-g).domain([d*-1,n.getXDomainMax(n.data.targets)+1+h]);k=Math.ceil((O(1)-O(0))/2)}return g+k},e.prototype.updateLabels=function(t){var a=this,n=this.owner,i=n.$el.main,r=n.$T,o={x:i.select(".".concat(et.axisX," .").concat(et.axisXLabel)),y:i.select(".".concat(et.axisY," .").concat(et.axisYLabel)),y2:i.select(".".concat(et.axisY2," .").concat(et.axisY2Label))};Object.keys(o).filter(function(s){return!o[s].empty()}).forEach(function(s){var c=o[s];r(c,t).attr("x",function(){return a.xForAxisLabel(s)}).attr("dx",function(){return a.dxForAxisLabel(s)}).attr("dy",function(){return a.dyForAxisLabel(s)}).text(function(){return a.getLabelText(s)})})},e.prototype.getPadding=function(t,a,n,i){var r=I(t)?t:t[a];return P(r)?this.owner.convertPixelToScale(/(bottom|top)/.test(a)?"y":"x",r,i):n},e.prototype.generateTickValues=function(t,a,n){var i=t;if(a){var r=D(a)?a():a;if(r===1)i=[t[0]];else if(r===2)i=[t[0],t[t.length-1]];else if(r>2){var o=this.isCategorized(),s=r-2,c=t[0],l=t[t.length-1],u=(l-c)/(s+1),d=void 0;i=[c];for(var h=0;h<s;h++)d=+c+u*(h+1),i.push(n?new Date(d):o?Math.round(d):d);i.push(l)}}return n||(i=i.sort(function(g,f){return g-f})),i},e.prototype.generateTransitions=function(t){var a=this.owner,n=a.$el.axis,i=a.$T,r=["x","y","y2","subX"].map(function(u){return i(n[u],t)}),o=r[0],s=r[1],c=r[2],l=r[3];return{axisX:o,axisY:s,axisY2:c,axisSubX:l}},e.prototype.redraw=function(t,a,n){var i=this,r=this.owner,o=r.config,s=r.$el,c=a?"0":null;["x","y","y2","subX"].forEach(function(l){var u=i[l],d=s.axis[l];u&&d&&(!n&&!o.transition_duration&&(u.config.withoutTransition=!0),d.style("opacity",c),u.create(t["axis".concat(ut(l))]))}),this.updateAxes()},e.prototype.redrawAxis=function(t,a,n,i,r){var o=this,s,c,l,u=this.owner,d=u.config,h=u.scale,g=u.$el,f=!!h.zoom,p;!f&&this.isCategorized()&&t.length===0&&h.x.domain([0,g.axis.x.selectAll(".tick").size()]),h.x&&t.length?(!f&&u.updateXDomain(t,a.UpdateXDomain,a.UpdateOrgXDomain,a.TrimXDomain),d.axis_x_tick_values||this.updateXAxisTickValues(t)):this.x&&(this.x.tickValues([]),(s=this.subX)===null||s===void 0||s.tickValues([])),d.zoom_rescale&&!i&&(p=h.x.orgDomain()),["y","y2"].forEach(function(v){var x="axis_".concat(v,"_"),_=h[v];if(_){var m=d["".concat(x,"tick_values")],y=d["".concat(x,"tick_count")];if(_.domain(u.getYDomain(t,v,p)),!m&&y){var T=u.axis[v],b=_.domain();T.tickValues(o.generateTickValues(b,b.every(function(w){return w===0})?1:y,o.isTimeSeriesY()))}}}),this.redraw(n,u.hasArcType(),r),this.updateLabels(a.Transition),(a.UpdateXDomain||a.UpdateXAxis||a.Y)&&t.length&&this.setCulling(),a.Y&&((c=h.subY)===null||c===void 0||c.domain(u.getYDomain(t,"y")),(l=h.subY2)===null||l===void 0||l.domain(u.getYDomain(t,"y2")))},e.prototype.setCulling=function(){var t=this.owner,a=t.config,n=t.state,i=n.clip,r=n.current,o=t.$el;["subX","x","y","y2"].forEach(function(s){var c=o.axis[s],l=s==="subX"?"x":s,u="axis_".concat(l,"_tick_culling"),d=a[u];if(c&&d){var h=c.selectAll(".tick"),g=Ht(h.data()),f=g.length,p=a["".concat(u,"_max")],v=a["".concat(u,"_lines")],x;if(f){for(var _=1;_<f;_++)if(f/_<p){x=_;break}h.each(function(y){var T=v?this.querySelector("text"):this;T&&(T.style.display=g.indexOf(y)%x?"none":null)})}else h.style("display",null);if(s==="x"){var m=r.maxTickWidths.x.clipPath?i.pathXAxisTickTexts:null;o.svg.selectAll(".".concat(et.axisX," .tick text")).attr("clip-path",m)}}})},e}(),Ki={initEventRect:function(){var e=this;e.$el.main.select(".".concat(z.chart)).append("g").attr("class",vt.eventRects).style("fill-opacity","0")},redrawEventRect:function(){var e,t=this,a=t.config,n=t.state,i=t.$el,r=t.isMultipleX(),o=a.axis_x_inverted;if(i.eventRect)t.updateEventRect(i.eventRect,!0);else if(t.data.targets.length){var s=t.$el.main.select(".".concat(vt.eventRects)).style("cursor",a.zoom_enabled&&a.zoom_type!=="drag"?a.axis_rotated?"ns-resize":"ew-resize":null).classed(vt.eventRectsMultiple,r).classed(vt.eventRectsSingle,!r),c=s.selectAll(".".concat(vt.eventRect)).data([0]).enter().append("rect");t.updateEventRect(c),r?t.generateEventRectsForMultipleXs(c):t.generateEventRectsForSingleX(c),c.call(t.getDraggableSelection()),i.eventRect=c,t.state.inputType==="touch"&&!i.svg.on("touchstart.eventRect")&&!t.hasArcType()&&t.bindTouchOnEventRect(r),n.rendered&&t.updateEventRect(i.eventRect,!0)}if(!r){var l=t.getMaxDataCountTarget();(!a.data_xSort||o)&&l.sort(function(u,d){return o?d.x-u.x:u.x-d.x}),t.updateDataIndexByX(l),t.updateXs(l),(e=t.updatePointClass)===null||e===void 0||e.call(t,!0),n.eventReceiver.data=l}t.updateEventRectData()},bindTouchOnEventRect:function(e){var t=this,a=t.config,n=t.state,i=t.$el,r=i.eventRect,o=i.svg,s=function(f){if(e)t.selectRectForMultipleXs(f);else{var p=t.getDataIndexFromEvent(n.event);t.callOverOutForTouch(p),p===-1?t.unselectRect():t.selectRectForSingle(f,r,p)}},c=function(){t.unselectRect(),t.callOverOutForTouch()},l=a.interaction_inputType_touch.preventDefault,u=oa(l)&&l||!1,d=!isNaN(l)&&l||null,h,g=function(f){var p=f.type,v=f.changedTouches[0],x=v["client".concat(a.axis_rotated?"Y":"X")];p==="touchstart"?u?f.preventDefault():d!==null&&(h=x):p==="touchmove"&&(u||h===!0||d!==null&&Math.abs(h-x)>=d)&&(h=!0,f.preventDefault())};r.on("touchstart",function(f){n.event=f,t.updateEventRect()}).on("touchstart.eventRect touchmove.eventRect",function(f){if(n.event=f,!r.empty()&&r.classed(vt.eventRect)){if(n.dragging||n.flowing||t.hasArcType()||f.touches.length>1)return;g(f),s(r.node())}else c()},!0).on("touchend.eventRect",function(f){n.event=f,!r.empty()&&r.classed(vt.eventRect)&&(t.hasArcType()||!t.toggleShape||n.cancelClick)&&n.cancelClick&&(n.cancelClick=!1)},!0),o.on("touchstart",function(f){n.event=f;var p=f.target;p&&p!==r.node()&&c()})},updateEventRect:function(e,t){t===void 0&&(t=!1);var a=this,n=a.state,i=a.$el,r=n.eventReceiver,o=n.width,s=n.height,c=n.rendered,l=n.resizing,u=e||i.eventRect,d=function(){r&&(r.rect=u.node().getBoundingClientRect())};(!c||l||t)&&(u.attr("x",0).attr("y",0).attr("width",o).attr("height",s),(!c||t)&&u.classed(vt.eventRect,!0)),d()},updateEventRectData:function(){var e=this,t=e.config,a=e.scale,n=e.state,i=a.zoom||a.x,r=t.axis_rotated,o,s,c,l;if(e.isMultipleX())o=0,s=0,c=n.width,l=n.height;else{var u,d=void 0;if(e.axis.isCategorized())u=e.getEventRectWidth(),d=function(p){return i(p.x)-u/2};else{var h=function(p){var v=p.index;return{prev:e.getPrevX(v),next:e.getNextX(v)}};u=function(p){var v=h(p),x=i.domain(),_;return v.prev===null&&v.next===null?_=r?n.height:n.width:v.prev===null?_=(i(v.next)+i(p.x))/2:v.next===null?_=i(x[1])-(i(v.prev)+i(p.x))/2:(Object.keys(v).forEach(function(m,y){var T;v[m]=(T=v[m])!==null&&T!==void 0?T:x[y]}),_=Math.max(0,(i(v.next)-i(v.prev))/2)),_},d=function(p){var v=h(p),x;return v.prev===null&&v.next===null?x=0:v.prev===null?x=i(i.domain()[0]):x=(i(p.x)+i(v.prev))/2,x}}o=r?0:d,s=r?d:0,c=r?n.width:u,l=r?u:n.height}var g=n.eventReceiver,f=function(p,v){return D(p)?p(v):p};g.coords.splice(g.data.length),g.data.forEach(function(p,v){g.coords[v]={x:f(o,p),y:f(s,p),w:f(c,p),h:f(l,p)}})},selectRectForMultipleXs:function(e){var t=this,a=t.config,n=t.state,i=t.filterTargetsToShow(t.data.targets);if(!(n.dragging||t.hasArcType(i))){var r=pt(n.event,e),o=t.findClosestFromTargets(i,r);if(n.mouseover&&(!o||o.id!==n.mouseover.id)&&(a.data_onout.call(t.api,n.mouseover),n.mouseover=void 0),!o){t.unselectRect();return}var s=t.isBubbleType(o)||t.isScatterType(o)||!a.tooltip_grouped?[o]:t.filterByX(i,o.x),c=s.map(function(l){return t.addName(l)});t.showTooltip(c,e),t.setExpand(o.index,o.id,!0),t.showGridFocus(c),(t.isBarType(o.id)||t.dist(o,r)<a.point_sensitivity)&&(t.$el.svg.select(".".concat(vt.eventRect)).style("cursor","pointer"),n.mouseover||(a.data_onover.call(t.api,o),n.mouseover=o))}},unselectRect:function(){var e=this,t=e.config,a=e.$el,n=a.circle,i=a.tooltip;e.$el.svg.select(".".concat(vt.eventRect)).style("cursor",null),e.hideGridFocus(),i&&(e.hideTooltip(),e._handleLinkedCharts(!1)),n&&!t.point_focus_only&&e.unexpandCircles(),e.expandBarTypeShapes(!1)},generateEventRectsForSingleX:function(e){var t=this,a=t.config,n=t.state,i=n.eventReceiver,r=e.style("cursor",a.data_selection_enabled&&a.data_selection_grouped?"pointer":null).on("click",function(s){n.event=s;var c=i.currentIdx,l=i.data,u=l[c===-1?t.getDataIndexFromEvent(s):c];t.clickHandlerForSingleX.bind(this)(u,t)});if(n.inputType==="mouse"){var o=function(s){var c=s?t.getDataIndexFromEvent(s):i.currentIdx;return c>-1?i.data[c]:null};r.on("mouseover",function(s){n.event=s,t.updateEventRect()}).on("mousemove",function(s){var c=o(s);if(n.event=s,!!c){var l=c.index,u=a.line_step_type;if(a.line_step_tooltipMatch&&t.hasType("step")&&/^step\-(before|after)$/.test(u)){var d=t.scale.zoom||t.scale.x,h=t.axis.xs[l],g=d.invert(pt(s,this)[0]);u==="step-after"&&g<h?l-=1:u==="step-before"&&g>h&&(l+=1)}n.dragging||n.flowing||t.hasArcType()||a.tooltip_grouped&&l===i.currentIdx||(l!==i.currentIdx&&(t.setOverOut(!1,i.currentIdx),i.currentIdx=l),l===-1?t.unselectRect():t.selectRectForSingle(this,r,l),t.setOverOut(l!==-1,l))}}).on("mouseout",function(s){n.event=s,!(!a||t.hasArcType()||i.currentIdx===-1)&&(t.unselectRect(),t.setOverOut(!1,i.currentIdx),i.currentIdx=-1)})}return r},clickHandlerForSingleX:function(e,t){var a=t,n=a.config,i=a.state,r=a.$el.main;if(!e||a.hasArcType()||i.cancelClick){i.cancelClick&&(i.cancelClick=!1);return}var o=e.index;r.selectAll(".".concat(at.shape,"-").concat(o)).each(function(s){var c;(n.data_selection_grouped||a.isWithinShape(this,s))&&((c=a.toggleShape)===null||c===void 0||c.call(a,this,s,o),n.data_onclick.bind(a.api)(s,this))})},generateEventRectsForMultipleXs:function(e){var t=this,a=t.state;e.on("click",function(n){a.event=n,t.clickHandlerForMultipleXS.bind(this)(t)}),a.inputType==="mouse"&&e.on("mouseover mousemove",function(n){a.event=n,t.selectRectForMultipleXs(this)}).on("mouseout",function(n){a.event=n,!(!t.config||t.hasArcType())&&t.unselectRect()})},clickHandlerForMultipleXS:function(e){var t=e,a=t.config,n=t.state,i=t.filterTargetsToShow(t.data.targets);if(!t.hasArcType(i)){var r=pt(n.event,this),o=t.findClosestFromTargets(i,r);o&&(t.isBarType(o.id)||t.dist(o,r)<a.point_sensitivity)&&t.$el.main.selectAll(".".concat(at.shapes).concat(t.getTargetSelectorSuffix(o.id))).selectAll(".".concat(at.shape,"-").concat(o.index)).each(function(){var s;(a.data_selection_grouped||t.isWithinShape(this,o))&&((s=t.toggleShape)===null||s===void 0||s.call(t,this,o,o.index),a.data_onclick.bind(t.api)(o,this))})}}},Ji={generateFlow:function(e){var t=this,a=t.data,n=t.state,i=t.$el;return function(){var r=e.flow.length;n.flowing=!0,a.targets.forEach(function(s){s.values.splice(0,r)}),t.updateXGrid&&t.updateXGrid(!0);var o={};["axis.x","grid.x","gridLines.x","region.list","text","bar","line","area","circle"].forEach(function(s){var c=s.split("."),l=i[c[0]];l&&c.length>1&&(l=l[c[1]]),l?.size()&&(o[s]=l)}),t.hideGridFocus(),t.setFlowList(o,e)}},setFlowList:function(e,t){var a=this,n=t.flow,i=t.targets,r=n.duration,o=r===void 0?t.duration:r,s=n.index,c=n.length,l=n.orgDataCount,u=a.getFlowTransform(i,l,s,c),d=ga(),h;d.add(Object.keys(e).map(function(g){return h=e[g].transition().ease(gn).duration(o),g==="axis.x"?h=h.call(function(f){a.axis.x.setTransition(f).create(f)}):g==="region.list"?h=h.filter(a.isRegionOnX).attr("transform",u):h=h.attr("transform",u),h})),h.call(d,function(){a.cleanUpFlow(e,t)})},cleanUpFlow:function(e,t){var a=this,n=a.config,i=a.state,r=a.$el.svg,o=n.axis_rotated,s=t.flow,c=t.shape,l=t.xv,u=c.pos,d=u.cx,h=u.cy,g=u.xForText,f=u.yForText,p=s.done,v=p===void 0?function(){}:p,x=s.length;x&&(["circle","text","shape","eventRect"].forEach(function(_){for(var m=[],y=0;y<x;y++)m.push(".".concat(X[_],"-").concat(y));r.selectAll(".".concat(X["".concat(_,"s")])).selectAll(m).remove()}),r.select(".".concat(X.xgrid)).remove()),Object.keys(e).forEach(function(_){var m=e[_];if(_!=="axis.x"&&m.attr("transform",null),_==="grid.x")m.attr(i.xgridAttr);else if(_==="gridLines.x")m.attr("x1",o?0:l).attr("x2",o?i.width:l);else if(_==="gridLines.x")m.select("line").attr("x1",o?0:l).attr("x2",o?i.width:l),m.select("text").attr("x",o?i.width:0).attr("y",l);else if(/^(area|bar|line)$/.test(_))m.attr("d",c.type[_]);else if(_==="text")m.attr("x",g).attr("y",f).style("fill-opacity",a.opacityForText.bind(a));else if(_==="circle")if(a.isCirclePoint())m.attr("cx",d).attr("cy",h);else{var y=function(b){return d(b)-n.point_r},T=function(b){return h(b)-n.point_r};m.attr("x",y).attr("y",T).attr("cx",d).attr("cy",h)}else _==="region.list"&&m.select("rect").filter(a.isRegionOnX).attr("x",a.regionX.bind(a)).attr("width",a.regionWidth.bind(a))}),n.interaction_enabled&&a.redrawEventRect(),v.call(a.api),i.flowing=!1},getFlowTransform:function(e,t,a,n){var i=this,r=i.data,o=i.scale.x,s=r.targets[0].values,c=i.getValueOnIndex(s,a),l=i.getValueOnIndex(s,a+n),u,d=o.domain(),h=i.updateXDomain(e,!0,!0);t?t===1||c?.x===l?.x?u=o(d[0])-o(h[0]):u=i.axis.isTimeSeries()?o(d[0])-o(h[0]):o(c?.x||0)-o(l.x):s.length!==1?u=o(d[0])-o(h[0]):i.axis.isTimeSeries()?(c=i.getValueOnIndex(s,0),l=i.getValueOnIndex(s,s.length-1),u=o(c.x)-o(l.x)):u=zt(h)/2;var g=zt(d)/zt(h);return"translate(".concat(u,",0) scale(").concat(g,",1)")}},Qi={initClip:function(){var e=this,t=e.state,a=t.clip,n=t.datetimeId;a.id="".concat(n,"-clip"),a.idXAxis="".concat(a.id,"-xaxis"),a.idYAxis="".concat(a.id,"-yaxis"),a.idGrid="".concat(a.id,"-grid"),a.path=e.getClipPath(a.id),a.pathXAxis=e.getClipPath(a.idXAxis),a.pathYAxis=e.getClipPath(a.idYAxis),a.pathGrid=e.getClipPath(a.idGrid)},getClipPath:function(e){var t=this,a=t.config;if(!a.clipPath&&/-clip$/.test(e)||!a.axis_x_clipPath&&/-clip-xaxis$/.test(e)||!a.axis_y_clipPath&&/-clip-yaxis$/.test(e))return null;var n=$.navigator?$.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0:!1;return"url(".concat(n?"":it.URL.split("#")[0],"#").concat(e,")")},appendClip:function(e,t){t&&e.append("clipPath").attr("id",t).append("rect")},setXAxisClipPath:function(e){var t=this,a=t.config,n=t.state,i=n.margin,r=n.width,o=n.height,s=a.axis_rotated,c=Math.max(30,i.left)-(s?0:20),l=s?-(1+c):-(c-1),u=-Math.max(15,i.top),d=s?i.left+20:r+10+c,h=(s?i.top+o+10:i.bottom)+20;e.attr("x",l).attr("y",u).attr("width",d).attr("height",h)},setYAxisClipPath:function(e){var t,a=this,n=a.config,i=a.state,r=i.margin,o=i.width,s=i.height,c=n.axis_rotated,l=Math.max(30,r.left)-(c?20:0),u=n.axis_y_inner,d=u&&!c?n.axis_y_label.text?-20:-1:c?-(1+l):-(l-1),h=-(c?20:r.top),g=(c?o+15+l:r.left+20)+(u?20:0),f=(c?r.bottom+(((t=n.padding)===null||t===void 0?void 0:t.mode)==="fit"?10:0):r.top+s)+10;e.attr("x",d).attr("y",h).attr("width",g).attr("height",f)},updateXAxisTickClip:function(){var e=this,t=e.config,a=e.state,n=a.clip,i=a.xAxisHeight,r=e.$el.defs,o=e.getHorizontalAxisHeight("x");if(r&&!n.idXAxisTickTexts){var s="".concat(n.id,"-xaxisticktexts");e.appendClip(r,s),n.pathXAxisTickTexts=e.getClipPath(n.idXAxisTickTexts),n.idXAxisTickTexts=s}!t.axis_x_tick_multiline&&e.getAxisTickRotate("x")&&o!==i&&(e.setXAxisTickClipWidth(),e.setXAxisTickTextClipPathWidth()),e.state.xAxisHeight=o},setXAxisTickClipWidth:function(){var e=this,t=e.config,a=e.state.current.maxTickWidths,n=e.getAxisTickRotate("x");if(!t.axis_x_tick_multiline&&n){var i=Math.sin(Math.PI/180*Math.abs(n));a.x.clipPath=(e.getHorizontalAxisHeight("x")-20)/i}else a.x.clipPath=null},setXAxisTickTextClipPathWidth:function(){var e=this,t=e.state,a=t.clip,n=t.current,i=e.$el.svg;i&&i.select("#".concat(a.idXAxisTickTexts," rect")).attr("width",n.maxTickWidths.x.clipPath).attr("height",30)}},He=function(e){return P(e.position)||"end"},We=function(e){return e.position==="start"?4:e.position==="middle"?0:-4};function Ue(e,t,a){return function(n){var i=e?0:t;return n.position==="start"?i=e?-a:0:n.position==="middle"&&(i=(e?-a:t)/2),i}}function je(e,t){t==="grid"&&e.each(function(){var a=L(this);["x1","x2","y1","y2"].forEach(function(n){return a.attr(n,Math.ceil(+a.attr(n)))})})}var tr={hasGrid:function(){var e=this.config;return["x","y"].some(function(t){return e["grid_".concat(t,"_show")]||e["grid_".concat(t,"_lines")].length})},initGrid:function(){var e=this;e.hasGrid()&&e.initGridLines(),e.initFocusGrid()},initGridLines:function(){var e=this,t=e.config,a=e.state.clip,n=e.$el;(t.grid_x_lines.length||t.grid_y_lines.length)&&(n.gridLines.main=n.main.insert("g",".".concat(z.chart).concat(t.grid_lines_front?" + *":"")).attr("clip-path",a.pathGrid).attr("class","".concat(H.grid," ").concat(H.gridLines)),n.gridLines.main.append("g").attr("class",H.xgridLines),n.gridLines.main.append("g").attr("class",H.ygridLines),n.gridLines.x=Je([]))},updateXGrid:function(e){var t=this,a=t.config,n=t.scale,i=t.state,r=t.$el,o=r.main,s=r.grid,c=a.axis_rotated,l=t.generateGridData(a.grid_x_type,n.x),u=t.axis.isCategorized()?t.axis.x.tickOffset():0,d=function(h){return(n.zoom||n.x)(h)+u*(c?-1:1)};i.xgridAttr=c?{x1:0,x2:i.width,y1:d,y2:d}:{x1:d,x2:d,y1:0,y2:i.height},s.x=o.select(".".concat(H.xgrids)).selectAll(".".concat(H.xgrid)).data(l),s.x.exit().remove(),s.x=s.x.enter().append("line").attr("class",H.xgrid).merge(s.x),e||s.x.each(function(){var h=L(this);Object.keys(i.xgridAttr).forEach(function(g){h.attr(g,i.xgridAttr[g]).style("opacity",function(){return h.attr(c?"y1":"x1")===(c?i.height:0)?"0":null})})})},updateYGrid:function(){var e=this,t=e.axis,a=e.config,n=e.scale,i=e.state,r=e.$el,o=r.grid,s=r.main,c=a.axis_rotated,l=function(d){return Math.ceil(n.y(d))},u=t.y.getGeneratedTicks(a.grid_y_ticks)||e.scale.y.ticks(a.grid_y_ticks);o.y=s.select(".".concat(H.ygrids)).selectAll(".".concat(H.ygrid)).data(u),o.y.exit().remove(),o.y=o.y.enter().append("line").attr("class",H.ygrid).merge(o.y),o.y.attr("x1",c?l:0).attr("x2",c?l:i.width).attr("y1",c?0:l).attr("y2",c?i.height:l),je(o.y,"grid")},updateGrid:function(){var e=this,t=e.$el,a=t.grid,n=t.gridLines;!n.main&&e.initGridLines(),a.main.style("visibility",e.hasArcType()?"hidden":null),e.hideGridFocus(),e.updateXGridLines(),e.updateYGridLines()},updateXGridLines:function(){var e=this,t=e.config,a=e.$el,n=a.gridLines,i=a.main,r=e.$T,o=t.axis_rotated;t.grid_x_show&&e.updateXGrid();var s=i.select(".".concat(H.xgridLines)).selectAll(".".concat(H.xgridLine)).data(t.grid_x_lines);r(s.exit()).style("opacity","0").remove();var c=s.enter().append("g");c.append("line").style("opacity","0"),c.append("text").attr("transform",o?null:"rotate(-90)").attr("dy",-5).style("opacity","0"),s=c.merge(s),r(s.attr("class",function(l){return"".concat(H.xgridLine," ").concat(l.class||"").trim()}).select("text").attr("text-anchor",He).attr("dx",We)).text(function(l){return l.text}).style("opacity",null),n.x=s},updateYGridLines:function(){var e=this,t=e.config,a=e.state,n=a.width,i=a.height,r=e.$el,o=e.$T,s=t.axis_rotated;t.grid_y_show&&e.updateYGrid();var c=r.main.select(".".concat(H.ygridLines)).selectAll(".".concat(H.ygridLine)).data(t.grid_y_lines);o(c.exit()).style("opacity","0").remove();var l=c.enter().append("g");l.append("line").style("opacity","0"),l.append("text").attr("transform",s?"rotate(-90)":"").style("opacity","0"),c=l.merge(c);var u=e.yv.bind(e);o(c.attr("class",function(d){return"".concat(H.ygridLine," ").concat(d.class||"").trim()}).select("line")).attr("x1",s?u:0).attr("x2",s?u:n).attr("y1",s?0:u).attr("y2",s?i:u).style("opacity",null),o(c.select("text").attr("text-anchor",He).attr("dx",We)).attr("dy",-5).attr("x",Ue(s,n,i)).attr("y",u).text(function(d){return d.text}).style("opacity",null),r.gridLines.y=c},redrawGrid:function(e){var t=this,a=t.config.axis_rotated,n=t.state,i=n.width,r=n.height,o=t.$el.gridLines,s=t.$T,c=t.xv.bind(t),l=o.x.select("line"),u=o.x.select("text");return l=s(l,e).attr("x1",a?0:c).attr("x2",a?i:c).attr("y1",a?c:0).attr("y2",a?c:r),u=s(u,e).attr("x",Ue(!a,i,r)).attr("y",c).text(function(d){return d.text}),[l.style("opacity",null),u.style("opacity",null)]},initFocusGrid:function(){var e=this,t=e.config,a=e.state.clip,n=e.$el,i=t.grid_front,r=".".concat(i&&n.gridLines.main?H.gridLines:z.chart).concat(i?" + *":""),o=n.main.insert("g",r).attr("clip-path",a.pathGrid).attr("class",H.grid);n.grid.main=o,t.grid_x_show&&o.append("g").attr("class",H.xgrids),t.grid_y_show&&o.append("g").attr("class",H.ygrids),t.interaction_enabled&&t.grid_focus_show&&(o.append("g").attr("class",U.xgridFocus).append("line").attr("class",U.xgridFocus),t.grid_focus_y&&!t.tooltip_grouped&&o.append("g").attr("class",U.ygridFocus).append("line").attr("class",U.ygridFocus))},showGridFocus:function(e){var t,a=this,n=a.config,i=a.state,r=i.width,o=i.height,s=n.axis_rotated,c=a.$el.main.selectAll("line.".concat(U.xgridFocus,", line.").concat(U.ygridFocus)),l=(e||[c.datum()]).filter(function(h){return h&&P(a.getBaseValue(h))});if(!(!n.tooltip_show||l.length===0||a.hasType("bubble")||a.hasArcType())){var u=n.grid_focus_edge&&!n.tooltip_grouped,d=a.xx.bind(a);c.style("visibility",null).data(l.concat(l)).each(function(h){var g=L(this),f={x:d(h),y:a.getYScaleById(h.id)(h.value)},p;if(g.classed(U.xgridFocus))p=s?[null,f.x,u?f.y:r,f.x]:[f.x,u?f.y:null,f.x,o];else{var v=a.axis.getId(h.id)==="y2";p=s?[f.y,u&&!v?f.x:null,f.y,u&&v?f.x:o]:[u&&v?f.x:null,f.y,u&&!v?f.x:r,f.y]}["x1","y1","x2","y2"].forEach(function(x,_){return g.attr(x,p[_])})}),je(c,"grid"),(t=a.showCircleFocus)===null||t===void 0||t.call(a,e)}},hideGridFocus:function(){var e,t=this,a=t.state,n=a.inputType,i=a.resizing,r=t.$el.main;(n==="mouse"||!i)&&(r.selectAll("line.".concat(U.xgridFocus,", line.").concat(U.ygridFocus)).style("visibility","hidden"),(e=t.hideCircleFocus)===null||e===void 0||e.call(t))},updateGridFocus:function(){var e,t=this,a=t.state,n=a.inputType,i=a.width,r=a.height,o=a.resizing,s=t.$el.grid,c=s.main.select("line.".concat(U.xgridFocus));if(n==="touch")c.empty()?o&&((e=t.showCircleFocus)===null||e===void 0||e.call(t)):t.showGridFocus();else{var l=t.config.axis_rotated;c.attr("x1",l?0:-10).attr("x2",l?i:-10).attr("y1",l?-10:0).attr("y2",l?-10:r)}return!0},generateGridData:function(e,t){var a=this,n=a.$el.main.select(".".concat(et.axisX)).selectAll(".tick").size(),i=[];if(e==="year")for(var r=a.getXDomain(),o=r.map(function(u){return u.getFullYear()}),s=o[0],c=o[1],l=s;l<=c;l++)i.push(new Date("".concat(l,"-01-01 00:00:00")));else i=t.ticks(10),i.length>n&&(i=i.filter(function(u){return String(u).indexOf(".")<0}));return i},getGridFilterToRemove:function(e){return e?function(t){var a=!1;return(B(e)?e.concat():[e]).forEach(function(n){("value"in n&&t.value===n.value||"class"in n&&t.class===n.class)&&(a=!0)}),a}:function(){return!0}},removeGridLines:function(e,t){var a=this,n=a.config,i=a.$T,r=a.getGridFilterToRemove(e),o=function(u){return!r(u)},s=t?H.xgridLines:H.ygridLines,c=t?H.xgridLine:H.ygridLine;i(a.$el.main.select(".".concat(s)).selectAll(".".concat(c)).filter(r)).style("opacity","0").remove();var l="grid_".concat(t?"x":"y","_lines");n[l]=n[l].filter(o)}},er={initRegion:function(){var e=this,t=e.$el;t.region.main=t.main.insert("g",":first-child").attr("clip-path",e.state.clip.path).attr("class",Jt.regions)},updateRegion:function(){var e=this,t=e.config,a=e.$el.region,n=e.$T;a.main||e.initRegion(),a.main.style("visibility",e.hasArcType()?"hidden":null);var i=a.main.selectAll(".".concat(Jt.region)).data(t.regions);n(i.exit()).style("opacity","0").remove();var r=i.enter().append("g");r.append("rect").style("fill-opacity","0"),a.list=r.merge(i).attr("class",e.classRegion.bind(e))},redrawRegion:function(e){var t=this,a=t.$el.region,n=t.$T,i=a.list.select("rect");return i=n(i,e).attr("x",t.regionX.bind(t)).attr("y",t.regionY.bind(t)).attr("width",t.regionWidth.bind(t)).attr("height",t.regionHeight.bind(t)),[i.style("fill-opacity",function(r){return P(r.opacity)?r.opacity:null}).on("end",function(){L(this.parentNode).selectAll("rect:not([x])").remove()})]},getRegionXY:function(e,t){var a=this,n=a.config,i=a.scale,r=n.axis_rotated,o=e==="x",s="start",c,l=0;return t.axis==="y"||t.axis==="y2"?(o||(s="end"),(o?r:!r)&&s in t&&(c=i[t.axis],l=c(t[s]))):(o?!r:r)&&s in t&&(c=i.zoom||i.x,l=c(a.axis.isTimeSeries()?mt.call(a,t[s]):t[s])),l},regionX:function(e){return this.getRegionXY("x",e)},regionY:function(e){return this.getRegionXY("y",e)},getRegionSize:function(e,t){var a=this,n=a.config,i=a.scale,r=a.state,o=n.axis_rotated,s=e==="width",c=a[s?"regionX":"regionY"](t),l,u="end",d=r[e];return t.axis==="y"||t.axis==="y2"?(s||(u="start"),(s?o:!o)&&u in t&&(l=i[t.axis],d=l(t[u]))):(s?!o:o)&&u in t&&(l=i.zoom||i.x,d=l(a.axis.isTimeSeries()?mt.call(a,t[u]):t[u])),d<c?0:d-c},regionWidth:function(e){return this.getRegionSize("width",e)},regionHeight:function(e){return this.getRegionSize("height",e)},isRegionOnX:function(e){return!e.axis||e.axis==="x"}},ar={getAxisSize:function(e){var t=this,a=t.config.axis_rotated;return a&&e==="x"||!a&&/y2?/.test(e)?t.getAxisWidthByAxisId(e,!0):t.getHorizontalAxisHeight(e)},getAxisWidthByAxisId:function(e,t){var a,n,i=this;if(i.axis){var r=(a=i.axis)===null||a===void 0?void 0:a.getLabelPositionById(e),o=i.axis.getMaxTickWidth(e,t),s=o===0?.5:0;return o+(((n=i.config.padding)===null||n===void 0?void 0:n.mode)==="fit"?r.isInner?10+s:10:r.isInner?20+s:40)}else return 40},getHorizontalAxisHeight:function(e){var t,a,n=this,i=n.config,r=n.state,o=r.current,s=r.rotatedPadding,c=r.isLegendRight,l=r.isLegendInset,u=i.axis_rotated,d=((t=i.padding)===null||t===void 0?void 0:t.mode)==="fit",h=i["axis_".concat(e,"_inner")],g=i["axis_".concat(e,"_label")].text,f=((a=i.padding)===null||a===void 0?void 0:a.mode)==="fit"?h&&!g?e==="y"?1:0:20:30;if(e==="x"&&!i.axis_x_show)return 8;if(e==="x"&&i.axis_x_height)return i.axis_x_height;if(e==="y"&&!i.axis_y_show)return i.legend_show&&!c&&!l?10:1;if(e==="y2"&&!i.axis_y2_show)return d?0:s.top;var p=n.getAxisTickRotate(e);return(e==="x"&&!u||/y2?/.test(e)&&u)&&p&&(f=30+n.axis.getMaxTickWidth(e)*Math.cos(Math.PI*(90-Math.abs(p))/180),!i.axis_x_tick_multiline&&o.height&&f>o.height/2&&(f=o.height/2)),f+(n.axis.getLabelPositionById(e).isInner?0:10)+(e==="y2"&&!u?-10:0)},getEventRectWidth:function(){var e=this,t=e.config,a=e.axis,n=t.axis_x_inverted,i=a.x.tickInterval();return Math.max(0,n?Math.abs(i):i)},getAxisTickRotate:function(e){var t=this,a=t.axis,n=t.config,i=t.state,r=t.$el,o=n["axis_".concat(e,"_tick_rotate")];if(e==="x"){var s=a.isCategorized()||a.isTimeSeries();if(n.axis_x_tick_fit&&s){var c=n.axis_x_tick_count,l=i.current.maxTickWidths.x.ticks.length,u=0;if(c?u=c>l?l:c:l&&(u=l),u!==i.axis.x.tickCount){var d=t.data.targets;i.axis.x.padding=t.getXDomainPadding([t.getXDomainMinMax(d,"min"),t.getXDomainMinMax(d,"max")],u)}i.axis.x.tickCount=u}r.svg&&n.axis_x_tick_fit&&!n.axis_x_tick_multiline&&!n.axis_x_tick_culling&&n.axis_x_tick_autorotate&&s&&(o=t.needToRotateXAxisTickTexts()?n.axis_x_tick_rotate:0)}return o},needToRotateXAxisTickTexts:function(){var e=this,t=e.state,a=t.axis,n=t.current,i=n.width-e.getCurrentPaddingLeft(!1)-e.getCurrentPaddingRight(),r=a.x.tickCount+a.x.padding.left+a.x.padding.right,o=e.axis.getMaxTickWidth("x"),s=r?i/r:0;return o>s}},nr={data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_axes:{},data_regions:{},data_stack_normalize:!1},ir={axis_x_clipPath:!0,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_culling_lines:!0,axis_x_tick_count:void 0,axis_x_tick_show:!0,axis_x_tick_text_show:!0,axis_x_tick_text_position:{x:0,y:0},axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_autorotate:!1,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_tick_tooltip:!1,axis_x_max:void 0,axis_x_min:void 0,axis_x_inverted:!1,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_axes:[]},rr={axis_y_clipPath:!0,axis_y_show:!0,axis_y_type:"indexed",axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:!1,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_culling:!1,axis_y_tick_culling_max:5,axis_y_tick_culling_lines:!0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_show:!0,axis_y_tick_stepSize:null,axis_y_tick_text_show:!0,axis_y_tick_text_position:{x:0,y:0},axis_y_tick_time_value:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y_axes:[]},or={axis_y2_show:!1,axis_y2_type:"indexed",axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:!1,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_culling:!1,axis_y2_tick_culling_max:5,axis_y2_tick_culling_lines:!0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_rotate:0,axis_y2_tick_count:void 0,axis_y2_tick_show:!0,axis_y2_tick_stepSize:null,axis_y2_tick_text_show:!0,axis_y2_tick_text_position:{x:0,y:0},axis_y2_padding:{},axis_y2_default:void 0,axis_y2_axes:[]},sr=M(M(M({axis_rotated:!1},ir),rr),or),cr={grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:void 0,grid_focus_edge:!1,grid_focus_show:!0,grid_focus_y:!1,grid_front:!1,grid_lines_front:!0},lr=[Ni,Gi,Ui,Vi,Yi,Hi,Wi],ur=[Zi,Qi,Ki,Ji,tr,er,ar],dr=[nr,sr,cr];function Ze(e){e===void 0&&(e=0);var t=this,a=t.config,n=t.state,i=t.hasMultiArcGauge(),r=n.gaugeArcWidth/t.filterTargetsToShow(t.data.targets).length,o=e?Math.min(n.radiusExpanded*e-n.radius,r*.8-(1-e)*100):0;return{inner:function(s){var c=t.getRadius(s).innerRadius;return i?n.radius-r*(s.index+1):I(c)?c:0},outer:function(s){var c=t.getRadius(s).outerRadius,l;if(i)l=n.radius-r*s.index+o;else if(t.hasType("polar")&&!e)l=t.getPolarOuterRadius(s,c);else if(l=c,e){var u=n.radiusExpanded;n.radius!==c&&(u-=Math.abs(n.radius-c)),l=u*e}return l},corner:function(s,c){var l=a.arc_cornerRadius_ratio,u=l===void 0?0:l,d=a.arc_cornerRadius,h=d===void 0?0:d,g=s.data.id,f=s.value,p=0;return u?p=u*c:p=I(h)?h:h.call(t.api,g,f,c),p}}}function xe(e){return function(t){var a=ea(this._current,t);return this._current=t,function(n){var i=a(n);return e(i)}}}var hr={initPie:function(){var e=this,t=e.config,a=t.data_type,n=t["".concat(a,"_padding")],i=t["".concat(a,"_startingAngle")]||0,r=(n?n*.01:t["".concat(a,"_padAngle")])||0;e.pie=cn().startAngle(i).endAngle(i+2*Math.PI).padAngle(r).value(function(o){return o.values.reduce(function(s,c){return s+c.value},0)}).sort(e.getSortCompareFn.bind(e)(!0))},updateRadius:function(){var e=this,t=e.config,a=e.state,n=t.data_type,i=t["".concat(n,"_padding")],r=t.gauge_width||t.donut_width,o=e.filterTargetsToShow(e.data.targets).length*t.gauge_arcs_minWidth;a.radiusExpanded=Math.min(a.arcWidth,a.arcHeight)/2*(e.hasMultiArcGauge()&&t.gauge_label_show?.85:1),a.radius=a.radiusExpanded*.95,a.innerRadiusRatio=r?(a.radius-r)/a.radius:.6,a.gaugeArcWidth=r||(o<=a.radius-a.innerRadius?a.radius-a.innerRadius:o<=a.radius?o:a.radius);var s=t.pie_innerRadius||(i?i*(a.innerRadiusRatio+.1):0);a.outerRadius=t.pie_outerRadius,a.innerRadius=e.hasType("donut")||e.hasType("gauge")?a.radius*a.innerRadiusRatio:s},getRadius:function(e){var t=this,a=e?.data,n=t.state,i=n.innerRadius,r=n.outerRadius;return!I(i)&&a&&(i=i[a.id]||0),F(r)&&a&&a.id in r?r=r[a.id]:I(r)||(r=t.state.radius),{innerRadius:i,outerRadius:r}},updateArc:function(){var e=this;e.updateRadius(),e.svgArc=e.getSvgArc(),e.svgArcExpanded=e.getSvgArcExpanded()},getArcLength:function(){var e=this,t=e.config,a=t.gauge_arcLength*3.6,n=2*(a/360);return a<-360?n=-2:a>360&&(n=2),n*Math.PI},getStartAngle:function(){var e=this,t=e.config,a=t.gauge_fullCircle,n=-1*Math.PI/2,i=Math.PI/2,r=t.gauge_startingAngle;return!a&&r<=n?r=n:!a&&r>=i?r=i:(r>Math.PI||r<-1*Math.PI)&&(r=Math.PI),r},updateAngle:function(e){var t=this,a=t.config,n=t.state,i=t.pie,r=e,o=!1;if(!a)return null;var s=t.getStartAngle(),c=a.gauge_fullCircle?t.getArcLength():s*-2;if(r.data&&t.isGaugeType(r.data)&&!t.hasMultiArcGauge()){var l=a.gauge_min,u=a.gauge_max,d=t.getTotalDataSum(n.rendered),h=c*((d-l)/(u-l));i=i.startAngle(s).endAngle(h+s)}if(i(t.filterTargetsToShow()).forEach(function(x,_){!o&&x.data.id===r.data.id&&(o=!0,r=x,r.index=_)}),isNaN(r.startAngle)&&(r.startAngle=0),isNaN(r.endAngle)&&(r.endAngle=r.startAngle),r.data&&t.hasMultiArcGauge()){var g=a.gauge_min,f=a.gauge_max,p=c/(f-g),v=r.value<g?0:r.value<f?r.value-g:f-g;r.startAngle=s,r.endAngle=s+p*v}return o?r:null},getSvgArc:function(){var e=this,t=Ze.call(e),a=t.inner,n=t.outer,i=t.corner,r=Ie().innerRadius(a).outerRadius(n),o=function(s,c){var l,u="M 0 0";if(s.value||s.data){var d=c?s:(l=e.updateAngle(s))!==null&&l!==void 0?l:null;d&&(u=r.cornerRadius(i(d,n(d)))(d))}return u};return o.centroid=r.centroid,o},getSvgArcExpanded:function(e){e===void 0&&(e=1);var t=this,a=Ze.call(t,e),n=a.inner,i=a.outer,r=a.corner,o=Ie().innerRadius(n).outerRadius(i);return function(s){var c=t.updateAngle(s),l=i(c),u=0;return c&&(u=r(c,l)),c?o.cornerRadius(u)(c):"M 0 0"}},getArc:function(e,t,a){return a||this.isArcType(e.data)?this.svgArc(e,t):"M 0 0"},transformForArcLabel:function(e){var t,a=this,n=a.config,i=a.state.radiusExpanded,r=a.updateAngle(e),o="";if(r){if(a.hasMultiArcGauge()){var s=Math.sin(r.endAngle-Math.PI/2),c=Math.cos(r.endAngle-Math.PI/2)*(i+25),l=s*(i+15-Math.abs(s*10))+3;o="translate(".concat(c,",").concat(l,")")}else if(!a.hasType("gauge")||a.data.targets.length>1){var u=a.getRadius(e).outerRadius;a.hasType("polar")&&(u=a.getPolarOuterRadius(e,u));var d=this.svgArc.centroid(r),h=d.map(function(x){return isNaN(x)?0:x}),c=h[0],l=h[1],g=Math.sqrt(c*c+l*l),f=(t=["donut","pie","polar"].filter(a.hasType.bind(a)).map(function(x){return n["".concat(x,"_label_ratio")]}))===null||t===void 0?void 0:t[0];f?f=D(f)?f.bind(a.api)(e,u,g):f:f=u&&(g?(36/u>.375?1.175-36/u:.8)*u/g:0),o="translate(".concat(c*f,",").concat(l*f,")")}}return o},convertToArcData:function(e){return this.addName({id:"data"in e?e.data.id:e.id,value:e.value,ratio:this.getRatio("arc",e),index:e.index})},textForArcLabel:function(e){var t=this,a=t.hasType("gauge");t.shouldShowArcLabel()&&e.style("fill",t.updateTextColor.bind(t)).attr("filter",t.updateTextBacgroundColor.bind(t)).each(function(n){var i,r=L(this),o=t.updateAngle(n),s=t.getRatio("arc",o),c=t.meetsLabelThreshold(s,(i=["donut","gauge","pie","polar"].filter(t.hasType.bind(t)))===null||i===void 0?void 0:i[0]);if(c){var l=(o||n).value,u=(t.getArcLabelFormat()||t.defaultArcValueFormat)(l,s,n.data.id).toString();Kt(r,u,[-1,1],a)}else r.text("")})},expandArc:function(e){var t=this,a=t.state.transiting,n=t.$el;if(a){var i=setInterval(function(){a||(clearInterval(i),n.legend.selectAll(".".concat(U.legendItemFocused)).size()>0&&t.expandArc(e))},10);return}var r=t.mapToTargetIds(e);n.svg.selectAll(t.selectorTargets(r,".".concat(W.chartArc))).each(function(o){if(t.shouldExpand(o.data.id)){var s=t.getExpandConfig(o.data.id,"duration"),c=t.getSvgArcExpanded(t.getExpandConfig(o.data.id,"rate"));L(this).selectAll("path").transition().duration(s).attrTween("d",xe(t.svgArcExpanded.bind(t))).transition().duration(s*2).attrTween("d",xe(c.bind(t)))}})},unexpandArc:function(e){var t=this,a=t.state.transiting,n=t.$el.svg;if(!a){var i=t.mapToTargetIds(e);n.selectAll(t.selectorTargets(i,".".concat(W.chartArc))).selectAll("path").transition().duration(function(r){return t.getExpandConfig(r.data.id,"duration")}).attrTween("d",xe(t.svgArc.bind(t))),n.selectAll("".concat(W.arc)).style("opacity",null)}},getExpandConfig:function(e,t){var a=this,n=a.config,i={duration:50,rate:.98},r;return a.isDonutType(e)?r="donut":a.isGaugeType(e)?r="gauge":a.isPieType(e)&&(r="pie"),r?n["".concat(r,"_expand_").concat(t)]:i[t]},shouldExpand:function(e){var t=this,a=t.config;return t.isDonutType(e)&&a.donut_expand||t.isGaugeType(e)&&a.gauge_expand||t.isPieType(e)&&a.pie_expand},shouldShowArcLabel:function(){var e=this,t=e.config;return["donut","gauge","pie","polar"].some(function(a){return e.hasType(a)&&t["".concat(a,"_label_show")]})},getArcLabelFormat:function(){var e=this,t=e.config,a=function(n){return n};return["donut","gauge","pie","polar"].filter(e.hasType.bind(e)).forEach(function(n){a=t["".concat(n,"_label_format")]}),D(a)?a.bind(e.api):a},getArcTitle:function(){var e=this,t=e.hasType("donut")&&"donut"||e.hasType("gauge")&&"gauge";return t?e.config["".concat(t,"_title")]:""},updateTargetsForArc:function(e){var t=this,a=t.$el,n=t.hasType("gauge"),i=t.getChartClass("Arc"),r=t.getClass("arcs",!0),o=t.classFocus.bind(t),s=a.main.select(".".concat(W.chartArcs)),c=s.selectAll(".".concat(W.chartArc)).data(t.pie(e)).attr("class",function(u){return i(u)+o(u.data)}),l=c.enter().append("g").attr("class",i).call(this.setCssRule(!1,".".concat(W.chartArcs," text"),["pointer-events:none","text-anchor:middle"]));l.append("g").attr("class",r).merge(c),l.append("text").attr("dy",n&&!t.hasMultiTargets()?"-.1em":".35em").style("opacity","0").style("text-anchor",t.getStylePropValue("middle")).style("pointer-events",t.getStylePropValue("none")),a.text=s.selectAll(".".concat(z.target," text"))},initArc:function(){var e=this,t=e.$el;t.arcs=t.main.select(".".concat(z.chart)).append("g").attr("class",W.chartArcs).attr("transform",e.getTranslate("arc")),e.setArcTitle()},setArcTitle:function(){var e=this,t=e.getArcTitle(),a=e.hasType("gauge");if(t){var n=e.$el.arcs.append("text").attr("class",a?dt.chartArcsGaugeTitle:W.chartArcsTitle).style("text-anchor","middle");a&&n.attr("dy","-0.3em"),Kt(n,t,a?void 0:[-.6,1.35],!0)}},redrawArc:function(e,t,a){var n=this,i=n.config,r=n.state,o=n.$el.main,s=i.interaction_enabled,c=s&&i.data_selection_isselectable,l=o.selectAll(".".concat(W.arcs)).selectAll(".".concat(W.arc)).data(n.arcData.bind(n));l.exit().transition().duration(t).style("opacity","0").remove(),l=l.enter().append("path").attr("class",n.getClass("arc",!0)).style("fill",function(u){return n.color(u.data)}).style("cursor",function(u){var d;return!((d=c?.bind)===null||d===void 0)&&d.call(c,n.api)(u)?"pointer":null}).style("opacity","0").each(function(u){n.isGaugeType(u.data)&&(u.startAngle=i.gauge_startingAngle,u.endAngle=i.gauge_startingAngle),this._current=u}).merge(l),n.hasType("gauge")&&(n.updateGaugeMax(),n.hasMultiArcGauge()&&n.redrawMultiArcGauge()),l.attr("transform",function(u){return!n.isGaugeType(u.data)&&a?"scale(0)":""}).style("opacity",function(u){return u===this._current?"0":null}).each(function(){r.transiting=!0}).transition().duration(e).attrTween("d",function(u){var d=n.updateAngle(u);if(!d)return function(){return"M 0 0"};isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle);var h=ea(this._current,d);return this._current=h(0),function(g){var f=h(g);return f.data=u.data,n.getArc(f,!0)}}).attr("transform",a?"scale(1)":"").style("fill",function(u){var d;return n.levelColor?(d=n.levelColor(u.data.values[0].value),i.data_colors[u.data.id]=d):d=n.color(u.data),d}).style("opacity",null).call(Re,function(){if(n.levelColor){var u=L(this),d=u.datum();n.updateLegendItemColor(d.data.id,u.style("fill"))}r.transiting=!1,j(i.onrendered,n.api)}),s&&n.bindArcEvent(l),n.hasType("polar")&&n.redrawPolar(),n.hasType("gauge")&&n.redrawBackgroundArcs(),n.redrawArcText(e)},redrawBackgroundArcs:function(){var e=this,t=e.config,a=e.state,n=e.hasMultiArcGauge(),i=t.gauge_fullCircle,r=e.filterTargetsToShow(e.data.targets).length===0&&!!t.data_empty_label_text,o=e.getStartAngle(),s=i?o+e.getArcLength():o*-1,c=e.$el.arcs.select("".concat(n?"g":"",".").concat(W.chartArcsBackground));if(n){var l=0;c=c.selectAll("path.".concat(W.chartArcsBackground)).data(e.data.targets),c.enter().append("path").attr("class",function(u,d){return"".concat(W.chartArcsBackground," ").concat(W.chartArcsBackground,"-").concat(d)}).merge(c).style("fill",t.gauge_background||null).attr("d",function(u){var d=u.id;if(r||a.hiddenTargetIds.indexOf(d)>=0)return"M 0 0";var h={data:[{value:t.gauge_max}],startAngle:o,endAngle:s,index:l++};return e.getArc(h,!0,!0)}),c.exit().remove()}else c.attr("d",r?"M 0 0":function(){var u={data:[{value:t.gauge_max}],startAngle:o,endAngle:s};return e.getArc(u,!0,!0)})},bindArcEvent:function(e){var t=this,a=t.config,n=t.state,i=n.inputType==="touch",r=n.inputType==="mouse";function o(l,u,d){t.expandArc(d),t.api.focus(d),t.toggleFocusLegend(d,!0),t.showTooltip([u],l)}function s(l){var u=l?.id||void 0;t.unexpandArc(u),t.api.revert(),t.revertLegend(),t.hideTooltip()}if(e.on("click",function(l,u,d){var h,g=t.updateAngle(u),f;g&&(f=t.convertToArcData(g),(h=t.toggleShape)===null||h===void 0||h.call(t,this,f,d),a.data_onclick.bind(t.api)(f,this))}),r&&e.on("mouseover",function(l,u){if(!n.transiting){n.event=l;var d=t.updateAngle(u),h=d?t.convertToArcData(d):null,g=h?.id||void 0;o(this,h,g),t.setOverOut(!0,h)}}).on("mouseout",function(l,u){if(!n.transiting){n.event=l;var d=t.updateAngle(u),h=d?t.convertToArcData(d):null;s(),t.setOverOut(!1,h)}}).on("mousemove",function(l,u){var d=t.updateAngle(u),h=d?t.convertToArcData(d):null;n.event=l,t.showTooltip([h],this)}),i&&t.hasArcType()&&!t.radars){var c=function(l){var u=l.changedTouches[0],d=L(it.elementFromPoint(u.clientX,u.clientY));return d};t.$el.svg.on("touchstart touchmove",function(l){if(!n.transiting){n.event=l;var u=c(l),d=u.datum(),h=d?.data&&d.data.id?t.updateAngle(d):null,g=h?t.convertToArcData(h):null,f=g?.id||void 0;t.callOverOutForTouch(g),rt(f)?s():o(this,g,f)}})}},redrawArcText:function(e){var t=this,a=t.config,n=t.state,i=t.$el,r=i.main,o=i.arcs,s=t.hasType("gauge"),c=t.hasMultiArcGauge(),l;if(s&&t.data.targets.length===1&&a.gauge_title||(l=r.selectAll(".".concat(W.chartArc)).select("text").style("opacity","0").attr("class",function(d){return t.isGaugeType(d.data)?dt.gaugeValue:null}).call(t.textForArcLabel.bind(t)).attr("transform",t.transformForArcLabel.bind(t)).style("font-size",function(d){return t.isGaugeType(d.data)&&t.data.targets.length===1&&!c?"".concat(Math.round(n.radius/5),"px"):null}).transition().duration(e).style("opacity",function(d){return t.isTargetToShow(d.data.id)&&t.isArcType(d.data)?null:"0"}),c&&l.attr("dy","-.1em")),r.select(".".concat(W.chartArcsTitle)).style("opacity",t.hasType("donut")||s?null:"0"),s){var u=a.gauge_fullCircle;u&&l?.attr("dy","".concat(c?0:Math.round(n.radius/14))),a.gauge_label_show&&(o.select(".".concat(dt.chartArcsGaugeUnit)).attr("dy","".concat(u?1.5:.75,"em")).text(a.gauge_units),o.select(".".concat(dt.chartArcsGaugeMin)).attr("dx","".concat(-1*(n.innerRadius+(n.radius-n.innerRadius)/(u?1:2)),"px")).attr("dy","1.2em").text(t.textForGaugeMinMax(a.gauge_min,!1)),!u&&o.select(".".concat(dt.chartArcsGaugeMax)).attr("dx","".concat(n.innerRadius+(n.radius-n.innerRadius)/2,"px")).attr("dy","1.2em").text(t.textForGaugeMinMax(a.gauge_max,!0)))}}},te={initArea:function(e){var t=this,a=t.config;e.insert("g",".".concat(a.area_front?st.circles:St.lines)).attr("class",t.getClass("areas",!0))},updateAreaColor:function(e){var t=this;return t.config.area_linearGradient?t.getGradienColortUrl(e.id):t.color(e)},updateArea:function(e,t){t===void 0&&(t=!1);var a=this,n=a.config,i=a.state,r=a.$el,o=a.$T,s=t?r.subchart:r;n.area_linearGradient&&a.updateLinearGradient();var c=s.main.selectAll(".".concat(le.areas)).selectAll(".".concat(le.area)).data(a.lineData.bind(a));o(c.exit(),e).style("opacity","0").remove(),s.area=c.enter().append("path").attr("class",a.getClass("area",!0)).style("fill",a.updateAreaColor.bind(a)).style("opacity",function(){return i.orgAreaOpacity=L(this).style("opacity"),"0"}).merge(c),c.style("opacity",i.orgAreaOpacity),a.setRatioForGroupedData(s.area.data())},redrawArea:function(e,t,a){a===void 0&&(a=!1);var n=this,i=(a?this.$el.subchart:this.$el).area,r=n.state.orgAreaOpacity;return[n.$T(i,t,Rt()).attr("d",e).style("fill",n.updateAreaColor.bind(n)).style("opacity",function(o){return String(n.isAreaRangeType(o)?r/1.75:r)})]},generateDrawArea:function(e,t){var a=this,n=a.config,i=n.line_connectNull,r=n.axis_rotated,o=a.generateGetAreaPoints(e,t),s=a.getYScaleById.bind(a),c=function(d){return(t?a.subxx:a.xx).call(a,d)},l=function(d,h){return a.isGrouped(d.id)?o(d,h)[0][1]:s(d.id,t)(a.isAreaRangeType(d)?a.getRangedData(d,"high"):a.getShapeYMin(d.id))},u=function(d,h){return a.isGrouped(d.id)?o(d,h)[1][1]:s(d.id,t)(a.isAreaRangeType(d)?a.getRangedData(d,"low"):d.value)};return function(d){var h=i?a.filterRemoveNull(d.values):d.values,g=0,f=0,p;if(a.isAreaType(d)){var v=ln();v=r?v.y(c).x0(l).x1(u):v.x(c).y0(n.area_above?0:n.area_below?a.state.height:l).y1(u),i||(v=v.defined(function(x){return a.getBaseValue(x)!==null})),a.isStepType(d)&&(h=a.convertValuesToStep(h)),p=v.curve(a.getCurve(d))(h)}else h[0]&&(g=a.scale.x(h[0].x),f=a.getYScaleById(d.id)(h[0].value)),p=r?"M ".concat(f," ").concat(g):"M ".concat(g," ").concat(f);return p||"M 0 0"}},generateGetAreaPoints:function(e,t){var a=this,n=a.config,i=a.getShapeX(0,e,t),r=a.getShapeY(!!t),o=a.getShapeOffset(a.isAreaType,e,t),s=a.getYScaleById.bind(a);return function(c,l){var u=s.call(a,c.id,t)(a.getShapeYMin(c.id)),d=o(c,l)||u,h=i(c),g=c.value,f=r(c);return n.axis_rotated&&(g>0&&f<u||g<0&&u<f)&&(f=u),[[h,d],[h,f-(u-d)],[h,f-(u-d)],[h,d]]}}},gr={initBar:function(){var e=this,t=e.$el,a=e.config,n=e.state.clip;t.bar=t.main.select(".".concat(z.chart)).insert("g",":first-child").attr("class",xt.chartBars).call(this.setCssRule(!1,".".concat(xt.chartBars),["pointer-events:none"])),a.clipPath===!1&&(a.bar_radius||a.bar_radius_ratio)&&t.bar.attr("clip-path",n.pathXAxis.replace(/#[^)]*/,"#".concat(n.id)))},updateTargetsForBar:function(e){var t=this,a=t.config,n=t.$el,i=t.getChartClass("Bar"),r=t.getClass("bars",!0),o=t.classFocus.bind(t),s=a.interaction_enabled&&a.data_selection_isselectable;n.bar||t.initBar();var c=n.main.select(".".concat(xt.chartBars)).selectAll(".".concat(xt.chartBar)).data(e.filter(function(u){return u.values.some(function(d){return I(d.value)||t.isBarRangeType(d)})})).attr("class",function(u){return i(u)+o(u)}),l=c.enter().append("g").attr("class",i).style("opacity","0").style("pointer-events",t.getStylePropValue("none"));l.append("g").attr("class",r).style("cursor",function(u){var d;return!((d=s?.bind)===null||d===void 0)&&d.call(s,t.api)(u)?"pointer":null}).call(t.setCssRule(!0," .".concat(xt.bar),["fill"],t.color))},updateBar:function(e,t){t===void 0&&(t=!1);var a=this,n=a.config,i=a.$el,r=a.$T,o=t?i.subchart:i,s=a.getClass("bar",!0),c=a.initialOpacity.bind(a);n.bar_linearGradient&&a.updateLinearGradient();var l=o.main.selectAll(".".concat(xt.bars)).selectAll(".".concat(xt.bar)).data(a.labelishData.bind(a));r(l.exit(),e).style("opacity","0").remove(),o.bar=l.enter().append("path").attr("class",s).style("fill",a.updateBarColor.bind(a)).merge(l).style("opacity",c),a.setRatioForGroupedData(o.bar.data())},updateBarColor:function(e){var t=this,a=t.getStylePropValue(t.color);return t.config.bar_linearGradient?t.getGradienColortUrl(e.id):a?a(e):null},redrawBar:function(e,t,a){a===void 0&&(a=!1);var n=this,i=(a?n.$el.subchart:n.$el).bar;return[n.$T(i,t,Rt()).attr("d",function(r){return(I(r.value)||n.isBarRangeType(r))&&e(r)}).style("fill",n.updateBarColor.bind(n)).style("opacity",null)]},generateDrawBar:function(e,t){var a=this,n=a.config,i=a.generateGetBarPoints(e,t),r=n.axis_rotated,o=n.bar_radius,s=n.bar_radius_ratio,c=I(o)&&o>0?function(){return o}:I(s)?function(l){return l*s}:null;return function(l,u){var d=i(l,u),h=+r,g=+!h,f=l.value<0,p=n["axis_".concat(a.axis.getId(l.id),"_inverted")],v=!p&&f||p&&!f,x=["",""],_=0,m=a.isGrouped(l.id),y=c&&m?a.isStackingRadiusData(l):!1;if(c){var T=r?g:h,b=d[2][T]-d[0][T];_=!m||y?c(b):0;var w="a".concat(_,",").concat(_," ").concat(v?"1 0 0":"0 0 1"," ");x[+!r]="".concat(w).concat(_,",").concat(_),x[+r]="".concat(w).concat([-_,_][r?"sort":"reverse"]()),v&&x.reverse()}var A=r?"H".concat(d[1][h]+(v?_:-_)," ").concat(x[0],"V").concat(d[2][g]-_," ").concat(x[1],"H").concat(d[3][h]):"V".concat(d[1][g]+(v?-_:_)," ").concat(x[0],"H").concat(d[2][h]-_," ").concat(x[1],"V").concat(d[3][g]);return"M".concat(d[0][h],",").concat(d[0][g]).concat(A,"z")}},isStackingRadiusData:function(e){var t=this,a=t.$el,n=t.config,i=t.data,r=t.state,o=e.id,s=e.index,c=e.value;if(r.hiddenTargetIds.indexOf(o)>-1){var l=a.bar.filter(function(g){return g.id===o&&g.value===c});return!l.empty()&&/a\d+/i.test(l.attr("d"))}var u=n.data_groups.find(function(g){return g.indexOf(o)>-1}),d=t.orderTargets(t.filterTargetsToShow(i.targets.filter(t.isBarType,t))).filter(function(g){return u.indexOf(g.id)>-1}),h=d.map(function(g){return g.values.filter(function(f){return f.index===s&&(I(c)&&c>0?f.value>0:f.value<0)})[0]}).filter(Boolean).map(function(g){return g.id});return c!==0&&h.indexOf(o)===h.length-1},generateGetBarPoints:function(e,t){var a=this,n=a.config,i=t?a.axis.subX:a.axis.x,r=a.getIndicesMax(e)+1,o=a.getBarW("bar",i,r),s=a.getShapeX(o,e,!!t),c=a.getShapeY(!!t),l=a.getShapeOffset(a.isBarType,e,!!t),u=a.getYScaleById.bind(a);return function(d,h){var g=d.id,f=u.call(a,g,t)(a.getShapeYMin(g)),p=l(d,h)||f,v=I(o)?o:o[d.id]||o._$width,x=n["axis_".concat(a.axis.getId(g),"_inverted")],_=d.value,m=s(d),y=c(d);n.axis_rotated&&!x&&(_>0&&y<f||_<0&&f<y)&&(y=f),a.isBarRangeType(d)||(y-=f-p);var T=m+v;return[[m,p],[m,y],[T,y],[T,p]]}}},fr={initCandlestick:function(){var e=this.$el;e.candlestick=e.main.select(".".concat(z.chart)).append("g").attr("class",kt.chartCandlesticks)},updateTargetsForCandlestick:function(e){var t=this,a=t.$el,n=t.getChartClass("Candlestick"),i=t.classFocus.bind(t);a.candlestick||t.initCandlestick();var r=t.$el.main.select(".".concat(kt.chartCandlesticks)).selectAll(".".concat(kt.chartCandlestick)).data(e).attr("class",function(o){return n(o)+i(o)});r.enter().append("g").attr("class",n).style("pointer-events","none")},updateCandlestick:function(e,t){t===void 0&&(t=!1);var a=this,n=a.$el,i=a.$T,r=t?n.subchart:n,o=a.getClass("candlestick",!0),s=a.initialOpacity.bind(a),c=r.main.selectAll(".".concat(kt.chartCandlestick)).selectAll(".".concat(kt.candlestick)).data(a.labelishData.bind(a));i(c.exit(),e).style("opacity","0").remove();var l=c.enter().filter(function(u){return u.value}).append("g").attr("class",o);l.append("line"),l.append("path"),r.candlestick||(r.candlestick={}),r.candlestick=c.merge(l).style("opacity",s)},generateDrawCandlestick:function(e,t){var a=this,n=a.config,i=a.generateGetCandlestickPoints(e,t),r=n.axis_rotated,o=n.candlestick_color_down;return function(s,c,l){var u=i(s,c),d=a.getCandlestickData(s),h=d?._isUp,g=+r,f=+!g;l.classed&&l.classed(kt[h?"valueUp":"valueDown"],!0);var p=r?"H".concat(u[1][1]," V").concat(u[1][0]," H").concat(u[0][1]):"V".concat(u[1][1]," H").concat(u[1][0]," V").concat(u[0][1]);l.select("path").attr("d","M".concat(u[0][g],",").concat(u[0][f]).concat(p,"z")).style("fill",function(m){var y=h?a.color(m):F(o)?o[m.id]:o;return y||a.color(m)});var v=l.select("line"),x=r?{x1:u[2][1],x2:u[2][2],y1:u[2][0],y2:u[2][0]}:{x1:u[2][0],x2:u[2][0],y1:u[2][1],y2:u[2][2]};for(var _ in x)v.attr(_,x[_])}},generateGetCandlestickPoints:function(e,t){t===void 0&&(t=!1);var a=this,n=a.config,i=t?a.axis.subX:a.axis.x,r=a.getIndicesMax(e)+1,o=a.getBarW("candlestick",i,r),s=a.getShapeX(o,e,!!t),c=a.getShapeY(!!t),l=a.getShapeOffset(a.isBarType,e,!!t),u=a.getYScaleById.bind(a);return function(d,h){var g=u.call(a,d.id,t)(a.getShapeYMin(d.id)),f=l(d,h)||g,p=I(o)?o:o[d.id]||o._$width,v=a.getCandlestickData(d),x;if(v){var _={start:s(d),end:0};_.end=_.start+p;var m={start:c(v.open),end:c(v.close)},y={x:_.start+p/2,high:c(v.high),low:c(v.low)};n.axis_rotated&&(d.value>0&&m.start<g||d.value<0&&g<m.start)&&(m.start=g),m.start-=g-f,x=[[_.start,m.start],[_.end,m.end],[y.x,y.low,y.high]]}else x=[[0,0],[0,0],[0,0,0]];return x}},redrawCandlestick:function(e,t,a){a===void 0&&(a=!1);var n=this,i=n.$el,r=n.$T,o=(a?i.subchart:i).candlestick,s=Rt(!0);return[o.each(function(c,l){var u=r(L(this),t,s);e(c,l,u)}).style("opacity",null)]},getCandlestickData:function(e){var t=e.value,a;if(B(t)){var n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],c=s===void 0?!1:s;a={open:n,high:i,low:r,close:o},c!==!1&&(a.volume=c)}else F(t)&&(a=M({},t));return a&&(a._isUp=a.close>=a.open),a||null}},pr={initGauge:function(){var e=this,t=e.config,a=e.$el.arcs,n=function(r){a.append("text").attr("class",r).style("text-anchor","middle").style("pointer-events","none")};if(e.hasType("gauge")){var i=e.hasMultiArcGauge();a.append(i?"g":"path").attr("class",W.chartArcsBackground).style("fill",!i&&t.gauge_background||null),t.gauge_units&&n(dt.chartArcsGaugeUnit),t.gauge_label_show&&(n(dt.chartArcsGaugeMin),!t.gauge_fullCircle&&n(dt.chartArcsGaugeMax))}},updateGaugeMax:function(){var e=this,t=e.config,a=e.state,n=e.hasMultiArcGauge(),i=n?e.getMinMaxData().max[0].value:e.getTotalDataSum(a.rendered);i+t.gauge_min*(t.gauge_min>0?-1:1)>t.gauge_max&&(t.gauge_max=i-t.gauge_min)},redrawMultiArcGauge:function(){var e=this,t=e.config,a=e.state,n=e.$el,i=e.state.hiddenTargetIds,r=n.main.selectAll(".".concat(W.arcs)).selectAll(".".concat(W.arcLabelLine)).data(e.arcData.bind(e)),o=r.enter().append("rect").attr("class",function(s){return"".concat(W.arcLabelLine," ").concat(z.target," ").concat(z.target,"-").concat(s.data.id)}).merge(r);o.style("fill",function(s){return e.levelColor?e.levelColor(s.data.values[0].value):e.color(s.data)}).style("display",t.gauge_label_show?null:"none").each(function(s){var c=0,l=2,u=0,d=0,h="";if(i.indexOf(s.data.id)<0){var g=e.updateAngle(s),f=a.gaugeArcWidth/e.filterTargetsToShow(e.data.targets).length*(g.index+1),p=g.endAngle-Math.PI/2,v=a.radius-f,x=p-(v===0?0:1/v);c=a.radiusExpanded-a.radius+f,u=Math.cos(x)*v,d=Math.sin(x)*v,h="rotate(".concat(p*180/Math.PI,", ").concat(u,", ").concat(d,")")}L(this).attr("x",u).attr("y",d).attr("width",c).attr("height",l).attr("transform",h).style("stroke-dasharray","0, ".concat(c+l,", 0"))})},textForGaugeMinMax:function(e,t){var a=this,n=a.config,i=n.gauge_label_extents;return D(i)?i.bind(a.api)(e,t):e},getGaugeLabelHeight:function(){var e=this.config;return this.config.gauge_label_show&&!e.gauge_fullCircle?20:0},getPaddingBottomForGauge:function(){var e=this;return e.getGaugeLabelHeight()*(e.config.gauge_label_show?2:2.5)}},vr={initBubble:function(){var e=this,t=e.config;e.hasType("bubble")&&(t.point_show=!0,t.point_type="circle",t.point_sensitivity=25)},getBaseLength:function(){var e=this,t=e.state,a=t.width,n=t.height,i=ft.bubbleBaseLength,r=e.cache.get(i);return r||e.cache.add(i,r=_t("min",[a,n])),r},getBubbleR:function(e){var t=this,a=t.config.bubble_maxR;D(a)?a=a.bind(t.api)(e):I(a)||(a=t.getBaseLength()/(t.getMaxDataCount()*2)+12);var n=_t("max",t.getMinMaxData().max.map(function(o){return t.isBubbleZType(o)?t.getBubbleZData(o.value,"y"):F(o.value)?o.value.mid:o.value})),i=a*a*Math.PI,r=(t.isBubbleZType(e)?t.getBubbleZData(e.value,"z"):e.value)*(i/n);return Math.sqrt(r/Math.PI)},getBubbleZData:function(e,t){return F(e)?e[t]:e[t==="y"?0:1]}},xr={initLine:function(){var e=this.$el;e.line=e.main.select(".".concat(z.chart)).append("g").attr("class",St.chartLines).call(this.setCssRule(!1,".".concat(St.chartLines),["pointer-events:none"]))},updateTargetsForLine:function(e){var t=this,a=t.$el,n=a.area,i=a.line,r=a.main,o=t.getChartClass("Line"),s=t.getClass("lines",!0),c=t.classFocus.bind(t);i||t.initLine();var l=e.filter(function(g){return!(t.isScatterType(g)||t.isBubbleType(g))}),u=r.select(".".concat(St.chartLines)).selectAll(".".concat(St.chartLine)).data(l).attr("class",function(g){return o(g)+c(g)}),d=u.enter().append("g").attr("class",o).style("opacity","0").style("pointer-events",t.getStylePropValue("none"));if(d.append("g").attr("class",s),t.hasTypeOf("Area")){var h=(!n&&d.empty()?u:d).filter(t.isAreaType.bind(t));t.initArea(h)}t.updateTargetForCircle(l,d)},updateLine:function(e,t){t===void 0&&(t=!1);var a=this,n=a.format.extraLineClasses,i=a.$el,r=a.$T,o=t?i.subchart:i,s=o.main.selectAll(".".concat(St.lines)).selectAll(".".concat(St.line)).data(a.lineData.bind(a));r(s.exit(),e).style("opacity","0").remove(),o.line=s.enter().append("path").attr("class",function(c){return"".concat(a.getClass("line",!0)(c)," ").concat(n(c)||"")}).style("stroke",a.color).merge(s).style("opacity",a.initialOpacity.bind(a)).style("shape-rendering",function(c){return a.isStepType(c)?"crispEdges":""}).attr("transform",null)},redrawLine:function(e,t,a){a===void 0&&(a=!1);var n=this,i=n.$el,r=n.$T,o=(a?i.subchart:i).line;return[r(o,t,Rt()).attr("d",e).style("stroke",this.color).style("opacity",null)]},getCurve:function(e){var t=this,a=t.config.axis_rotated&&t.isStepType(e);return a?function(n){var i=t.getInterpolate(e)(n);return i.orgPoint=i.point,i.pointRotated=function(r,o){this._point===1&&(this._point=2);var s=this._y*(1-this._t)+o*this._t;this._context.lineTo(this._x,s),this._context.lineTo(r,s),this._x=r,this._y=o},i.point=function(r,o){this._point===0?this.orgPoint(r,o):this.pointRotated(r,o)},i}:t.getInterpolate(e)},generateDrawLine:function(e,t){var a=this,n=a.config,i=a.scale,r=n.line_connectNull,o=n.axis_rotated,s=a.generateGetLinePoints(e,t),c=a.getYScaleById.bind(a),l=function(g){return(t?a.subxx:a.xx).call(a,g)},u=function(g,f){return a.isGrouped(g.id)?s(g,f)[0][1]:c(g.id,t)(a.getBaseValue(g))},d=un();d=o?d.x(u).y(l):d.x(l).y(u),r||(d=d.defined(function(g){return a.getBaseValue(g)!==null}));var h=t?i.subX:i.x;return function(g){var f=c(g.id,t),p=r?a.filterRemoveNull(g.values):g.values,v=0,x=0,_;if(a.isLineType(g)){var m=n.data_regions[g.id];m?_=a.lineWithRegions(p,i.zoom||h,f,m):(a.isStepType(g)&&(p=a.convertValuesToStep(p)),_=d.curve(a.getCurve(g))(p))}else p[0]&&(v=h(p[0].x),x=f(p[0].value)),_=o?"M ".concat(x," ").concat(v):"M ".concat(v," ").concat(x);return _||"M 0 0"}},lineWithRegions:function(e,t,a,n){var i=this,r=i.config,o=r.axis_rotated,s=i.axis.isTimeSeries(),c=[],l="2 2",u,d,h,g;if(N(n))for(var f=function(ht,G){return rt(ht)?G:s?mt.call(i,ht):ht},p=0,v=void 0;v=n[p];p++){var x=f(v.start,e[0].x),_=f(v.end,e[e.length-1].x),m=v.style||{dasharray:l};c[p]={start:x,end:_,style:m}}for(var y=o?function(G){return a(G.value)}:function(G){return t(G.x)},T=o?function(G){return t(G.x)}:function(G){return a(G.value)},b=function(G){return"M".concat(G[0][0],",").concat(G[0][1],"L").concat(G[1][0],",").concat(G[1][1])},w=s?function(G,Bt,K,gt){var wt=G.x.getTime(),Nt=Bt.x-G.x,Y=new Date(wt+Nt*K),yt=new Date(wt+Nt*(K+gt)),bt=o?[[a(d(K)),t(Y)],[a(d(K+h)),t(yt)]]:[[t(Y),a(d(K))],[t(yt),a(d(K+h))]];return b(bt)}:function(G,Bt,K,gt){var wt=o?[[a(d(K),!0),t(u(K))],[a(d(K+gt),!0),t(u(K+gt))]]:[[t(u(K),!0),a(d(K))],[t(u(K+gt),!0),a(d(K+gt))]];return b(wt)},A={x:i.axis.getAxisType("x"),y:i.axis.getAxisType("y")},S="",p=0,k=void 0;k=e[p];p++){var O=e[p-1],q=O&&P(O.value),m=i.isWithinRegions(k.x,c);if(P(k.value)){if(rt(c)||!m||!q)S+="".concat(p&&q?"L":"M").concat(y(k),",").concat(T(k));else if(q){try{m=m.dasharray.split(" ")}catch{m=l.split(" ")}u=Mt(A.x,O.x,k.x),d=Mt(A.y,O.value,k.value);var R=t(k.x)-t(O.x),E=a(k.value)-a(O.value),tt=Math.sqrt(Math.pow(R,2)+Math.pow(E,2));h=m[0]/tt,g=h*m[1];for(var nt=h;nt<=1;nt+=g)S+=w(O,k,nt,h),nt+g>=1&&(S+=w(O,k,1,0))}}}return S},isWithinRegions:function(e,t){for(var a=0,n=void 0;n=t[a];a++)if(n.start<e&&e<=n.end)return n.style;return!1},isWithinStep:function(e,t){return Math.abs(t-pt(this.state.event,e)[1])<30},shouldDrawPointsForLine:function(e){var t=this.config.line_point;return t===!0||B(t)&&t.indexOf(e.id)!==-1}},Gt=function(){return Rt()},ue={hasValidPointType:function(e){return/^(circle|rect(angle)?|polygon|ellipse|use)$/i.test(e||this.config.point_type)},hasValidPointDrawMethods:function(e){var t=e||this.config.point_type;return Tt(t)&&D(t.create)&&D(t.update)},initialOpacityForCircle:function(e){var t=this,a=t.config,n=t.state.withoutFadeIn,i=a.point_opacity;return rt(i)&&(i=this.getBaseValue(e)!==null&&n[e.id]?this.opacityForCircle(e):"0"),i},opacityForCircle:function(e){var t=this.config,a=t.point_opacity;return rt(a)&&(a=t.point_show&&!t.point_focus_only?null:"0",a=P(this.getBaseValue(e))?this.isBubbleType(e)||this.isScatterType(e)?"0.5":a:"0"),a},initCircle:function(){var e=this,t=e.$el.main;e.point=e.generatePoint(),(e.hasType("bubble")||e.hasType("scatter"))&&t.select(".".concat(st.chartCircles)).empty()&&t.select(".".concat(z.chart)).append("g").attr("class",st.chartCircles)},updateTargetForCircle:function(e,t){var a=this,n=this,i=n.config,r=n.data,o=n.$el,s=i.interaction_enabled&&i.data_selection_enabled,c=s&&i.data_selection_isselectable,l=n.getClass("circles",!0);if(i.point_show){!o.circle&&n.initCircle();var u=e,d=t;if(!u){u=r.targets.filter(function(g){return a.isScatterType(g)||a.isBubbleType(g)});var h=o.main.select(".".concat(st.chartCircles)).style("pointer-events","none").selectAll(".".concat(st.circles)).data(u);h.exit().remove(),d=h.enter()}s&&d.append("g").attr("class",function(g){return n.generateClass(Z.selectedCircles,g.id)}),d.append("g").attr("class",l).call(function(g){n.setCssRule(!0,".".concat(st.circles),["cursor:pointer"],c)(g),n.setCssRule(!0," .".concat(st.circle),["fill","stroke"],n.color)(g)}).style("opacity",function(){var g=L(this.parentNode);return g.attr("class").indexOf(st.chartCircles)>-1?"0":null}),s&&u.forEach(function(g){o.main.selectAll(".".concat(Z.selectedCircles).concat(n.getTargetSelectorSuffix(g.id))).selectAll("".concat(Z.selectedCircle)).each(function(f){f.value=g.values[f.index].value})})}},updateCircle:function(e){e===void 0&&(e=!1);var t=this,a=t.config,n=t.state,i=t.$el,r=a.point_focus_only,o=e?i.subchart:i;if(a.point_show&&!n.toggling){var s=o.main.selectAll(".".concat(st.circles)).selectAll(".".concat(st.circle)).data(function(c){return t.isLineType(c)&&t.shouldDrawPointsForLine(c)||t.isBubbleType(c)||t.isRadarType(c)||t.isScatterType(c)?r?[c.values[0]]:c.values:[]});s.exit().remove(),s.enter().filter(Boolean).append(t.point("create",this,t.pointR.bind(t),t.getStylePropValue(t.color))),o.circle=o.main.selectAll(".".concat(st.circles," .").concat(st.circle)).style("stroke",t.getStylePropValue(t.color)).style("opacity",t.initialOpacityForCircle.bind(t))}},redrawCircle:function(e,t,a,n,i){i===void 0&&(i=!1);var r=this,o=r.state.rendered,s=r.$el,c=r.$T,l=i?s.subchart:s,u=l.main.selectAll(".".concat(Z.selectedCircle));if(!r.config.point_show)return[];var d=r.point("update",r,e,t,r.getStylePropValue(r.color),a,n,u),h=r.isCirclePoint()?"c":"",g=Rt(),f=r.opacityForCircle.bind(r),p=[];return l.circle.each(function(v){var x=d.bind(this)(v);x=c(x,a||!o,g).style("opacity",f),p.push(x)}),[p,c(u,a).attr("".concat(h,"x"),e).attr("".concat(h,"y"),t)]},showCircleFocus:function(e){var t=this,a=t.config,n=t.state,i=n.hasRadar,r=n.resizing,o=n.toggling,s=n.transiting,c=t.$el,l=c.circle;if(s===!1&&a.point_focus_only&&l){var u=(i?t.radarCircleX:t.circleX).bind(t),d=(i?t.radarCircleY:t.circleY).bind(t),h=o||rt(e),g=t.point("update",t,u,d,t.getStylePropValue(t.color),r?!1:h);e&&(l=l.filter(function(f){var p,v=(p=e.filter)===null||p===void 0?void 0:p.call(e,function(x){return x.id===f.id});return v.length?L(this).datum(v[0]):!1})),l.attr("class",this.updatePointClass.bind(this)).style("opacity",null).each(function(f){var p=f.id,v=f.index,x=f.value,_="hidden";P(x)&&(g.bind(this)(f),t.expandCircles(v,p),_=""),this.style.visibility=_})}},hideCircleFocus:function(){var e=this,t=e.config,a=e.$el.circle;t.point_focus_only&&a&&(e.unexpandCircles(),a.style("visibility","hidden"))},circleX:function(e){return this.xx(e)},updateCircleY:function(e){e===void 0&&(e=!1);var t=this,a=t.generateGetLinePoints(t.getShapeIndices(t.isLineType),e);return function(n,i){var r=n.id;return t.isGrouped(r)?a(n,i)[0][1]:t.getYScaleById(r,e)(t.getBaseValue(n))}},expandCircles:function(e,t,a){var n=this,i=n.pointExpandedR.bind(n);a&&n.unexpandCircles();var r=n.getShapeByIndex("circle",e,t).classed(z.EXPANDED,!0),o=i(r)/n.config.point_r,s=1-o;n.isCirclePoint()?r.attr("r",i):r.each(function(){var c=L(this);if(this.tagName==="circle")c.attr("r",i);else{var l=this.getBBox(),u=l.width,d=l.height,h=s*(+c.attr("x")+u/2),g=s*(+c.attr("y")+d/2);c.attr("transform","translate(".concat(h," ").concat(g,") scale(").concat(o,")"))}})},unexpandCircles:function(e){var t=this,a=t.pointR.bind(t),n=t.getShapeByIndex("circle",e).filter(function(){return L(this).classed(z.EXPANDED)}).classed(z.EXPANDED,!1);if(n.attr("r",a),!t.isCirclePoint()){var i=a(n)/t.config.point_r;n.attr("transform",i!==1?"scale(".concat(i,")"):null)}},pointR:function(e){var t=this,a=t.config,n=a.point_r,i=n;return t.isBubbleType(e)?i=t.getBubbleR(e):D(n)&&(i=n.bind(t.api)(e)),i},pointExpandedR:function(e){var t=this,a=t.config,n=t.isBubbleType(e)?1.15:1.75;return a.point_focus_expand_enabled?a.point_focus_expand_r||t.pointR(e)*n:t.pointR(e)},pointSelectR:function(e){var t=this,a=t.config.point_select_r;return D(a)?a(e):a||t.pointR(e)*4},isWithinCircle:function(e,t){var a=pt(this.state.event,e),n=L(e),i=this.isCirclePoint(e)?"c":"",r=+n.attr("".concat(i,"x")),o=+n.attr("".concat(i,"y"));if(!(r||o)&&e.nodeType===1){var s=qt(e),c=s.x,l=s.y;r=c,o=l}return Math.sqrt(Math.pow(r-a[0],2)+Math.pow(o-a[1],2))<(t||this.config.point_sensitivity)},insertPointInfoDefs:function(e,t){var a,n=this,i=function(l,u){for(var d=l.attributes,h=0,g;g=d[h];h++)g=g.name,u.setAttribute(g,l.getAttribute(g))},r=new DOMParser().parseFromString(e,"image/svg+xml"),o=r.documentElement,s=it.createElementNS(ce.svg,o.nodeName.toLowerCase());if(s.id=t,s.style.fill="inherit",s.style.stroke="inherit",i(o,s),!((a=o.childNodes)===null||a===void 0)&&a.length){var c=L(s);"innerHTML"in s?c.html(o.innerHTML):It(o.childNodes).forEach(function(l){i(l,c.append(l.tagName).node())})}n.$el.defs.node().appendChild(s)},pointFromDefs:function(e){return this.$el.defs.select("#".concat(e))},updatePointClass:function(e){var t=this,a=t.$el.circle,n=!1;return(F(e)||a)&&(n=e===!0?a.each(function(i){var r=t.getClass("circle",!0)(i);this.getAttribute("class").indexOf(z.EXPANDED)>-1&&(r+=" ".concat(z.EXPANDED)),this.setAttribute("class",r)}):t.getClass("circle",!0)(e)),n},generateGetLinePoints:function(e,t){var a=this,n=a.config,i=a.getShapeX(0,e,t),r=a.getShapeY(t),o=a.getShapeOffset(a.isLineType,e,t),s=a.getYScaleById.bind(a);return function(c,l){var u=s.call(a,c.id,t)(a.getShapeYMin(c.id)),d=o(c,l)||u,h=i(c),g=r(c);n.axis_rotated&&(c.value>0&&g<u||c.value<0&&u<g)&&(g=u);var f=[h,g-(u-d)];return[f,f,f,f]}},generatePoint:function(){var e=this,t=e.config,a=e.state.datetimeId,n=[],i=J(t.point_pattern)?t.point_pattern:[t.point_type];return function(r,o){for(var s=[],c=2;c<arguments.length;c++)s[c-2]=arguments[c];return function(l){var u,d=e.getTargetSelectorSuffix(l.id||((u=l.data)===null||u===void 0?void 0:u.id)||l),h=L(this);n.indexOf(d)<0&&n.push(d);var g=i[n.indexOf(d)%i.length];if(e.hasValidPointType(g))g=e[g];else if(!e.hasValidPointDrawMethods(g)){var f="".concat(a,"-point").concat(d),p=e.pointFromDefs(f);if(p.size()<1&&e.insertPointInfoDefs(g,f),r==="create")return e.custom.create.bind(o).apply(void 0,ct([h,f],s,!1));if(r==="update")return e.custom.update.bind(o).apply(void 0,ct([h],s,!1))}return g[r].bind(o).apply(void 0,ct([h],s,!1))}}},custom:{create:function(e,t,a){return e.append("use").attr("xlink:href","#".concat(t)).attr("class",this.updatePointClass.bind(this)).style("fill",a).node()},update:function(e,t,a,n,i,r,o){var s=this,c=e.node().getBBox(),l=c.width,u=c.height,d=function(f){return P(f.value)?t(f)-l/2:0},h=function(f){return P(f.value)?a(f)-u/2:0},g=e;return i&&(r&&g.attr("x",d),g=s.$T(g,i,Gt()),o&&s.$T(o,i,Gt())),g.attr("x",d).attr("y",h).style("fill",n)}},circle:{create:function(e,t,a){return e.append("circle").attr("class",this.updatePointClass.bind(this)).attr("r",t).style("fill",a).node()},update:function(e,t,a,n,i,r,o){var s=this,c=e;return s.hasType("bubble")&&c.attr("r",s.pointR.bind(s)),i&&(r&&c.attr("cx",t),c.attr("cx")&&(c=s.$T(c,i,Gt())),o&&s.$T(c,i,Gt())),c.attr("cx",t).attr("cy",a).style("fill",n)}},rectangle:{create:function(e,t,a){var n=function(i){return t(i)*2};return e.append("rect").attr("class",this.updatePointClass.bind(this)).attr("width",n).attr("height",n).style("fill",a).node()},update:function(e,t,a,n,i,r,o){var s=this,c=s.config.point_r,l=function(h){return t(h)-c},u=function(h){return a(h)-c},d=e;return i&&(r&&d.attr("x",l),d=s.$T(d,i,Gt()),o&&s.$T(o,i,Gt())),d.attr("x",l).attr("y",u).style("fill",n)}}};function qe(e){var t=e.config.polar_level_max,a=e.getMinMaxData().max[0].value;return t&&t>a&&(a=t),a}var _r={initPolar:function(){var e=this,t=e.$el.arcs,a=e.config,n=a.polar_level_text_show,i=a.polar_level_text_backgroundColor;t.levels=t.append("g").attr("class",Et.levels),n&&i&&e.generateDataLabelBackgroundColorFilter(i)},getPolarOuterRadius:function(e,t){var a,n=qe(this);return((a=e?.data.values[0].value)!==null&&a!==void 0?a:0)/n*t},updateTargetsForPolar:function(e){this.updateTargetsForArc(e)},redrawPolar:function(){var e=this,t=e.config;t.polar_level_show&&e.updatePolarLevel()},updatePolarLevel:function(){var e=this,t=e.config,a=e.state,n=e.$el.arcs.levels,i=t.polar_level_depth,r=qe(e),o=oe(0,i),s=a.radius,c=o.map(function(f){return s*((f+1)/i)}),l=(t.polar_level_text_format||function(){}).bind(e.api),u=n.selectAll(".".concat(Et.level)).data(o);u.exit().remove();var d=u.enter().append("g").attr("class",function(f,p){return"".concat(Et.level," ").concat(Et.level,"-").concat(p)});if(d.append("circle"),d.merge(u).selectAll("circle").style("visibility",t.polar_level_show?null:"hidden").attr("cx",0).attr("cy",0).attr("r",function(f){return c[f]}),t.polar_level_text_show){var h=t.polar_level_text_backgroundColor,g="#".concat(a.datetimeId,"-labels-bg").concat(e.getTargetSelectorSuffix(h));d.append("text").style("text-anchor","middle"),d.merge(u).selectAll("text").attr("dy",function(f){return-c[f]+5}).attr("filter",h?"url(".concat(g,")"):null).text(function(f){return l(r/o.length*(f+1))})}}};function mr(e,t,a,n,i,r){var o=e&&n>0?a-n:n,s=2*Math.PI,c=t==="x"?Math.sin:Math.cos;return i*(1-r*c(o*s/a))}var Vt=ft.radarPoints,yr={initRadar:function(){var e=this,t=e.config,a=e.state.current,n=e.$el;e.hasType("radar")&&(n.radar=n.main.select(".".concat(z.chart)).append("g").attr("class",da.chartRadars),n.radar.levels=n.radar.append("g").attr("class",Et.levels),n.radar.axes=n.radar.append("g").attr("class",et.axis),n.radar.shapes=n.radar.append("g").attr("class",at.shapes),a.dataMax=t.radar_axis_max||e.getMinMaxData().max[0].value)},getRadarSize:function(){var e=this,t=e.config,a=e.state,n=a.arcWidth,i=a.arcHeight,r=t.axis_x_categories.length<4?-20:10,o=(Math.min(n,i)-r)/2;return[o,o]},updateTargetsForRadar:function(e){var t=this,a=t.config;Xt(a.axis_x_categories)&&(a.axis_x_categories=oe(0,_t("max",e.map(function(n){return n.values.length})))),t.generateRadarPoints()},getRadarPosition:function(e,t,a,n){var i=this,r=i.config,o=i.getRadarSize(),s=o[0],c=o[1],l=r.axis_x_categories.length,u=r.radar_direction_clockwise,d=It(e).map(function(h){return mr(u,h,l,t,N(a)?a:e==="x"?s:c,I(n)?n:r.radar_size_ratio)});return d.length===1?d[0]:d},generateRadarPoints:function(){var e=this,t=e.data.targets,a=e.getRadarSize(),n=a[0],i=a[1],r=e.cache.get(Vt)||{},o=r._size;(!o||o.width!==n&&o.height!==i)&&(t.forEach(function(s){r[s.id]=s.values.map(function(c,l){return e.getRadarPosition(["x","y"],l,void 0,e.getRatio("radar",c))})}),r._size={width:n,height:i},e.cache.add(Vt,r))},redrawRadar:function(){var e=this,t=e.$el,a=t.radar,n=t.main,i=e.getTranslate("radar");i&&(a.attr("transform",i),n.select(".".concat(lt.chartTexts)).attr("transform",i),e.generateRadarPoints(),e.updateRadarLevel(),e.updateRadarAxes(),e.updateRadarShape())},generateGetRadarPoints:function(){var e=this.cache.get(Vt);return function(t,a){var n=e[t.id][a];return[n,n,n,n]}},updateRadarLevel:function(){var e=this,t=e.config,a=e.state,n=e.$el.radar,i=e.getRadarSize(),r=i[0],o=i[1],s=t.radar_level_depth,c=t.axis_x_categories.length,l=t.radar_level_text_show,u=n.levels,d=oe(0,s),h=t.radar_size_ratio*Math.min(r,o),g=d.map(function(_){return h*((_+1)/s)}),f=(t.radar_level_text_format||function(){}).bind(e.api),p=d.map(function(_){var m=g[_],y=oe(0,c).map(function(T){return e.getRadarPosition(["x","y"],T,m,1).join(",")});return y.join(" ")}),v=u.selectAll(".".concat(Et.level)).data(d);v.exit().remove();var x=v.enter().append("g").attr("class",function(_,m){return"".concat(Et.level," ").concat(Et.level,"-").concat(m)});x.append("polygon").style("visibility",t.radar_level_show?null:"hidden"),l&&(u.select("text").empty()&&u.append("text").attr("dx","-.5em").attr("dy","-.7em").style("text-anchor","end").text(function(){return f(0)}),x.append("text").attr("dx","-.5em").style("text-anchor","end").text(function(_){return f(a.current.dataMax/d.length*(_+1))})),x.merge(v).attr("transform",function(_){return"translate(".concat(r-g[_],", ").concat(o-g[_],")")}).selectAll("polygon").attr("points",function(_){return p[_]}),l&&u.selectAll("text").attr("x",function(_){return rt(_)?r:p[_].split(",")[0]}).attr("y",function(_){return rt(_)?o:0})},updateRadarAxes:function(){var e=this,t=e.config,a=e.$el.radar,n=e.getRadarSize(),i=n[0],r=n[1],o=t.axis_x_categories,s=a.axes.selectAll("g").data(o);s.exit().remove();var c=s.enter().append("g").attr("class",function(f,p){return"".concat(et.axis,"-").concat(p)});if(t.radar_axis_line_show&&c.append("line"),t.radar_axis_text_show&&c.append("text"),s=c.merge(s),t.radar_axis_line_show&&s.select("line").attr("x1",i).attr("y1",r).attr("x2",function(f,p){return e.getRadarPosition("x",p)}).attr("y2",function(f,p){return e.getRadarPosition("y",p)}),t.radar_axis_text_show){var l=t.radar_axis_text_position,u=l.x,d=u===void 0?0:u,h=l.y,g=h===void 0?0:h;s.select("text").style("text-anchor","middle").attr("dy",".5em").call(function(f){f.each(function(p){Kt(L(this),String(p),[-.6,1.2])})}).datum(function(f,p){return{index:p}}).attr("transform",function(f){rt(this.width)&&(this.width=this.getBoundingClientRect().width/2);var p=e.getRadarPosition("x",f.index,void 0,1),v=Math.round(e.getRadarPosition("y",f.index,void 0,1));return p>i?p+=this.width+d:Math.round(p)<i&&(p-=this.width+d),v>r?(v/2===r&&this.firstChild.tagName==="tspan"&&this.firstChild.setAttribute("dy","0em"),v+=g):v<r&&(v-=g),"translate(".concat(p," ").concat(v,")")})}e.bindRadarEvent()},bindRadarEvent:function(){var e=this,t=e.config,a=e.state,n=e.$el,i=n.radar,r=n.svg,o=t.point_focus_only,s=a.inputType,c=a.transiting;if(t.interaction_enabled){var l=s==="mouse",u=function(h){var g=h.target;/tspan/i.test(g.tagName)&&(g=g.parentNode);var f=L(g).datum();return f&&Object.keys(f).length===1?f.index:void 0},d=function(h){a.event=h;var g=u(h),f=rt(g);(l||f)&&(e.hideTooltip(),o?e.hideCircleFocus():e.unexpandCircles(),l?e.setOverOut(!1,g):f&&e.callOverOutForTouch())};i.axes.selectAll("text").on(l?"mouseover ":"touchstart",function(h){if(!c){a.event=h;var g=u(h);e.selectRectForSingle(r.node(),null,g),l?e.setOverOut(!0,g):e.callOverOutForTouch(g)}}).on("mouseout",l?d:null),l||r.on("touchstart",d)}},updateRadarShape:function(){var e=this,t=e.data.targets.filter(function(r){return e.isRadarType(r)}),a=e.cache.get(Vt),n=e.$el.radar.shapes.selectAll("polygon").data(t),i=n.enter().append("g").attr("class",e.getChartClass("Radar"));e.$T(n.exit()).remove(),i.append("polygon").merge(n).style("fill",e.color).style("stroke",e.color).attr("points",function(r){return a[r.id].join(" ")}),e.updateTargetForCircle(t,i)},radarCircleX:function(e){return this.cache.get(Vt)[e.id][e.index][0]},radarCircleY:function(e){return this.cache.get(Vt)[e.id][e.index][1]}};function br(e,t){var a=this,n=a.scale,i=n.x,r=n.y,o=a.state.width;e.selectAll("g").attr("transform",function(s){return"translate(".concat(s===t?"0,0":"".concat(i(s.x0),",").concat(r(s.y0)),")")}).select("rect").attr("width",function(s){return s===t?o:i(s.x1)-i(s.x0)}).attr("height",function(s){return s===t?0:r(s.y1)-r(s.y0)})}function Tr(e){var t=this;return e.map(function(a){var n=a.id,i=a.values,r=i[0].value;return{name:n,id:n,value:r,ratio:t.getRatio("treemap",i[0])}})}var wr={initTreemap:function(){var e=this,t=e.$el,a=e.state,n=a.current,i=n.width,r=n.height,o=a.clip,s=a.datetimeId;o.id="".concat(s,"-clip"),e.treemap=fn().tile(e.getTreemapTile()),e.treemapFn=function(c){var l=pn(c).sum(function(d){return d.value}),u=e.getSortCompareFn(!0);return e.treemap(u?l.sort(u):l)},t.defs.append("clipPath").attr("id",o.id).append("rect").attr("width",i).attr("height",r),t.treemap=t.main.select(".".concat(z.chart)).attr("clip-path","url(#".concat(o.id,")")).append("g").classed(Ce.chartTreemaps,!0),e.bindTreemapEvent()},bindTreemapEvent:function(){var e=this,t=e.$el,a=e.config,n=e.state,i=function(o){var s,c=o.isTrusted?o.target:(s=n.eventReceiver.rect)===null||s===void 0?void 0:s.node(),l;return/^rect$/i.test(c.tagName)&&(n.event=o,l=L(c).datum()),l?.data};if(a.interaction_enabled){var r=n.inputType==="touch";t.treemap.on(r?"touchstart":"mousemove",function(o){var s=i(o);s&&(e.showTooltip([s],o.currentTarget),o.type==="mouseover"&&e.setOverOut(!0,s))}).on(r?"touchend":"mouseout",function(o){var s=i(o);e.hideTooltip(),e.setOverOut(!1,s)})}},getTreemapTile:function(){var e,t,a=this,n=a.config,i=a.state.current,r=i.width,o=i.height,s=(t={binary:De,dice:vn,slice:xn,sliceDice:_n,squarify:mn,resquarify:yn}[(e=n.treemap_tile)!==null&&e!==void 0?e:"binary"])!==null&&t!==void 0?t:De;return function(c,l,u,d,h){s(c,0,0,r,o);for(var g=0,f=c.children;g<f.length;g++){var p=f[g];p.x0=l+p.x0/r*(d-l),p.x1=l+p.x1/r*(d-l),p.y0=u+p.y0/o*(h-u),p.y1=u+p.y1/o*(h-u)}}},getTreemapData:function(e){var t=this;return{name:"root",children:Tr.bind(t)(t.filterTargetsToShow(e.filter(t.isTreemapType,t)))}},updateTargetsForTreemap:function(e){var t=this,a=t.$el.treemap,n=t.treemapFn(t.getTreemapData(e??t.data.targets));a.data(n)},updateTreemap:function(e){var t=this,a=t.$el,n=t.$T,i=a.treemap.datum(),r=t.getChartClass("Treemap"),o=a.treemap.selectAll("g").data(i.children);n(o.exit(),e).style("opacity","0").remove(),o.enter().append("g").append("rect"),a.treemap.selectAll("g").attr("class",r).select("rect").attr("fill",function(s){return t.color(s.data.name)})},generateGetTreemapPoints:function(){var e=this,t=e.$el,a=e.scale,n=a.x,i=a.y,r={};return t.treemap.selectAll("g").each(function(o){r[o.data.name]=[[n(o.x0),i(o.y0)],[n(o.x1),i(o.y1)]]}),function(o){return r[o.id]}},redrawTreemap:function(e){var t=this,a=t.$el,n=t.state.current,i=n.width,r=n.height;return a.defs.select("rect").attr("width",i).attr("height",r),[t.$T(a.treemap,e,Rt()).call(br.bind(t),a.treemap.datum())]},treemapDataLabelFormat:function(e){var t=this,a=t.config,n=e.id,i=e.value,r=a.treemap_label_format,o=t.getRatio("treemap",e),s=(o*100).toFixed(2),c=a.treemap_label_show&&t.meetsLabelThreshold(o,"treemap")?null:"0";return function(l){return l.style("opacity",c),D(r)?r.bind(t.api)(i,o,n):"".concat(n,`
`).concat(s,"%")}}},de={point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_focus_only:!1,point_opacity:void 0,point_pattern:[],point_select_r:void 0,point_type:"circle"},ee={area_above:!1,area_below:!1,area_front:!0,area_linearGradient:!1,area_zerobased:!0},Ar={bar_label_threshold:0,bar_linearGradient:!1,bar_indices_removeNull:!1,bar_overlap:!1,bar_padding:0,bar_radius:void 0,bar_radius_ratio:void 0,bar_sensitivity:2,bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0},kr={bubble_maxR:35,bubble_zerobased:!1},Sr={candlestick_width:void 0,candlestick_width_ratio:.6,candlestick_width_max:void 0,candlestick_color_down:"red"},Rr={line_connectNull:!1,line_step_type:"step",line_step_tooltipMatch:!1,line_zerobased:!1,line_classes:void 0,line_point:!0},Cr={scatter_zerobased:!1},Ee={spline_interpolation_type:"cardinal"},he={arc_cornerRadius:0,arc_cornerRadius_ratio:0},Lr={donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_rate:.98,donut_expand_duration:50,donut_padAngle:0,donut_startingAngle:0},Er={gauge_background:"",gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_label_extents:void 0,gauge_label_threshold:0,gauge_min:0,gauge_max:100,gauge_type:"single",gauge_startingAngle:-1*Math.PI/2,gauge_arcLength:100,gauge_title:"",gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_rate:.98,gauge_expand_duration:50},Ir={pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_rate:.98,pie_expand_duration:50,pie_innerRadius:0,pie_outerRadius:void 0,pie_padAngle:0,pie_padding:0,pie_startingAngle:0},Or={polar_label_show:!0,polar_label_format:void 0,polar_label_threshold:.05,polar_label_ratio:void 0,polar_level_depth:3,polar_level_max:void 0,polar_level_show:!0,polar_level_text_backgroundColor:"#fff",polar_level_text_format:function(e){return e%1===0?e:e.toFixed(2)},polar_level_text_show:!0,polar_padAngle:0,polar_padding:0,polar_startingAngle:0},Pr={radar_axis_max:void 0,radar_axis_line_show:!0,radar_axis_text_show:!0,radar_axis_text_position:{},radar_level_depth:3,radar_level_show:!0,radar_level_text_format:function(e){return e%1===0?e:e.toFixed(2)},radar_level_text_show:!0,radar_size_ratio:.87,radar_direction_clockwise:!1},Dr={treemap_tile:"binary",treemap_label_format:void 0,treemap_label_threshold:.05,treemap_label_show:!0};function Ut(e,t){ot(Ft.prototype,ur.concat(e)),ot(Wt.prototype,lr),$t.setOptions(dr.concat(t||[]))}function Ot(e,t){Ut([ue,xr].concat(e||[])),$t.setOptions([de,Rr].concat(t||[]))}function ae(e,t){ot(Ft.prototype,[hr].concat(e||[])),$t.setOptions(t)}var zr=function(){return Ot(te,[ee]),(zr=function(){return C.AREA})()},Mr=function(){return Ot(te,[ee]),(Mr=function(){return C.AREA_LINE_RANGE})()},Xr=function(){return Ot(te,[ee,Ee]),(Xr=function(){return C.AREA_SPLINE})()},$r=function(){return Ot(te,[ee,Ee]),($r=function(){return C.AREA_SPLINE_RANGE})()},Fr=function(){return Ot(te,[ee]),(Fr=function(){return C.AREA_STEP})()},Br=function(){return Ot(),(Br=function(){return C.LINE})()},Nr=function(){return Ot(void 0,[Ee]),(Nr=function(){return C.SPLINE})()},Gr=function(){return Ot(),(Gr=function(){return C.STEP})()},Vr=function(){return ae(void 0,[he,Lr]),(Vr=function(){return C.DONUT})()},Yr=function(){return ae([pr],[he,Er]),(Yr=function(){return C.GAUGE})()},Hr=function(){return ae(void 0,[he,Ir]),(Hr=function(){return C.PIE})()},Wr=function(){return ae([_r],[he,Or]),(Wr=function(){return C.POLAR})()},Ur=function(){return ae([ue,yr],[de,Pr]),(Ur=function(){return C.RADAR})()},jr=function(){return Ut([gr],Ar),(jr=function(){return C.BAR})()},Zr=function(){return Ut([ue,vr],[kr,de]),(Zr=function(){return C.BUBBLE})()},qr=function(){return Ut([fr],[Sr]),(qr=function(){return C.CANDLESTICK})()},Kr=function(){return Ut([ue],[de,Cr]),(Kr=function(){return C.SCATTER})()},Jr=function(){return Ut([wr],[Dr]),(Jr=function(){return C.TREEMAP})()};function Ke(e,t,a,n){e===void 0&&(e=!1);var i=this,r=i.config,o=i.$el.main,s=r.data_selection_grouped,c=r.data_selection_isselectable.bind(i.api);r.data_selection_enabled&&o.selectAll(".".concat(at.shapes)).selectAll(".".concat(at.shape)).each(function(l){var u=L(this),d=l.data?l.data:l,h=d.id,g=d.index,f=i.getToggle(this,l).bind(i),p=s||!t||t.indexOf(h)>=0,v=!a||a.indexOf(g)>=0,x=u.classed(Z.SELECTED);u.classed(St.line)||u.classed(le.area)||(e?p&&v&&c(l)&&!x?f(!0,u.classed(Z.SELECTED,!0),l,g):N(n)&&n&&x&&f(!1,u.classed(Z.SELECTED,!1),l,g):p&&v&&c(l)&&x&&f(!1,u.classed(Z.SELECTED,!1),l,g))})}var Qr={selected:function(e){var t=this.internal,a=[];return t.$el.main.selectAll(".".concat(at.shapes+t.getTargetSelectorSuffix(e))).selectAll(".".concat(at.shape)).filter(function(){return L(this).classed(Z.SELECTED)}).each(function(n){return a.push(n)}),a},select:function(e,t,a){var n=this.internal;Ke.bind(n)(!0,e,t,a)},unselect:function(e,t){var a=this.internal;Ke.bind(a)(!1,e,t)}},to={subchart:{show:function(){var e,t,a=this.internal,n=a.$el.subchart,i=a.config,r=i.subchart_show;if(!r){a.unbindZoomEvent(),i.subchart_show=!r,!n.main&&a.initSubchart();var o=n.main.selectAll(".".concat(z.target));a.data.targets.length!==o.size()&&(a.updateSizes(),a.updateTargetsForSubchart(a.data.targets),o=(e=n.main)===null||e===void 0?void 0:e.selectAll(".".concat(z.target))),o?.style("opacity",null),(t=n.main)===null||t===void 0||t.style("display",null),this.resize()}},hide:function(){var e=this.internal,t=e.$el.subchart.main,a=e.config;a.subchart_show&&t?.style("display")!=="none"&&(a.subchart_show=!1,t.style("display","none"),this.resize())},toggle:function(){var e=this.internal,t=e.config;this.subchart[t.subchart_show?"hide":"show"]()}}};function eo(e,t,a,n){n===void 0&&(n=!1);var i=a[0],r=a[1];return e.every(function(o,s){return(s===0?n?+o<=i:+o>=i:n?+o>=r:+o<=r)&&!e.every(function(c,l){return c===t[l]})})}var Aa=function(e){var t,a=this.internal,n=a.$el,i=a.axis,r=a.config,o=a.org,s=a.scale,c=r.axis_rotated,l=r.axis_x_inverted,u=i.isCategorized(),d=e;if(r.zoom_enabled&&d){i.isTimeSeries()&&(d=d.map(function(v){return mt.bind(a)(v)}));var h=eo(d,a.getZoomDomain(!0),a.getZoomDomain(),l);if(h){if(u&&(d=d.map(function(v,x){return Number(v)+(x===0?0:1)})),a.api.tooltip.hide(),r.subchart_show){var g=s.zoom||s.x;a.brush.getSelection().call(a.brush.move,d.map(g))}else{var g=u?s.x.orgScale():o.xScale||s.x,f=[-g(d[0]),0],p=(t=Dt.scale(g.range()[1]/(g(d[1])-g(d[0])))).translate.apply(t,c?f.reverse():f);n.eventRect.call(a.zoom.transform,p)}a.setZoomResetButton()}}else d=s.zoom?s.zoom.domain():s.x.orgDomain();return d};ot(Aa,{enable:function(e){var t=this.internal,a=t.config;/^(drag|wheel)$/.test(e)&&(a.zoom_type=e),a.zoom_enabled=!!e,t.zoom?e===!1&&t.bindZoomEvent(!1):(t.initZoom(),t.bindZoomEvent()),t.updateAndRedraw()},max:function(e){var t=this.internal,a=t.config,n=t.org.xDomain;return(e===0||e)&&(a.zoom_x_max=_t("max",[n[1],e])),a.zoom_x_max},min:function(e){var t=this.internal,a=t.config,n=t.org.xDomain;return(e===0||e)&&(a.zoom_x_min=_t("min",[n[0],e])),a.zoom_x_min},range:function(e){var t=this.zoom;if(F(e)){var a=e.min,n=e.max;N(a)&&t.min(a),N(n)&&t.max(n)}return{min:t.min(),max:t.max()}}});var ao={zoom:Aa,unzoom:function(){var e=this.internal,t=e.config,a=e.$el,n=a.eventRect,i=a.zoomResetBtn;e.scale.zoom&&(t.subchart_show?e.brush.getSelection().call(e.brush.move,null):e.zoom.updateTransformScale(Dt),e.updateZoom(!0),i?.style("display","none"),bn(n.node())!==Dt&&e.zoom.transform(n,Dt))}},no={drag:function(e){var t=this,a=t.config,n=t.state,i=t.$el.main,r=a.data_selection_grouped,o=a.interaction_enabled&&a.data_selection_isselectable;if(!(t.hasArcType()||!a.data_selection_enabled||a.zoom_enabled&&!t.zoom.altDomain||!a.data_selection_multiple)){var s=n.dragStart||[0,0],c=s[0],l=s[1],u=e[0],d=e[1],h=Math.min(c,u),g=Math.max(c,u),f=r?n.margin.top:Math.min(l,d),p=r?n.height:Math.max(l,d);i.select(".".concat(Pt.dragarea)).attr("x",h).attr("y",f).attr("width",g-h).attr("height",p-f),i.selectAll(".".concat(at.shapes)).selectAll(".".concat(at.shape)).filter(function(v){return o?.bind(t.api)(v)}).each(function(v,x){var _=L(this),m=_.classed(Z.SELECTED),y=_.classed(Pt.INCLUDED),T=!1,b;if(_.classed(st.circle)){var w=+_.attr("cx")*1,A=+_.attr("cy")*1;b=t.togglePoint,T=h<w&&w<g&&f<A&&A<p}else if(_.classed(xt.bar)){var S=An(this),w=S.x,A=S.y,k=S.width,O=S.height;b=t.togglePath,T=!(g<w||w+k<h)&&!(p<A||A+O<f)}else return;T^y&&(_.classed(Pt.INCLUDED,!y),_.classed(Z.SELECTED,!m),b.call(t,!m,_,v,x))})}},dragstart:function(e){var t=this,a=t.config,n=t.state,i=t.$el.main;t.hasArcType()||!a.data_selection_enabled||(n.dragStart=e,i.select(".".concat(z.chart)).append("rect").attr("class",Pt.dragarea).style("opacity","0.1"),t.setDragStatus(!0))},dragend:function(){var e=this,t=e.config,a=e.$el.main,n=e.$T;e.hasArcType()||!t.data_selection_enabled||(n(a.select(".".concat(Pt.dragarea))).style("opacity","0").remove(),a.selectAll(".".concat(at.shape)).classed(Pt.INCLUDED,!1),e.setDragStatus(!1))}},io=M(M({},no),{selectPoint:function(e,t,a){var n=this,i=n.config,r=n.$el.main,o=n.$T,s=i.axis_rotated,c=(s?n.circleY:n.circleX).bind(n),l=(s?n.circleX:n.circleY).bind(n),u=n.pointSelectR.bind(n);j(i.data_onselected,n.api,t,e.node()),o(r.select(".".concat(Z.selectedCircles).concat(n.getTargetSelectorSuffix(t.id))).selectAll(".".concat(Z.selectedCircle,"-").concat(a)).data([t]).enter().append("circle").attr("class",function(){return n.generateClass(Z.selectedCircle,a)}).attr("cx",c).attr("cy",l).attr("stroke",n.color).attr("r",function(d){return n.pointSelectR(d)*1.4})).attr("r",u)},unselectPoint:function(e,t,a){var n=this,i=n.config,r=n.$el.main,o=n.$T;j(i.data_onunselected,n.api,t,e?.node()),o(r.select(".".concat(Z.selectedCircles).concat(n.getTargetSelectorSuffix(t.id))).selectAll(".".concat(Z.selectedCircle,"-").concat(a))).attr("r",0).remove()},togglePoint:function(e,t,a,n){var i="".concat(e?"":"un","selectPoint");this[i](t,a,n)},selectPath:function(e,t){var a=this,n=a.config;j(n.data_onselected,a.api,t,e.node()),n.interaction_brighten&&e.style("filter","brightness(1.25)")},unselectPath:function(e,t){var a=this,n=a.config;j(n.data_onunselected,a.api,t,e.node()),n.interaction_brighten&&e.style("filter",null)},togglePath:function(e,t,a,n){this["".concat(e?"":"un","selectPath")](t,a,n)},getToggle:function(e,t){var a=this;return e.nodeName==="path"?a.togglePath:a.isStepType(t)?function(){}:a.togglePoint},toggleShape:function(e,t,a){var n=this,i=n.config,r=n.$el.main;if(i.data_selection_enabled&&i.data_selection_isselectable.bind(n.api)(t)){var o=L(e),s=o.classed(Z.SELECTED),c=n.getToggle(e,t).bind(n),l;if(!i.data_selection_multiple){var u=i.point_focus_only,d=".".concat(u?Z.selectedCircles:at.shapes);i.data_selection_grouped&&(d+=n.getTargetSelectorSuffix(t.id)),r.selectAll(d).selectAll(u?".".concat(Z.selectedCircle):".".concat(at.shape,".").concat(Z.SELECTED)).classed(Z.SELECTED,!1).each(function(h){var g=L(this);l=g,c(!1,g,h,h.index)})}(!l||l.node()!==o.node())&&(o.classed(Z.SELECTED,!s),c(!s,o,t,a))}}}),ro={initBrush:function(){var e=this,t=e.config,a=e.scale,n=e.$el.subchart,i=t.axis_rotated,r,o;e.brush=(i?Ia():Oa()).handleSize(5);var s=function(){var c=e.$el.svg.select(".".concat(X.brush," .overlay")),l={width:0,height:0};return c.size()&&(l.width=+c.attr("width"),l.height=+c.attr("height")),l[i?"width":"height"]};e.brush.on("start brush end",function(c){var l=c.selection,u=c.target,d=c.type;d==="start"&&e.state.inputType==="touch"&&e.hideTooltip(),/(start|brush)/.test(d)&&e.redrawForBrush(),d==="end"&&(r=a.x.orgDomain()),u?.handle&&(l===null?e.brush.handle.attr("display","none"):e.brush.handle.attr("display",null).attr("transform",function(h,g){var f=i?[33,l[g]-(g===0?30:24)]:[l[g],3];return"translate(".concat(f,")")}))}),e.brush.updateResize=function(){var c=this;o&&clearTimeout(o),o=setTimeout(function(){var l=c.getSelection();r&&Qe(l.node())&&c.move(l,r.map(a.subX.orgScale()))},0)},e.brush.update=function(){var c,l=this.extent()();return l[1].filter(function(u){return isNaN(u)}).length===0&&((c=n.main)===null||c===void 0||c.select(".".concat(X.brush)).call(this)),this},e.brush.scale=function(c){var l=t.subchart_size_height||s(),u=e.getExtent();!u&&c.range?u=[[0,0],[c.range()[1],l]]:B(u)&&(u=u.map(function(d,h){return[d,h>0?l:h]})),i&&u[1].reverse(),this.extent(u),this.update()},e.brush.getSelection=function(){return n.main?n.main.select(".".concat(X.brush)):L([])}},initSubchart:function(){var e=this,t=e.config,a=e.state,n=a.clip,i=a.hasAxis,r=e.$el,o=r.defs,s=r.svg,c=r.subchart,l=r.axis;if(i){var u=t.subchart_show?null:"hidden",d="".concat(n.id,"-subchart"),h=e.getClipPath(d);n.idSubchart=d,e.appendClip(o,d),e.initBrush(),c.main=s.append("g").classed(X.subchart,!0).attr("transform",e.getTranslate("context"));var g=c.main;g.style("visibility",u),g.append("g").attr("clip-path",h).attr("class",X.chart),["bar","line","bubble","candlestick","scatter"].forEach(function(p){var v=ut(/^(bubble|scatter)$/.test(p)?"circle":p);if(e.hasType(p)||e.hasTypeOf(v)){var x=g.select(".".concat(X.chart)),_=X["chart".concat(v,"s")];x.select(".".concat(_)).empty()&&x.append("g").attr("class",_)}});var f=g.append("g").attr("clip-path",h).attr("class",X.brush).call(e.brush);t.subchart_showHandle&&e.addBrushHandle(f),l.subX=g.append("g").attr("class",X.axisX).attr("transform",e.getTranslate("subX")).attr("clip-path",t.axis_rotated?"":n.pathXAxis).style("visibility",t.subchart_axis_x_show?u:"hidden")}},addBrushHandle:function(e){var t=this,a=t.config,n=a.axis_rotated,i=a.subchart_init_range,r="handle--custom",o=n?["M 5.2491724,29.749209 a 6,6 0 0 0 -5.50000003,-6.5 H -5.7508276 a 6,6 0 0 0 -6.0000004,6.5 z m -5.00000003,-2 H -6.7508276 m 6.99999997,-2 H -6.7508276Z","M 5.2491724,23.249172 a 6,-6 0 0 1 -5.50000003,6.5 H -5.7508276 a 6,-6 0 0 1 -6.0000004,-6.5 z m -5.00000003,2 H -6.7508276 m 6.99999997,2 H -6.7508276Z"]:["M 0 18 A 6 6 0 0 0 -6.5 23.5 V 29 A 6 6 0 0 0 0 35 Z M -2 23 V 30 M -4 23 V 30Z","M 0 18 A 6 6 0 0 1 6.5 23.5 V 29 A 6 6 0 0 1 0 35 Z M 2 23 V 30 M 4 23 V 30Z"];t.brush.handle=e.selectAll(".".concat(r)).data(n?[{type:"n"},{type:"s"}]:[{type:"w"},{type:"e"}]).enter().append("path").attr("class",r).attr("cursor","".concat(n?"ns":"ew","-resize")).attr("d",function(s){return o[+/[se]/.test(s.type)]}).attr("display",i?null:"none")},updateTargetsForSubchart:function(e){var t=this,a=t.config,n=t.state,i=t.$el.subchart.main;a.subchart_show&&(["bar","line","bubble","candlestick","scatter"].filter(function(r){return t.hasType(r)||t.hasTypeOf(ut(r))}).forEach(function(r){var o=/^(bubble|scatter)$/.test(r),s=ut(o?"circle":r),c=t.getChartClass(s,!0),l=t.getClass(o?"circles":"".concat(r,"s"),!0),u=i.select(".".concat(X["chart".concat("".concat(s,"s"))]));if(o){var d=u.selectAll(".".concat(X.circles)).data(e.filter(t["is".concat(ut(r),"Type")].bind(t))).attr("class",l);d.exit().remove(),d.enter().append("g").attr("class",l)}else{var h=u.selectAll(".".concat(X["chart".concat(s)])).attr("class",c).data(e.filter(t["is".concat(s,"Type")].bind(t))),g=h.enter().append("g").style("opacity","0").attr("class",c).append("g").attr("class",l);h.exit().remove(),r==="line"&&t.hasTypeOf("Area")&&g.append("g").attr("class",t.getClass("areas",!0))}}),i.selectAll(".".concat(X.brush," rect")).attr(a.axis_rotated?"width":"height",a.axis_rotated?n.width2:n.height2))},redrawSubchart:function(e,t,a){var n,i=this,r=i.config,o=i.$el.subchart.main,s=i.state,c=!!t;if(o.style("visibility",r.subchart_show?null:"hidden"),r.subchart_show&&(((n=s.event)===null||n===void 0?void 0:n.type)==="zoom"&&i.brush.update(),e)){var l=r.subchart_init_range;if(!la(i)&&i.brush.update(),Object.keys(a.type).forEach(function(h){var g=ut(h),f=i["generateDraw".concat(g)](a.indices[h],!0);i["update".concat(g)](c,!0),i["redraw".concat(g)](f,c,!0)}),i.hasType("bubble")||i.hasType("scatter")){var u=a.pos.cx,d=i.updateCircleY(!0);i.updateCircle(!0),i.redrawCircle(u,d,c,void 0,!0)}!s.rendered&&l&&i.brush.move(i.brush.getSelection(),l.map(i.scale.x))}},redrawForBrush:function(){var e=this,t=e.config,a=t.subchart_onbrush,n=t.zoom_rescale,i=e.scale;e.redraw({withTransition:!1,withY:n,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),a.bind(e.api)(i.x.orgDomain())},transformContext:function(e,t){var a=this,n=a.$el.subchart,i=a.$T,r=t?.axisSubX?t.axisSubX:i(n.main.select(".".concat(X.axisX)),e);n.main.attr("transform",a.getTranslate("context")),r.attr("transform",a.getTranslate("subX"))},getExtent:function(){var e=this,t=e.config,a=e.scale,n=t.axis_x_extent;if(n){if(D(n))n=n.bind(e.api)(e.getXDomain(e.data.targets),a.subX);else if(e.axis.isTimeSeries()&&n.every(isNaN)){var i=mt.bind(e);n=n.map(function(r){return a.subX(i(r))})}}return n}},oo={initZoom:function(){var e=this;e.scale.zoom=null,e.generateZoom(),e.initZoomBehaviour()},bindZoomEvent:function(e){e===void 0&&(e=!0);var t=this,a=t.config,n=a.zoom_enabled;n&&e?!a.subchart_show&&t.bindZoomOnEventRect():e===!1&&(t.api.unzoom(),t.unbindZoomEvent())},generateZoom:function(){var e=this,t=e.config,a=e.org,n=e.scale,i=Tn().duration(0).on("start",e.onZoomStart.bind(e)).on("zoom",e.onZoom.bind(e)).on("end",e.onZoomEnd.bind(e));i.orgScaleExtent=function(){var r=t.zoom_extent||[1,10];return[r[0],Math.max(e.getMaxDataCount()/r[1],r[1])]},i.updateScaleExtent=function(){var r=zt(e.scale.x.orgDomain())/zt(e.getZoomDomain()),o=this.orgScaleExtent();return this.scaleExtent([o[0]*r,o[1]*r]),this},i.updateTransformScale=function(r,o){var s,c=t.axis_rotated;(s=a.xScale)===null||s===void 0||s.range(n.x.range());var l=r[c?"rescaleY":"rescaleX"](a.xScale||n.x),u=e.trimXDomain(l.domain()),d=t.zoom_rescale;if(l.domain(u,a.xDomain),o){var h=l(n.x.domain()[0]),g=c?r.x:h,f=c?h:r.y;e.$el.eventRect.property("__zoom",Dt.translate(g,f).scale(r.k))}e.state.xTickOffset||(e.state.xTickOffset=e.axis.x.tickOffset()),n.zoom=e.getCustomizedXScale(l),e.axis.x.scale(n.zoom),d&&(!a.xScale&&(a.xScale=n.x.copy()),n.x.domain(u))},i.getDomain=function(){var r=n[n.zoom?"zoom":"subX"].domain(),o=e.axis.isCategorized();return o&&(r[1]-=2),r},e.zoom=i},onZoomStart:function(e){var t=this,a=e.sourceEvent;a&&(t.zoom.startEvent=a,t.state.zooming=!0,j(t.config.zoom_onzoomstart,t.api,e))},onZoom:function(e){var t=this,a=t.config,n=t.scale,i=t.state,r=t.org,o=e.sourceEvent,s=e?.transform===Dt;if(!(!a.zoom_enabled||t.filterTargetsToShow(t.data.targets).length===0||!n.zoom&&o?.type.indexOf("touch")>-1&&o?.touches.length===1)){e.sourceEvent&&(i.zooming=!0);var c=o?.type==="mousemove",l=o?.wheelDelta<0,u=e.transform;!c&&l&&n.x.domain().every(function(h,g){return h!==r.xDomain[g]})&&n.x.domain(r.xDomain),t.zoom.updateTransformScale(u,a.zoom_type==="wheel"&&o);var d=a.transition_duration>0&&!a.subchart_show&&(i.dragging||s||!e.sourceEvent);t.redraw({withTransition:d,withY:a.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),t.state.cancelClick=c,!s&&j(a.zoom_onzoom,t.api,t.zoom.getDomain())}},onZoomEnd:function(e){var t,a=this,n=a.config,i=a.state,r=a.zoom.startEvent,o=e?.sourceEvent,s=e?.transform===Dt;r?.type.indexOf("touch")>-1&&(r=r.changedTouches[0],o=(t=o?.changedTouches)===null||t===void 0?void 0:t[0]),!(n.zoom_type==="drag"&&o&&r.clientX===o.clientX&&r.clientY===o.clientY)&&(a.redrawEventRect(),a.updateZoom(),i.zooming=!1,!s&&(o||i.dragging)&&j(n.zoom_onzoomend,a.api,a.zoom.getDomain()))},updateZoom:function(e){var t=this,a=t.scale,n=a.subX,i=a.x,r=a.zoom;if(r){var o=r.domain(),s=n.domain(),c=.015,l=t.config.axis_x_inverted?(o[0]>=s[0]||o[0]+c>=s[0])&&(s[1]>=o[1]||s[1]>=o[1]+c):(o[0]<=s[0]||o[0]-c<=s[0])&&(s[1]<=o[1]||s[1]<=o[1]-c);(e||l)&&(t.axis.x.scale(n),i.domain(n.orgDomain()),t.scale.zoom=null)}},bindZoomOnEventRect:function(){var e=this,t=e.config,a=e.$el.eventRect,n=t.zoom_type==="drag"?e.zoomBehaviour:e.zoom;e.$el.svg.on("wheel",function(){}),a.call(n).on("dblclick.zoom",null)},initZoomBehaviour:function(){var e=this,t=e.config,a=e.state,n=t.axis_rotated,i=0,r=0,o,s={axis:n?"y":"x",attr:n?"height":"width",index:n?1:0};e.zoomBehaviour=ta().clickDistance(4).on("start",function(c){a.event=c,e.setDragStatus(!0),e.unselectRect(),o||(o=e.$el.main.append("rect").attr("clip-path",a.clip.path).attr("class",Ae.zoomBrush).attr("width",n?a.width:0).attr("height",n?0:a.height)),i=pt(c,this)[s.index],r=i,o.attr(s.axis,i).attr(s.attr,0),e.onZoomStart(c)}).on("drag",function(c){r=pt(c,this)[s.index],o.attr(s.axis,Math.min(i,r)).attr(s.attr,Math.abs(r-i))}).on("end",function(c){var l,u=e.scale.zoom||e.scale.x;a.event=c,o.attr(s.axis,0).attr(s.attr,0),i>r&&(l=[r,i],i=l[0],r=l[1]),i<0&&(r+=Math.abs(i),i=0),i!==r&&e.api.zoom([i,r].map(function(d){return u.invert(d)})),e.setDragStatus(!1)})},setZoomResetButton:function(){var e=this,t=e.config,a=e.$el,n=t.zoom_resetButton;n&&t.zoom_type==="drag"&&(a.zoomResetBtn?a.zoomResetBtn.style("display",null):a.zoomResetBtn=e.$el.chart.append("div").classed(z.button,!0).append("span").on("click",function(){D(n.onclick)&&n.onclick.bind(e.api)(this),e.api.unzoom()}).classed(Ae.buttonZoomReset,!0).text(n.text||"Reset Zoom"))}},so={data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onselected:function(){},data_onunselected:function(){}},co={subchart_show:!1,subchart_showHandle:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_axis_x_tick_show:!0,subchart_axis_x_tick_format:void 0,subchart_axis_x_tick_text_show:!0,subchart_init_range:void 0,subchart_onbrush:function(){}},lo={zoom_enabled:!1,zoom_type:"wheel",zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:void 0,zoom_onzoomstart:void 0,zoom_onzoomend:void 0,zoom_resetButton:!0,zoom_x_min:void 0,zoom_x_max:void 0},uo=function(){return ot(Ft.prototype,io),ot(Wt.prototype,Qr),$t.setOptions([so]),(uo=function(){return!0})()},ho=function(){return ot(Ft.prototype,ro),ot(Wt.prototype,to),$t.setOptions([co]),(ho=function(){return!0})()},go=function(){return ot(Ft.prototype,oo),ot(Wt.prototype,ao),$t.setOptions([lo]),(go=function(){return!0})()},_e={},Co={version:"3.8.2",generate:function(e){var t=Yt({},_e,e),a=new Wt(t);return a.internal.charts=this.instance,this.instance.push(a),a},defaults:function(e){return F(e)&&(_e=e),_e},instance:[],plugin:{}};export{zr as area,Mr as areaLineRange,Xr as areaSpline,$r as areaSplineRange,Fr as areaStep,jr as bar,Co as bb,Zr as bubble,qr as candlestick,Co as default,Vr as donut,Yr as gauge,Br as line,Hr as pie,Wr as polar,Ur as radar,Kr as scatter,uo as selection,Nr as spline,Gr as step,ho as subchart,Jr as treemap,go as zoom};
/*! Bundled license information:

billboard.js/dist-esm/billboard.js:
  (*!
  * Copyright (c) 2017 ~ present NAVER Corp.
   * billboard.js project is licensed under the MIT license
   * 
   * billboard.js, JavaScript chart library
   * https://naver.github.io/billboard.js/
   * 
   * @version 3.8.2
  *)
*/
//# sourceMappingURL=billboard.bundle.mjs.map