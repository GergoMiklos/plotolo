/* esm.sh - esbuild bundle(billboard.js@3.8.2) esnext production */
var __global$ = globalThis || (typeof window !== "undefined" ? window : self);import{timeParse as wa,utcParse as Ra,timeFormat as Ca,utcFormat as Sa}from"/v124/d3-time-format@4.1.0/esnext/d3-time-format.mjs";import{pointer as La,select as L,namespaces as se,selectAll as Ke}from"/v124/d3-selection@3.0.0/esnext/d3-selection.mjs";import{brushSelection as Je,brushY as Ea,brushX as ka}from"/v124/d3-brush@3.0.0/esnext/d3-brush.mjs";import{csvParseRows as Ia,csvParse as Oa,tsvParseRows as Pa,tsvParse as za}from"/v124/d3-dsv@3.0.1/esnext/d3-dsv.mjs";import{drag as Qe}from"/v124/d3-drag@3.0.0/esnext/d3-drag.mjs";import{scaleOrdinal as Da,scaleLinear as me,scaleSymlog as Ma,scaleLog as Fa,scaleTime as Ba,scaleUtc as Xa}from"/v124/d3-scale@4.0.2/esnext/d3-scale.mjs";import{transition as Na}from"/v124/d3-transition@3.0.1/esnext/d3-transition.mjs";import{curveBasis as Ga,curveBasisClosed as Va,curveBasisOpen as Ya,curveBundle as Ha,curveCardinal as Wa,curveCardinalClosed as Ua,curveCardinalOpen as Za,curveCatmullRom as ja,curveCatmullRomClosed as qa,curveCatmullRomOpen as Ka,curveMonotoneX as Ja,curveMonotoneY as Qa,curveNatural as ti,curveLinearClosed as ei,curveLinear as ai,curveStep as ii,curveStepAfter as ri,curveStepBefore as ni,pie as oi,arc as Ee,area as si,line as ci}from"/v124/d3-shape@3.2.0/esnext/d3-shape.mjs";import{axisLeft as ke,axisBottom as Ie,axisTop as li,axisRight as ui}from"/v124/d3-axis@3.0.0/esnext/d3-axis.mjs";import{easeLinear as di}from"/v124/d3-ease@3.0.1/esnext/d3-ease.mjs";import{interpolate as ta}from"/v124/d3-interpolate@3.0.1/esnext/d3-interpolate.mjs";import{treemap as fi,hierarchy as vi,treemapBinary as Oe,treemapDice as gi,treemapSlice as hi,treemapSliceDice as pi,treemapSquarify as xi,treemapResquarify as mi}from"/v124/d3-hierarchy@3.1.2/esnext/d3-hierarchy.mjs";import{zoomIdentity as zt,zoomTransform as _i,zoom as yi}from"/v124/d3-zoom@3.0.0/esnext/d3-zoom.mjs";var M=function(){var e=typeof globalThis=="object"&&globalThis!==null&&globalThis.Object===Object&&globalThis||typeof __global$=="object"&&__global$!==null&&__global$.Object===Object&&__global$||typeof self=="object"&&self!==null&&self.Object===Object&&self;return e||Function("return this")()}(),ea=typeof M.requestAnimationFrame=="function",aa=typeof M.requestIdleCallback=="function",ia=ea?M.requestAnimationFrame:function(e){return setTimeout(e,1)},Ti=ea?M.cancelAnimationFrame:function(e){return clearTimeout(e)},ra=aa?M.requestIdleCallback:ia;aa&&M.cancelIdleCallback;var K=M?.document,S={AREA:"area",AREA_LINE_RANGE:"area-line-range",AREA_SPLINE:"area-spline",AREA_SPLINE_RANGE:"area-spline-range",AREA_STEP:"area-step",BAR:"bar",BUBBLE:"bubble",CANDLESTICK:"candlestick",DONUT:"donut",GAUGE:"gauge",LINE:"line",PIE:"pie",POLAR:"polar",RADAR:"radar",SCATTER:"scatter",SPLINE:"spline",STEP:"step",TREEMAP:"treemap"},fe={AREA:"initArea",AREA_LINE_RANGE:"initArea",AREA_SPLINE:"initArea",AREA_SPLINE_RANGE:"initArea",AREA_STEP:"initArea",BAR:"initBar",BUBBLE:"initCircle",CANDLESTICK:"initCandlestick",DONUT:"initArc",GAUGE:"initArc",LINE:"initLine",PIE:"initArc",POLAR:"initPolar",RADAR:"initCircle",SCATTER:"initCircle",SPLINE:"initLine",STEP:"initLine",TREEMAP:"initTreemap"},St={Area:[S.AREA,S.AREA_SPLINE,S.AREA_SPLINE_RANGE,S.AREA_LINE_RANGE,S.AREA_STEP],AreaRange:[S.AREA_SPLINE_RANGE,S.AREA_LINE_RANGE],Arc:[S.PIE,S.DONUT,S.GAUGE,S.POLAR,S.RADAR],Line:[S.LINE,S.SPLINE,S.AREA,S.AREA_SPLINE,S.AREA_SPLINE_RANGE,S.AREA_LINE_RANGE,S.STEP,S.AREA_STEP],Step:[S.STEP,S.AREA_STEP],Spline:[S.SPLINE,S.AREA_SPLINE,S.AREA_SPLINE_RANGE]},D=function(){return D=Object.assign||function(t){for(var a,i=1,r=arguments.length;i<r;i++){a=arguments[i];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},D.apply(this,arguments)};function ct(e,t,a){if(a||arguments.length===2)for(var i=0,r=t.length,n;i<r;i++)(n||!(i in t))&&(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}var O=function(e){return e||e===0},P=function(e){return typeof e=="function"},Q=function(e){return typeof e=="string"},k=function(e){return typeof e=="number"},nt=function(e){return typeof e>"u"},G=function(e){return typeof e<"u"},na=function(e){return typeof e=="boolean"},Pe=function(e){return Math.ceil(e/10)*10},Zt=function(e){return Math.ceil(e)+.5},Dt=function(e){return e[1]-e[0]},Tt=function(e){return typeof e=="object"},Ft=function(e){return nt(e)||e===null||Q(e)&&e.length===0||Tt(e)&&!(e instanceof Date)&&Object.keys(e).length===0||k(e)&&isNaN(e)},J=function(e){return!Ft(e)},N=function(e){return Array.isArray(e)},X=function(e){return e&&!e?.nodeType&&Tt(e)&&!N(e)};function Lt(e,t,a){return G(e[t])?e[t]:a}function bi(e,t){var a=!1;return Object.keys(e).forEach(function(i){return e[i]===t&&(a=!0)}),a}function Z(e,t){for(var a=[],i=2;i<arguments.length;i++)a[i-2]=arguments[i];var r=P(e);return r&&e.call.apply(e,ct([t],a,!1)),r}function Re(e,t){var a=0,i=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];!--a&&t.apply.apply(t,ct([this],r,!1))};"duration"in e?e.each(function(){return++a}).on("end",i):(++a,e.call(i))}function jt(e){return Q(e)?e.replace(/</g,"&lt;").replace(/>/g,"&gt;"):e}function Kt(e,t,a,i){if(a===void 0&&(a=[-1,1]),i===void 0&&(i=!1),!(!e||!Q(t)))if(t.indexOf(`
`)===-1)e.text(t);else{var r=[e.text(),t].map(function(s){return s.replace(/[\s\n]/g,"")});if(r[0]!==r[1]){var n=t.split(`
`),o=i?n.length-1:1;e.html(""),n.forEach(function(s,c){e.append("tspan").attr("x",0).attr("dy","".concat(c===0?a[0]*o:a[1],"em")).text(s)})}}}function oa(e){var t=e.getBBox(),a=t.x,i=t.y,r=t.width,n=t.height;return[{x:a,y:i+n},{x:a,y:i},{x:a+r,y:i},{x:a+r,y:i+n}]}function $i(e){var t=e.getBoundingClientRect(),a=t.width,i=t.height,r=oa(e),n=r[0].x,o=Math.min(r[0].y,r[1].y);return{x:n,y:o,width:a,height:i}}function ht(e,t){var a,i=e&&((a=e.touches||e.sourceEvent&&e.sourceEvent.touches)===null||a===void 0?void 0:a[0]),r=La(i||e,t);return r.map(function(n){return isNaN(n)?0:n})}function sa(e){var t=e.event,a=e.$el,i=a.subchart.main||a.main,r;return t&&t.type==="brush"?r=t.selection:i&&(r=i.select(".bb-brush").node())&&(r=Je(r)),r}function qt(e){var t=!("rect"in e)||"rect"in e&&e.hasAttribute("width")&&e.rect.width!==+e.getAttribute("width");return t?e.rect=e.getBoundingClientRect():e.rect}function Rt(e,t,a){e===void 0&&(e=!0),t===void 0&&(t=0),a===void 0&&(a=1e4);var i=M.crypto||M.msCrypto,r=i?t+i.getRandomValues(new Uint32Array(1))[0]%(a-t+1):Math.floor(Math.random()*(a-t)+t);return e?String(r):r}function _e(e,t,a,i,r){if(a>i)return-1;var n=Math.floor((a+i)/2),o=e[n],s=o.x,c=o.w,l=c===void 0?0:c;return r&&(s=e[n].y,l=e[n].h),t>=s&&t<=s+l?n:t<s?_e(e,t,a,n-1,r):_e(e,t,n+1,i,r)}function ca(e){var t=sa(e);return t?t[0]===t[1]:!0}function Ai(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var a=function(i){if(X(i)&&i.constructor){var r=new i.constructor;for(var n in i)r[n]=a(i[n]);return r}return i};return e.map(function(i){return a(i)}).reduce(function(i,r){return D(D({},i),r)})}function ot(e,t){e===void 0&&(e={}),N(t)&&t.forEach(function(i){return ot(e,i)});for(var a in t)/^\d+$/.test(a)||a in e||(e[a]=t[a]);return e}var ut=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};function wi(e,t){return t===void 0&&(t="-"),e.split(t).map(function(a,i){return i?a.charAt(0).toUpperCase()+a.slice(1).toLowerCase():a.toLowerCase()}).join("")}var kt=function(e){return[].slice.call(e)};function Ri(e,t,a){var i=e.rootSelctor,r=e.sheet,n=function(s){return s.replace(/\s?(bb-)/g,".$1").replace(/\.+/g,".")},o="".concat(i," ").concat(n(t)," {").concat(a.join(";"),"}");return r[r.insertRule?"insertRule":"addRule"](o,r.cssRules.length)}function Ci(e){var t=[];return e.forEach(function(a){var i;try{a.cssRules&&a.cssRules.length&&(t=t.concat(kt(a.cssRules)))}catch(r){(i=M.console)===null||i===void 0||i.warn("Error while reading rules from ".concat(a.href,": ").concat(r.toString()))}}),t}function ze(e){var t=e?e.transform:null,a=t&&t.baseVal;return a&&a.numberOfItems?a.getItem(0).matrix:{a:0,b:0,c:0,d:0,e:0,f:0}}function ye(e){var t=e[0]instanceof Date,a=(t?e.map(Number):e).filter(function(i,r,n){return n.indexOf(i)===r});return t?a.map(function(i){return new Date(i)}):a}function ve(e){return e&&e.length?e.reduce(function(t,a){return t.concat(a)}):[]}function Yt(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];if(!t.length||t.length===1&&!t[0])return e;var i=t.shift();return X(e)&&X(i)&&Object.keys(i).forEach(function(r){var n=i[r];X(n)?(!e[r]&&(e[r]={}),e[r]=Yt(e[r],n)):e[r]=N(n)?n.concat():n}),Yt.apply(void 0,ct([e],t,!1))}function Ht(e,t){t===void 0&&(t=!0);var a;return e[0]instanceof Date?a=t?function(i,r){return i-r}:function(i,r){return r-i}:t&&!e.every(isNaN)?a=function(i,r){return i-r}:t||(a=function(i,r){return i>r&&-1||i<r&&1||i===r&&0}),e.concat().sort(a)}function mt(e,t){var a=t.filter(function(i){return J(i)});return a.length?k(a[0])?a=Math[e].apply(Math,a):a[0]instanceof Date&&(a=Ht(a,e==="min")[0]):a=void 0,a}var ne=function(e,t,a){a===void 0&&(a=1);for(var i=[],r=Math.max(0,Math.ceil((t-e)/a))|0,n=e;n<r;n++)i.push(e+n*a);return i},Si={mouse:function(){var e=function(){return{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0}};try{return new MouseEvent("t"),function(t,a,i){i===void 0&&(i=e()),t.dispatchEvent(new MouseEvent(a,i))}}catch{return function(a,i,r){r===void 0&&(r=e());var n=K.createEvent("MouseEvent");n.initMouseEvent(i,r.bubbles,r.cancelable,M,0,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),a.dispatchEvent(n)}}}(),touch:function(e,t,a){var i=new Touch(Yt({identifier:Date.now(),target:e,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},a));e.dispatchEvent(new TouchEvent(t,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[i],targetTouches:[],changedTouches:[i]}))}};function Te(e,t){var a=e;for(var i in t)a=a.replace(new RegExp("{=".concat(i,"}"),"g"),t[i]);return a}function _t(e){var t,a;if(e instanceof Date)a=e;else if(Q(e)){var i=this,r=i.config,n=i.format;a=(t=n.dataTime(r.data_xFormat)(e))!==null&&t!==void 0?t:new Date(e)}else k(e)&&!isNaN(e)&&(a=new Date(+e));return(!a||isNaN(+a))&&console&&console.error&&console.error("Failed to parse x '".concat(e,"' to Date object")),a}function Qt(){return K?.hidden===!1||K?.visibilityState==="visible"}function Li(e,t){var a=M.DocumentTouch,i=M.matchMedia,r=M.navigator,n=!1;if(t)if(r&&"maxTouchPoints"in r)n=r.maxTouchPoints>0;else if("ontouchmove"in M||a&&K instanceof a)n=!0;else if(i?.("(pointer:coarse)").matches)n=!0;else{var o=r.userAgent;n=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(o)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(o)}var s=e&&["any-hover:hover","any-pointer:fine"].some(function(c){return i?.("(".concat(c,")")).matches});return s&&"mouse"||n&&"touch"||"mouse"}function la(e,t){t()===!1?ia(function(){return la(e,t)}):e()}function Ei(e){var t=e,a=t.config,i="";if(Ft(a.data_type||a.data_types)&&!t[fe.LINE])i="line";else for(var r in fe){var n=S[r];if(t.hasType(n)&&!t[fe[r]]){i=n;break}}i&&ki("Please, make sure if %c".concat(wi(i)),"module has been imported and specified correctly.")}function ki(e,t){var a,i="[billboard.js]",r="https://github.com/naver/billboard.js/wiki/CHANGELOG-v2#modularization-by-its-functionality",n=(a=M.console)===null||a===void 0?void 0:a.error;throw n&&(console.error("\u274C ".concat(i," ").concat(e),"background:red;color:white;display:block;font-size:15px",t),console.info("%c\u2139\uFE0F","font-size:15px",r)),Error("".concat(i," ").concat(e.replace(/\%c([a-z-]+)/i,"'$1' ")," ").concat(t))}var z={button:"bb-button",chart:"bb-chart",empty:"bb-empty",main:"bb-main",target:"bb-target",EXPANDED:"_expanded_"},W={arc:"bb-arc",arcLabelLine:"bb-arc-label-line",arcs:"bb-arcs",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsTitle:"bb-chart-arcs-title"},ce={area:"bb-area",areas:"bb-areas"},at={axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label"},xt={bar:"bb-bar",bars:"bb-bars",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars"},At={candlestick:"bb-candlestick",candlesticks:"bb-candlesticks",chartCandlestick:"bb-chart-candlestick",chartCandlesticks:"bb-chart-candlesticks",valueDown:"bb-value-down",valueUp:"bb-value-up"},st={chartCircles:"bb-chart-circles",circle:"bb-circle",circles:"bb-circles"},be={colorPattern:"bb-color-pattern",colorScale:"bb-colorscale"},Pt={dragarea:"bb-dragarea",INCLUDED:"_included_"},ft={chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",gaugeValue:"bb-gauge-value"},V={legend:"bb-legend",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile"},wt={chartLine:"bb-chart-line",chartLines:"bb-chart-lines",line:"bb-line",lines:"bb-lines"},pt={eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single"},U={focused:"bb-focused",defocused:"bb-defocused",legendItemFocused:"bb-legend-item-focused",xgridFocus:"bb-xgrid-focus",ygridFocus:"bb-ygrid-focus"},H={grid:"bb-grid",gridLines:"bb-grid-lines",xgrid:"bb-xgrid",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids"},Et={level:"bb-level",levels:"bb-levels"},ua={chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars"},Jt={region:"bb-region",regions:"bb-regions"},j={selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",SELECTED:"_selected_"},it={shape:"bb-shape",shapes:"bb-shapes"},da={brush:"bb-brush",subchart:"bb-subchart"},lt={chartText:"bb-chart-text",chartTexts:"bb-chart-texts",text:"bb-text",texts:"bb-texts",title:"bb-title",TextOverlapping:"text-overlapping"},oe={tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name"},Ce={treemap:"bb-treemap",chartTreemap:"bb-chart-treemap",chartTreemaps:"bb-chart-treemaps"},$e={buttonZoomReset:"bb-zoom-reset",zoomBrush:"bb-zoom-brush"},F=D(D(D(D(D(D(D(D(D(D(D(D(D(D(D(D(D(D(D(D(D(D(D(D({},z),W),ce),at),xt),At),st),be),Pt),ft),V),wt),pt),U),H),ua),Jt),j),it),da),lt),oe),Ce),$e),Ii=function(){function e(){var t={chart:null,main:null,svg:null,axis:{x:null,y:null,y2:null,subX:null},defs:null,tooltip:null,legend:null,title:null,subchart:{main:null,bar:null,line:null,area:null},arcs:null,bar:null,candlestick:null,line:null,area:null,circle:null,radar:null,text:null,grid:{main:null,x:null,y:null},gridLines:{main:null,x:null,y:null},region:{main:null,list:null},eventRect:null,zoomResetBtn:null};return t}return e}(),Oi=function(){function e(){return{width:0,width2:0,height:0,height2:0,margin:{top:0,bottom:0,left:0,right:0},margin2:{top:0,bottom:0,left:0,right:0},margin3:{top:0,bottom:0,left:0,right:0},arcWidth:0,arcHeight:0,xAxisHeight:0,hasAxis:!1,hasRadar:!1,hasTreemap:!1,cssRule:{},current:{width:0,height:0,dataMax:0,maxTickWidths:{x:{size:0,ticks:[],clipPath:0,domain:""},y:{size:0,domain:""},y2:{size:0,domain:""}},types:[]},isLegendRight:!1,isLegendInset:!1,isLegendTop:!1,isLegendLeft:!1,legendStep:0,legendItemWidth:0,legendItemHeight:0,legendHasRendered:!1,eventReceiver:{currentIdx:-1,rect:{},data:[],coords:[]},axis:{x:{padding:{left:0,right:0},tickCount:0}},rotatedPadding:{left:30,right:0,top:5},withoutFadeIn:{},inputType:"",datetimeId:"",clip:{id:"",idXAxis:"",idYAxis:"",idXAxisTickTexts:"",idGrid:"",idSubchart:"",path:"",pathXAxis:"",pathYAxis:"",pathXAxisTickTexts:"",pathGrid:""},event:null,dragStart:null,dragging:!1,flowing:!1,cancelClick:!1,mouseover:!1,rendered:!1,transiting:!1,redrawing:!1,resizing:!1,toggling:!1,zooming:!1,hasNegativeValue:!1,hasPositiveValue:!0,orgAreaOpacity:"0.2",orgConfig:{},hiddenTargetIds:[],hiddenLegendIds:[],focusedTargetIds:[],defocusedTargetIds:[],radius:0,innerRadius:0,outerRadius:void 0,innerRadiusRatio:0,gaugeArcWidth:0,radiusExpanded:0,xgridAttr:{x1:null,x2:null,y1:null,y2:null}}}return e}(),De={element:Ii,state:Oi},Pi=function(){function e(){var t=this;Object.keys(De).forEach(function(a){t[a]=new De[a]})}return e.prototype.getStore=function(t){return this[t]},e}(),zi={bindto:"#chart",background:{},clipPath:!0,svg_classname:void 0,size_width:void 0,size_height:void 0,padding:!0,padding_mode:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,resize_timer:!0,onclick:void 0,onover:void 0,onout:void 0,onresize:void 0,onresized:void 0,onbeforeinit:void 0,oninit:void 0,onafterinit:void 0,onrendered:void 0,transition_duration:250,plugins:[],render:{},regions:[]},Di={boost_useCssRule:!1,boost_useWorker:!1},Mi={data_x:void 0,data_idConverter:function(e){return e},data_names:{},data_classes:{},data_type:void 0,data_types:{},data_order:"desc",data_groups:[],data_groupsZeroAs:"positive",data_color:void 0,data_colors:{},data_labels:{},data_labels_backgroundColors:void 0,data_labels_colors:void 0,data_labels_position:{},data_hide:!1,data_filter:void 0,data_onclick:function(){},data_onover:function(){},data_onout:function(){},data_onshown:void 0,data_onhidden:void 0,data_onmin:void 0,data_onmax:void 0,data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:"csv",data_keys:void 0,data_empty_label_text:""},Fi={color_pattern:[],color_tiles:void 0,color_threshold:{},color_onover:void 0},Bi={interaction_enabled:!0,interaction_brighten:!0,interaction_inputType_mouse:!0,interaction_inputType_touch:{}},Xi={legend_show:!0,legend_hide:!1,legend_contents_bindto:void 0,legend_contents_template:"<span style='color:#fff;padding:5px;background-color:{=COLOR}'>{=TITLE}</span>",legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onover:void 0,legend_item_onout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,legend_item_tile_r:5,legend_item_tile_type:"rectangle",legend_usePoint:!1},Ni={title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"center"},Gi={tooltip_show:!0,tooltip_doNotHide:!1,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:{},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_linked:!1,tooltip_linked_name:"",tooltip_onshow:function(){},tooltip_onhide:function(){},tooltip_onshown:function(){},tooltip_onhidden:function(){},tooltip_order:null},Bt=function(){function e(){return Ai(zi,Di,Mi,Fi,Bi,Xi,Ni,Gi,e.data)}return e.setOptions=function(t){this.data=t.reduce(function(a,i){return D(D({},a),i)},this.data)},e.data={},e}(),gt={bubbleBaseLength:"$baseLength",colorPattern:"__colorPattern__",dataMinMax:"$dataMinMax",dataTotalSum:"$dataTotalSum",dataTotalPerIndex:"$totalPerIndex",legendItemTextBox:"legendItemTextBox",radarPoints:"$radarPoints",setOverOut:"setOverOut",callOverOutForTouch:"callOverOutForTouch",textRect:"textRect"},Vi=function(){function e(){this.cache={}}return e.prototype.add=function(t,a,i){return i===void 0&&(i=!1),this.cache[t]=i?this.cloneTarget(a):a,this.cache[t]},e.prototype.remove=function(t){var a=this;kt(t).forEach(function(i){return delete a.cache[i]})},e.prototype.get=function(t,a){if(a===void 0&&(a=!1),a){for(var i=[],r=0,n=void 0;n=t[r];r++)n in this.cache&&i.push(this.cloneTarget(this.cache[n]));return i}else{var o=this.cache[t];return O(o)?o:null}},e.prototype.reset=function(t){var a=this;for(var i in a.cache)(t||/^\$/.test(i))&&(a.cache[i]=null)},e.prototype.cloneTarget=function(t){return{id:t.id,id_org:t.id_org,values:t.values.map(function(a){return{x:a.x,value:a.value,id:a.id}})}},e}(),Yi=M.setTimeout,Hi=M.clearTimeout;function Wi(e){var t=[],a,i=function(){i.clear(),e===!1?ra(function(){t.forEach(function(r){return r()})},{timeout:200}):a=Yi(function(){t.forEach(function(r){return r()})},k(e)?e:200)};return i.clear=function(){a&&(Hi(a),a=null)},i.add=function(r){return t.push(r)},i.remove=function(r){return t.splice(t.indexOf(r),1)},i}function fa(){var e=[],t=function(a,i){function r(){for(var n,o=0,s=0,c=void 0;c=e[s];s++){if(c===!0||!((n=c.empty)===null||n===void 0)&&n.call(c)){o++;continue}if(Qt()===!1){o=e.length;break}try{c.transition()}catch{o++}}return o===e.length}la(function(){i?.()},r)};return t.add=function(a){N(a)?e=e.concat(a):e.push(a)},t}var ge={};function Ui(e,t){var a,i=e.toString(),r=i.replace(/(function|[\s\W\n])/g,"").substring(0,15);return r in ge||(ge[r]=new M.Blob(["".concat((a=t?.map(String).join(";"))!==null&&a!==void 0?a:"",`

			self.onmessage=function({data}) {
				const result = (`).concat(i,`).apply(null, data);
				self.postMessage(result);
			};`)],{type:"text/javascript"})),M.URL.createObjectURL(ge[r])}function he(e,t,a,i){e===void 0&&(e=!0);var r;if(M.Worker&&e){var n=Ui(t,i),o=new M.Worker(n);r=function(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];o.postMessage(s),o.onmessage=function(l){return M.URL.revokeObjectURL(n),a(l.data)},o.onerror=function(l){console.error(l)}}}else r=function(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];var l=t.apply(void 0,s);a(l)};return r}function Ae(e){var t=[];return e.forEach(function(a,i){var r=a[0];a.forEach(function(n,o){if(o>0){if(typeof t[o-1]>"u"&&(t[o-1]={}),typeof n>"u")throw new Error("Source data is missing a component at (".concat(i,", ").concat(o,")!"));t[o-1][r]=n}})}),t}function we(e){var t=e[0],a=[];return e.forEach(function(i,r){if(r>0){var n={};i.forEach(function(o,s){if(typeof o>"u")throw new Error("Source data is missing a component at (".concat(r,", ").concat(s,")!"));n[t[s]]=o}),a.push(n)}}),a}function va(e,t){var a=[],i,r;if(Array.isArray(e)){var n=function(o,s){if(o[s]!==void 0)return o[s];var c=s.replace(/\[(\w+)\]/g,".$1"),l=c.replace(/^\./,"").split("."),u=o;return l.some(function(d){return!(u=u&&d in u?u[d]:void 0)}),u};t.x?i=t.value.concat(t.x):i=t.value,a.push(i),e.forEach(function(o){var s=i.map(function(c){var l=n(o,c);return typeof l>"u"&&(l=null),l});a.push(s)}),r=we(a)}else Object.keys(e).forEach(function(o){var s,c=e[o].concat();(s=c.unshift)===null||s===void 0||s.call(c,o),a.push(c)}),r=Ae(a);return r}function Zi(e,t,a,i,r){t===void 0&&(t="csv");var n=new XMLHttpRequest,o={csv:ji,tsv:qi,json:va};n.open("GET",e),a&&Object.keys(a).forEach(function(s){n.setRequestHeader(s,a[s])}),n.onreadystatechange=function(){if(n.readyState===4)if(n.status===200){var s=n.responseText;s&&r.call(this,o[t](t==="json"?JSON.parse(s):s,i))}else throw new Error("".concat(e,": Something went wrong loading!"))},n.send()}function ga(e,t){var a=e.rows(t),i;return a.length===1?(i=[{}],a[0].forEach(function(r){i[0][r]=null})):i=e.parse(t),i}function ji(e){return ga({rows:Ia,parse:Oa},e)}function qi(e){return ga({rows:Pa,parse:za},e)}function Me(e,t){var a=e||t?.data_keys;return a?.x&&(t.data_x=a.x),a}var Ki={convertData:function(e,t){var a=this.config,i=a.boost_useWorker,r=e;if(e.bindto&&(r={},["url","mimeType","headers","keys","json","keys","rows","columns"].forEach(function(n){var o="data_".concat(n);o in e&&(r[n]=e[o])})),r.url&&t)Zi(r.url,r.mimeType,r.headers,Me(r.keys,a),t);else if(r.json)he(i,va,t,[Ae,we])(r.json,Me(r.keys,a));else if(r.rows)he(i,we,t)(r.rows);else if(r.columns)he(i,Ae,t)(r.columns);else if(e.bindto)throw Error("url or json or rows or columns is required.")},convertDataToTargets:function(e,t){var a=this,i=this,r=i.axis,n=i.config,o=i.state,s=n.data_type,c=!1,l=!1,u=!1;r&&(c=r.isCategorized(),l=r.isTimeSeries(),u=r.isCustomX());var d=Object.keys(e[0]||{}),f=d.length?d.filter(i.isNotX,i):[],v=d.length?d.filter(i.isX,i):[],g;f.forEach(function(x){var m=a.getXKey(x);u||l?v.indexOf(m)>=0?g=(t&&i.data.xs[x]||[]).concat(e.map(function(_){return _[m]}).filter(O).map(function(_,y){return i.generateTargetX(_,x,y)})):n.data_x?g=a.getOtherTargetXs():J(n.data_xs)&&(g=i.getXValuesOfXKey(m,i.data.targets)):g=e.map(function(_,y){return y}),g&&(a.data.xs[x]=g)}),f.forEach(function(x){if(!a.data.xs[x])throw new Error('x is not defined for id = "'.concat(x,'".'))});var h=f.map(function(x,m){var _=n.data_idConverter.bind(i.api)(x),y=i.getXKey(x),b=u&&c,T=b&&e.map(function(R){return R.x}).every(function(R){return n.axis_x_categories.indexOf(R)>-1}),$=e.__append__,A=y===null&&$?i.api.data.values(x).length:0;return{id:_,id_org:x,values:e.map(function(R,w){var I=R[y],q=R[x],C;return q=q!==null&&!isNaN(q)&&!X(q)?+q:N(q)||X(q)?q:null,(b||o.hasRadar)&&m===0&&!nt(I)?(!T&&m===0&&w===0&&!$&&(n.axis_x_categories=[]),C=n.axis_x_categories.indexOf(I),C===-1&&(C=n.axis_x_categories.length,n.axis_x_categories.push(I))):C=i.generateTargetX(I,x,A+w),(nt(q)||i.data.xs[x].length<=w)&&(C=void 0),{x:C,value:q,id:_,index:-1}}).filter(function(R){return G(R.x)})}});if(h.forEach(function(x){var m;n.data_xSort&&(x.values=x.values.sort(function(_,y){var b=_.x||_.x===0?_.x:1/0,T=y.x||y.x===0?y.x:1/0;return b-T})),x.values.forEach(function(_,y){return _.index=y}),(m=i.data.xs[x.id])===null||m===void 0||m.sort(function(_,y){return _-y})}),o.hasNegativeValue=i.hasNegativeValueInTargets(h),o.hasPositiveValue=i.hasPositiveValueInTargets(h),s&&i.isValidChartType(s)){var p=i.mapToIds(h).filter(function(x){return!(x in n.data_types)||!i.isValidChartType(n.data_types[x])});i.setTargetType(p,s)}return h.forEach(function(x){return i.cache.add(x.id_org,x,!0)}),h}},Ji={isX:function(e){var t=this,a=t.config,i=a.data_x&&e===a.data_x,r=J(a.data_xs)&&bi(a.data_xs,e);return i||r},isNotX:function(e){return!this.isX(e)},isStackNormalized:function(){var e=this.config;return!!(e.data_stack_normalize&&e.data_groups.length)},isGrouped:function(e){var t=this.config.data_groups;return e?t.some(function(a){return a.indexOf(e)>=0&&a.length>1}):t.length>0},getXKey:function(e){var t=this,a=t.config;return a.data_x?a.data_x:J(a.data_xs)?a.data_xs[e]:null},getXValuesOfXKey:function(e,t){var a=this,i=t&&J(t)?a.mapToIds(t):[],r;return i.forEach(function(n){a.getXKey(n)===e&&(r=a.data.xs[n])}),r},getIndexByX:function(e,t){var a=this;return t?t.indexOf(Q(e)?e:+e):(a.filterByX(a.data.targets,e)[0]||{index:null}).index},getXValue:function(e,t){var a=this;return e in a.data.xs&&a.data.xs[e]&&O(a.data.xs[e][t])?a.data.xs[e][t]:t},getOtherTargetXs:function(){var e=this,t=Object.keys(e.data.xs);return t.length?e.data.xs[t[0]]:null},getOtherTargetX:function(e){var t=this.getOtherTargetXs();return t&&e<t.length?t[e]:null},addXs:function(e){var t=this,a=t.config;Object.keys(e).forEach(function(i){a.data_xs[i]=e[i]})},isMultipleX:function(){return J(this.config.data_xs)||this.hasType("bubble")||this.hasType("scatter")},addName:function(e){var t=this,a=t.config,i;return e&&(i=a.data_names[e.id],e.name=i!==void 0?i:e.id),e},getAllValuesOnIndex:function(e,t){t===void 0&&(t=!1);var a=this,i=a.filterTargetsToShow(a.data.targets).map(function(r){return a.addName(a.getValueOnIndex(r.values,e))});return t&&(i=i.filter(function(r){return r&&"value"in r&&O(r.value)})),i},getValueOnIndex:function(e,t){var a=e.filter(function(i){return i.index===t});return a.length?a[0]:null},updateTargetX:function(e,t){var a=this;e.forEach(function(i){i.values.forEach(function(r,n){r.x=a.generateTargetX(t[n],i.id,n)}),a.data.xs[i.id]=t})},updateTargetXs:function(e,t){var a=this;e.forEach(function(i){t[i.id]&&a.updateTargetX([i],t[i.id])})},generateTargetX:function(e,t,a){var i=this,r=i.axis,n=r?.isCategorized()?a:e||a;if(r?.isTimeSeries()){var o=_t.bind(i);n=o(e||i.getXValue(t,a))}else r?.isCustomX()&&!r?.isCategorized()&&(n=O(e)?+e:i.getXValue(t,a));return n},updateXs:function(e){e.length&&(this.axis.xs=e.map(function(t){return t.x}))},getPrevX:function(e){var t=this.axis.xs[e-1];return G(t)?t:null},getNextX:function(e){var t=this.axis.xs[e+1];return G(t)?t:null},getBaseValue:function(e){var t=this,a=t.state.hasAxis,i=e.value;return i&&a&&(t.isAreaRangeType(e)?i=t.getRangedData(e,"mid"):t.isBubbleZType(e)&&(i=t.getBubbleZData(i,"y"))),i},getMinMaxValue:function(e){var t=this.getBaseValue.bind(this),a,i;return(e||this.data.targets.map(function(r){return r.values})).forEach(function(r,n){var o=r.map(t).filter(k);a=Math.min.apply(Math,ct([n?a:1/0],o,!1)),i=Math.max.apply(Math,ct([n?i:-1/0],o,!1))}),{min:a,max:i}},getMinMaxData:function(){var e=this,t=gt.dataMinMax,a=e.cache.get(t);if(!a){var i=e.data.targets.map(function(s){return s.values}),r=e.getMinMaxValue(i),n=[],o=[];i.forEach(function(s){var c=e.getFilteredDataByValue(s,r.min),l=e.getFilteredDataByValue(s,r.max);c.length&&(n=n.concat(c)),l.length&&(o=o.concat(l))}),e.cache.add(t,a={min:n,max:o})}return a},getTotalPerIndex:function(){var e=this,t=gt.dataTotalPerIndex,a=e.cache.get(t);return(e.config.data_groups.length||e.isStackNormalized())&&!a&&(a=[],e.data.targets.forEach(function(i){i.values.forEach(function(r,n){a[n]||(a[n]=0),a[n]+=k(r.value)?r.value:0})})),a},getTotalDataSum:function(e){var t=this,a=gt.dataTotalSum,i=t.cache.get(a);if(!k(i)){var r=ve(t.data.targets.map(function(n){return n.values})).map(function(n){return n.value});i=r.length?r.reduce(function(n,o){return n+o}):0,t.cache.add(a,i)}return e&&(i-=t.getHiddenTotalDataSum()),i},getHiddenTotalDataSum:function(){var e=this,t=e.api,a=e.state.hiddenTargetIds,i=0;return a.length&&(i=t.data.values.bind(t)(a).reduce(function(r,n){return r+n})),i},getFilteredDataByValue:function(e,t){var a=this;return e.filter(function(i){return a.getBaseValue(i)===t})},getMaxDataCount:function(){return Math.max.apply(Math,this.data.targets.map(function(e){return e.values.length}))},getMaxDataCountTarget:function(){var e=this.filterTargetsToShow()||[],t=e.length,a=this.config.axis_x_inverted;return t>1?(e=e.map(function(i){return i.values}).reduce(function(i,r){return i.concat(r)}).map(function(i){return i.x}),e=Ht(ye(e)).map(function(i,r,n){return{x:i,index:a?n.length-r-1:r}})):t&&(e=e[0].values.concat()),e},mapToIds:function(e){return e.map(function(t){return t.id})},mapToTargetIds:function(e){var t=this;return e?N(e)?e.concat():[e]:t.mapToIds(t.data.targets)},hasTarget:function(e,t){for(var a=this.mapToIds(e),i=0,r=void 0;r=a[i];i++)if(r===t)return!0;return!1},isTargetToShow:function(e){return this.state.hiddenTargetIds.indexOf(e)<0},isLegendToShow:function(e){return this.state.hiddenLegendIds.indexOf(e)<0},filterTargetsToShow:function(e){var t=this;return(e||t.data.targets).filter(function(a){return t.isTargetToShow(a.id)})},mapTargetsToUniqueXs:function(e){var t=this,a=t.axis,i=[];return e?.length&&(i=ye(ve(e.map(function(r){return r.values.map(function(n){return+n.x})}))),i=a?.isTimeSeries()?i.map(function(r){return new Date(+r)}):i.map(Number)),Ht(i)},addTargetIds:function(e,t){var a=this.state,i=N(t)?t:[t];i.forEach(function(r){a[e].indexOf(r)<0&&a[e].push(r)})},removeTargetIds:function(e,t){var a=this.state,i=N(t)?t:[t];i.forEach(function(r){var n=a[e].indexOf(r);n>=0&&a[e].splice(n,1)})},addHiddenTargetIds:function(e){this.addTargetIds("hiddenTargetIds",e)},removeHiddenTargetIds:function(e){this.removeTargetIds("hiddenTargetIds",e)},addHiddenLegendIds:function(e){this.addTargetIds("hiddenLegendIds",e)},removeHiddenLegendIds:function(e){this.removeTargetIds("hiddenLegendIds",e)},getValuesAsIdKeyed:function(e){var t=this,a=t.state.hasAxis,i={},r=t.isMultipleX(),n=r?t.mapTargetsToUniqueXs(e).map(function(o){return Q(o)?o:+o}):null;return e.forEach(function(o){var s=[];o.values.filter(function(c){var l=c.value;return O(l)||l===null}).forEach(function(c){var l=c.value;l!==null&&t.isCandlestickType(c)&&(l=N(l)?l.slice(0,4):[l.open,l.high,l.low,l.close]),N(l)?s.push.apply(s,l):X(l)&&"high"in l?s.push.apply(s,Object.values(l)):t.isBubbleZType(c)?s.push(a&&t.getBubbleZData(l,"y")):r?s[t.getIndexByX(c.x,n)]=l:s.push(l)}),i[o.id]=s}),i},checkValueInTargets:function(e,t){for(var a=Object.keys(e),i,r=0;r<a.length;r++){i=e[a[r]].values;for(var n=0;n<i.length;n++)if(t(i[n].value))return!0}return!1},hasMultiTargets:function(){return this.filterTargetsToShow().length>1},hasNegativeValueInTargets:function(e){return this.checkValueInTargets(e,function(t){return t<0})},hasPositiveValueInTargets:function(e){return this.checkValueInTargets(e,function(t){return t>0})},orderTargets:function(e){var t=this,a=ct([],e,!0),i=t.getSortCompareFn();return i&&a.sort(i),a},getSortCompareFn:function(e){e===void 0&&(e=!1);var t=this,a=t.config,i=a.data_order,r=/asc/i.test(i),n=/desc/i.test(i),o;if(r||n){var s=function(c,l){return c+Math.abs(l.value)};o=function(c,l){var u="values"in c?c.values.reduce(s,0):c.value,d="values"in l?l.values.reduce(s,0):l.value;return e?r?u-d:d-u:r?d-u:u-d}}else P(i)&&(o=i.bind(t.api));return o||null},filterByX:function(e,t){return ve(e.map(function(a){return a.values})).filter(function(a){return a.x-t===0})},filterRemoveNull:function(e){var t=this;return e.filter(function(a){return O(t.getBaseValue(a))})},filterByXDomain:function(e,t){return e.map(function(a){return{id:a.id,id_org:a.id_org,values:a.values.filter(function(i){return t[0]<=i.x&&i.x<=t[1]})}})},hasDataLabel:function(){var e=this.config.data_labels;return na(e)&&e||Tt(e)&&J(e)},getDataIndexFromEvent:function(e){var t=this,a=t.config,i=t.state,r=i.inputType,n=i.eventReceiver,o=n.coords,s=n.rect,c=a.axis_rotated,l=r==="touch"&&e.changedTouches?e.changedTouches[0]:e,u=_e(o,c?l.clientY-s.top:l.clientX-s.left,0,o.length-1,c);return u},getDataLabelLength:function(e,t,a){var i=this,r=[0,0],n=1.3;return i.$el.chart.select("svg").selectAll(".dummy").data([e,t]).enter().append("text").text(function(o){return i.dataLabelFormat(o.id)(o)}).each(function(o,s){r[s]=this.getBoundingClientRect()[a]*n}).remove(),r},isNoneArc:function(e){return this.hasTarget(this.data.targets,e.id)},isArc:function(e){return"data"in e&&this.hasTarget(this.data.targets,e.data.id)},findSameXOfValues:function(e,t){var a=e[t].x,i=[],r;for(r=t-1;r>=0&&a===e[r].x;r--)i.push(e[r]);for(r=t;r<e.length&&a===e[r].x;r++)i.push(e[r]);return i},findClosestFromTargets:function(e,t){var a=this,i=e.map(function(r){return a.findClosest(r.values,t)});return a.findClosest(i,t)},findClosest:function(e,t){var a=this,i=a.config,r=a.$el.main,n=e.filter(function(c){return c&&O(c.value)}),o=i.point_sensitivity,s;return n.filter(function(c){return a.isBarType(c.id)||a.isCandlestickType(c.id)}).forEach(function(c){var l=a.isBarType(c.id)?".".concat(xt.chartBar,".").concat(z.target).concat(a.getTargetSelectorSuffix(c.id)," .").concat(xt.bar,"-").concat(c.index):".".concat(At.chartCandlestick,".").concat(z.target).concat(a.getTargetSelectorSuffix(c.id)," .").concat(At.candlestick,"-").concat(c.index," path");!s&&a.isWithinBar(r.select(l).node())&&(s=c)}),n.filter(function(c){return!a.isBarType(c.id)&&!a.isCandlestickType(c.id)}).forEach(function(c){var l=a.dist(c,t);l<o&&(o=l,s=c)}),s},dist:function(e,t){var a=this,i=a.config.axis_rotated,r=a.scale,n=i?1:0,o=i?0:1,s=a.circleY(e,e.index),c=(r.zoom||r.x)(e.x);return Math.sqrt(Math.pow(c-t[n],2)+Math.pow(s-t[o],2))},convertValuesToStep:function(e){var t=this,a=t.axis,i=t.config,r=i.line_step_type,n=a?a.isCategorized():!1,o=N(e)?e.concat():[e];if(!(n||/step\-(after|before)/.test(r)))return e;if(o.length){var s=o[0],c=o[o.length-1],l=s.id,u=s.x;o.unshift({x:--u,value:s.value,id:l}),n&&r==="step-after"&&o.unshift({x:--u,value:s.value,id:l}),u=c.x,o.push({x:++u,value:c.value,id:l}),n&&r==="step-before"&&o.push({x:++u,value:c.value,id:l})}return o},convertValuesToRange:function(e){var t=N(e)?e.concat():[e],a=[];return t.forEach(function(i){var r=i.x,n=i.id;a.push({x:r,id:n,value:i.value[0]}),a.push({x:r,id:n,value:i.value[2]})}),a},updateDataAttributes:function(e,t){var a=this,i=a.config,r=i["data_".concat(e)];return nt(t)||(Object.keys(t).forEach(function(n){r[n]=t[n]}),a.redraw({withLegend:!0})),r},getRangedData:function(e,t,a){t===void 0&&(t=""),a===void 0&&(a="areaRange");var i=e?.value;if(N(i)){var r={areaRange:["high","mid","low"],candlestick:["open","high","low","close","volume"]}[a].indexOf(t);return r>=0&&i?i[r]:void 0}else if(i)return i[t];return i},setRatioForGroupedData:function(e){var t=this,a=t.config;if(a.data_groups.length&&e.some(function(r){return t.isGrouped(r.id)})){var i=function(r){return t.getRatio("index",r,!0)};e.forEach(function(r){"values"in r?r.values.forEach(i):i(r)})}},getRatio:function(e,t,a){a===void 0&&(a=!1);var i=this,r=i.config,n=i.state,o=i.api,s=0;if(t&&o.data.shown().length)if(s=t.ratio||t.value,e==="arc")if(i.pie.padAngle()())s=t.value/i.getTotalDataSum(!0);else{var c=r.gauge_fullCircle?i.getArcLength():i.getStartAngle()*-2,l=i.hasType("gauge")?c:Math.PI*2;s=(t.endAngle-t.startAngle)/l}else if(e==="index"){var u=o.data.values.bind(o),d=this.getTotalPerIndex();if(n.hiddenTargetIds.length){var f=u(n.hiddenTargetIds,!1);f.length&&(f=f.reduce(function(p,x){return p.map(function(m,_){return(k(m)?m:0)+x[_]})}),d=d.map(function(p,x){return p-f[x]}))}var v=d[t.index];t.ratio=k(t.value)&&d&&v?t.value/v:0,s=t.ratio}else if(e==="radar")s=parseFloat(String(Math.max(t.value,0)))/n.current.dataMax*r.radar_size_ratio;else if(e==="bar"){var g=i.getYScaleById.bind(i)(t.id),h=g.domain().reduce(function(p,x){return x-p});s=h===0?0:Math.abs(t.value)/h}else e==="treemap"&&(s/=i.getTotalDataSum(!0));return a&&s?s*100:s},updateDataIndexByX:function(e){var t=this,a=e.reduce(function(i,r,n){return i[Number(r.x)]=n,i},{});t.data.targets.forEach(function(i){i.values.forEach(function(r,n){var o=a[Number(r.x)];o===void 0&&(o=n),r.index=o})})},isBubbleZType:function(e){var t=this;return t.isBubbleType(e)&&(X(e.value)&&("z"in e.value||"y"in e.value)||N(e.value)&&e.value.length>=2)},isBarRangeType:function(e){var t=this,a=e.value;return t.isBarType(e)&&N(a)&&a.length>=2&&a.every(function(i){return k(i)})},getDataById:function(e){var t,a=this.cache.get(e)||this.api.data(e);return(t=a?.[0])!==null&&t!==void 0?t:a}};function ha(e,t){t===void 0&&(t=!1);var a=this,i=a.api;t&&a.api.flush(!0),e?.call(i)}var Qi={load:function(e,t){var a=this,i=a.data,r=t.append,n=e;n&&(t.filter&&(n=n.filter(t.filter)),(t.type||t.types)&&n.forEach(function(o){var s,c=((s=t.types)===null||s===void 0?void 0:s[o.id])||t.type;a.setTargetType(o.id,c)}),i.targets.forEach(function(o){for(var s=0;s<n.length;s++)if(o.id===n[s].id){o.values=r?o.values.concat(n[s].values):n[s].values,n.splice(s,1);break}}),i.targets=i.targets.concat(n)),a.updateTargets(i.targets),a.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),a.updateTypesElements(),ha.call(a,t.done,t.resizeAfter)},loadFromArgs:function(e){var t=this;t.config&&(t.cache.reset(),t.convertData(e,function(a){var i=e.data||a;e.append&&(i.__append__=!0),i&&t.load(t.convertDataToTargets(i),e)}))},unload:function(e,t){var a=this,i=a.state,r=a.$el,n=a.$T,o=t,s=e;if(a.cache.reset(),o||(o=function(){}),s=s.filter(function(l){return a.hasTarget(a.data.targets,l)}),!s||s.length===0){o();return}var c=r.svg.selectAll(s.map(function(l){return a.selectorTarget(l)}));n(c).style("opacity","0").remove().call(Re,o),s.forEach(function(l){i.withoutFadeIn[l]=!1,r.legend&&r.legend.selectAll(".".concat(V.legendItem).concat(a.getTargetSelectorSuffix(l))).remove(),a.data.targets=a.data.targets.filter(function(u){return u.id!==l})}),i.hasTreemap&&a.updateTargetsForTreemap(a.data.targets),a.updateTypesElements()}},tr={selectRectForSingle:function(e,t,a){var i,r,n=this,o=n.config,s=n.$el,c=s.main,l=s.circle,u=o.data_selection_enabled,d=o.data_selection_grouped,f=o.data_selection_isselectable,v=o.tooltip_grouped,g=n.getAllValuesOnIndex(a);if(!(v&&(n.showTooltip(g,e),(i=n.showGridFocus)===null||i===void 0||i.call(n,g),!u||d))){!l&&c.selectAll(".".concat(z.EXPANDED,":not(.").concat(it.shape,"-").concat(a,")")).classed(z.EXPANDED,!1);var h=c.selectAll(".".concat(it.shape,"-").concat(a)).classed(z.EXPANDED,!0).style("cursor",f?"pointer":null).filter(function(p){return n.isWithinShape(this,p)});h.empty()&&!v&&((r=n.hideGridFocus)===null||r===void 0||r.call(n),n.hideTooltip(),!d&&n.setExpand(a)),h.call(function(p){var x,m,_=p.data();u&&(d||f?.bind(n.api)(_))&&t.style("cursor","pointer"),v||(n.showTooltip(_,e),(x=n.showGridFocus)===null||x===void 0||x.call(n,_),(m=n.unexpandCircles)===null||m===void 0||m.call(n),p.each(function(y){return n.setExpand(a,y.id)}))})}},setExpand:function(e,t,a){var i=this,r=i.config,n=i.$el.circle;n&&r.point_focus_expand_enabled&&i.expandCircles(e,t,a),i.expandBarTypeShapes(!0,e,t,a)},expandBarTypeShapes:function(e,t,a,i){e===void 0&&(e=!0);var r=this;["bar","candlestick"].filter(function(n){return r.$el[n]}).forEach(function(n){i&&r.$el[n].classed(z.EXPANDED,!1),r.getShapeByIndex(n,t,a).classed(z.EXPANDED,e)})},setOverOut:function(e,t){var a=this,i=a.config,r=a.state,n=r.hasRadar,o=r.hasTreemap,s=a.$el.main,c=X(t);if(c||t!==-1){var l=i[e?"data_onover":"data_onout"].bind(a.api);if(i.color_onover&&a.setOverColor(e,t,c),c){var u=o?Ce.treemap:W.arc;l(t,s.select(".".concat(u).concat(a.getTargetSelectorSuffix(t.id))).node())}else if(i.tooltip_grouped)e&&(i.point_focus_only&&n?a.showCircleFocus(a.getAllValuesOnIndex(t,!0)):a.setExpand(t,null,!0)),!a.isMultipleX()&&s.selectAll(".".concat(it.shape,"-").concat(t)).each(function(h){l(h,this)});else{var d=a.cache.get(gt.setOverOut)||[],f=s.selectAll(".".concat(it.shape,"-").concat(t)).filter(function(h){return a.isWithinShape(this,h)}),v=f.filter(function(){var h=this;return d.every(function(p){return p!==h})});if(!e||f.empty()||d.length===v.size()&&v.nodes().every(function(h,p){return h!==d[p]}))for(;d.length;){var g=d.pop();i.data_onout.bind(a.api)(L(g).datum(),g)}v.each(function(){e&&(l(L(this).datum(),this),d.push(this))}),a.cache.add(gt.setOverOut,d)}}},callOverOutForTouch:function(e){var t=this,a=t.cache.get(gt.callOverOutForTouch);(X(e)&&a?e.id!==a.id:e!==a)&&((a||k(a))&&t.setOverOut(!1,a),(e||k(e))&&t.setOverOut(!0,e),t.cache.add(gt.callOverOutForTouch,e))},getDraggableSelection:function(){var e=this,t=e.config,a=e.state;return t.interaction_enabled&&t.data_selection_draggable&&e.drag?Qe().on("drag",function(i){a.event=i,e.drag(ht(i,this))}).on("start",function(i){a.event=i,e.dragstart(ht(i,this))}).on("end",function(i){a.event=i,e.dragend()}):function(){}},dispatchEvent:function(e,t,a){var i,r=this,n=r.config,o=r.state,s=o.eventReceiver,c=o.hasAxis,l=o.hasRadar,u=o.hasTreemap,d=r.$el,f=d.eventRect,v=d.arcs,g=d.radar,h=d.treemap,p=(i=u&&s.rect||l&&g.axes.select(".".concat(at.axis,"-").concat(t," text"))||f||v?.selectAll(".".concat(z.target," path")).filter(function(w,I){return I===t}))===null||i===void 0?void 0:i.node();if(p){var x=r.isMultipleX(),m=p.getBoundingClientRect(),_=m.width,y=m.left,b=m.top;if(c&&!l&&!x){var T=s.coords[t];_=T.w,y+=T.x,b+=T.y}var $=y+(a?a[0]:0)+(x||n.axis_rotated?0:_/2),A=b+(a?a[1]:0),R={screenX:$,screenY:A,clientX:$,clientY:A};Si[/^(mouse|click)/.test(e)?"mouse":"touch"](u?h.node():p,e,R)}},setDragStatus:function(e){this.state.dragging=e},unbindZoomEvent:function(){var e=this,t=e.$el,a=t.eventRect,i=t.zoomResetBtn;a?.on(".zoom wheel.zoom .drag",null),i?.on("click",null).style("display","none")},unbindAllEvents:function(){var e,t=this,a=t.$el,i=a.arcs,r=a.eventRect,n=a.legend,o=a.region,s=a.svg,c=a.treemap,l=t.brush,u=["wheel","click","mouseover","mousemove","mouseout","touchstart","touchmove","touchend","touchstart.eventRect","touchmove.eventRect","touchend.eventRect",".brush",".drag",".zoom","wheel.zoom","dblclick.zoom"].join(" ");[s,r,o?.list,l?.getSelection(),i?.selectAll("path"),n?.selectAll("g"),c].forEach(function(d){return d?.on(u,null)}),(e=t.unbindZoomEvent)===null||e===void 0||e.call(t)}},er={generateClass:function(e,t){return" ".concat(e," ").concat(e+this.getTargetSelectorSuffix(t))},getClass:function(e,t){var a=this,i=/s$/.test(e),r=/^(area|arc|line|treemap)s?$/.test(e),n=i?"id":"index";return function(o){var s=o.data||o,c=(t?a.generateClass(F[i?"shapes":"shape"],s[n]):"")+a.generateClass(F[e],s[r?"id":n]);return c.trim()}},getChartClass:function(e){var t=this;return function(a){return F["chart".concat(e)]+t.classTarget((a.data?a.data:a).id)}},generateExtraLineClass:function(){var e=this,t=e.config.line_classes||[],a=[];return function(i){var r,n=i.id||((r=i.data)===null||r===void 0?void 0:r.id)||i;return a.indexOf(n)<0&&a.push(n),t[a.indexOf(n)%t.length]}},classRegion:function(e,t){return"".concat(this.generateClass(F.region,t)," ").concat("class"in e?e.class:"")},classTarget:function(e){var t=this.config.data_classes[e],a="";return t&&(a=" ".concat(F.target,"-").concat(t)),this.generateClass(F.target,e)+a},classFocus:function(e){return this.classFocused(e)+this.classDefocused(e)},classFocused:function(e){return" ".concat(this.state.focusedTargetIds.indexOf(e.id)>=0?F.focused:"")},classDefocused:function(e){return" ".concat(this.state.defocusedTargetIds.indexOf(e.id)>=0?F.defocused:"")},getTargetSelectorSuffix:function(e){var t=e||e===0?"-".concat(e):"";return t.replace(/([\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\])/g,"-")},selectorTarget:function(e,t,a){t===void 0&&(t=""),a===void 0&&(a="");var i=this.getTargetSelectorSuffix(e);return"".concat(t,".").concat(F.target+i," ").concat(a,", ").concat(t,".").concat(F.circles+i," ").concat(a)},selectorTargets:function(e,t){var a=this,i=e||[];return i.length?i.map(function(r){return a.selectorTarget(r,t)}):null},selectorLegend:function(e){return".".concat(F.legendItem+this.getTargetSelectorSuffix(e))},selectorLegends:function(e){var t=this;return e?.length?e.map(function(a){return t.selectorLegend(a)}):null}},ar={categoryName:function(e){var t=this.config.axis_x_categories;return e<t?.length?t[e]:e}},ir=function(e,t,a){var i=L(e.cloneNode(!0));return i.attr("id",a).insert("rect",":first-child").attr("width",i.attr("width")).attr("height",i.attr("height")).style("fill",t),{id:a,node:i.node()}};function rr(e){var t=gt.colorPattern,a=K.body,i=a[t];if(!i){var r=";",n=e.classed(be.colorPattern,!0).style("background-image");e.classed(be.colorPattern,!1),n.indexOf(r)>-1&&(i=n.replace(/url[^#]*|["'()]|(\s|%20)/g,"").split(r).map(function(o){return o.trim().replace(/[\"'\s]/g,"")}).filter(Boolean),a[t]=i)}return i}var nr=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],or={generateColor:function(){var e=this,t=e.$el,a=e.config,i=a.data_colors,r=a.data_color,n=[],o=J(a.color_pattern)?a.color_pattern:Da(rr(t.chart)||nr).range(),s=o;if(P(a.color_tiles)){var c=a.color_tiles.bind(e.api)(),l=o.map(function(u,d){var f=u.replace(/[#\(\)\s,]/g,""),v="".concat(e.state.datetimeId,"-pattern-").concat(f,"-").concat(d);return ir(c[d%c.length],u,v)});o=l.map(function(u){return"url(#".concat(u.id,")")}),e.patterns=l}return function(u){var d,f=u.id||((d=u.data)===null||d===void 0?void 0:d.id)||u,v=e.isTypeOf(f,["line","spline","step"])||!a.data_types[f],g;return P(i[f])?g=i[f].bind(e.api)(u):i[f]?g=i[f]:(n.indexOf(f)<0&&n.push(f),g=v?s[n.indexOf(f)%s.length]:o[n.indexOf(f)%o.length],i[f]=g),P(r)?r.bind(e.api)(g,u):g}},generateLevelColor:function(){var e=this,t=e.config,a=t.color_pattern,i=t.color_threshold,r=i.unit==="value",n=i.max||100,o=i.values&&i.values.length?i.values:[];return J(i)?function(s){for(var c=r?s:s*100/n,l=a[a.length-1],u=0,d=o.length;u<d;u++)if(c<=o[u]){l=a[u];break}return l}:null},generateDataLabelBackgroundColorFilter:function(e){var t=this,a=t.$el,i=t.config,r=t.state,n=e||i.data_labels_backgroundColors;if(n){var o=[];Q(n)?o.push(""):X(n)&&(o=Object.keys(n)),o.forEach(function(s){var c="".concat(r.datetimeId,"-labels-bg").concat(t.getTargetSelectorSuffix(s)).concat(e?t.getTargetSelectorSuffix(e):"");a.defs.append("filter").attr("x","0").attr("y","0").attr("width","1").attr("height","1").attr("id",c).html('<feFlood flood-color="'.concat(s===""?n:n[s],'" /><feComposite in="SourceGraphic"/>'))})}},getGradienColortUrl:function(e){return"url(#".concat(this.state.datetimeId,"-gradient").concat(this.getTargetSelectorSuffix(e),")")},updateLinearGradient:function(){var e=this,t=e.config,a=e.data.targets,i=e.state.datetimeId,r=e.$el.defs;a.forEach(function(n){var o="".concat(i,"-gradient").concat(e.getTargetSelectorSuffix(n.id)),s=e.isAreaType(n)&&"area"||e.isBarType(n)&&"bar",c=t.axis_rotated;if(s&&r.select("#".concat(o)).empty()){var l=e.color(n),u=t["".concat(s,"_linearGradient")],d=u.x,f=d===void 0?c?[1,0]:[0,0]:d,v=u.y,g=v===void 0?c?[0,0]:[0,1]:v,h=u.stops,p=h===void 0?[[0,l,1],[1,l,0]]:h,x=r.append("linearGradient").attr("id","".concat(o)).attr("x1",f[0]).attr("x2",f[1]).attr("y1",g[0]).attr("y2",g[1]);p.forEach(function(m){var _=P(m[1])?m[1].bind(e.api)(n.id):m[1];x.append("stop").attr("offset",m[0]).attr("stop-color",_||l).attr("stop-opacity",m[2])})}})},setOverColor:function(e,t){var a=this,i=a.config,r=a.$el.main,n=i.color_onover,o=e?n:a.color;X(o)?o=function(s){var c=s.id;return c in n?n[c]:a.color(c)}:Q(o)?o=function(){return n}:P(n)&&(o=o.bind(a.api)),r.selectAll(X(t)?".".concat(W.arc).concat(a.getTargetSelectorSuffix(t.id)):".".concat(it.shape,"-").concat(t)).style("fill",o)}},sr={getYDomainMinMax:function(e,t){var a=this,i=a.axis,r=a.config,n=t==="min",o=r.data_groups,s=a.mapToIds(e),c=a.getValuesAsIdKeyed(e);if(o.length>0){var l=a["has".concat(n?"Negative":"Positive","ValueInTargets")](e);o.forEach(function(u){var d=u.filter(function(g){return s.indexOf(g)>=0});if(d.length){var f=d[0],v=i.getId(f);l&&c[f]&&(c[f]=c[f].map(function(g){return(n?g<0:g>0)?g:0})),d.filter(function(g,h){return h>0}).forEach(function(g){if(c[g]){var h=i.getId(g);c[g].forEach(function(p,x){var m=+p,_=n?m>0:m<0;h===v&&!(l&&_)&&(c[f][x]+=m)})}})}})}return mt(t,Object.keys(c).map(function(u){return mt(t,c[u])}))},isHiddenTargetWithYDomain:function(e){var t=this;return t.state.hiddenTargetIds.some(function(a){return t.axis.getId(a)===e})},getYDomain:function(e,t,a){var i=this,r=i.axis,n=i.config,o=i.scale,s="axis_".concat(t);if(i.isStackNormalized())return[0,100];var c=o?.[t]&&o[t].type==="log",l=e.filter(function(E){return r.getId(E.id)===t}),u=a?i.filterByXDomain(l,a):l;if(u.length===0)return i.isHiddenTargetWithYDomain(t)?o[t].domain():t==="y2"?o.y.domain():i.getYDomain(e,"y2",a);var d=n["".concat(s,"_min")],f=n["".concat(s,"_max")],v=n["".concat(s,"_center")],g=n["".concat(s,"_inverted")],h=i.hasDataLabel()&&n.axis_rotated,p=i.hasDataLabel()&&!n.axis_rotated,x=i.getYDomainMinMax(u,"min"),m=i.getYDomainMinMax(u,"max"),_=ct([S.BAR,S.BUBBLE,S.SCATTER],St.Line,!0).some(function(E){var tt=E.indexOf("area")>-1?"area":E;return i.hasType(E,u,!0)&&n["".concat(tt,"_zerobased")]});x=O(d)?d:O(f)?x<=f?x:f-10:x,m=O(f)?f:O(d)?d<=m?m:d+10:m,isNaN(x)&&(x=0),isNaN(m)&&(m=x),x===m&&(x<0?m=0:x=0);var y=x>=0&&m>=0,b=x<=0&&m<=0;(O(d)&&y||O(f)&&b)&&(_=!1),_&&(y&&(x=0),b&&(m=0));var T=Math.abs(m-x),$={top:T*.1,bottom:T*.1};if(G(v)){var A=Math.max(Math.abs(x),Math.abs(m));m=v+A,x=v-A}if(h){var R=Dt(o.y.range()),w=i.getDataLabelLength(x,m,"width").map(function(E){return E/R});["bottom","top"].forEach(function(E,tt){$[E]+=T*(w[tt]/(1-w[0]-w[1]))})}else if(p){var I=i.getDataLabelLength(x,m,"height");["bottom","top"].forEach(function(E,tt){$[E]+=i.convertPixelToScale("y",I[tt],T)})}$=i.getResettedPadding($);var q=n["".concat(s,"_padding")];J(q)&&["bottom","top"].forEach(function(E){$[E]=r.getPadding(q,E,$[E],T)}),_&&(y&&($.bottom=x),b&&($.top=-m));var C=c?[x,m].map(function(E){return E<0?0:E}):[x-$.bottom,m+$.top];return g?C.reverse():C},getXDomainMinMax:function(e,t){var a,i=this,r=i.config["axis_x_".concat(t)],n=mt(t,e.map(function(s){return mt(t,s.values.map(function(c){return c.x}))})),o=X(r)?r.value:r;return o=G(o)&&(!((a=i.axis)===null||a===void 0)&&a.isTimeSeries())?_t.bind(this)(o):o,X(r)&&r.fit&&(t==="min"&&o<n||t==="max"&&o>n)&&(o=void 0),G(o)?o:n},getXDomainPadding:function(e,t){var a=this,i=a.axis,r=a.config,n=r.axis_x_padding,o=i.isTimeSeries()&&t,s=Dt(e),c;if(i.isCategorized()||o)c=0;else if(a.hasType("bar")){var l=a.getMaxDataCount();c=l>1?s/(l-1)/2:.5}else c=a.getResettedPadding(s*.01);var u=k(n)?{left:n,right:n}:n,d=u.left,f=d===void 0?c:d,v=u.right,g=v===void 0?c:v;if(n.unit==="px"){var h=Math.abs(s+s*.2);f=i.getPadding(n,"left",c,h),g=i.getPadding(n,"right",c,h)}else{var p=s+f+g;if(o&&p){var x=s/t/p;f=f/p/x,g=g/p/x}}return{left:f,right:g}},getXDomain:function(e){var t=this,a=t.axis,i=t.config,r=t.scale.x,n=i.axis_x_inverted,o=[t.getXDomainMinMax(e,"min"),t.getXDomainMinMax(e,"max")],s=o[0],c=s===void 0?0:s,l=o[1],u=l===void 0?0:l;if(r.type!=="log"){var d=a.isCategorized(),f=a.isTimeSeries(),v=t.getXDomainPadding(o),g=o[0],h=o[1];g-h===0&&!d&&(f?(g=new Date(g.getTime()*.5),h=new Date(h.getTime()*1.5)):(g=g===0?1:g*.5,h=h===0?-1:h*1.5)),(g||g===0)&&(c=f?new Date(g.getTime()-v.left):g-v.left),(h||h===0)&&(u=f?new Date(h.getTime()+v.right):h+v.right)}return n?[u,c]:[c,u]},updateXDomain:function(e,t,a,i,r){var n,o=this,s=o.config,c=o.org,l=o.scale,u=l.x,d=l.subX,f=s.zoom_enabled;if(a&&(u.domain(r||Ht(o.getXDomain(e),!s.axis_x_inverted)),c.xDomain=u.domain(),f&&o.zoom.updateScaleExtent(),d.domain(u.domain()),(n=o.brush)===null||n===void 0||n.scale(d)),t){var v=r||!o.brush||ca(o)?c.xDomain:sa(o).map(d.invert);u.domain(v),f&&o.zoom.updateScaleExtent()}return i&&u.domain(o.trimXDomain(u.orgDomain())),u.domain()},trimXDomain:function(e){var t=this,a=t.config.axis_x_inverted,i=t.getZoomDomain(),r=i[0],n=i[1];return(a?e[0]>=r:e[0]<=r)&&(e[0]=r,e[1]=+e[1]+(r-e[0])),(a?e[1]<=n:e[1]>=n)&&(e[0]=+e[0]-(e[1]-n),e[1]=n),e},getZoomDomain:function(){var e=this,t=e.config,a=e.org,i=a.xDomain,r=i[0],n=i[1];return G(t.zoom_x_min)&&(r=mt("min",[r,t.zoom_x_min])),G(t.zoom_x_max)&&(n=mt("max",[n,t.zoom_x_max])),[r,n]},convertPixelToScale:function(e,t,a){var i=this,r=i.config,n=i.state,o=r.axis_rotated,s;return e==="x"?s=o?"height":"width":s=o?"width":"height",a*(t/n[s])}};function Fe(e,t,a){var i=e.config,r="axis_".concat(t,"_tick_format"),n=i[r]?i[r]:e.defaultValueFormat;return n.call(e.api,a)}var cr={yFormat:function(e){return Fe(this,"y",e)},y2Format:function(e){return Fe(this,"y2",e)},getDefaultValueFormat:function(){var e=this,t=e.defaultArcValueFormat,a=e.yFormat,i=e.y2Format,r=e.hasArcType(null,["gauge","polar","radar"]);return function(n,o,s){var c=r?t:e.axis&&e.axis.getId(s)==="y2"?i:a;return c.call(e,n,o)}},defaultValueFormat:function(e){return O(e)?+e:""},defaultArcValueFormat:function(e,t){return"".concat((t*100).toFixed(1),"%")},defaultPolarValueFormat:function(e){return"".concat(e)},dataLabelFormat:function(e){var t=this,a=t.config.data_labels,i=function(n){return O(n)?+n:""},r=i;return P(a.format)?r=a.format:Tt(a.format)&&(a.format[e]?r=a.format[e]===!0?i:a.format[e]:r=function(){return""}),r.bind(t.api)}};function re(e){var t=this,a=t.getDataById(e),i=t.levelColor?t.levelColor(a.values[0].value):t.color(a);return i}var lr={initLegend:function(){var e=this,t=e.config,a=e.$el;e.legendItemTextBox={},e.state.legendHasRendered=!1,t.legend_show?(t.legend_contents_bindto||(a.legend=e.$el.svg.append("g").classed(V.legend,!0).attr("transform",e.getTranslate("legend"))),e.updateLegend()):e.state.hiddenLegendIds=e.mapToIds(e.data.targets)},updateLegend:function(e,t,a){var i,r=this,n=r.config,o=r.state,s=r.scale,c=r.$el,l=t||{withTransform:!1,withTransitionForTransform:!1,withTransition:!1};l.withTransition=Lt(l,"withTransition",!0),l.withTransitionForTransform=Lt(l,"withTransitionForTransform",!0),n.legend_contents_bindto&&n.legend_contents_template?r.updateLegendTemplate():o.hasTreemap||r.updateLegendElement(e||r.mapToIds(r.data.targets),l,a),(i=c.legend)===null||i===void 0||i.selectAll(".".concat(V.legendItem)).classed(V.legendItemHidden,function(u){var d=!r.isTargetToShow(u);return d&&(this.style.opacity=null),d}),r.updateScales(!1,!s.zoom),r.updateSvgSize(),r.transformAll(l.withTransitionForTransform,a),o.legendHasRendered=!0},updateLegendTemplate:function(){var e=this,t=e.config,a=e.$el,i=L(t.legend_contents_bindto),r=t.legend_contents_template;if(!i.empty()){var n=e.mapToIds(e.data.targets),o=[],s="";n.forEach(function(l){var u=P(r)?r.bind(e.api)(l,e.color(l),e.api.data(l)[0].values):Te(r,{COLOR:e.color(l),TITLE:l});u&&(o.push(l),s+=u)});var c=i.html(s).selectAll(function(){return this.childNodes}).data(o);e.setLegendItem(c),a.legend=i}},updateSizeForLegend:function(e){var t=this,a=t.config,i=t.state,r=i.isLegendTop,n=i.isLegendLeft,o=i.isLegendRight,s=i.isLegendInset,c=i.current,l=e.width,u=e.height,d={top:r?t.getCurrentPaddingTop()+a.legend_inset_y+5.5:c.height-u-t.getCurrentPaddingBottom()-a.legend_inset_y,left:n?t.getCurrentPaddingLeft()+a.legend_inset_x+.5:c.width-l-t.getCurrentPaddingRight()-a.legend_inset_x+.5};t.state.margin3={top:o?0:s?d.top:c.height-u,right:NaN,bottom:0,left:o?c.width-l:s?d.left:0}},transformLegend:function(e){var t=this,a=t.$el.legend,i=t.$T;i(a,e).attr("transform",t.getTranslate("legend"))},updateLegendStep:function(e){this.state.legendStep=e},updateLegendItemWidth:function(e){this.state.legendItemWidth=e},updateLegendItemHeight:function(e){this.state.legendItemHeight=e},updateLegendItemColor:function(e,t){var a=this.$el.legend;a&&a.select(".".concat(V.legendItem,"-").concat(e," line")).style("stroke",t)},getLegendWidth:function(){var e=this,t=e.state,a=t.current.width,i=t.isLegendRight,r=t.isLegendInset,n=t.legendItemWidth,o=t.legendStep;return e.config.legend_show?i||r?n*(o+1):a:0},getLegendHeight:function(){var e,t=this,a=t.state,i=a.current,r=a.isLegendRight,n=a.legendItemHeight,o=a.legendStep,s=((e=t.config.padding)===null||e===void 0?void 0:e.mode)==="fit";return t.config.legend_show?r?i.height:(s?10:Math.max(20,n))*(o+1):0},opacityForUnfocusedLegend:function(e){return e.classed(V.legendItemHidden)?null:"0.3"},toggleFocusLegend:function(e,t){var a=this,i=a.$el.legend,r=a.$T,n=a.mapToTargetIds(e);i&&r(i.selectAll(".".concat(V.legendItem)).filter(function(o){return n.indexOf(o)>=0}).classed(U.legendItemFocused,t)).style("opacity",function(){return t?null:a.opacityForUnfocusedLegend.call(a,L(this))})},revertLegend:function(){var e=this,t=e.$el.legend,a=e.$T;t&&a(t.selectAll(".".concat(V.legendItem)).classed(U.legendItemFocused,!1)).style("opacity",null)},showLegend:function(e){var t=this,a=t.config,i=t.$el,r=t.$T;a.legend_show||(a.legend_show=!0,i.legend?i.legend.style("visibility",null):t.initLegend(),!t.state.legendHasRendered&&t.updateLegend()),t.removeHiddenLegendIds(e),r(i.legend.selectAll(t.selectorLegends(e)).style("visibility",null)).style("opacity",null)},hideLegend:function(e){var t=this,a=t.config,i=t.$el.legend;a.legend_show&&Ft(e)&&(a.legend_show=!1,i.style("visibility","hidden")),t.addHiddenLegendIds(e),i.selectAll(t.selectorLegends(e)).style("opacity","0").style("visibility","hidden")},getLegendItemTextBox:function(e,t){var a=this,i=a.cache,r=a.state,n,o=gt.legendItemTextBox;return e&&(n=!r.redrawing&&i.get(o)||{},n[e]||(n[e]=a.getTextRect(t,V.legendItem),i.add(o,n)),n=n[e]),n},setLegendItem:function(e){var t=this,a=t.$el,i=t.api,r=t.config,n=t.state,o=n.inputType==="touch",s=t.hasType("gauge"),c=r.boost_useCssRule;e.attr("class",function(l){var u=L(this),d=!u.empty()&&u.attr("class")||"";return d+t.generateClass(V.legendItem,l)}).style("visibility",function(l){return t.isLegendToShow(l)?null:"hidden"}),r.interaction_enabled&&(c&&[[".".concat(V.legendItem),"cursor:pointer"],[".".concat(V.legendItem," text"),"pointer-events:none"],[".".concat(V.legendItemPoint," text"),"pointer-events:none"],[".".concat(V.legendItemTile),"pointer-events:none"],[".".concat(V.legendItemEvent),"fill-opacity:0"]].forEach(function(l){var u=l[0],d=l[1];t.setCssRule(!1,u,[d])(a.legend)}),e.style("cursor",t.getStylePropValue("pointer")).on("click",function(l,u){Z(r.legend_item_onclick,i,u)||(l.altKey?(i.hide(),i.show(u)):(i.toggle(u),L(this).classed(U.legendItemFocused,!1))),o&&t.hideTooltip()}),!o&&e.on("mouseout",function(l,u){Z(r.legend_item_onout,i,u)||(L(this).classed(U.legendItemFocused,!1),s&&t.undoMarkOverlapped(t,".".concat(ft.gaugeValue)),t.api.revert())}).on("mouseover",function(l,u){Z(r.legend_item_onover,i,u)||(L(this).classed(U.legendItemFocused,!0),s&&t.markOverlapped(u,t,".".concat(ft.gaugeValue)),!n.transiting&&t.isTargetToShow(u)&&i.focus(u))}))},updateLegendElement:function(e,t){var a=this,i=a.config,r=a.state,n=a.$el.legend,o=a.$T,s=i.legend_item_tile_type,c=s!=="circle",l=i.legend_item_tile_r,u={width:c?i.legend_item_tile_width:l*2,height:c?i.legend_item_tile_height:l*2},d={padding:{top:4,right:10},max:{width:0,height:0},posMin:10,step:0,tileWidth:u.width+5,totalLength:0},f={offsets:{},widths:{},heights:{},margins:[0],steps:{}},v,g,h,p=e.filter(function(T){return!G(i.data_names[T])||i.data_names[T]!==null}),x=t.withTransition,m=a.getUpdateLegendPositions(p,d,f);r.isLegendInset&&(d.step=i.legend_inset_step?i.legend_inset_step:p.length,a.updateLegendStep(d.step)),r.isLegendRight?(v=function(T){return d.max.width*f.steps[T]},g=function(T){return f.margins[f.steps[T]]+f.offsets[T]}):r.isLegendInset?(v=function(T){return d.max.width*f.steps[T]+10},g=function(T){return f.margins[f.steps[T]]+f.offsets[T]}):(v=function(T){return f.margins[f.steps[T]]+f.offsets[T]},g=function(T){return d.max.height*f.steps[T]});var _={xText:function(T,$){return v(T,$)+4+u.width},xRect:function(T,$){return v(T,$)},x1Tile:function(T,$){return v(T,$)-2},x2Tile:function(T,$){return v(T,$)-2+u.width},yText:function(T,$){return g(T,$)+9},yRect:function(T,$){return g(T,$)-5},yTile:function(T,$){return g(T,$)+4}};a.generateLegendItem(p,u,m,_),h=n.select(".".concat(V.legendBackground," rect")),r.isLegendInset&&d.max.width>0&&h.size()===0&&(h=n.insert("g",".".concat(V.legendItem)).attr("class",V.legendBackground).append("rect"));var y=n.selectAll("text").data(p).text(function(T){return G(i.data_names[T])?i.data_names[T]:T}).each(function(T,$){m(this,T,$)});o(y,x).attr("x",_.xText).attr("y",_.yText);var b=n.selectAll("rect.".concat(V.legendItemEvent)).data(p);o(b,x).attr("width",function(T){return f.widths[T]}).attr("height",function(T){return f.heights[T]}).attr("x",_.xRect).attr("y",_.yRect),a.updateLegendItemPos(p,x,_),h&&o(h,x).attr("height",a.getLegendHeight()-12).attr("width",d.max.width*(d.step+1)+10),a.updateLegendItemWidth(d.max.width),a.updateLegendItemHeight(d.max.height),a.updateLegendStep(d.step)},getUpdateLegendPositions:function(e,t,a){var i=this,r=i.config,n=i.state,o=n.isLegendRight||n.isLegendInset;return function(s,c,l){var u=l===0,d=l===e.length-1,f=i.getLegendItemTextBox(c,s),v=f.width+t.tileWidth+(d&&!o?0:t.padding.right)+r.legend_padding,g=f.height+t.padding.top,h=o?g:v,p=o?i.getLegendHeight():i.getLegendWidth(),x,m=function(y,b){b||(x=(p-t.totalLength-h)/2,x<t.posMin&&(x=(p-h)/2,t.totalLength=0,t.step++)),a.steps[y]=t.step,a.margins[t.step]=n.isLegendInset?10:x,a.offsets[y]=t.totalLength,t.totalLength+=h};if(u&&(t.totalLength=0,t.step=0,t.max.width=0,t.max.height=0),r.legend_show&&!i.isLegendToShow(c)){a.widths[c]=0,a.heights[c]=0,a.steps[c]=0,a.offsets[c]=0;return}a.widths[c]=v,a.heights[c]=g,(!t.max.width||v>=t.max.width)&&(t.max.width=v),(!t.max.height||g>=t.max.height)&&(t.max.height=g);var _=o?t.max.height:t.max.width;r.legend_equally?(Object.keys(a.widths).forEach(function(y){return a.widths[y]=t.max.width}),Object.keys(a.heights).forEach(function(y){return a.heights[y]=t.max.height}),x=(p-_*e.length)/2,x<t.posMin?(t.totalLength=0,t.step=0,e.forEach(function(y){return m(y)})):m(c,!0)):m(c)}},generateLegendItem:function(e,t,a,i){var r=this,n=r.config,o=r.state,s=r.$el.legend,c=n.legend_usePoint,l=n.legend_item_tile_r,u=n.legend_item_tile_type,d=u!=="circle",f=o.isLegendRight||o.isLegendInset,v=-200,g=s.selectAll(".".concat(V.legendItem)).data(e).enter().append("g");if(r.setLegendItem(g),g.append("text").text(function(p){return G(n.data_names[p])?n.data_names[p]:p}).each(function(p,x){a(this,p,x)}).style("pointer-events",r.getStylePropValue("none")).attr("x",f?i.xText:v).attr("y",f?v:i.yText),g.append("rect").attr("class",V.legendItemEvent).style("fill-opacity",r.getStylePropValue("0")).attr("x",f?i.xRect:v).attr("y",f?v:i.yRect),c){var h=[];g.append(function(p){var x=J(n.point_pattern)?n.point_pattern:[n.point_type];h.indexOf(p)===-1&&h.push(p);var m=x[h.indexOf(p)%x.length];return m==="rectangle"&&(m="rect"),K.createElementNS(se.svg,"hasValidPointType"in r&&r.hasValidPointType(m)?m:"use")}).attr("class",V.legendItemPoint).style("fill",re.bind(r)).style("pointer-events",r.getStylePropValue("none")).attr("href",function(p,x,m){var _=m[x],y=_.nodeName.toLowerCase(),b=r.getTargetSelectorSuffix(p);return y==="use"?"#".concat(o.datetimeId,"-point").concat(b):void 0})}else g.append(d?"line":u).attr("class",V.legendItemTile).style("stroke",re.bind(r)).style("pointer-events",r.getStylePropValue("none")).call(function(p){u==="circle"?p.attr("r",l).style("fill",re.bind(r)).attr("cx",f?i.x2Tile:v).attr("cy",f?v:i.yTile):d&&p.attr("stroke-width",t.height).attr("x1",f?i.x1Tile:v).attr("y1",f?v:i.yTile).attr("x2",f?i.x2Tile:v).attr("y2",f?v:i.yTile)})},updateLegendItemPos:function(e,t,a){var i=this,r=i.config,n=i.$el.legend,o=i.$T,s=r.legend_usePoint,c=r.legend_item_tile_type,l=c!=="circle";if(s){var u=n.selectAll(".".concat(V.legendItemPoint)).data(e);o(u,t).each(function(){var d=this.nodeName.toLowerCase(),f=r.point_r,v="x",g="y",h=2,p=2.5,x=null,m=null,_=null;if(d==="circle"){var y=f*.2;v="cx",g="cy",x=f+y,h=f*2,p=-y}else if(d==="rect"){var y=f*2.5;m=y,_=y,p=3}L(this).attr(v,function(b){return a.x1Tile(b)+h}).attr(g,function(b){return a.yTile(b)-p}).attr("r",x).attr("width",m).attr("height",_)})}else{var u=n.selectAll(".".concat(V.legendItemTile)).data(e);o(u,t).style("stroke",re.bind(i)).call(function(f){c==="circle"?f.attr("cx",function(v){var g=a.x2Tile(v);return g-(g-a.x1Tile(v))/2}).attr("cy",a.yTile):l&&f.attr("x1",a.x1Tile).attr("y1",a.yTile).attr("x2",a.x2Tile).attr("y2",a.yTile)})}}},ur={redraw:function(e){var t,a,i;e===void 0&&(e={});var r=this,n=r.config,o=r.state,s=r.$el,c=s.main,l=s.treemap;o.redrawing=!0;var u=r.filterTargetsToShow(r.data.targets),d=e.flow,f=e.initializing,v=r.getWithOption(e),g=v.Transition?n.transition_duration:0,h=v.TransitionForExit?g:0,p=v.TransitionForAxis?g:0,x=(t=r.axis)===null||t===void 0?void 0:t.generateTransitions(p);r.updateSizes(f),v.Legend&&n.legend_show?(e.withTransition=!!g,!l&&r.updateLegend(r.mapToIds(r.data.targets),e,x)):v.Dimension&&r.updateDimension(!0),!l&&(!r.hasArcType()||o.hasRadar)&&r.updateCircleY&&(r.circleY=r.updateCircleY()),n.data_empty_label_text&&c.select("text.".concat(lt.text,".").concat(z.empty)).attr("x",o.width/2).attr("y",o.height/2).text(n.data_empty_label_text).style("display",u.length?"none":null),o.hasAxis?(r.axis.redrawAxis(u,v,x,d,f),r.hasGrid()&&r.updateGrid(),n.regions.length&&r.updateRegion(),["bar","candlestick","line","area"].forEach(function(m){var _=ut(m);(/^(line|area)$/.test(m)&&r.hasTypeOf(_)||r.hasType(m))&&r["update".concat(_)](v.TransitionForExit)}),s.text&&c.selectAll(".".concat(j.selectedCircles)).filter(r.isBarType.bind(r)).selectAll("circle").remove(),n.interaction_enabled&&!d&&v.EventRect&&(r.redrawEventRect(),(a=r.bindZoomEvent)===null||a===void 0||a.call(r))):(s.arcs&&r.redrawArc(g,h,v.Transform),s.radar&&r.redrawRadar(),s.polar&&r.redrawPolar(),l&&r.updateTreemap(h)),!o.resizing&&!l&&(r.hasPointType()||o.hasRadar)&&r.updateCircle(),r.hasDataLabel()&&!r.hasArcType(null,["radar"])&&r.updateText(),(i=r.redrawTitle)===null||i===void 0||i.call(r),f&&r.updateTypesElements(),r.generateRedrawList(u,d,g,v.Subchart),r.callPluginHook("$redraw",e,g)},generateRedrawList:function(e,t,a,i){var r=this,n=r.config,o=r.state,s=r.getDrawShape();o.hasAxis&&n.subchart_show&&r.redrawSubchart(i,a,s);var c=t&&r.generateFlow({targets:e,flow:t,duration:t.duration,shape:s,xv:r.xv.bind(r)}),l=(a||c)&&Qt(),u=r.getRedrawList(s,t,c,l),d=function(){c&&c(),o.redrawing=!1,Z(n.onrendered,r.api)};if(d)if(l&&u.length){var f=fa();Na().duration(a).each(function(){u.reduce(function(v,g){return v.concat(g)},[]).forEach(function(v){return f.add(v)})}).call(f,d)}else o.transiting||d();r.mapToIds(r.data.targets).forEach(function(v){o.withoutFadeIn[v]=!0})},getRedrawList:function(e,t,a,i){var r=this,n=r.config,o=r.state,s=o.hasAxis,c=o.hasRadar,l=o.hasTreemap,u=r.$el.grid,d=e.pos,f=d.cx,v=d.cy,g=d.xForText,h=d.yForText,p=[];return s&&((n.grid_x_lines.length||n.grid_y_lines.length)&&p.push(r.redrawGrid(i)),n.regions.length&&p.push(r.redrawRegion(i)),Object.keys(e.type).forEach(function(x){var m=ut(x),_=e.type[x];(/^(area|line)$/.test(x)&&r.hasTypeOf(m)||r.hasType(x))&&p.push(r["redraw".concat(m)](_,i))}),!t&&u.main&&p.push(r.updateGridFocus())),(!r.hasArcType()||c)&&J(n.data_labels)&&n.data_labels!==!1&&p.push(r.redrawText(g,h,t,i)),(r.hasPointType()||c)&&!n.point_focus_only&&r.redrawCircle&&p.push(r.redrawCircle(f,v,i,a)),l&&p.push(r.redrawTreemap(i)),p},updateAndRedraw:function(e){e===void 0&&(e={});var t=this,a=t.config,i=t.state,r;e.withTransition=Lt(e,"withTransition",!0),e.withTransform=Lt(e,"withTransform",!1),e.withLegend=Lt(e,"withLegend",!1),e.withUpdateXDomain=!0,e.withUpdateOrgXDomain=!0,e.withTransitionForExit=!1,e.withTransitionForTransform=Lt(e,"withTransitionForTransform",e.withTransition),e.withLegend&&a.legend_show||(i.hasAxis&&(r=t.axis.generateTransitions(e.withTransitionForAxis?a.transition_duration:0)),t.updateScales(),t.updateSvgSize(),t.transformAll(e.withTransitionForTransform,r)),t.redraw(e,r)}};function Mt(e,t,a){e===void 0&&(e="linear"),t===void 0&&(t=0),a===void 0&&(a=1);var i={linear:me,log:Ma,_log:Fa,time:Ba,utc:Xa}[e]();return i.type=e,/_?log/.test(e)&&i.clamp(!0),i.range([t,a])}var dr={getXScale:function(e,t,a,i){var r=this,n=r.scale.zoom||Mt(r.axis.getAxisType("x"),e,t);return r.getCustomizedXScale(a?n.domain(a):n,i)},getYScale:function(e,t,a,i){var r=this,n=Mt(r.axis.getAxisType(e),t,a);return i&&n.domain(i),n},getYScaleById:function(e,t){var a;t===void 0&&(t=!1);var i=((a=this.axis)===null||a===void 0?void 0:a.getId(e))==="y2",r=t?i?"subY2":"subY":i?"y2":"y";return this.scale[r]},getCustomizedXScale:function(e,t){var a=this,i=t||function(){return a.axis.x.tickOffset()},r=a.config.axis_x_inverted,n=function(s,c){var l=e(s)+i();return c?l:Math.ceil(l)};for(var o in e)n[o]=e[o];return n.orgDomain=function(){return e.domain()},n.orgScale=function(){return e},a.axis.isCategorized()&&(n.domain=function(s){var c=s;return arguments.length?(e.domain(c),n):(c=this.orgDomain(),r?[c[0]+1,c[1]]:[c[0],c[1]+1])}),n},updateScales:function(e,t){var a,i;t===void 0&&(t=!0);var r=this,n=r.axis,o=r.config,s=r.format,c=r.org,l=r.scale,u=r.state,d=u.current,f=u.width,v=u.height,g=u.width2,h=u.height2,p=u.hasAxis,x=u.hasTreemap;if(p){var m=o.axis_rotated,_=r.getResettedPadding(1),y={x:m?_:0,y:m?0:v,subX:m?1:0,subY:m?0:h},b={x:m?v:f,y:m?f:_,subX:m?v:f,subY:m?g:1},T=t&&((a=l.x)===null||a===void 0?void 0:a.orgDomain()),$=t&&c.xDomain;l.x=r.getXScale(y.x,b.x,T,function(){return n.x.tickOffset()}),l.subX=r.getXScale(y.x,b.x,$,function(R){var w;return R%1?0:((w=n.subX)!==null&&w!==void 0?w:n.x).tickOffset()}),s.xAxisTick=n.getXAxisTickFormat(),s.subXAxisTick=n.getXAxisTickFormat(!0),n.setAxis("x",l.x,o.axis_x_tick_outer,e),o.subchart_show&&n.setAxis("subX",l.subX,o.axis_x_tick_outer,e),l.y=r.getYScale("y",y.y,b.y,l.y?l.y.domain():o.axis_y_default),l.subY=r.getYScale("y",y.subY,b.subY,l.subY?l.subY.domain():o.axis_y_default),n.setAxis("y",l.y,o.axis_y_tick_outer,e),o.axis_y2_show&&(l.y2=r.getYScale("y2",y.y,b.y,l.y2?l.y2.domain():o.axis_y2_default),l.subY2=r.getYScale("y2",y.subY,b.subY,l.subY2?l.subY2.domain():o.axis_y2_default),n.setAxis("y2",l.y2,o.axis_y2_tick_outer,e))}else if(x){var A=r.getCurrentPadding();l.x=me().rangeRound([A.left,d.width-A.right]),l.y=me().rangeRound([A.top,d.height-A.bottom])}else(i=r.updateArc)===null||i===void 0||i.call(r)},xx:function(e){var t=this,a=t.config,i=t.scale,r=i.x,n=i.zoom,o=a.zoom_enabled&&n?n:r;return e?o(O(e.x)?e.x:e):null},xv:function(e){var t=this,a=t.axis,i=t.config,r=t.scale,n=r.x,o=r.zoom,s=i.zoom_enabled&&o?o:n,c=t.getBaseValue(e);return a.isTimeSeries()?c=_t.call(t,c):a.isCategorized()&&Q(c)&&(c=i.axis_x_categories.indexOf(c)),Math.ceil(s(c))},yv:function(e){var t=this,a=t.scale,i=a.y,r=a.y2,n=e.axis&&e.axis==="y2"?r:i;return Math.ceil(n(t.getBaseValue(e)))},subxx:function(e){return e?this.scale.subX(e.x):null}},fr={getDrawShape:function(){var e=this,t=e.config.axis_rotated,a=e.state,i=a.hasRadar,r=a.hasTreemap,n={type:{},indices:{},pos:{}};if(!r&&["bar","candlestick","line","area"].forEach(function(c){var l=ut(/^(bubble|scatter)$/.test(c)?"line":c);if(e.hasType(c)||e.hasTypeOf(l)||c==="line"&&(e.hasType("bubble")||e.hasType("scatter"))){var u=e.getShapeIndices(e["is".concat(l,"Type")]),d=e["generateDraw".concat(l)];n.indices[c]=u,n.type[c]=d?d.bind(e)(u,!1):void 0}}),!e.hasArcType()||i||r){var o=void 0,s=void 0;r||(o=i?e.radarCircleX:t?e.circleY:e.circleX,s=i?e.radarCircleY:t?e.circleX:e.circleY),n.pos={xForText:e.generateXYForText(n.indices,!0),yForText:e.generateXYForText(n.indices,!1),cx:(o||function(){}).bind(e),cy:(s||function(){}).bind(e)}}return n},getShapeIndices:function(e){var t=this,a=t.config,i=a.data_xs,r=J(i),n={},o=r?{}:0;return r&&ye(Object.keys(i).map(function(s){return i[s]})).forEach(function(s){o[s]=0,n[s]={}}),t.filterTargetsToShow(t.data.targets.filter(e,t)).forEach(function(s){for(var c=(s.id in i)?i[s.id]:"",l=c?n[c]:n,u=0,d=void 0;d=a.data_groups[u];u++)if(!(d.indexOf(s.id)<0)){for(var f=0,v=void 0;v=d[f];f++)if(v in l){l[s.id]=l[v];break}}nt(l[s.id])&&(l[s.id]=c?o[c]++:o++,l.__max__=(c?o[c]:o)-1)}),n},getIndices:function(e,t,a){var i=this,r=i.config,n=r.data_xs,o=r.bar_indices_removeNull,s=t.id,c=t.index;if(i.isBarType(s)&&o){var l={};return i.getAllValuesOnIndex(c,!0).forEach(function(u,d){l[u.id]=d,l.__max__=d}),l}return J(n)?e[n[s]]:e},getIndicesMax:function(e){return J(this.config.data_xs)?Object.keys(e).map(function(t){return e[t].__max__||0}).reduce(function(t,a){return t+a}):e.__max__},getShapeX:function(e,t,a){var i=this,r=i.config,n=i.scale,o=a?n.subX:n.zoom||n.x,s=r.bar_overlap,c=r.bar_padding,l=function(d,f){return d+f},u=Tt(e)&&(e._$total.length?e._$total.reduce(l)/2:0);return function(d){var f=i.getIndices(t,d,"getShapeX"),v=d.id in f?f[d.id]:0,g=(f.__max__||0)+1,h=0;if(J(d.x)){var p=o(d.x,!0);if(u){var x=e[d.id]||e._$width;h=s?p-x/2:p-x+e._$total.slice(0,v+1).reduce(l)-u}else h=p-(k(e)?e:e._$width)*(g/2-(s?1:v))}return e&&h&&g>1&&c&&(v&&(h+=c*v),g>2?h-=(g-1)*c/2:g===2&&(h-=c/2)),h}},getShapeY:function(e){var t=this,a=t.isStackNormalized();return function(i){var r=i.value;return k(i)?r=i:a?r=t.getRatio("index",i,!0):t.isBubbleZType(i)?r=t.getBubbleZData(i.value,"y"):t.isBarRangeType(i)&&(r=r[1]),t.getYScaleById(i.id,e)(r)}},getShapeYMin:function(e){var t=this,a=t.axis.getId(e),i=t.scale[a],r=i.domain()[0],n=t.config["axis_".concat(a,"_inverted")];return!t.isGrouped(e)&&!n&&r>0?r:0},getShapeOffsetData:function(e){var t=this,a=t.orderTargets(t.filterTargetsToShow(t.data.targets.filter(e,t))),i=t.isStackNormalized(),r=a.map(function(o){var s=o.values,c={};t.isStepType(o)&&(s=t.convertValuesToStep(s));var l=s.reduce(function(u,d){var f=Number(d.x);return u[f]=d,c[f]=i?t.getRatio("index",d,!0):d.value,u},{});return{id:o.id,rowValues:s,rowValueMapByXValue:l,values:c}}),n=a.reduce(function(o,s,c){var l=s.id;return o[l]=c,o},{});return{indexMapByTargetId:n,shapeOffsetTargets:r}},getShapeOffset:function(e,t,a){var i=this,r=i.getShapeOffsetData(e),n=r.shapeOffsetTargets,o=r.indexMapByTargetId,s=i.config.data_groupsZeroAs;return function(c,l){var u=c.id,d=c.value,f=c.x,v=i.getIndices(t,c),g=i.getYScaleById(u,a);if(i.isBarRangeType(c))return g(d[0]);var h=Number(f),p=g(s==="zero"?0:i.getShapeYMin(u)),x=p;return n.filter(function(m){return m.id!==u&&v[m.id]===v[u]}).forEach(function(m){var _=m.id,y=m.rowValueMapByXValue,b=m.rowValues,T=m.values;if(o[_]<o[u]){var $=T[h],A=b[l];if((!A||Number(A.x)!==h)&&(A=y[h]),A?.value*d>=0&&k($)){var R=d===0?s==="positive"&&$>0||s==="negative"&&$<0:!0;R&&(x+=g($)-p)}}}),x}},getBarW:function(e,t,a){var i=this,r=i.config,n=i.org,o=i.scale,s=i.getMaxDataCount(),c=e==="bar"&&r.data_groups.length,l="".concat(e,"_width"),u=o.zoom&&!i.axis.isCategorized()?n.xDomain.map(function(v){return o.zoom(v)}).reduce(function(v,g){return Math.abs(v)+g})/s:t.tickInterval(s),d=function(v){var g=v?r[l][v]:r[l],h=v?g.ratio:r["".concat(l,"_ratio")],p=v?g.max:r["".concat(l,"_max")],x=k(g)?g:a?u*h/a:0;return p&&x>p?p:x},f=d();return!c&&Tt(r[l])&&(f={_$width:f,_$total:[]},i.filterTargetsToShow(i.data.targets).forEach(function(v){r[l][v.id]&&(f[v.id]=d(v.id),f._$total.push(f[v.id]||f._$width))})),f},getShapeByIndex:function(e,t,a){var i=this,r=i.$el,n=O(t)?"-".concat(t):"",o=r[e];return o&&!o.empty()?o=o.filter(function(s){return a?s.id===a:!0}).filter(function(s){return O(t)?s.index===t:!0}):o=(a?r.main.selectAll(".".concat(F["".concat(e,"s")]).concat(i.getTargetSelectorSuffix(a))):r.main).selectAll(".".concat(F[e]).concat(n)),o},isWithinShape:function(e,t){var a,i=this,r=L(e),n;return i.isTargetToShow(t.id)?!((a=i.hasValidPointType)===null||a===void 0)&&a.call(i,e.nodeName)?n=i.isStepType(t)?i.isWithinStep(e,i.getYScaleById(t.id)(t.value)):i.isWithinCircle(e,i.isBubbleType(t)?i.pointSelectR(t)*1.5:0):e.nodeName==="path"&&(n=r.classed(F.bar)?i.isWithinBar(e):!0):n=!1,n},getInterpolate:function(e){var t=this,a=t.getInterpolateType(e);return{basis:Ga,"basis-closed":Va,"basis-open":Ya,bundle:Ha,cardinal:Wa,"cardinal-closed":Ua,"cardinal-open":Za,"catmull-rom":ja,"catmull-rom-closed":qa,"catmull-rom-open":Ka,"monotone-x":Ja,"monotone-y":Qa,natural:ti,"linear-closed":ei,linear:ai,step:ii,"step-after":ri,"step-before":ni}[a]},getInterpolateType:function(e){var t=this,a=t.config,i=a.spline_interpolation_type,r=t.isInterpolationType(i)?i:"cardinal";return t.isSplineType(e)?r:t.isStepType(e)?a.line_step_type:"linear"},isWithinBar:function(e){var t=ht(this.state.event,e),a=oa(e),i=a[0],r=a[1],n=Math.min(i.x,r.x),o=Math.min(i.y,r.y),s=this.config.bar_sensitivity,c=e.getBBox(),l=c.width,u=c.height,d=n-s,f=n+l+s,v=o+u+s,g=o-s,h=d<t[0]&&t[0]<f&&g<t[1]&&t[1]<v;return h}},vr={setContainerSize:function(){var e=this,t=e.state;t.current.width=e.getCurrentWidth(),t.current.height=e.getCurrentHeight()},getCurrentWidth:function(){var e=this;return e.config.size_width||e.getParentWidth()},getCurrentHeight:function(){var e=this,t=e.config,a=t.size_height||e.getParentHeight();return a>0?a:320/(e.hasType("gauge")&&!t.gauge_fullCircle?2:1)},getCurrentPaddingTop:function(){var e=this,t=e.config,a=e.state.hasAxis,i=e.$el,r=a?t.axis_y2_axes.length:0,n=O(t.padding_top)?t.padding_top:0;return i.title&&i.title.node()&&(n+=e.getTitlePadding()),r&&t.axis_rotated&&(n+=e.getHorizontalAxisHeight("y2")*r),n},getCurrentPaddingBottom:function(){var e=this,t=e.config,a=e.state.hasAxis,i=t.axis_rotated?"y":"x",r=a?t["axis_".concat(i,"_axes")].length:0,n=O(t.padding_bottom)?t.padding_bottom:0;return n+(r?e.getHorizontalAxisHeight(i)*r:0)},getCurrentPaddingLeft:function(e){var t,a=this,i=a.config,r=a.state.hasAxis,n=i.axis_rotated,o=((t=i.padding)===null||t===void 0?void 0:t.mode)==="fit",s=n?"x":"y",c=r?i["axis_".concat(s,"_axes")].length:0,l=r?a.getAxisWidthByAxisId(s,e):0;o||(l=Pe(l));var u=i["axis_".concat(s,"_inner")]||!i["axis_".concat(s,"_show")]?0:l;return O(i.padding_left)?u=i.padding_left+(o&&n?l:0):r&&n&&(u=i.axis_x_show?o?l:Math.max(l,40):1),r&&(o||i["axis_".concat(s,"_inner")])&&i["axis_".concat(s,"_label")].text&&(u+=a.axis.getAxisLabelPosition("y").isOuter?20:0),u+l*c},getCurrentPaddingRight:function(e){var t,a;e===void 0&&(e=!1);var i=this,r=i.config,n=i.state.hasAxis,o=r.axis_rotated,s=((t=r.padding)===null||t===void 0?void 0:t.mode)==="fit",c=s?2:10,l=i.state.isLegendRight?i.getLegendWidth()+20:0,u=n?r.axis_y2_axes.length:0,d=!((a=i.axis)===null||a===void 0)&&a.getAxisLabelPosition("y2").isOuter?20:0,f=e?i.axis.getXAxisTickTextY2Overflow(c):0,v=n&&!r.axis_y2_inner?i.getAxisWidthByAxisId("y2"):1;s||(v=Pe(v));var g=o?0:Math.max(v+l,f);return O(r.padding_right)?g=r.padding_right+(s&&(o||!r.axis_y2_show?c:g))+(n&&!s?1:0):i.axis&&o?g=c+l:i.axis&&(!r.axis_y2_show||r.axis_y2_inner)&&(g=Math.max((s&&!r.axis_y2_show?2:1)+l+d,f)),n&&!o&&s&&r.axis_y2_show&&!r.axis_y2_inner&&r.axis_y2_label.text&&(g+=d),g+v*u},getParentRectValue:function(e){for(var t="offset".concat(ut(e)),a=this.$el.chart.node(),i=0;i<30&&a&&a.tagName!=="BODY";){try{i=a.getBoundingClientRect()[e]}catch{t in a&&(i=a[t])}a=a.parentNode}var r=K.body[t];return i>r&&(i=r),i},getParentWidth:function(){return this.getParentRectValue("width")},getParentHeight:function(){var e=this.$el.chart.style("height"),t=0;return e&&(t=/px$/.test(e)?parseInt(e,10):this.getParentRectValue("height")),t},getSvgLeft:function(e){var t=this,a=t.config,i=t.$el,r=a.axis_rotated||!a.axis_rotated&&!a.axis_y_inner,n=a.axis_rotated?at.axisX:at.axisY,o=i.main.select(".".concat(n)).node(),s=o&&r?o.getBoundingClientRect():{right:0},c=i.chart.node().getBoundingClientRect(),l=t.hasArcType(),u=s.right-c.left-(l?0:t.getCurrentPaddingLeft(e));return u>0?u:0},updateDimension:function(e){var t,a=this,i=a.config,r=a.state.hasAxis,n=a.$el;r&&!e&&a.axis.x&&i.axis_rotated&&((t=a.axis.subX)===null||t===void 0||t.create(n.axis.subX)),a.updateScales(e),a.updateSvgSize(),a.transformAll(!1)},updateSvgSize:function(){var e=this,t=e.state,a=t.clip,i=t.current,r=t.hasAxis,n=t.width,o=t.height,s=e.$el.svg;if(s.attr("width",i.width).attr("height",i.height),r){var c=s.select(".".concat(da.brush," .overlay")),l={width:0,height:0};c.size()&&(l.width=+c.attr("width"),l.height=+c.attr("height")),s.selectAll(["#".concat(a.id),"#".concat(a.idGrid)]).select("rect").attr("width",n).attr("height",o),s.select("#".concat(a.idXAxis)).select("rect").call(e.setXAxisClipPath.bind(e)),s.select("#".concat(a.idYAxis)).select("rect").call(e.setYAxisClipPath.bind(e)),a.idSubchart&&s.select("#".concat(a.idSubchart)).select("rect").attr("width",n).attr("height",l.height)}},getCurrentPadding:function(){var e=this;return{top:e.getCurrentPaddingTop(),bottom:e.getCurrentPaddingBottom(),left:e.getCurrentPaddingLeft(),right:e.getCurrentPaddingRight()}},getResettedPadding:function(e){var t=this,a=t.config,i=k(e),r=i?0:{};return a.padding===!1?!i&&Object.keys(e).forEach(function(n){r[n]=!Ft(a.data_labels)&&a.data_labels!==!1&&n==="top"?e[n]:0}):r=e,r},updateSizes:function(e){var t,a,i,r=this,n=r.config,o=r.state,s=r.$el.legend,c=n.axis_rotated,l=r.hasArcType()||o.hasTreemap,u=((t=n.padding)===null||t===void 0?void 0:t.mode)==="fit";!e&&r.setContainerSize();var d={width:s?r.getLegendWidth():0,height:s?r.getLegendHeight():0};!l&&n.axis_x_show&&n.axis_x_tick_autorotate&&r.updateXAxisTickClip();var f=o.isLegendRight||o.isLegendInset?0:d.height,v=c||l?0:r.getHorizontalAxisHeight("x"),g=n.subchart_axis_x_show&&n.subchart_axis_x_tick_text_show?v:30,h=n.subchart_show&&!l?n.subchart_size_height+g:0,p=r.getCurrentPadding();if(o.margin=!l&&c?{top:r.getHorizontalAxisHeight("y2")+p.top,right:l?0:r.getCurrentPaddingRight(!0),bottom:r.getHorizontalAxisHeight("y")+f+p.bottom,left:h+(l?0:p.left)}:{top:(u?0:4)+p.top,right:l?0:r.getCurrentPaddingRight(!0),bottom:v+h+f+p.bottom,left:l?0:p.left},o.margin=r.getResettedPadding(o.margin),o.margin2=c?{top:o.margin.top,right:NaN,bottom:20+f,left:r.state.rotatedPadding.left}:{top:o.current.height-h-f,right:NaN,bottom:g+f,left:o.margin.left},o.margin3={top:0,right:NaN,bottom:0,left:0},(a=r.updateSizeForLegend)===null||a===void 0||a.call(r,d),o.width=o.current.width-o.margin.left-o.margin.right,o.height=o.current.height-o.margin.top-o.margin.bottom,o.width<0&&(o.width=0),o.height<0&&(o.height=0),o.width2=c?o.margin.left-o.rotatedPadding.left-o.rotatedPadding.right:o.width,o.height2=c?o.height:o.current.height-o.margin2.top-o.margin2.bottom,o.width2<0&&(o.width2=0),o.height2<0&&(o.height2=0),r.hasArcType()){var x=r.hasType("gauge"),m=n.legend_show&&o.isLegendRight;o.arcWidth=o.width-(m?d.width+10:0),o.arcHeight=o.height-(m&&!x?0:10),x&&!n.gauge_fullCircle&&(o.arcHeight+=o.height-r.getPaddingBottomForGauge()),(i=r.updateRadius)===null||i===void 0||i.call(r)}o.isLegendRight&&l&&(o.margin3.left=o.arcWidth/2+o.radiusExpanded*1.1)}},gr={setCssRule:function(e,t,a,i){var r=this,n=r.config,o=r.state,s=o.cssRule,c=o.style;return n.boost_useCssRule?function(l){l.each(function(u){var d=i&&i?.call(r,u),f="".concat(e?".".concat(it.shapes+r.getTargetSelectorSuffix(u.id)):"").concat(t);t in s&&c.sheet.deleteRule(s[f]),r.state.cssRule[f]=Ri(c,f,a.filter(Boolean).map(function(v){return Q(d)&&v.indexOf(":")===-1?"".concat(v,": ").concat(d):v||""}))})}:function(){}},getStylePropValue:function(e){var t=this.config.boost_useCssRule;return t?null:P(e)?e.bind(this):e}};function hr(e){var t="middle";return e>0&&e<=170?t="end":e>190&&e<=360&&(t="start"),t}function pr(e,t,a,i,r){var n,o=this,s=e.value,c=o.isCandlestickType(e),l=k(s)&&s<0||c&&!(!((n=o.getCandlestickData(e))===null||n===void 0)&&n._isUp),u=t.x,d=t.y,f=4,v=f*2;return i?a==="start"?(u+=l?0:v,d+=f):a==="middle"?(u+=v,d-=v):a==="end"&&(l&&(u-=v),d+=f):(a==="start"?(u+=f,l&&(d+=v*2)):a==="middle"?d-=v:a==="end"&&(u-=f,l&&(d+=v*2)),r&&(d+=l?-17:c?13:7)),{x:u,y:d}}var xr={opacityForText:function(e){var t=this;return t.isBarType(e)&&!t.meetsLabelThreshold(Math.abs(t.getRatio("bar",e)),"bar")?"0":t.hasDataLabel?null:"0"},initText:function(){var e=this.$el;e.main.select(".".concat(z.chart)).append("g").attr("class",lt.chartTexts).style("pointer-events",e.treemap?"none":null)},updateTargetsForText:function(e){var t=this,a=t.getChartClass("Text"),i=t.getClass("texts","id"),r=t.classFocus.bind(t),n=t.$el.main.select(".".concat(lt.chartTexts)).selectAll(".".concat(lt.chartText)).data(e).attr("class",function(s){return"".concat(a(s)).concat(r(s)).trim()}),o=n.enter().append("g").style("opacity","0").attr("class",a).call(t.setCssRule(!0," .".concat(lt.text),["fill","pointer-events:none"],t.updateTextColor));o.append("g").attr("class",i)},updateText:function(){var e=this,t=e.$el,a=e.$T,i=e.config,r=e.axis,n=e.getClass("text","index"),o=i.data_labels.centered,s=t.main.selectAll(".".concat(lt.texts)).selectAll(".".concat(lt.text)).data(e.labelishData.bind(e));a(s.exit()).style("fill-opacity","0").remove(),t.text=s.enter().append("text").merge(s).attr("class",n).attr("text-anchor",function(c){var l=i["axis_".concat(r?.getId(c.id),"_inverted")],u=l?c.value>0:c.value<0;if(e.isCandlestickType(c)){var d=e.getCandlestickData(c);u=!d?._isUp}else if(e.isTreemapType(c))return o?"middle":"start";return i.axis_rotated?u?"end":"start":"middle"}).style("fill",e.getStylePropValue(e.updateTextColor)).style("fill-opacity","0").each(function(c,l,u){var d=L(this),f=c.value;if(e.isBubbleZType(c))f=e.getBubbleZData(f,"z");else if(e.isCandlestickType(c)){var v=e.getCandlestickData(c);v&&(f=v.close)}f=e.isTreemapType(c)?e.treemapDataLabelFormat(c)(d):e.dataLabelFormat(c.id)(f,c.id,l,u),k(f)?this.textContent=f:Kt(d,f)})},updateTextColor:function(e){var t=this,a=t.config,i=a.data_labels_colors,r=t.isArcType(e)&&!t.isRadarType(e)||t.isTreemapType(e)?null:t.color(e),n;if(Q(i))n=i;else if(X(i)){var o=(e.data||e).id;n=i[o]}else P(i)&&(n=i.bind(t.api)(r,e));if(t.isCandlestickType(e)&&!P(i)){var s=t.getCandlestickData(e);if(!s?._isUp){var c=a.candlestick_color_down;n=X(c)?c[e.id]:c}}return n||r},updateTextBacgroundColor:function(e){var t=this,a=t.$el,i=t.config,r=i.data_labels_backgroundColors,n="";if(Q(r)||X(r)){var o=Q(r)?"":t.getTargetSelectorSuffix("id"in e?e.id:e.data.id),s=a.defs.select(["filter[id*='labels-bg","']"].join(o));s.size()&&(n="url(#".concat(s.attr("id"),")"))}return n||null},redrawText:function(e,t,a,i){var r=this,n=r.$T,o=r.axis,s=r.config,c=r.state.hasTreemap,l=Rt(!0),u=s.axis_rotated,d=s.data_labels.rotate,f=hr(d),v=d?"rotate(".concat(d,")"):"";return r.$el.text.style("fill",r.getStylePropValue(r.updateTextColor)).attr("filter",r.updateTextBacgroundColor.bind(r)).style("fill-opacity",a?0:r.opacityForText.bind(r)).each(function(g,h){var p=n(c&&this.childElementCount?this.parentNode:this,!!(i&&this.getAttribute("x")),l),x=s["axis_".concat(o?.getId(g.id),"_inverted")],m={x:e.bind(this)(g,h),y:t.bind(this)(g,h)};d&&(m=pr.bind(r)(g,m,f,u,x),p.attr("text-anchor",f)),this.childElementCount||d?p.attr("transform","translate(".concat(m.x," ").concat(m.y,") ").concat(v)):p.attr("x",m.x).attr("y",m.y)}),!0},getTextRect:function(e,t){var a=this,i=e.node?e.node():e;/text/i.test(i.tagName)||(i=i.querySelector("text"));var r=i.textContent,n="".concat(gt.textRect,"-").concat(r.replace(/\W/g,"_")),o=a.cache.get(n);return o||(a.$el.svg.append("text").style("visibility","hidden").style("font",L(i).style("font")).classed(t,!0).text(r).call(function(s){o=qt(s.node())}).remove(),a.cache.add(n,o)),o},generateXYForText:function(e,t){var a=this,i=a.state,r=i.hasRadar,n=i.hasTreemap,o=Object.keys(e),s={},c=t?a.getXForText:a.getYForText;return r&&o.push("radar"),n&&o.push("treemap"),o.forEach(function(l){s[l]=a["generateGet".concat(ut(l),"Points")](e[l],!1)}),function(l,u){var d=a.isAreaType(l)&&"area"||a.isBarType(l)&&"bar"||a.isCandlestickType(l)&&"candlestick"||a.isRadarType(l)&&"radar"||a.isTreemapType(l)&&"treemap"||"line";return c.call(a,s[d](l,u),l,this)}},getCenteredTextPos:function(e,t,a,i){var r=this,n=r.config,o=n.axis_rotated,s=r.isBarType(e),c=r.isTreemapType(e);if(n.data_labels.centered&&(s||c)){var l=qt(a);if(s){var u=e.value>=0;if(o){var d=(u?t[1][1]-t[0][1]:t[0][1]-t[1][1])/2+l.width/2;return u?-d-3:d+2}else{var f=(u?t[0][1]-t[1][1]:t[1][1]-t[0][1])/2+l.height/2;return u?f:-f-2}}else if(c)return i==="x"?(t[1][0]-t[0][0])/2:(t[1][1]-t[0][1])/2+l.height/2}return 0},getTextPos:function(e,t){var a=this.config.data_labels_position;return(e in a?a[e]:a)[t]||0},getXForText:function(e,t,a){var i,r=this,n=r.config,o=r.state,s=n.axis_rotated,c=r.isTreemapType(t),l=e[0][0];if(r.isCandlestickType(t))s?l=!((i=r.getCandlestickData(t))===null||i===void 0)&&i._isUp?e[2][2]+4:e[2][1]-4:l+=(e[1][0]-l)/2;else if(c)l+=n.data_labels.centered?0:5;else if(s){var u=n["axis_".concat(r.axis.getId(t.id),"_inverted")],d=r.isBarType(t)?4:6,f=t.value;l=e[2][1],u?l-=d*(f>0?1:-1):l+=d*(f<0?-1:1)}else l=r.hasType("bar")?(e[2][0]+e[0][0])/2:l;if(t.value===null)if(l>o.width){var v=qt(a).width;l=o.width-v}else l<0&&(l=4);return(s||c)&&(l+=r.getCenteredTextPos(t,e,a,"x")),l+r.getTextPos(t.id,"x")},getYForText:function(e,t,a){var i=this,r=i.axis,n=i.config,o=i.state,s=n.axis_rotated,c=n["axis_".concat(r?.getId(t.id),"_inverted")],l=i.isBarType(t),u=i.isTreemapType(t),d=n.point_r,f=qt(a),v=t.value,g=3,h;if(i.isCandlestickType(t))v=i.getCandlestickData(t),s?(h=e[0][0],h+=(e[1][0]-h)/2+g):(h=v&&v._isUp?e[2][2]-g:e[2][1]+g*4,c&&(h+=15*(v._isUp?1:-1)));else if(u)h=e[0][1]+(n.data_labels.centered?0:f.height+5);else if(s)h=(e[0][0]+e[2][0]+f.height*.6)/2;else if(h=e[2][1],k(d)&&d>5&&(i.isLineType(t)||i.isScatterType(t))&&(g+=n.point_r/2.3),v<0||v===0&&!o.hasPositiveValue&&o.hasNegativeValue)h+=c?l?-3:-5:f.height+(l?-g:g);else{var p=-g*2;l?p=-g:i.isBubbleType(t)&&(p=g),c&&(p=l?10:15),h+=p}if(t.value===null&&!s){var x=f.height;h<x?h=x:h>o.height&&(h=o.height-4)}return(!s||u)&&(h+=i.getCenteredTextPos(t,e,a,"y")),h+i.getTextPos(t.id,"y")},markOverlapped:function(e,t,a){var i=t.$el.arcs.selectAll(a),r=i.filter(function(c){return c.data.id!==e}),n=i.filter(function(c){return c.data.id===e}),o=ze(n.node()),s=function(c,l){return Math.sqrt(Math.pow(c,2)+Math.pow(l,2))};n.node()&&r.each(function(){var c=ze(this),l=L(this),u=s(o.e,o.f)>s(c.e,c.f)?n:l,d=Math.ceil(Math.abs(o.e-c.e))<Math.ceil(u.node().getComputedTextLength()),f=Math.ceil(Math.abs(o.f-c.f))<parseInt(n.style("font-size"),10);l.classed(lt.TextOverlapping,d&&f)})},undoMarkOverlapped:function(e,t){e.$el.arcs.selectAll(t).each(function(){Ke([this,this.previousSibling]).classed(lt.TextOverlapping,!1)})},meetsLabelThreshold:function(e,t){e===void 0&&(e=0);var a=this,i=a.config,r=i["".concat(t,"_label_threshold")]||0;return e>=r}};function Be(e,t){e===void 0&&(e="left");var a=k(t),i;return e.indexOf("center")>-1?i=a?t/2:"middle":e.indexOf("right")>-1?i=a?t:"end":i=a?0:"start",i}var mr={initTitle:function(){var e=this,t=e.config,a=e.$el;if(t.title_text){a.title=a.svg.append("g");var i=a.title.append("text").style("text-anchor",Be(t.title_position)).attr("class",lt.title);Kt(i,t.title_text,[.3,1.5])}},redrawTitle:function(){var e=this,t=e.config,a=e.state.current,i=e.$el.title;if(i){var r=e.yForTitle.call(e);/g/i.test(i.node().tagName)?i.attr("transform","translate(".concat(Be(t.title_position,a.width),", ").concat(r,")")):i.attr("x",e.xForTitle.call(e)).attr("y",r)}},xForTitle:function(){var e=this,t=e.config,a=e.state.current,i=t.title_position||"left",r=e.getTextRect(e.$el.title,lt.title).width,n;return/(right|center)/.test(i)?(n=a.width-r,i.indexOf("right")>=0?n=a.width-r-t.title_padding.right:i.indexOf("center")>=0&&(n=(a.width-r)/2)):n=t.title_padding.left||0,n},yForTitle:function(){var e=this;return(e.config.title_padding.top||0)+e.getTextRect(e.$el.title,lt.title).height},getTitlePadding:function(){var e=this;return e.yForTitle()+(e.config.title_padding.bottom||0)}},_r={initTooltip:function(){var e=this,t=e.config,a=e.$el;a.tooltip=L(t.tooltip_contents.bindto),a.tooltip.empty()&&(a.tooltip=a.chart.append("div").attr("class",oe.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none")),e.bindTooltipResizePos()},initShowTooltip:function(){var e,t,a=this,i=a.config,r=a.$el,n=a.state,o=n.hasAxis,s=n.hasRadar;if(i.tooltip_init_show){var c=!(o&&s);if(!((e=a.axis)===null||e===void 0)&&e.isTimeSeries()&&Q(i.tooltip_init_x)){var l=a.data.targets[0],u=void 0,d=void 0;for(i.tooltip_init_x=_t.call(a,i.tooltip_init_x),u=0;(d=l.values[u])&&d.x-i.tooltip_init_x!==0;u++);i.tooltip_init_x=u}var f=a.data.targets.map(function(v){var g=c?0:i.tooltip_init_x;return a.addName(v.values[g])});c&&(f=[f[i.tooltip_init_x]]),r.tooltip.html(a.getTooltipHTML(f,(t=a.axis)===null||t===void 0?void 0:t.getXAxisTickFormat(),a.getDefaultValueFormat(),a.color)),i.tooltip_contents.bindto||r.tooltip.style("top",i.tooltip_init_position.top).style("left",i.tooltip_init_position.left).style("display",null)}},getTooltipHTML:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var a=this,i=a.api,r=a.config;return P(r.tooltip_contents)?r.tooltip_contents.bind(i).apply(void 0,e):a.getTooltipContent.apply(a,e)},getTooltipContent:function(e,t,a,i){var r=this,n=r.api,o=r.config,s=r.state,c=r.$el,l=["title","name","value"].map(function(C){var E=o["tooltip_format_".concat(C)];return P(E)?E.bind(n):E}),u=l[0],d=l[1],f=l[2];u=u||t,d=d||function(C){return C},f=f||(s.hasTreemap||r.isStackNormalized()?function(C,E){return"".concat((E*100).toFixed(2),"%")}:a);var v=o.tooltip_order,g=function(C){return r.axis&&r.isBubbleZType(C)?r.getBubbleZData(C.value,"z"):r.getBaseValue(C)},h=r.levelColor?function(C){return r.levelColor(C.value)}:function(C){return i(C)},p=o.tooltip_contents,x=p.template,m=r.mapToTargetIds();if(v===null&&o.data_groups.length){var _=r.orderTargets(r.data.targets).map(function(C){return C.id}).reverse();e.sort(function(C,E){var tt=C?C.value:null,rt=E?E.value:null;return tt>0&&rt>0&&(tt=C.id?_.indexOf(C.id):null,rt=E.id?_.indexOf(E.id):null),tt-rt})}else if(/^(asc|desc)$/.test(v)){var y=v==="asc";e.sort(function(C,E){var tt=C?g(C):null,rt=E?g(E):null;return y?tt-rt:rt-tt})}else P(v)&&e.sort(v.bind(n));var b=r.getTooltipContentTemplate(x),T=e.length,$,A,R,w,I,q=function(){if(A=e[I],!A||!(g(A)||g(A)===0))return"continue";if(nt($)){var C=(s.hasAxis||s.hasRadar)&&jt(u?u(A.x):A.x);$=Te(b[0],{CLASS_TOOLTIP:oe.tooltip,TITLE:O(C)?x?C:'<tr><th colspan="2">'.concat(C,"</th></tr>"):""})}if(!A.ratio&&c.arcs&&(R=["arc",r.$el.arcs.select("path.".concat(W.arc,"-").concat(A.id)).data()[0]],A.ratio=r.getRatio.apply(r,R)),R=[A.ratio,A.id,A.index,e],w=jt(f.apply(void 0,ct([g(A)],R,!1))),r.isAreaRangeType(A)){var E=["high","low"].map(function(ie){return jt(f.apply(void 0,ct([r.getRangedData(A,ie)],R,!1)))}),tt=E[0],rt=E[1];w="<b>Mid:</b> ".concat(w," <b>High:</b> ").concat(tt," <b>Low:</b> ").concat(rt)}else if(r.isCandlestickType(A)){var B=["open","high","low","close","volume"].map(function(Aa){return jt(f.apply(void 0,ct([r.getRangedData(A,Aa,"candlestick")],R,!1)))}),vt=B[0],tt=B[1],rt=B[2],et=B[3],dt=B[4];w="<b>Open:</b> ".concat(vt," <b>High:</b> ").concat(tt," <b>Low:</b> ").concat(rt," <b>Close:</b> ").concat(et).concat(dt?" <b>Volume:</b> ".concat(dt):"")}else if(r.isBarRangeType(A)){var yt=A.value,Ot=yt[0],Nt=yt[1];w="".concat(f(Ot)," ~ ").concat(f(Nt))}if(w!==void 0){if(A.name===null)return"continue";var Y=jt(d.apply(void 0,ct([A.name],R,!1))),bt=h(A),Ct={CLASS_TOOLTIP_NAME:oe.tooltipName+r.getTargetSelectorSuffix(A.id),COLOR:x||!r.patterns?bt:'<svg><rect style="fill:'.concat(bt,'" width="10" height="10"></rect></svg>'),NAME:Y,VALUE:w};if(x&&X(p.text)){var $t=m.indexOf(A.id);Object.keys(p.text).forEach(function(ie){Ct[ie]=p.text[ie][$t]})}$+=Te(b[1],Ct)}};for(I=0;I<T;I++)q();return"".concat($,"</table>")},getTooltipContentTemplate:function(e){return(e||`<table class="{=CLASS_TOOLTIP}"><tbody>
				{=TITLE}
				{{<tr class="{=CLASS_TOOLTIP_NAME}">
					<td class="name">`.concat(this.patterns?"{=COLOR}":'<span style="background-color:{=COLOR}"></span>',`{=NAME}</td>
					<td class="value">{=VALUE}</td>
				</tr>}}
			</tbody></table>`)).replace(/(\r?\n|\t)/g,"").split(/{{(.*)}}/)},tooltipPosition:function(e,t,a,i){var r=this,n=r.config,o=r.scale,s=r.state,c=s.width,l=s.height,u=s.current,d=s.isLegendRight,f=s.inputType,v=s.event,g=r.hasType("gauge")&&!n.gauge_fullCircle,h=s.hasTreemap,p=r.getSvgLeft(!0),x=p+u.width-r.getCurrentPaddingRight(),m=r.getCurrentPaddingLeft(!0),_=20,y=ht(v,i),b=y[0],T=y[1];if(r.hasArcType()){var $=f==="touch"||r.hasType("radar");$||(T+=g?l:l/2,b+=(c-(d?r.getLegendWidth():0))/2)}else if(!h){var A=o.x(e[0].x);n.axis_rotated?(T=A+_,b+=p+100,x-=p):(T-=5,b=p+m+_+(o.zoom?b:A))}if(b+t+15>x&&(b-=t+(h?0:m)),T+a>u.height){var R=h?0:30;T-=g?a*3:a+R}var w={top:T,left:b};return Object.keys(w).forEach(function(I){w[I]<0&&(w[I]=0)}),w},showTooltip:function(e,t){var a,i,r=this,n=r.config,o=r.scale,s=r.state,c=r.$el.tooltip,l=n.tooltip_contents.bindto,u=e.filter(function(w){return w&&O(r.getBaseValue(w))});if(!(!c||u.length===0||!n.tooltip_show)){var d=c.datum(),f=d||{},v=f.width,g=v===void 0?0:v,h=f.height,p=h===void 0?0:h,x=JSON.stringify(e);if(!d||d.current!==x){var m=e.concat().sort()[0].index;Z(n.tooltip_onshow,r.api,e),c.html(r.getTooltipHTML(e,r.axis?r.axis.getXAxisTickFormat():r.categoryName.bind(r),r.getDefaultValueFormat(),r.color)).style("display",null).style("visibility",null).datum(d={index:m,current:x,width:g=c.property("offsetWidth"),height:p=c.property("offsetHeight")}),Z(n.tooltip_onshown,r.api,e),r._handleLinkedCharts(!0,m)}if(!l){var _=((a=n.tooltip_position)===null||a===void 0?void 0:a.bind(r.api))||r.tooltipPosition.bind(r),y=ht(s.event,t),b=y[0],T=y[1],$={x:b,y:T},A=(i=e.filter(Boolean))===null||i===void 0?void 0:i.shift();o.x&&A&&"x"in A&&($.xAxis=o.x(A.x));var R=_(u,g,p,t,$);["top","left"].forEach(function(w){var I=R[w];c.style(w,"".concat(I,"px")),w==="left"&&!d.xPosInPercent&&(d.xPosInPercent=I/s.current.width*100)})}}},bindTooltipResizePos:function(){var e=this,t=e.resizeFunction,a=e.state,i=e.$el.tooltip;t.add(function(){if(i.style("display")==="block"){var r=a.current,n=i.datum(),o=n.width,s=n.xPosInPercent,c=r.width/100*s,l=r.width-(c+o);l<0&&(c+=l),i.style("left","".concat(c,"px"))}})},hideTooltip:function(e){var t=this,a=t.api,i=t.config,r=t.$el.tooltip;if(r&&r.style("display")!=="none"&&(!i.tooltip_doNotHide||e)){var n=JSON.parse(r.datum().current);Z(i.tooltip_onhide,a,n),r.style("display","none").style("visibility","hidden").datum(null),Z(i.tooltip_onhidden,a,n)}},_handleLinkedCharts:function(e,t){var a=this,i=a.charts,r=a.config,n=a.state.event;if(n?.isTrusted&&r.tooltip_linked&&i.length>1){var o=r.tooltip_linked_name;i.filter(function(s){return s!==a.api}).forEach(function(s){var c=s.internal,l=c.config,u=c.$el,d=l.tooltip_linked,f=l.tooltip_linked_name,v=K.body.contains(u.chart.node());if(d&&o===f&&v){var g=u.tooltip.data()[0],h=t!==g?.index;try{s.tooltip[e&&h?"show":"hide"]({index:t})}catch{}}})}}},yr={getTranslate:function(e,t){t===void 0&&(t=0);var a=this,i=a.config,r=a.state,n=i.axis_rotated,o=0,s,c;if(t&&/^(x|y2?)$/.test(e)&&(o=a.getAxisSize(e)*t),e==="main")s=Zt(r.margin.left),c=Zt(r.margin.top);else if(e==="context")s=Zt(r.margin2.left),c=Zt(r.margin2.top);else if(e==="legend")s=r.margin3.left,c=r.margin3.top;else if(e==="x")s=n?-o:0,c=n?0:r.height+o;else if(e==="y")s=n?0:-o,c=n?r.height+o:0;else if(e==="y2")s=n?0:r.width+o,c=n&&o?1-o:0;else if(e==="subX")s=0,c=n?0:r.height2;else if(e==="arc")s=r.arcWidth/2,c=r.arcHeight/2;else if(e==="polar")s=r.arcWidth/2,c=r.arcHeight/2;else if(e==="radar"){var l=a.getRadarSize()[0];s=r.width/2-l,c=Zt(r.margin.top)}return"translate(".concat(s,", ").concat(c,")")},transformMain:function(e,t){var a=this,i=a.$el.main,r=a.$T,n=t?.axisX?t.axisX:r(i.select(".".concat(at.axisX)),e),o=t?.axisY?t.axisY:r(i.select(".".concat(at.axisY)),e),s=t?.axisY2?t.axisY2:r(i.select(".".concat(at.axisY2)),e);r(i,e).attr("transform",a.getTranslate("main")),n.attr("transform",a.getTranslate("x")),o.attr("transform",a.getTranslate("y")),s.attr("transform",a.getTranslate("y2")),i.select(".".concat(W.chartArcs)).attr("transform",a.getTranslate("arc"))},transformAll:function(e,t){var a=this,i=a.config,r=a.state,n=r.hasAxis,o=r.hasTreemap,s=a.$el;!o&&a.transformMain(e,t),n&&i.subchart_show&&a.transformContext(e,t),s.legend&&a.transformLegend(e)}},Tr={isValidChartType:function(e){return!!(e&&Object.values(S).indexOf(e)>-1)},setTargetType:function(e,t){var a=this,i=a.config,r=a.state.withoutFadeIn;a.mapToTargetIds(e).forEach(function(n){r[n]=t===i.data_types[n],i.data_types[n]=t}),e||(i.data_type=t)},updateTypesElements:function(){var e=this,t=e.state.current;Object.keys(S).forEach(function(a){var i=S[a],r=e.hasType(i,null,!0),n=t.types.indexOf(i);n===-1&&r?t.types.push(i):n>-1&&!r&&t.types.splice(n,1)}),e.setChartElements()},hasType:function(e,t,a){var i;a===void 0&&(a=!1);var r=this,n=r.config,o=r.state.current,s=n.data_types,c=t||r.data.targets,l=!1;return!a&&((i=o.types)===null||i===void 0?void 0:i.indexOf(e))>-1?l=!0:c?.length?c.forEach(function(u){var d=s[u.id];(d===e||!d&&e==="line")&&(l=!0)}):Object.keys(s).length?Object.keys(s).forEach(function(u){s[u]===e&&(l=!0)}):l=n.data_type===e,l},hasTypeOf:function(e,t,a){var i=this;return a===void 0&&(a=[]),e in St?!St[e].filter(function(r){return a.indexOf(r)===-1}).every(function(r){return!i.hasType(r,t)}):!1},isTypeOf:function(e,t){var a=Q(e)?e:e.id,i=this.config.data_types[a]||this.config.data_type;return N(t)?t.indexOf(i)>=0:i===t},hasPointType:function(){var e=this;return e.hasTypeOf("Line")||e.hasType("bubble")||e.hasType("scatter")},hasArcType:function(e,t){return this.hasTypeOf("Arc",e,t)},hasMultiArcGauge:function(){return this.hasType("gauge")&&this.config.gauge_type==="multi"},isLineType:function(e){var t=Q(e)?e:e.id;return!this.config.data_types[t]||this.isTypeOf(t,St.Line)},isStepType:function(e){return this.isTypeOf(e,St.Step)},isSplineType:function(e){return this.isTypeOf(e,St.Spline)},isAreaType:function(e){return this.isTypeOf(e,St.Area)},isAreaRangeType:function(e){return this.isTypeOf(e,St.AreaRange)},isBarType:function(e){return this.isTypeOf(e,"bar")},isBubbleType:function(e){return this.isTypeOf(e,"bubble")},isCandlestickType:function(e){return this.isTypeOf(e,"candlestick")},isScatterType:function(e){return this.isTypeOf(e,"scatter")},isTreemapType:function(e){return this.isTypeOf(e,"treemap")},isPieType:function(e){return this.isTypeOf(e,"pie")},isGaugeType:function(e){return this.isTypeOf(e,"gauge")},isDonutType:function(e){return this.isTypeOf(e,"donut")},isPolarType:function(e){return this.isTypeOf(e,"polar")},isRadarType:function(e){return this.isTypeOf(e,"radar")},isArcType:function(e){return this.isPieType(e)||this.isDonutType(e)||this.isGaugeType(e)||this.isPolarType(e)||this.isRadarType(e)},isCirclePoint:function(e){var t=this.config,a=t.point_pattern,i=!1;return e?.tagName==="circle"?i=!0:i=t.point_type==="circle"&&(!a||N(a)&&a.length===0),i},lineData:function(e){return this.isLineType(e)?[e]:[]},arcData:function(e){return this.isArcType(e.data)?[e]:[]},labelishData:function(e){return this.isBarType(e)||this.isLineType(e)||this.isScatterType(e)||this.isBubbleType(e)||this.isCandlestickType(e)||this.isRadarType(e)||this.isTreemapType(e)?e.values.filter(function(t){return k(t.value)||!!t.value}):[]},barLineBubbleData:function(e){return this.isBarType(e)||this.isLineType(e)||this.isBubbleType(e)?e.values:[]},isInterpolationType:function(e){return["basis","basis-closed","basis-open","bundle","cardinal","cardinal-closed","cardinal-open","catmull-rom","catmull-rom-closed","catmull-rom-open","linear","linear-closed","monotone-x","monotone-y","natural"].indexOf(e)>=0}},Xt=function(){function e(t){this.data={xs:{},targets:[]},this.scale={x:null,y:null,y2:null,subX:null,subY:null,subY2:null,zoom:null},this.org={xScale:null,xDomain:null},this.format={extraLineClasses:null,xAxisTick:null,dataTime:null,defaultAxisTime:null,axisTime:null};var a=this;a.api=t,a.config=new Bt,a.cache=new Vi;var i=new Pi;a.$el=i.getStore("element"),a.state=i.getStore("state"),a.$T=a.$T.bind(a)}return e.prototype.$T=function(t,a,i){var r=this,n=r.config,o=r.state,s=n.transition_duration,c=n.subchart_show,l=t;if(l){"tagName"in l&&(l=L(l));var u=(a!==!1&&s||a)&&(!o.zooming||o.dragging)&&!o.resizing&&o.rendered&&!c;l=u?l.transition(i).duration(s):l}return l},e.prototype.beforeInit=function(){var t=this;t.callPluginHook("$beforeInit"),Z(t.config.onbeforeinit,t.api)},e.prototype.afterInit=function(){var t=this;t.callPluginHook("$afterInit"),Z(t.config.onafterinit,t.api)},e.prototype.init=function(){var t=this,a=t.config,i=t.state,r=t.$el,n=a.boost_useCssRule;if(Ei(t),i.hasRadar=!i.hasAxis&&t.hasType("radar"),i.hasTreemap=!i.hasAxis&&t.hasType("treemap"),i.hasAxis=!t.hasArcType()&&!i.hasTreemap,i.datetimeId="bb-".concat(+new Date*Rt()),n){var o=K.createElement("style");o.type="text/css",K.head.appendChild(o),i.style={rootSelctor:".".concat(i.datetimeId),sheet:o.sheet},r.style=o}var s={element:a.bindto,classname:"bb"};X(a.bindto)&&(s.element=a.bindto.element||"#chart",s.classname=a.bindto.classname||s.classname),r.chart=P(s.element.node)?a.bindto.element:L(s.element||[]),r.chart.empty()&&(r.chart=L(K.body.appendChild(K.createElement("div")))),r.chart.html("").classed(s.classname,!0).classed(i.datetimeId,n).style("position","relative"),t.initParams(),t.initToRender()},e.prototype.initToRender=function(t){var a=this,i=a.config,r=a.state,n=a.$el.chart,o=function(){return n.style("display")==="none"||n.style("visibility")==="hidden"},s=i.render.lazy||o(),c=M.MutationObserver;s&&c&&i.render.observe!==!1&&!t&&new c(function(l,u){o()||(u.disconnect(),!r.rendered&&a.initToRender(!0))}).observe(n.node(),{attributes:!0,attributeFilter:["class","style"]}),(!s||t)&&a.convertData(i,function(l){a.initWithData(l),a.afterInit()})},e.prototype.initParams=function(){var t=this,a=t.config,i=t.format,r=t.state,n=a.axis_rotated;if(t.color=t.generateColor(),t.levelColor=t.generateLevelColor(),a.padding===!1&&(a.axis_x_show=!1,a.axis_y_show=!1,a.axis_y2_show=!1,a.subchart_show=!1),t.hasPointType()&&(t.point=t.generatePoint()),r.hasAxis){t.initClip(),i.extraLineClasses=t.generateExtraLineClass(),i.dataTime=a.data_xLocaltime?wa:Ra,i.axisTime=a.axis_x_localtime?Ca:Sa;var o=t.config.zoom_enabled&&t.config.zoom_type==="drag";i.defaultAxisTime=function(s){var c=t.scale,l=c.x,u=c.zoom,d=o?u:u&&l.orgDomain().toString()!==u.domain().toString(),f=s.getMilliseconds()&&".%L"||s.getSeconds()&&".:%S"||s.getMinutes()&&"%I:%M"||s.getHours()&&"%I %p"||s.getDate()!==1&&"%b %d"||d&&s.getDate()===1&&"%b'%y"||s.getMonth()&&"%-m/%-d"||"%Y";return i.axisTime(f)(s)}}r.isLegendRight=a.legend_position==="right",r.isLegendInset=a.legend_position==="inset",r.isLegendTop=a.legend_inset_anchor==="top-left"||a.legend_inset_anchor==="top-right",r.isLegendLeft=a.legend_inset_anchor==="top-left"||a.legend_inset_anchor==="bottom-left",r.rotatedPadding.top=t.getResettedPadding(r.rotatedPadding.top),r.rotatedPadding.right=n&&!a.axis_x_show?0:30,r.inputType=Li(a.interaction_inputType_mouse,a.interaction_inputType_touch)},e.prototype.initWithData=function(t){var a,i,r=this,n=r.config,o=r.scale,s=r.state,c=r.$el,l=r.org,u=s.hasAxis,d=s.hasTreemap,f=n.interaction_enabled,v=r.hasType("polar");if(u&&(r.axis=r.getAxisInstance(),n.zoom_enabled&&r.initZoom()),r.data.xs={},r.data.targets=r.convertDataToTargets(t),n.data_filter&&(r.data.targets=r.data.targets.filter(n.data_filter.bind(r.api))),n.data_hide&&r.addHiddenTargetIds(n.data_hide===!0?r.mapToIds(r.data.targets):n.data_hide),n.legend_hide&&r.addHiddenLegendIds(n.legend_hide===!0?r.mapToIds(r.data.targets):n.legend_hide),r.updateSizes(),r.updateScales(!0),u){var g=o.x,h=o.y,p=o.y2,x=o.subX,m=o.subY,_=o.subY2;g&&(g.domain(Ht(r.getXDomain(r.data.targets),!n.axis_x_inverted)),x.domain(g.domain()),l.xDomain=g.domain()),h&&(h.domain(r.getYDomain(r.data.targets,"y")),m.domain(h.domain())),p&&(p.domain(r.getYDomain(r.data.targets,"y2")),_&&_.domain(p.domain()))}if(c.svg=c.chart.append("svg").style("overflow","hidden").style("display","block"),f&&s.inputType){var y=s.inputType==="touch",b=n.onclick,T=n.onover,$=n.onout;c.svg.on("click",b?.bind(r.api)||null).on(y?"touchstart":"mouseenter",T?.bind(r.api)||null).on(y?"touchend":"mouseleave",$?.bind(r.api)||null)}n.svg_classname&&c.svg.attr("class",n.svg_classname);var A=P(n.color_tiles)&&r.patterns;(u||A||v||d||n.data_labels_backgroundColors)&&(c.defs=c.svg.append("defs"),u&&["id","idXAxis","idYAxis","idGrid"].forEach(function(I){r.appendClip(c.defs,s.clip[I])}),r.generateDataLabelBackgroundColorFilter(),A&&r.patterns.forEach(function(I){return c.defs.append(function(){return I.node})})),r.updateSvgSize(),r.bindResize();var R=c.svg.append("g").classed(z.main,!0).attr("transform",d?null:r.getTranslate("main"));if(c.main=R,n.subchart_show&&r.initSubchart(),n.tooltip_show&&r.initTooltip(),n.title_text&&r.initTitle(),!d&&n.legend_show&&r.initLegend(),n.data_empty_label_text&&R.append("text").attr("class","".concat(lt.text," ").concat(z.empty)).attr("text-anchor","middle").attr("dominant-baseline","middle"),u&&(n.regions.length&&r.initRegion(),!n.clipPath&&r.axis.init()),R.append("g").classed(z.chart,!0).attr("clip-path",u?s.clip.path:null),r.callPluginHook("$init"),u&&(f&&((a=r.initEventRect)===null||a===void 0||a.call(r)),r.initGrid(),n.clipPath&&((i=r.axis)===null||i===void 0||i.init())),r.initChartElements(),r.updateTargets(r.data.targets),r.updateDimension(),Z(n.oninit,r.api),r.setBackground(),r.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1,initializing:!0}),n.data_onmin||n.data_onmax){var w=r.getMinMaxData();Z(n.data_onmin,r.api,w.min),Z(n.data_onmax,r.api,w.max)}n.tooltip_show&&r.initShowTooltip(),s.rendered=!0},e.prototype.initChartElements=function(){var t=this,a=t.state,i=a.hasAxis,r=a.hasRadar,n=a.hasTreemap,o=[];if(i)["bar","bubble","candlestick","line"].forEach(function(c){var l=ut(c);(c==="line"&&t.hasTypeOf(l)||t.hasType(c))&&o.push(l)});else if(n)o.push("Treemap");else{var s=t.hasType("polar");r||o.push("Arc","Pie"),t.hasType("gauge")?o.push("Gauge"):r?o.push("Radar"):s&&o.push("Polar")}o.forEach(function(c){t["init".concat(c)]()}),J(t.config.data_labels)&&!t.hasArcType(null,["radar"])&&t.initText()},e.prototype.setChartElements=function(){var t=this,a=t.$el,i=a.chart,r=a.svg,n=a.defs,o=a.main,s=a.tooltip,c=a.legend,l=a.title,u=a.grid,d=a.arcs,f=a.circle,v=a.bar,g=a.candlestick,h=a.line,p=a.area,x=a.text;t.api.$={chart:i,svg:r,defs:n,main:o,tooltip:s,legend:c,title:l,grid:u,arc:d,circles:f,bar:{bars:v},candlestick:g,line:{lines:h,areas:p},text:{texts:x}}},e.prototype.setBackground=function(){var t=this,a=t.config.background,i=t.state,r=t.$el.svg;if(J(a)){var n=r.select("g").insert(a.imgUrl?"image":"rect",":first-child");a.imgUrl?n.attr("href",a.imgUrl):a.color&&n.style("fill",a.color).attr("clip-path",i.clip.path),n.attr("class",a.class||null).attr("width","100%").attr("height","100%")}},e.prototype.updateTargets=function(t){var a,i=this,r=i.state,n=r.hasAxis,o=r.hasRadar,s=r.hasTreemap,c=function(d){return i["updateTargetsFor".concat(d)](t.filter(i["is".concat(d,"Type")].bind(i)))};if(i.updateTargetsForText(t),n)["bar","candlestick","line"].forEach(function(d){var f=ut(d);(d==="line"&&i.hasTypeOf(f)||i.hasType(d))&&c(f)}),i.updateTargetsForSubchart&&i.updateTargetsForSubchart(t);else if(i.hasArcType(t)){var l="Arc";o?l="Radar":i.hasType("polar")&&(l="Polar"),c(l)}else s&&c("Treemap");var u=i.hasType("bubble")||i.hasType("scatter");u&&((a=i.updateTargetForCircle)===null||a===void 0||a.call(i)),i.filterTargetsToShowAtInit(u)},e.prototype.filterTargetsToShowAtInit=function(t){t===void 0&&(t=!1);var a=this,i=a.$el.svg,r=a.$T,n=".".concat(z.target);t&&(n+=", .".concat(st.chartCircles," > .").concat(st.circles)),r(i.selectAll(n).filter(function(o){return a.isTargetToShow(o.id)})).style("opacity",null)},e.prototype.getWithOption=function(t){var a={Dimension:!0,EventRect:!0,Legend:!1,Subchart:!0,Transform:!1,Transition:!0,TrimXDomain:!0,UpdateXAxis:"UpdateXDomain",UpdateXDomain:!1,UpdateOrgXDomain:!1,TransitionForExit:"Transition",TransitionForAxis:"Transition",Y:!0};return Object.keys(a).forEach(function(i){var r=a[i];Q(r)&&(r=a[r]),a[i]=Lt(t,"with".concat(i),r)}),a},e.prototype.initialOpacity=function(t){var a=this,i=a.state.withoutFadeIn,r=a.getBaseValue(t)!==null&&i[t.id]?null:"0";return r},e.prototype.bindResize=function(){var t=this,a=t.config,i=t.state,r=Wi(a.resize_timer),n=[];n.push(function(){return Z(a.onresize,t.api)}),a.resize_auto&&n.push(function(){i.resizing=!0,a.legend_show&&(t.updateSizes(),t.updateLegend()),t.api.flush(!1)}),n.push(function(){Z(a.onresized,t.api),i.resizing=!1}),n.forEach(function(o){return r.add(o)}),t.resizeFunction=r,M.addEventListener("resize",t.resizeFunction=r)},e.prototype.callPluginHook=function(t){for(var a=this,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];this.config.plugins.forEach(function(n){t==="$beforeInit"&&(n.$$=a,a.api.plugins.push(n)),n[t].apply(n,i)})},e}();ot(Xt.prototype,[Ki,Ji,Qi,ar,er,or,sr,tr,cr,lr,ur,dr,fr,vr,gr,xr,mr,_r,yr,Tr]);function br(e){var t=this.config,a,i,r,n=function(){var o=i.shift();if(o&&a&&Tt(a)&&o in a)return a=a[o],n();if(!o)return a};Object.keys(t).forEach(function(o){a=e,i=o.split("_"),r=n(),G(r)&&(t[o]=r)}),this.api&&(this.state.orgConfig=e)}var $r={resize:function(e){var t=this.internal,a=t.config,i=t.state;i.rendered&&(a.size_width=e?e.width:null,a.size_height=e?e.height:null,i.resizing=!0,this.flush(!1),t.resizeFunction())},flush:function(e){var t,a,i=this.internal,r=i.state,n=i.$el.zoomResetBtn;r.rendered?(r.resizing?(t=i.brush)===null||t===void 0||t.updateResize():(a=i.axis)===null||a===void 0||a.setOrient(),n?.style("display","none"),i.scale.zoom=null,e?i.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withLegend:!0}):i.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1}),!r.resizing&&i.brush&&(i.brush.getSelection().call(i.brush.move),i.unselectRect())):i.initToRender(!0)},destroy:function(){var e=this,t=this.internal,a=t.$el,i=a.chart,r=a.style,n=a.svg;if(J(t)){t.callPluginHook("$willDestroy"),t.charts.splice(t.charts.indexOf(this),1),t.unbindAllEvents(),n.select("*").interrupt(),t.resizeFunction.clear(),M.removeEventListener("resize",t.resizeFunction),i.classed("bb",!1).style("position",null).selectChildren().remove(),r&&r.parentNode.removeChild(r),Object.keys(this).forEach(function(s){s==="internal"&&Object.keys(t).forEach(function(c){t[c]=null}),e[s]=null,delete e[s]});for(var o in this)this[o]=function(){}}return null},config:function(e,t,a){var i=this.internal,r=i.config,n=i.state,o=e?.replace(/\./g,"_"),s;return e&&o in r?G(t)?(r[o]=t,s=t,a&&this.flush()):s=r[o]:(arguments.length===0||Ft(e))&&(s=n.orgConfig),s}},Ar={color:function(e){return this.internal.color(e)}},pa=function(e){var t=this.internal.data.targets;if(!nt(e)){var a=N(e)?e:[e];return t.filter(function(i){return a.some(function(r){return r===i.id})})}return t};ot(pa,{shown:function(e){return this.internal.filterTargetsToShow(this.data(e))},values:function(e,t){t===void 0&&(t=!0);var a=null;if(e){var i=this.data(e);N(i)&&(a=[],i.forEach(function(r){var n=r.values.map(function(o){return o.value});t?a=a.concat(n):a.push(n)}))}return a},names:function(e){var t=this.internal;return t.updateDataAttributes("names",e)},colors:function(e){return this.internal.updateDataAttributes("colors",e)},axes:function(e){return this.internal.updateDataAttributes("axes",e)},min:function(){return this.internal.getMinMaxData().min},max:function(){return this.internal.getMinMaxData().max}});var wr={data:pa},Rr=function(e){var t;return(t=M.btoa)===null||t===void 0?void 0:t.call(M,encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(a,i){return String.fromCharCode(Number("0x".concat(i)))}))};function Cr(e,t,a){var i=t||a,r=i.width,n=i.height,o=new XMLSerializer,s=e.cloneNode(!0),c=Ci(kt(K.styleSheets)).filter(function(v){return v.cssText}).map(function(v){return v.cssText});s.setAttribute("xmlns",se.xhtml),s.style.margin="0",s.style.padding="0",t.preserveFontStyle&&s.querySelectorAll("text").forEach(function(v){v.innerHTML=""});var l=o.serializeToString(s),u=K.createElement("style");u.appendChild(K.createTextNode(c.join(`
`)));var d=o.serializeToString(u),f='<svg xmlns="'.concat(se.svg,'" width="').concat(r,'" height="').concat(n,`" 
		viewBox="0 0 `).concat(a.width," ").concat(a.height,`" 
		preserveAspectRatio="`).concat(t?.preserveAspectRatio===!1?"none":"xMinYMid meet",`">
			<foreignObject width="100%" height="100%">
				`).concat(d,`
				`).concat(l.replace(/(url\()[^#]+/g,"$1"),`
			</foreignObject></svg>`).replace(`/
/g`,"%0A");return"data:image/svg+xml;base64,".concat(Rr(f))}function Sr(e,t){var a=t.top,i=t.left,r=e.getBBox(),n=r.x,o=r.y,s=e.getScreenCTM(),c=s.a,l=s.b,u=s.c,d=s.d,f=s.e,v=s.f,g=e.getBoundingClientRect(),h=g.width,p=g.height;return{x:c*n+u*o+f-i,y:l*n+d*o+v-a+(p-Math.round(p/4)),width:h,height:p}}function Lr(e){var t=e.getBoundingClientRect(),a=t.left,i=t.top,r=function(o){return o.textContent||o.childElementCount},n=[];return kt(e.querySelectorAll("text")).filter(r).forEach(function(o){var s=function(l){var u,d=M.getComputedStyle(l),f=d.fill,v=d.fontFamily,g=d.fontSize,h=d.textAnchor,p=d.transform,x=Sr(l,{left:a,top:i}),m=x.x,_=x.y,y=x.width,b=x.height;return u={},u[l.textContent]={x:m,y:_,width:y,height:b,fill:f,fontFamily:v,fontSize:g,textAnchor:h,transform:p},u};if(o.childElementCount>1){var c=[];return kt(o.querySelectorAll("tspan")).filter(r).forEach(function(l){n.push(s(l))}),c}else n.push(s(o))}),n}function Er(e,t){t.forEach(function(a){Object.keys(a).forEach(function(i){var r=a[i],n=r.x,o=r.y,s=r.width,c=r.height,l=r.fill,u=r.fontFamily,d=r.fontSize,f=r.transform;if(e.save(),e.font="".concat(d," ").concat(u),e.fillStyle=l,f==="none")e.fillText(i,n,o);else{var v=f.replace(/(matrix|\(|\))/g,"").split(",");v.splice(4).every(function(g){return+g==0})?(v.push(n+s-s/4),v.push(o-c+c/3)):(v.push(n),v.push(o)),e.transform.apply(e,v),e.fillText(i,0,0)}e.restore()})})}var kr={export:function(e,t){var a=this,i=this.internal,r=i.state,n=i.$el,o=n.chart,s=n.svg,c=r.current,l=c.width,u=c.height,d=Yt({width:l,height:u,preserveAspectRatio:!0,preserveFontStyle:!1,mimeType:"image/png"},e),f=Cr(o.node(),d,{width:l,height:u}),v=d.preserveFontStyle?Lr(s.node()):[];if(t&&P(t)){var g=new Image;g.crossOrigin="Anonymous",g.onload=function(){var h=K.createElement("canvas"),p=h.getContext("2d");h.width=d.width||l,h.height=d.height||u,p.drawImage(g,0,0),v.length&&(Er(p,v),v.length=0),t.bind(a)(h.toDataURL(d.mimeType))},g.src=f}return f}},Ir={focus:function(e){var t=this.internal,a=t.state,i=t.mapToTargetIds(e),r=t.$el.svg.selectAll(t.selectorTargets(i.filter(t.isTargetToShow,t)));this.revert(),this.defocus(),r.classed(U.focused,!0).classed(U.defocused,!1),t.hasArcType()&&!a.hasRadar&&(t.expandArc(i),t.hasType("gauge")&&t.markOverlapped(e,t,".".concat(ft.gaugeValue))),t.toggleFocusLegend(i,!0),a.focusedTargetIds=i,a.defocusedTargetIds=a.defocusedTargetIds.filter(function(n){return i.indexOf(n)<0})},defocus:function(e){var t=this.internal,a=t.state,i=t.mapToTargetIds(e),r=t.$el.svg.selectAll(t.selectorTargets(i.filter(t.isTargetToShow,t)));r.classed(U.focused,!1).classed(U.defocused,!0),t.hasArcType(null,["polar"])&&(t.unexpandArc(i),t.hasType("gauge")&&t.undoMarkOverlapped(t,".".concat(ft.gaugeValue))),t.toggleFocusLegend(i,!1),a.focusedTargetIds=a.focusedTargetIds.filter(function(n){return i.indexOf(n)<0}),a.defocusedTargetIds=i},revert:function(e){var t=this.internal,a=t.config,i=t.state,r=t.$el,n=t.mapToTargetIds(e),o=r.svg.selectAll(t.selectorTargets(n));o.classed(U.focused,!1).classed(U.defocused,!1),t.hasArcType(null,["polar"])&&t.unexpandArc(n),a.legend_show&&(t.showLegend(n.filter(t.isLegendToShow.bind(t))),r.legend.selectAll(t.selectorLegends(n)).filter(function(){return L(this).classed(U.legendItemFocused)}).classed(U.legendItemFocused,!1)),i.focusedTargetIds=[],i.defocusedTargetIds=[]}},Or={show:function(e){var t=this.internal;t.showLegend(t.mapToTargetIds(e)),t.updateAndRedraw({withLegend:!0})},hide:function(e){var t=this.internal;t.hideLegend(t.mapToTargetIds(e)),t.updateAndRedraw({withLegend:!0})}},Pr={legend:Or},zr={load:function(e){var t=this.internal,a=t.config;e.xs&&t.addXs(e.xs),"names"in e&&this.data.names(e.names),"classes"in e&&Object.keys(e.classes).forEach(function(i){a.data_classes[i]=e.classes[i]}),"categories"in e&&t.axis.isCategorized()&&(a.axis_x_categories=e.categories),"axes"in e&&Object.keys(e.axes).forEach(function(i){a.data_axes[i]=e.axes[i]}),"colors"in e&&Object.keys(e.colors).forEach(function(i){a.data_colors[i]=e.colors[i]}),"unload"in e&&e.unload!==!1?t.unload(t.mapToTargetIds(e.unload===!0?null:e.unload),function(){ra(function(){return t.loadFromArgs(e)})}):(t.api.tooltip.hide(),t.loadFromArgs(e))},unload:function(e){var t=this.internal,a=e||{};N(a)?a={ids:a}:Q(a)&&(a={ids:[a]});var i=t.mapToTargetIds(a.ids);t.unload(i,function(){t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),t.cache.remove(i),ha.call(t,a.done,a.resizeAfter)})}};function Xe(e,t,a){var i=this,r=this.internal,n=r.mapToTargetIds(t),o=r.state.hiddenTargetIds.map(function(l){return n.indexOf(l)>-1&&l}).filter(Boolean);r.state.toggling=!0,r["".concat(e?"remove":"add","HiddenTargetIds")](n);var s=r.$el.svg.selectAll(r.selectorTargets(n)),c=e?null:"0";e&&o.length&&(s.style("display",null),Z(r.config.data_onshown,this,o)),r.$T(s).style("opacity",c,"important").call(Re,function(){!e&&o.length===0&&(s.style("display","none"),Z(r.config.data_onhidden,i,n)),s.style("opacity",c)}),a.withLegend&&r["".concat(e?"show":"hide","Legend")](n),r.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),r.state.toggling=!1}var Dr={show:function(e,t){t===void 0&&(t={}),Xe.call(this,!0,e,t)},hide:function(e,t){t===void 0&&(t={}),Xe.call(this,!1,e,t)},toggle:function(e,t){var a=this;t===void 0&&(t={});var i=this.internal,r={show:[],hide:[]};i.mapToTargetIds(e).forEach(function(n){return r[i.isTargetToShow(n)?"hide":"show"].push(n)}),r.show.length&&this.show(r.show,t),r.hide.length&&setTimeout(function(){return a.hide(r.hide,t)},0)}},Mr={show:function(e){var t=this.internal,a=t.$el,i=t.config,r=t.state,n=r.eventReceiver,o=r.hasTreemap,s=r.inputType,c,l;if(e.mouse&&(l=e.mouse),e.data){var u=e.data,d=t.getYScaleById(u.id)(u.value);o&&u.id?n.rect=a.main.select("".concat(t.selectorTarget(u.id,void 0,"rect"))):t.isMultipleX()?l=[t.xx(u),d]:(i.tooltip_grouped||(l=[0,d]),c=O(u.index)?u.index:t.getIndexByX(u.x))}else G(e.x)?c=t.getIndexByX(e.x):G(e.index)&&(c=e.index);(s==="mouse"?["mouseover","mousemove"]:["touchstart"]).forEach(function(f){t.dispatchEvent(f,c,l)})},hide:function(){var e,t,a,i=this.internal,r=i.state.inputType,n=i.$el.tooltip,o=n?.datum();if(o){var s=JSON.parse(o.current)[0].index;(r==="mouse"?["mouseout"]:["touchend"]).forEach(function(c){i.dispatchEvent(c,s)})}r==="touch"&&i.callOverOutForTouch(),i.hideTooltip(!0),(e=i.hideGridFocus)===null||e===void 0||e.call(i),(t=i.unexpandCircles)===null||t===void 0||t.call(i),(a=i.expandBarTypeShapes)===null||a===void 0||a.call(i,!1)}},Fr={tooltip:Mr},Wt=function(){function e(t){this.plugins=[];var a=new Xt(this);this.internal=a,function i(r,n,o){Object.keys(r).forEach(function(s){var c=P(r[s]),l=n!==o,u=J(r[s]),d=u&&Object.keys(r[s]).length>0;c&&(!l&&d||l)?n[s]=r[s].bind(o):u&&!c?n[s]={}:n[s]=r[s],d&&i(r[s],n[s],o)})}(e.prototype,this,this),br.call(a,t),a.beforeInit(),a.init()}return e}();ot(Wt.prototype,[$r,Ar,wr,kr,Ir,Pr,zr,Dr,Fr]);function Ne(e,t,a){var i=e.config,r=function(n,o){var s=k(o)?o:o===!1?void 0:null;s!==null&&(i["axis_".concat(n,"_").concat(t)]=s)};G(a)&&(Tt(a)?Object.keys(a).forEach(function(n){r(n,a[n])}):(k(a)||a===!1)&&["y","y2"].forEach(function(n){r(n,a)}),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))}function Ge(e,t){var a=e.config;return{x:a["axis_x_".concat(t)],y:a["axis_y_".concat(t)],y2:a["axis_y2_".concat(t)]}}var Br={labels:function(e){var t=this.internal,a;return e&&(Object.keys(e).forEach(function(i){t.axis.setLabelText(i,e[i])}),t.axis.updateLabels()),["x","y","y2"].forEach(function(i){var r=t.axis.getLabelText(i);r&&(!a&&(a={}),a[i]=r)}),a},min:function(e){var t=this.internal;return O(e)||e===!1?Ne(t,"min",e):Ge(t,"min")},max:function(e){var t=this.internal;return O(e)||e===!1?Ne(t,"max",e):Ge(t,"max")},range:function(e){var t=this.axis;if(arguments.length){var a=e.min,i=e.max;G(i)&&t.max(i),G(a)&&t.min(a)}else return{max:t.max(),min:t.min()}}},Xr={axis:Br},Nr={category:function(e,t){var a=this.internal,i=a.config;return arguments.length>1&&(i.axis_x_categories[e]=t,a.redraw()),i.axis_x_categories[e]},categories:function(e){var t=this.internal,a=t.config;return arguments.length&&(a.axis_x_categories=e,t.redraw()),a.axis_x_categories}};function Se(e,t){var a=this.internal,i=a.config,r=i.transition_duration&&Qt(),n="grid_".concat(t,"_lines");return e&&(i[n]=e,a.updateGrid(),a.redrawGrid(r)),i[n]}function xa(e,t){var a="grid_".concat(t,"_lines");return Se.bind(this)(this.internal.config[a].concat(e||[]),t)}function ma(e,t){this.internal.removeGridLines(e,t)}var _a=function(e){return Se.bind(this)(e,"x")};ot(_a,{add:function(e){return xa.bind(this)(e,"x")},remove:function(e){return ma.bind(this)(e,!0)}});var ya=function(e){return Se.bind(this)(e,"y")};ot(ya,{add:function(e){return xa.bind(this)(e,"y")},remove:function(e){return ma.bind(this)(e,!1)}});var Gr={xgrids:_a,ygrids:ya},Vr={groups:function(e){var t=this.internal,a=t.config;return nt(e)||(a.data_groups=e,t.redraw()),a.data_groups}};function Ta(e,t){t===void 0&&(t=!1);var a=this.internal,i=a.config,r=i.transition_duration&&Qt();return e?(i.regions=t?i.regions.concat(e):e,a.updateRegion(),a.redrawRegion(r),t?i.regions:e):i.regions}var ba=function(e){return Ta.bind(this)(e)};ot(ba,{add:function(e){return Ta.bind(this)(e,!0)},remove:function(e){var t=this.internal,a=t.config,i=t.$T,r=e||{},n=Lt(r,"classes",[Jt.region]),o=t.$el.main.select(".".concat(Jt.regions)).selectAll(n.map(function(s){return".".concat(s)}));return i(o).style("opacity","0").remove(),o=a.regions,Object.keys(r).length?(o=o.filter(function(s){var c=!1;return s.class?(s.class.split(" ").forEach(function(l){n.indexOf(l)>=0&&(c=!0)}),!c):!0}),a.regions=o):a.regions=[],o}});var Yr={regions:ba},Hr={x:function(e){var t=this.internal,a=t.axis,i=t.data,r=a.isCustomX()&&a.isCategorized();return N(e)&&(r?this.categories(e):(t.updateTargetX(i.targets,e),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))),r?this.categories():i.xs},xs:function(e){var t=this.internal;return X(e)&&(t.updateTargetXs(t.data.targets,e),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs}},Wr={flow:function(e){var t=this.internal,a;(e.json||e.rows||e.columns)&&t.convertData(e,function(r){a=r,i()});function i(){var r,n=0,o=0,s,c;if(!(t.state.redrawing||!a||!Qt())){var l=[],u=t.getMaxDataCount(),d=t.convertDataToTargets(a,!0),f=t.axis.isTimeSeries();t.data.targets.forEach(function(h){for(var p=!1,x=0;x<d.length;x++)if(h.id===d[x].id){p=!0,h.values[h.values.length-1]&&(o=h.values[h.values.length-1].index+1),n=d[x].values.length;for(var m=0;m<n;m++)d[x].values[m].index=o+m,f||(d[x].values[m].x=o+m);h.values=h.values.concat(d[x].values),d.splice(x,1);break}!p&&l.push(h.id)}),t.data.targets.forEach(function(h){for(var p=0;p<l.length;p++)if(h.id===l[p]){o=h.values[h.values.length-1].index+1;for(var x=0;x<n;x++)h.values.push({id:h.id,index:o+x,x:f?t.getOtherTargetX(o+x):o+x,value:null})}}),t.data.targets.length&&d.forEach(function(h){for(var p=[],x=t.data.targets[0].values[0].index;x<o;x++)p.push({id:h.id,index:x,x:f?t.getOtherTargetX(x):x,value:null});h.values.forEach(function(m){m.index+=o,f||(m.x+=o)}),h.values=p.concat(h.values)}),t.data.targets=t.data.targets.concat(d);var v=t.data.targets[0],g=v.values[0];G(e.to)?(n=0,c=f?_t.call(t,e.to):e.to,v.values.forEach(function(h){h.x<c&&n++})):G(e.length)&&(n=e.length),u?u===1&&f&&(s=(v.values[v.values.length-1].x-g.x)/2,r=[new Date(+g.x-s),new Date(+g.x+s)]):(f?s=v.values.length>1?v.values[v.values.length-1].x-g.x:g.x-t.getXDomain(t.data.targets)[0]:s=1,r=[g.x-s,g.x]),r&&t.updateXDomain(null,!0,!0,!1,r),t.updateTargets(t.data.targets),t.redraw({flow:{index:g.index,length:n,duration:O(e.duration)?e.duration:t.config.transition_duration,done:e.done,orgDataCount:u},withLegend:!0,withTransition:u>1,withTrimXDomain:!1,withUpdateXAxis:!0})}}}},Ve=function(){function e(t){var a=Mt(),i=t.config,r=t.params;this.owner=t,this.config=i,this.scale=a,(i.noTransition||!r.config.transition_duration)&&(i.withoutTransition=!0),i.range=this.scaleExtent((r.orgXScale||a).range())}return e.getSizeFor1Char=function(t){var a={w:5.5,h:11.5};return!t.empty()&&t.select("text").text("0").call(function(i){try{var r=i.node().getBBox(),n=r.width,o=r.height;n&&o&&(a.w=n,a.h=o)}catch{}finally{i.text("")}}),this.getSizeFor1Char=function(){return a},a},e.prototype.getTickTransformSetter=function(t){var a=this.config,i=t==="x"?function(r){return"translate(".concat(r+a.tickOffset,",0)")}:function(r){return"translate(0,".concat(r,")")};return function(r,n){r.attr("transform",function(o){return O(o)?i(Math.ceil(n(o))):null})}},e.prototype.scaleExtent=function(t){var a=t[0],i=t[t.length-1];return a<i?[a,i]:[i,a]},e.prototype.generateTicks=function(t,a){var i=this.owner.params.tickStepSize,r=t.domain(),n=r[0],o=r[1],s=[];if(a&&i)for(var c=Math.round(n);c<=o;)s.push(c),c+=i;else if(t.ticks){var l=this.config.tickArguments;if(t.type==="log"&&!l){var u=Mt("_log").domain([n>0?n:1,o]).range(t.range());s=u.ticks();for(var d=o.toFixed().length;s.length>15;d--)s=u.ticks(d);s.splice(0,1,n),s.splice(s.length-1,1,o)}else s=t.ticks.apply(t,this.config.tickArguments||[]);s=s.map(function(v){var g=Q(v)&&k(v)&&!isNaN(v)&&Math.round(v*10)/10||v;return g})}else{for(var f=Math.ceil(n);f<o;f++)s.push(f);s.length>0&&s[0]>0&&s.unshift(s[0]-(s[1]-s[0]))}return s},e.prototype.copyScale=function(){var t=this.scale.copy();return t.domain().length||t.domain(this.scale.domain()),t.type=this.scale.type,t},e.prototype.textFormatted=function(t){var a=this.config.tickFormat,i=/\d+\.\d+0{5,}\d$/.test(t)?+String(t).replace(/0+\d$/,""):t,r=a?a(i):i;return G(r)?r:""},e.prototype.transitionise=function(t){var a=this.config,i=t;if(a.withoutTransition)i=t.interrupt();else if(a.transition||!this.owner.params.noTransition)try{i=t.transition(a.transition)}catch{}return i},e}(),Ur=function(){function e(t){t===void 0&&(t={});var a={innerTickSize:6,outerTickSize:t.outerTick?6:0,orient:"bottom",range:[],tickArguments:null,tickCentered:null,tickCulling:!0,tickFormat:null,tickLength:9,tickOffset:0,tickPadding:3,tickValues:null,transition:null,noTransition:t.noTransition};a.tickLength=Math.max(a.innerTickSize,0)+a.tickPadding,this.config=a,this.params=t,this.helper=new Ve(this)}return e.prototype.create=function(t){var a=this,i=a.config,r=a.helper,n=a.params,o=r.scale,s=i.orient,c=this.splitTickText.bind(a),l=/^(left|right)$/.test(s),u=/^(top|bottom)$/.test(s),d=r.getTickTransformSetter(u?"x":"y"),f=d===r.axisX?"y":"x",v=/^(top|left)$/.test(s)?-1:1,g=n.tickTextRotate;this.config.range=o.rangeExtent?o.rangeExtent():r.scaleExtent((n.orgXScale||o).range());var h=i.innerTickSize,p=i.tickLength,x=i.range,m=n.id,_=m&&/^(x|y|y2)$/.test(m)?n.config["axis_".concat(m,"_tick_text_position")]:{x:0,y:0},y=m==="subX"?"subchart_axis_x":"axis_".concat(m),b=n.config["".concat(y,"_show")],T={tick:b?n.config["".concat(y,"_tick_show")]:!1,text:b?n.config["".concat(y,"_tick_text_show")]:!1},$;t.each(function(){var A=L(this),R=this.__chart__||o,w=r.copyScale();$=A,this.__chart__=w,i.tickOffset=n.isCategory?Math.ceil((w(1)-w(0))/2):0;var I=A.selectAll(".domain").data([0]);if(I.enter().append("path").attr("class","domain").merge(I).attr("d",function(){var Y=i.outerTickSize*v;return u?"M".concat(x[0],",").concat(Y,"V0H").concat(x[1],"V").concat(Y):"M".concat(Y,",").concat(x[0],"H0V").concat(x[1],"H").concat(Y)}),T.tick||T.text){var q=i.tickValues||r.generateTicks(w,l);a.generatedTicks=q;var C=A.selectAll(".tick").data(q,w),E=C.enter().insert("g",".domain").attr("class","tick"),tt=C.exit().remove();C=E.merge(C),T.tick&&E.append("line"),T.text&&E.append("text");var rt=Ve.getSizeFor1Char(C),B=[],vt=C.select("text").selectAll("tspan").data(function(Y,bt){var Ct=n.tickMultiline?c(Y,w,q,l,rt.w):N(r.textFormatted(Y))?r.textFormatted(Y).concat():[r.textFormatted(Y)];return B[bt]=Ct.length,Ct.map(function($t){return{index:bt,splitted:$t}})});vt.exit().remove(),vt=vt.enter().append("tspan").merge(vt).text(function(Y){return Y.splitted}),vt.attr("x",u?0:p*v).attr("dx",function(){var Y=0;return/(top|bottom)/.test(s)&&g&&(Y=8*Math.sin(Math.PI*(g/180))*(s==="top"?-1:1)),Y+(_.x||0)}()).attr("dy",function(Y,bt){var Ct=".71em",$t=0;return s!=="top"&&($t=rt.h,bt===0&&($t=l?-((B[Y.index]-1)*(rt.h/2)-3):_.y===0?Ct:0)),k($t)&&_.y?$t+_.y:$t||Ct});var et=C.select("line"),dt=C.select("text");if(E.select("line").attr("".concat(f,"2"),h*v),E.select("text").attr(f,p*v),a.setTickLineTextPosition(et,dt),n.tickTitle){var yt=dt.select("title");(yt.empty()?dt.append("title"):yt).text(function(Y){return n.tickTitle[Y]})}if(w.bandwidth){var Ot=w,Nt=Ot.bandwidth()/2;R=function(Y){return Ot(Y)+Nt},w=R}else R.bandwidth?R=w:d(tt,w);C=n.owner.state.flowing?r.transitionise(C):n.owner.$T(C),d(E,R),d(C.style("opacity",null),w)}}),this.g=$},e.prototype.getGeneratedTicks=function(t){var a,i=((a=this.generatedTicks)===null||a===void 0?void 0:a.length)-1,r=this.generatedTicks;if(i>t){var n=Math.round(i/t+.1);r=this.generatedTicks.map(function(o,s){return s%n===0?o:null}).filter(function(o){return o!==null}).splice(0,t)}return r},e.prototype.getTickXY=function(){var t=this.config,a={x:0,y:0};return this.params.isCategory&&(a.x=t.tickCentered?0:t.tickOffset,a.y=t.tickCentered?t.tickOffset:0),a},e.prototype.getTickSize=function(t){var a=this.helper.scale,i=this.config,r=i.innerTickSize,n=i.range,o=a(t)+(i.tickCentered?0:i.tickOffset);return n[0]<o&&o<n[1]?r:0},e.prototype.setTickLineTextPosition=function(t,a){var i=this.getTickXY(),r=this.config,n=r.innerTickSize,o=r.orient,s=r.tickLength,c=r.tickOffset,l=this.params.tickTextRotate,u=function(v){var g=["start","end"];return o==="top"&&g.reverse(),v?g[v>0?0:1]:"middle"},d=function(v){return v?"rotate(".concat(v,")"):null},f=function(v){var g=v/(o==="bottom"?15:23);return v?11.5-2.5*g*(v>0?1:-1):s};switch(o){case"bottom":t.attr("x1",i.x).attr("x2",i.x).attr("y2",this.getTickSize.bind(this)),a.attr("x",0).attr("y",f(l)).style("text-anchor",u(l)).attr("transform",d(l));break;case"top":t.attr("x2",0).attr("y2",-n),a.attr("x",0).attr("y",-f(l)*2).style("text-anchor",u(l)).attr("transform",d(l));break;case"left":t.attr("x2",-n).attr("y1",i.y).attr("y2",i.y),a.attr("x",-s).attr("y",c).style("text-anchor","end");break;case"right":t.attr("x2",n).attr("y2",0),a.attr("x",s).attr("y",0).style("text-anchor","start")}},e.prototype.splitTickText=function(t,a,i,r,n){var o=this.params,s=this.helper.textFormatted(t),c=Q(s)&&s.indexOf(`
`)>-1?s.split(`
`):[];if(c.length)return c;if(N(s))return s;var l=o.tickWidth;(!l||l<=0)&&(l=r?95:o.isCategory?Math.ceil(o.isInverted?a(i[0])-a(i[1]):a(i[1])-a(i[0]))-12:110);function u(d,f){for(var v,g,h,p=1;p<f.length;p++)if(f.charAt(p)===" "&&(g=p),v=f.substr(0,p+1),h=n*v.length,l<h)return u(d.concat(f.substr(0,g||p)),f.slice(g?g+1:p));return d.concat(f)}return u(c,String(s))},e.prototype.scale=function(t){return arguments.length?(this.helper.scale=t,this):this.helper.scale},e.prototype.orient=function(t){return arguments.length?(this.config.orient=t in{top:1,right:1,bottom:1,left:1}?String(t):"bottom",this):this.config.orient},e.prototype.tickFormat=function(t){var a=this.config;return arguments.length?(a.tickFormat=t,this):a.tickFormat},e.prototype.tickCentered=function(t){var a=this.config;return arguments.length?(a.tickCentered=t,this):a.tickCentered},e.prototype.tickOffset=function(){return this.config.tickOffset},e.prototype.tickInterval=function(t){var a=this,i=this.config,r=i.outerTickSize,n=i.tickOffset,o=i.tickValues,s;if(this.params.isCategory)s=n*2;else{var c=this.g.select("path.domain").node().getTotalLength()-r*2;s=c/(t||this.g.selectAll("line").size());var l=o?o.map(function(u,d,f){var v=d+1;return v<f.length?a.helper.scale(f[v])-a.helper.scale(u):null}).filter(Boolean):[];s=Math.min.apply(Math,ct(ct([],l,!1),[s],!1))}return s===1/0?0:s},e.prototype.ticks=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var i=this.config;return t.length?(i.tickArguments=kt(t),this):i.tickArguments},e.prototype.tickCulling=function(t){var a=this.config;return arguments.length?(a.tickCulling=t,this):a.tickCulling},e.prototype.tickValues=function(t){var a=this,i=this.config;if(P(t))i.tickValues=function(){return t(a.helper.scale.domain())};else{if(!arguments.length)return i.tickValues;i.tickValues=t}return this},e.prototype.setTransition=function(t){return this.config.transition=t,this},e}(),Zr={getAxisInstance:function(){return this.axis||new jr(this)}},jr=function(){function e(t){this.axesList={},this.tick={x:null,y:null,y2:null},this.xs=[],this.orient={x:"bottom",y:"left",y2:"right",subX:"bottom"},this.owner=t,this.setOrient()}return e.prototype.getAxisClassName=function(t){return"".concat(at.axis," ").concat(at["axis".concat(ut(t))])},e.prototype.isHorizontal=function(t,a){var i=t.config.axis_rotated;return a?i:!i},e.prototype.isCategorized=function(){var t=this.owner,a=t.config,i=t.state;return a.axis_x_type.indexOf("category")>=0||i.hasRadar},e.prototype.isCustomX=function(){var t=this.owner.config;return!this.isTimeSeries()&&(t.data_x||J(t.data_xs))},e.prototype.isTimeSeries=function(t){return t===void 0&&(t="x"),this.owner.config["axis_".concat(t,"_type")]==="timeseries"},e.prototype.isLog=function(t){return t===void 0&&(t="x"),this.owner.config["axis_".concat(t,"_type")]==="log"},e.prototype.isTimeSeriesY=function(){return this.isTimeSeries("y")},e.prototype.getAxisType=function(t){t===void 0&&(t="x");var a="linear";return this.isTimeSeries(t)?a=this.owner.config.axis_x_localtime?"time":"utc":this.isLog(t)&&(a="log"),a},e.prototype.init=function(){var t=this,a=this.owner,i=a.config,r=a.$el,n=r.main,o=r.axis,s=a.state.clip,c=i.axis_rotated,l=["x","y"];i.axis_y2_show&&l.push("y2"),l.forEach(function(u){var d=t.getAxisClassName(u),f=at["axis".concat(u.toUpperCase(),"Label")];o[u]=n.append("g").attr("class",d).attr("clip-path",function(){var v=null;return u==="x"?v=s.pathXAxis:u==="y"&&(v=s.pathYAxis),v}).attr("transform",a.getTranslate(u)).style("visibility",i["axis_".concat(u,"_show")]?null:"hidden"),o[u].append("text").attr("class",f).attr("transform",["rotate(-90)",null][u==="x"?+!c:+c]).style("text-anchor",function(){return t.textAnchorForAxisLabel(u)}),t.generateAxes(u)})},e.prototype.setOrient=function(){var t=this.owner,a=t.config,i=a.axis_rotated,r=a.axis_y_inner,n=a.axis_y2_inner;this.orient={x:i?"left":"bottom",y:i?r?"top":"bottom":r?"right":"left",y2:i?n?"bottom":"top":n?"left":"right",subX:i?"left":"bottom"}},e.prototype.generateAxes=function(t){var a=this.owner,i=a.config,r=[],n=i["axis_".concat(t,"_axes")],o=i.axis_rotated,s;t==="x"?s=o?ke:Ie:t==="y"?s=o?Ie:ke:t==="y2"&&(s=o?li:ui),n.length&&n.forEach(function(c){var l=c.tick||{},u=a.scale[t].copy();c.domain&&u.domain(c.domain),r.push(s(u).ticks(l.count).tickFormat(P(l.format)?l.format.bind(a.api):function(d){return d}).tickValues(l.values).tickSizeOuter(l.outer===!1?0:6))}),this.axesList[t]=r},e.prototype.updateAxes=function(){var t=this,a=this.owner,i=a.config,r=a.$el.main,n=a.$T;Object.keys(this.axesList).forEach(function(o){var s=i["axis_".concat(o,"_axes")],c=a.scale[o].copy(),l=c.range();t.axesList[o].forEach(function(u,d){var f=u.scale().range();l.every(function(h,p){return h===f[p]})||u.scale().range(l);var v="".concat(t.getAxisClassName(o),"-").concat(d+1),g=r.select(".".concat(v.replace(/\s/,".")));g.empty()?g=r.append("g").attr("class",v).style("visibility",i["axis_".concat(o,"_show")]?null:"hidden").call(u):(s[d].domain&&c.domain(s[d].domain),n(g).call(u.scale(c))),g.attr("transform",a.getTranslate(o,d+1))})})},e.prototype.setAxis=function(t,a,i,r){var n=this.owner;t!=="subX"&&(this.tick[t]=this.getTickValues(t)),this[t]=this.getAxis(t,a,i,t==="x"&&(n.scale.zoom||n.config.subchart_show||n.state.resizing)?!0:r)},e.prototype.getAxis=function(t,a,i,r,n){var o=this.owner,s=o.config,c=/^(x|subX)$/.test(t),l=c?"x":t,u=c&&this.isCategorized(),d=this.orient[t],f=n?0:o.getAxisTickRotate(l),v;if(c)v=t==="subX"?o.format.subXAxisTick:o.format.xAxisTick;else{var g=s["axis_".concat(t,"_tick_format")];P(g)&&(v=g.bind(o.api))}var h=this.tick[l],p=Yt({outerTick:i,noTransition:r,config:s,id:t,tickTextRotate:f,owner:o},c&&{isCategory:u,isInverted:s.axis_x_inverted,tickMultiline:s.axis_x_tick_multiline,tickWidth:s.axis_x_tick_width,tickTitle:u&&s.axis_x_tick_tooltip&&o.api.categories(),orgXScale:o.scale.x});c||(p.tickStepSize=s["axis_".concat(l,"_tick_stepSize")]);var x=new Ur(p).scale(c&&o.scale.zoom||a).orient(d);if(c&&this.isTimeSeries()&&h&&!P(h)){var m=_t.bind(o);h=h.map(function(y){return m(y)})}else!c&&this.isTimeSeriesY()&&(x.ticks(s.axis_y_tick_time_value),h=null);h&&x.tickValues(h),x.tickFormat(v||!c&&o.isStackNormalized()&&function(y){return"".concat(y,"%")}),u&&(x.tickCentered(s.axis_x_tick_centered),Ft(s.axis_x_tick_culling)&&(s.axis_x_tick_culling=!1));var _=s["axis_".concat(l,"_tick_count")];return _&&x.ticks(_),x},e.prototype.updateXAxisTickValues=function(t,a){var i,r=this.owner,n=r.config,o=n.axis_x_tick_fit,s=n.axis_x_tick_count,c;return(o||s&&o)&&(c=r.mapTargetsToUniqueXs(t),this.isCategorized()&&s>c.length&&(s=c.length),c=this.generateTickValues(c,s,this.isTimeSeries())),a?a.tickValues(c):this.x&&(this.x.tickValues(c),(i=this.subX)===null||i===void 0||i.tickValues(c)),c},e.prototype.getId=function(t){var a=this.owner,i=a.config,r=a.scale,n=i.data_axes[t];return(!n||!r[n])&&(n="y"),n},e.prototype.getXAxisTickFormat=function(t){var a=this.owner,i=a.config,r=a.format,n=t&&i.subchart_axis_x_tick_format||i.axis_x_tick_format,o=this.isTimeSeries(),s=this.isCategorized(),c;return n?P(n)?c=n.bind(a.api):o&&(c=function(l){return l?r.axisTime(n)(l):""}):c=o?r.defaultAxisTime:s?a.categoryName:function(l){return l<0?l.toFixed(0):l},P(c)?function(l){return c.apply(a,s?[l,a.categoryName(l)]:[l])}:c},e.prototype.getTickValues=function(t){var a=this.owner,i=a.config["axis_".concat(t,"_tick_values")],r=a["".concat(t,"Axis")];return(P(i)?i.call(a.api):i)||(r?r.tickValues():void 0)},e.prototype.getLabelOptionByAxisId=function(t){return this.owner.config["axis_".concat(t,"_label")]},e.prototype.getLabelText=function(t){var a=this.getLabelOptionByAxisId(t);return Q(a)?a:a?a.text:null},e.prototype.setLabelText=function(t,a){var i=this.owner,r=i.config,n=this.getLabelOptionByAxisId(t);Q(n)?r["axis_".concat(t,"_label")]=a:n&&(n.text=a)},e.prototype.getLabelPosition=function(t,a){var i=this.owner.config.axis_rotated,r=this.getLabelOptionByAxisId(t),n=Tt(r)&&r.position?r.position:a[+!i],o=function(s){return!!~n.indexOf(s)};return{isInner:o("inner"),isOuter:o("outer"),isLeft:o("left"),isCenter:o("center"),isRight:o("right"),isTop:o("top"),isMiddle:o("middle"),isBottom:o("bottom")}},e.prototype.getAxisLabelPosition=function(t){return this.getLabelPosition(t,t==="x"?["inner-top","inner-right"]:["inner-right","inner-top"])},e.prototype.getLabelPositionById=function(t){return this.getAxisLabelPosition(t)},e.prototype.xForAxisLabel=function(t){var a=this.owner,i=a.state,r=i.width,n=i.height,o=this.getAxisLabelPosition(t),s=o.isMiddle?-n/2:0;return this.isHorizontal(a,t!=="x")?s=o.isLeft?0:o.isCenter?r/2:r:o.isBottom&&(s=-n),s},e.prototype.dxForAxisLabel=function(t){var a=this.owner,i=this.getAxisLabelPosition(t),r=i.isBottom?"0.5em":"0";return this.isHorizontal(a,t!=="x")?r=i.isLeft?"0.5em":i.isRight?"-0.5em":"0":i.isTop&&(r="-0.5em"),r},e.prototype.textAnchorForAxisLabel=function(t){var a=this.owner,i=this.getAxisLabelPosition(t),r=i.isMiddle?"middle":"end";return this.isHorizontal(a,t!=="x")?r=i.isLeft?"start":i.isCenter?"middle":"end":i.isBottom&&(r="start"),r},e.prototype.dyForAxisLabel=function(t){var a=this.owner,i=a.config,r=i.axis_rotated,n=this.getAxisLabelPosition(t).isInner,o=i["axis_".concat(t,"_tick_rotate")]?a.getHorizontalAxisHeight(t):0,s=this.getMaxTickWidth(t),c;if(t==="x"){var l=i.axis_x_height;r?c=n?"1.2em":-25-s:n?c="-0.5em":l?c=l-10:o?c=o-10:c="3em"}else c={y:["-0.5em",10,"3em","1.2em",10],y2:["1.2em",-20,"-2.2em","-0.5em",15]}[t],r?n?c=c[0]:o?c=o*(t==="y2"?-1:1)-c[1]:c=c[2]:c=n?c[3]:(c[4]+(i["axis_".concat(t,"_inner")]?0:s+c[4]))*(t==="y"?-1:1);return c},e.prototype.getMaxTickWidth=function(t,a){var i=this.owner,r=i.config,n=i.state.current,o=i.$el,s=o.svg,c=o.chart,l=n.maxTickWidths[t],u=0;if(a||!r["axis_".concat(t,"_show")]||l.size>0&&i.filterTargetsToShow().length===0)return l.size;if(s){var d=/^y2?$/.test(t),f=i.filterTargetsToShow(i.data.targets),v=i.scale[t].copy().domain(i["get".concat(d?"Y":"X","Domain")](f,t)),g=v.domain(),h=g[0]===g[1]&&g.every(function(b){return b>0}),p=N(l.domain)&&l.domain[0]===l.domain[1]&&l.domain.every(function(b){return b>0});if(h||p)return l.size;l.domain=g,d||l.ticks.splice(0);var x=this.getAxis(t,v,!1,!1,!0),m=r["axis_".concat(t,"_tick_count")],_=r["axis_".concat(t,"_tick_values")];!_&&m&&x.tickValues(this.generateTickValues(g,m,d?this.isTimeSeriesY():this.isTimeSeries())),!d&&this.updateXAxisTickValues(f,x);var y=c.append("svg").style("visibility","hidden").style("position","fixed").style("top","0").style("left","0");x.create(y),y.selectAll("text").each(function(b,T){var $=this.getBoundingClientRect().width;u=Math.max(u,$),d||(l.ticks[T]=$)}),y.remove()}return u>0&&(l.size=u),l.size},e.prototype.getXAxisTickTextY2Overflow=function(t){var a=this.owner,i=a.axis,r=a.config,n=a.state,o=a.getAxisTickRotate("x"),s=o>0&&o<90;if((i.isCategorized()||i.isTimeSeries())&&r.axis_x_tick_fit&&!r.axis_x_tick_culling&&!r.axis_x_tick_multiline&&s){var c=n.current.width-a.getCurrentPaddingLeft(),l=this.getXAxisTickMaxOverflow(o,c-t),u=Math.max(0,l)+t;return Math.min(u,c/2)}return 0},e.prototype.getXAxisTickMaxOverflow=function(t,a){for(var i=this.owner,r=i.axis,n=i.config,o=i.state,s=r.isTimeSeries(),c=o.current.maxTickWidths.x.ticks,l=c.length,u=o.axis.x.padding,d=u.left,f=u.right,v=0,g=l-(s&&n.axis_x_tick_fit?.5:0),h=0;h<l;h++){var p=h+1,x=Math.cos(Math.PI*t/180)*c[h],m=p-(s?1:.5)+d;if(!(m<=0)){var _=a-x,y=_/m,b=g-p,T=f*y,$=b*y+T,A=x-y/2-$;v=Math.max(v,A)}}var R=i.filterTargetsToShow(i.data.targets),w=0;if(!s&&n.axis_x_tick_count<=R.length&&R[0].values.length){var I=Mt(i.axis.getAxisType("x"),0,a-v).domain([d*-1,i.getXDomainMax(i.data.targets)+1+f]);w=Math.ceil((I(1)-I(0))/2)}return v+w},e.prototype.updateLabels=function(t){var a=this,i=this.owner,r=i.$el.main,n=i.$T,o={x:r.select(".".concat(at.axisX," .").concat(at.axisXLabel)),y:r.select(".".concat(at.axisY," .").concat(at.axisYLabel)),y2:r.select(".".concat(at.axisY2," .").concat(at.axisY2Label))};Object.keys(o).filter(function(s){return!o[s].empty()}).forEach(function(s){var c=o[s];n(c,t).attr("x",function(){return a.xForAxisLabel(s)}).attr("dx",function(){return a.dxForAxisLabel(s)}).attr("dy",function(){return a.dyForAxisLabel(s)}).text(function(){return a.getLabelText(s)})})},e.prototype.getPadding=function(t,a,i,r){var n=k(t)?t:t[a];return O(n)?this.owner.convertPixelToScale(/(bottom|top)/.test(a)?"y":"x",n,r):i},e.prototype.generateTickValues=function(t,a,i){var r=t;if(a){var n=P(a)?a():a;if(n===1)r=[t[0]];else if(n===2)r=[t[0],t[t.length-1]];else if(n>2){var o=this.isCategorized(),s=n-2,c=t[0],l=t[t.length-1],u=(l-c)/(s+1),d=void 0;r=[c];for(var f=0;f<s;f++)d=+c+u*(f+1),r.push(i?new Date(d):o?Math.round(d):d);r.push(l)}}return i||(r=r.sort(function(v,g){return v-g})),r},e.prototype.generateTransitions=function(t){var a=this.owner,i=a.$el.axis,r=a.$T,n=["x","y","y2","subX"].map(function(u){return r(i[u],t)}),o=n[0],s=n[1],c=n[2],l=n[3];return{axisX:o,axisY:s,axisY2:c,axisSubX:l}},e.prototype.redraw=function(t,a,i){var r=this,n=this.owner,o=n.config,s=n.$el,c=a?"0":null;["x","y","y2","subX"].forEach(function(l){var u=r[l],d=s.axis[l];u&&d&&(!i&&!o.transition_duration&&(u.config.withoutTransition=!0),d.style("opacity",c),u.create(t["axis".concat(ut(l))]))}),this.updateAxes()},e.prototype.redrawAxis=function(t,a,i,r,n){var o=this,s,c,l,u=this.owner,d=u.config,f=u.scale,v=u.$el,g=!!f.zoom,h;!g&&this.isCategorized()&&t.length===0&&f.x.domain([0,v.axis.x.selectAll(".tick").size()]),f.x&&t.length?(!g&&u.updateXDomain(t,a.UpdateXDomain,a.UpdateOrgXDomain,a.TrimXDomain),d.axis_x_tick_values||this.updateXAxisTickValues(t)):this.x&&(this.x.tickValues([]),(s=this.subX)===null||s===void 0||s.tickValues([])),d.zoom_rescale&&!r&&(h=f.x.orgDomain()),["y","y2"].forEach(function(p){var x="axis_".concat(p,"_"),m=f[p];if(m){var _=d["".concat(x,"tick_values")],y=d["".concat(x,"tick_count")];if(m.domain(u.getYDomain(t,p,h)),!_&&y){var b=u.axis[p],T=m.domain();b.tickValues(o.generateTickValues(T,T.every(function($){return $===0})?1:y,o.isTimeSeriesY()))}}}),this.redraw(i,u.hasArcType(),n),this.updateLabels(a.Transition),(a.UpdateXDomain||a.UpdateXAxis||a.Y)&&t.length&&this.setCulling(),a.Y&&((c=f.subY)===null||c===void 0||c.domain(u.getYDomain(t,"y")),(l=f.subY2)===null||l===void 0||l.domain(u.getYDomain(t,"y2")))},e.prototype.setCulling=function(){var t=this.owner,a=t.config,i=t.state,r=i.clip,n=i.current,o=t.$el;["subX","x","y","y2"].forEach(function(s){var c=o.axis[s],l=s==="subX"?"x":s,u="axis_".concat(l,"_tick_culling"),d=a[u];if(c&&d){var f=c.selectAll(".tick"),v=Ht(f.data()),g=v.length,h=a["".concat(u,"_max")],p=a["".concat(u,"_lines")],x;if(g){for(var m=1;m<g;m++)if(g/m<h){x=m;break}f.each(function(y){var b=p?this.querySelector("text"):this;b&&(b.style.display=v.indexOf(y)%x?"none":null)})}else f.style("display",null);if(s==="x"){var _=n.maxTickWidths.x.clipPath?r.pathXAxisTickTexts:null;o.svg.selectAll(".".concat(at.axisX," .tick text")).attr("clip-path",_)}}})},e}(),qr={initEventRect:function(){var e=this;e.$el.main.select(".".concat(z.chart)).append("g").attr("class",pt.eventRects).style("fill-opacity","0")},redrawEventRect:function(){var e,t=this,a=t.config,i=t.state,r=t.$el,n=t.isMultipleX(),o=a.axis_x_inverted;if(r.eventRect)t.updateEventRect(r.eventRect,!0);else if(t.data.targets.length){var s=t.$el.main.select(".".concat(pt.eventRects)).style("cursor",a.zoom_enabled&&a.zoom_type!=="drag"?a.axis_rotated?"ns-resize":"ew-resize":null).classed(pt.eventRectsMultiple,n).classed(pt.eventRectsSingle,!n),c=s.selectAll(".".concat(pt.eventRect)).data([0]).enter().append("rect");t.updateEventRect(c),n?t.generateEventRectsForMultipleXs(c):t.generateEventRectsForSingleX(c),c.call(t.getDraggableSelection()),r.eventRect=c,t.state.inputType==="touch"&&!r.svg.on("touchstart.eventRect")&&!t.hasArcType()&&t.bindTouchOnEventRect(n),i.rendered&&t.updateEventRect(r.eventRect,!0)}if(!n){var l=t.getMaxDataCountTarget();(!a.data_xSort||o)&&l.sort(function(u,d){return o?d.x-u.x:u.x-d.x}),t.updateDataIndexByX(l),t.updateXs(l),(e=t.updatePointClass)===null||e===void 0||e.call(t,!0),i.eventReceiver.data=l}t.updateEventRectData()},bindTouchOnEventRect:function(e){var t=this,a=t.config,i=t.state,r=t.$el,n=r.eventRect,o=r.svg,s=function(g){if(e)t.selectRectForMultipleXs(g);else{var h=t.getDataIndexFromEvent(i.event);t.callOverOutForTouch(h),h===-1?t.unselectRect():t.selectRectForSingle(g,n,h)}},c=function(){t.unselectRect(),t.callOverOutForTouch()},l=a.interaction_inputType_touch.preventDefault,u=na(l)&&l||!1,d=!isNaN(l)&&l||null,f,v=function(g){var h=g.type,p=g.changedTouches[0],x=p["client".concat(a.axis_rotated?"Y":"X")];h==="touchstart"?u?g.preventDefault():d!==null&&(f=x):h==="touchmove"&&(u||f===!0||d!==null&&Math.abs(f-x)>=d)&&(f=!0,g.preventDefault())};n.on("touchstart",function(g){i.event=g,t.updateEventRect()}).on("touchstart.eventRect touchmove.eventRect",function(g){if(i.event=g,!n.empty()&&n.classed(pt.eventRect)){if(i.dragging||i.flowing||t.hasArcType()||g.touches.length>1)return;v(g),s(n.node())}else c()},!0).on("touchend.eventRect",function(g){i.event=g,!n.empty()&&n.classed(pt.eventRect)&&(t.hasArcType()||!t.toggleShape||i.cancelClick)&&i.cancelClick&&(i.cancelClick=!1)},!0),o.on("touchstart",function(g){i.event=g;var h=g.target;h&&h!==n.node()&&c()})},updateEventRect:function(e,t){t===void 0&&(t=!1);var a=this,i=a.state,r=a.$el,n=i.eventReceiver,o=i.width,s=i.height,c=i.rendered,l=i.resizing,u=e||r.eventRect,d=function(){n&&(n.rect=u.node().getBoundingClientRect())};(!c||l||t)&&(u.attr("x",0).attr("y",0).attr("width",o).attr("height",s),(!c||t)&&u.classed(pt.eventRect,!0)),d()},updateEventRectData:function(){var e=this,t=e.config,a=e.scale,i=e.state,r=a.zoom||a.x,n=t.axis_rotated,o,s,c,l;if(e.isMultipleX())o=0,s=0,c=i.width,l=i.height;else{var u,d=void 0;if(e.axis.isCategorized())u=e.getEventRectWidth(),d=function(h){return r(h.x)-u/2};else{var f=function(h){var p=h.index;return{prev:e.getPrevX(p),next:e.getNextX(p)}};u=function(h){var p=f(h),x=r.domain(),m;return p.prev===null&&p.next===null?m=n?i.height:i.width:p.prev===null?m=(r(p.next)+r(h.x))/2:p.next===null?m=r(x[1])-(r(p.prev)+r(h.x))/2:(Object.keys(p).forEach(function(_,y){var b;p[_]=(b=p[_])!==null&&b!==void 0?b:x[y]}),m=Math.max(0,(r(p.next)-r(p.prev))/2)),m},d=function(h){var p=f(h),x;return p.prev===null&&p.next===null?x=0:p.prev===null?x=r(r.domain()[0]):x=(r(h.x)+r(p.prev))/2,x}}o=n?0:d,s=n?d:0,c=n?i.width:u,l=n?u:i.height}var v=i.eventReceiver,g=function(h,p){return P(h)?h(p):h};v.coords.splice(v.data.length),v.data.forEach(function(h,p){v.coords[p]={x:g(o,h),y:g(s,h),w:g(c,h),h:g(l,h)}})},selectRectForMultipleXs:function(e){var t=this,a=t.config,i=t.state,r=t.filterTargetsToShow(t.data.targets);if(!(i.dragging||t.hasArcType(r))){var n=ht(i.event,e),o=t.findClosestFromTargets(r,n);if(i.mouseover&&(!o||o.id!==i.mouseover.id)&&(a.data_onout.call(t.api,i.mouseover),i.mouseover=void 0),!o){t.unselectRect();return}var s=t.isBubbleType(o)||t.isScatterType(o)||!a.tooltip_grouped?[o]:t.filterByX(r,o.x),c=s.map(function(l){return t.addName(l)});t.showTooltip(c,e),t.setExpand(o.index,o.id,!0),t.showGridFocus(c),(t.isBarType(o.id)||t.dist(o,n)<a.point_sensitivity)&&(t.$el.svg.select(".".concat(pt.eventRect)).style("cursor","pointer"),i.mouseover||(a.data_onover.call(t.api,o),i.mouseover=o))}},unselectRect:function(){var e=this,t=e.config,a=e.$el,i=a.circle,r=a.tooltip;e.$el.svg.select(".".concat(pt.eventRect)).style("cursor",null),e.hideGridFocus(),r&&(e.hideTooltip(),e._handleLinkedCharts(!1)),i&&!t.point_focus_only&&e.unexpandCircles(),e.expandBarTypeShapes(!1)},generateEventRectsForSingleX:function(e){var t=this,a=t.config,i=t.state,r=i.eventReceiver,n=e.style("cursor",a.data_selection_enabled&&a.data_selection_grouped?"pointer":null).on("click",function(s){i.event=s;var c=r.currentIdx,l=r.data,u=l[c===-1?t.getDataIndexFromEvent(s):c];t.clickHandlerForSingleX.bind(this)(u,t)});if(i.inputType==="mouse"){var o=function(s){var c=s?t.getDataIndexFromEvent(s):r.currentIdx;return c>-1?r.data[c]:null};n.on("mouseover",function(s){i.event=s,t.updateEventRect()}).on("mousemove",function(s){var c=o(s);if(i.event=s,!!c){var l=c.index,u=a.line_step_type;if(a.line_step_tooltipMatch&&t.hasType("step")&&/^step\-(before|after)$/.test(u)){var d=t.scale.zoom||t.scale.x,f=t.axis.xs[l],v=d.invert(ht(s,this)[0]);u==="step-after"&&v<f?l-=1:u==="step-before"&&v>f&&(l+=1)}i.dragging||i.flowing||t.hasArcType()||a.tooltip_grouped&&l===r.currentIdx||(l!==r.currentIdx&&(t.setOverOut(!1,r.currentIdx),r.currentIdx=l),l===-1?t.unselectRect():t.selectRectForSingle(this,n,l),t.setOverOut(l!==-1,l))}}).on("mouseout",function(s){i.event=s,!(!a||t.hasArcType()||r.currentIdx===-1)&&(t.unselectRect(),t.setOverOut(!1,r.currentIdx),r.currentIdx=-1)})}return n},clickHandlerForSingleX:function(e,t){var a=t,i=a.config,r=a.state,n=a.$el.main;if(!e||a.hasArcType()||r.cancelClick){r.cancelClick&&(r.cancelClick=!1);return}var o=e.index;n.selectAll(".".concat(it.shape,"-").concat(o)).each(function(s){var c;(i.data_selection_grouped||a.isWithinShape(this,s))&&((c=a.toggleShape)===null||c===void 0||c.call(a,this,s,o),i.data_onclick.bind(a.api)(s,this))})},generateEventRectsForMultipleXs:function(e){var t=this,a=t.state;e.on("click",function(i){a.event=i,t.clickHandlerForMultipleXS.bind(this)(t)}),a.inputType==="mouse"&&e.on("mouseover mousemove",function(i){a.event=i,t.selectRectForMultipleXs(this)}).on("mouseout",function(i){a.event=i,!(!t.config||t.hasArcType())&&t.unselectRect()})},clickHandlerForMultipleXS:function(e){var t=e,a=t.config,i=t.state,r=t.filterTargetsToShow(t.data.targets);if(!t.hasArcType(r)){var n=ht(i.event,this),o=t.findClosestFromTargets(r,n);o&&(t.isBarType(o.id)||t.dist(o,n)<a.point_sensitivity)&&t.$el.main.selectAll(".".concat(it.shapes).concat(t.getTargetSelectorSuffix(o.id))).selectAll(".".concat(it.shape,"-").concat(o.index)).each(function(){var s;(a.data_selection_grouped||t.isWithinShape(this,o))&&((s=t.toggleShape)===null||s===void 0||s.call(t,this,o,o.index),a.data_onclick.bind(t.api)(o,this))})}}},Kr={generateFlow:function(e){var t=this,a=t.data,i=t.state,r=t.$el;return function(){var n=e.flow.length;i.flowing=!0,a.targets.forEach(function(s){s.values.splice(0,n)}),t.updateXGrid&&t.updateXGrid(!0);var o={};["axis.x","grid.x","gridLines.x","region.list","text","bar","line","area","circle"].forEach(function(s){var c=s.split("."),l=r[c[0]];l&&c.length>1&&(l=l[c[1]]),l?.size()&&(o[s]=l)}),t.hideGridFocus(),t.setFlowList(o,e)}},setFlowList:function(e,t){var a=this,i=t.flow,r=t.targets,n=i.duration,o=n===void 0?t.duration:n,s=i.index,c=i.length,l=i.orgDataCount,u=a.getFlowTransform(r,l,s,c),d=fa(),f;d.add(Object.keys(e).map(function(v){return f=e[v].transition().ease(di).duration(o),v==="axis.x"?f=f.call(function(g){a.axis.x.setTransition(g).create(g)}):v==="region.list"?f=f.filter(a.isRegionOnX).attr("transform",u):f=f.attr("transform",u),f})),f.call(d,function(){a.cleanUpFlow(e,t)})},cleanUpFlow:function(e,t){var a=this,i=a.config,r=a.state,n=a.$el.svg,o=i.axis_rotated,s=t.flow,c=t.shape,l=t.xv,u=c.pos,d=u.cx,f=u.cy,v=u.xForText,g=u.yForText,h=s.done,p=h===void 0?function(){}:h,x=s.length;x&&(["circle","text","shape","eventRect"].forEach(function(m){for(var _=[],y=0;y<x;y++)_.push(".".concat(F[m],"-").concat(y));n.selectAll(".".concat(F["".concat(m,"s")])).selectAll(_).remove()}),n.select(".".concat(F.xgrid)).remove()),Object.keys(e).forEach(function(m){var _=e[m];if(m!=="axis.x"&&_.attr("transform",null),m==="grid.x")_.attr(r.xgridAttr);else if(m==="gridLines.x")_.attr("x1",o?0:l).attr("x2",o?r.width:l);else if(m==="gridLines.x")_.select("line").attr("x1",o?0:l).attr("x2",o?r.width:l),_.select("text").attr("x",o?r.width:0).attr("y",l);else if(/^(area|bar|line)$/.test(m))_.attr("d",c.type[m]);else if(m==="text")_.attr("x",v).attr("y",g).style("fill-opacity",a.opacityForText.bind(a));else if(m==="circle")if(a.isCirclePoint())_.attr("cx",d).attr("cy",f);else{var y=function(T){return d(T)-i.point_r},b=function(T){return f(T)-i.point_r};_.attr("x",y).attr("y",b).attr("cx",d).attr("cy",f)}else m==="region.list"&&_.select("rect").filter(a.isRegionOnX).attr("x",a.regionX.bind(a)).attr("width",a.regionWidth.bind(a))}),i.interaction_enabled&&a.redrawEventRect(),p.call(a.api),r.flowing=!1},getFlowTransform:function(e,t,a,i){var r=this,n=r.data,o=r.scale.x,s=n.targets[0].values,c=r.getValueOnIndex(s,a),l=r.getValueOnIndex(s,a+i),u,d=o.domain(),f=r.updateXDomain(e,!0,!0);t?t===1||c?.x===l?.x?u=o(d[0])-o(f[0]):u=r.axis.isTimeSeries()?o(d[0])-o(f[0]):o(c?.x||0)-o(l.x):s.length!==1?u=o(d[0])-o(f[0]):r.axis.isTimeSeries()?(c=r.getValueOnIndex(s,0),l=r.getValueOnIndex(s,s.length-1),u=o(c.x)-o(l.x)):u=Dt(f)/2;var v=Dt(d)/Dt(f);return"translate(".concat(u,",0) scale(").concat(v,",1)")}},Jr={initClip:function(){var e=this,t=e.state,a=t.clip,i=t.datetimeId;a.id="".concat(i,"-clip"),a.idXAxis="".concat(a.id,"-xaxis"),a.idYAxis="".concat(a.id,"-yaxis"),a.idGrid="".concat(a.id,"-grid"),a.path=e.getClipPath(a.id),a.pathXAxis=e.getClipPath(a.idXAxis),a.pathYAxis=e.getClipPath(a.idYAxis),a.pathGrid=e.getClipPath(a.idGrid)},getClipPath:function(e){var t=this,a=t.config;if(!a.clipPath&&/-clip$/.test(e)||!a.axis_x_clipPath&&/-clip-xaxis$/.test(e)||!a.axis_y_clipPath&&/-clip-yaxis$/.test(e))return null;var i=M.navigator?M.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0:!1;return"url(".concat(i?"":K.URL.split("#")[0],"#").concat(e,")")},appendClip:function(e,t){t&&e.append("clipPath").attr("id",t).append("rect")},setXAxisClipPath:function(e){var t=this,a=t.config,i=t.state,r=i.margin,n=i.width,o=i.height,s=a.axis_rotated,c=Math.max(30,r.left)-(s?0:20),l=s?-(1+c):-(c-1),u=-Math.max(15,r.top),d=s?r.left+20:n+10+c,f=(s?r.top+o+10:r.bottom)+20;e.attr("x",l).attr("y",u).attr("width",d).attr("height",f)},setYAxisClipPath:function(e){var t,a=this,i=a.config,r=a.state,n=r.margin,o=r.width,s=r.height,c=i.axis_rotated,l=Math.max(30,n.left)-(c?20:0),u=i.axis_y_inner,d=u&&!c?i.axis_y_label.text?-20:-1:c?-(1+l):-(l-1),f=-(c?20:n.top),v=(c?o+15+l:n.left+20)+(u?20:0),g=(c?n.bottom+(((t=i.padding)===null||t===void 0?void 0:t.mode)==="fit"?10:0):n.top+s)+10;e.attr("x",d).attr("y",f).attr("width",v).attr("height",g)},updateXAxisTickClip:function(){var e=this,t=e.config,a=e.state,i=a.clip,r=a.xAxisHeight,n=e.$el.defs,o=e.getHorizontalAxisHeight("x");if(n&&!i.idXAxisTickTexts){var s="".concat(i.id,"-xaxisticktexts");e.appendClip(n,s),i.pathXAxisTickTexts=e.getClipPath(i.idXAxisTickTexts),i.idXAxisTickTexts=s}!t.axis_x_tick_multiline&&e.getAxisTickRotate("x")&&o!==r&&(e.setXAxisTickClipWidth(),e.setXAxisTickTextClipPathWidth()),e.state.xAxisHeight=o},setXAxisTickClipWidth:function(){var e=this,t=e.config,a=e.state.current.maxTickWidths,i=e.getAxisTickRotate("x");if(!t.axis_x_tick_multiline&&i){var r=Math.sin(Math.PI/180*Math.abs(i));a.x.clipPath=(e.getHorizontalAxisHeight("x")-20)/r}else a.x.clipPath=null},setXAxisTickTextClipPathWidth:function(){var e=this,t=e.state,a=t.clip,i=t.current,r=e.$el.svg;r&&r.select("#".concat(a.idXAxisTickTexts," rect")).attr("width",i.maxTickWidths.x.clipPath).attr("height",30)}},Ye=function(e){return O(e.position)||"end"},He=function(e){return e.position==="start"?4:e.position==="middle"?0:-4};function We(e,t,a){return function(i){var r=e?0:t;return i.position==="start"?r=e?-a:0:i.position==="middle"&&(r=(e?-a:t)/2),r}}function Ue(e,t){t==="grid"&&e.each(function(){var a=L(this);["x1","x2","y1","y2"].forEach(function(i){return a.attr(i,Math.ceil(+a.attr(i)))})})}var Qr={hasGrid:function(){var e=this.config;return["x","y"].some(function(t){return e["grid_".concat(t,"_show")]||e["grid_".concat(t,"_lines")].length})},initGrid:function(){var e=this;e.hasGrid()&&e.initGridLines(),e.initFocusGrid()},initGridLines:function(){var e=this,t=e.config,a=e.state.clip,i=e.$el;(t.grid_x_lines.length||t.grid_y_lines.length)&&(i.gridLines.main=i.main.insert("g",".".concat(z.chart).concat(t.grid_lines_front?" + *":"")).attr("clip-path",a.pathGrid).attr("class","".concat(H.grid," ").concat(H.gridLines)),i.gridLines.main.append("g").attr("class",H.xgridLines),i.gridLines.main.append("g").attr("class",H.ygridLines),i.gridLines.x=Ke([]))},updateXGrid:function(e){var t=this,a=t.config,i=t.scale,r=t.state,n=t.$el,o=n.main,s=n.grid,c=a.axis_rotated,l=t.generateGridData(a.grid_x_type,i.x),u=t.axis.isCategorized()?t.axis.x.tickOffset():0,d=function(f){return(i.zoom||i.x)(f)+u*(c?-1:1)};r.xgridAttr=c?{x1:0,x2:r.width,y1:d,y2:d}:{x1:d,x2:d,y1:0,y2:r.height},s.x=o.select(".".concat(H.xgrids)).selectAll(".".concat(H.xgrid)).data(l),s.x.exit().remove(),s.x=s.x.enter().append("line").attr("class",H.xgrid).merge(s.x),e||s.x.each(function(){var f=L(this);Object.keys(r.xgridAttr).forEach(function(v){f.attr(v,r.xgridAttr[v]).style("opacity",function(){return f.attr(c?"y1":"x1")===(c?r.height:0)?"0":null})})})},updateYGrid:function(){var e=this,t=e.axis,a=e.config,i=e.scale,r=e.state,n=e.$el,o=n.grid,s=n.main,c=a.axis_rotated,l=function(d){return Math.ceil(i.y(d))},u=t.y.getGeneratedTicks(a.grid_y_ticks)||e.scale.y.ticks(a.grid_y_ticks);o.y=s.select(".".concat(H.ygrids)).selectAll(".".concat(H.ygrid)).data(u),o.y.exit().remove(),o.y=o.y.enter().append("line").attr("class",H.ygrid).merge(o.y),o.y.attr("x1",c?l:0).attr("x2",c?l:r.width).attr("y1",c?0:l).attr("y2",c?r.height:l),Ue(o.y,"grid")},updateGrid:function(){var e=this,t=e.$el,a=t.grid,i=t.gridLines;!i.main&&e.initGridLines(),a.main.style("visibility",e.hasArcType()?"hidden":null),e.hideGridFocus(),e.updateXGridLines(),e.updateYGridLines()},updateXGridLines:function(){var e=this,t=e.config,a=e.$el,i=a.gridLines,r=a.main,n=e.$T,o=t.axis_rotated;t.grid_x_show&&e.updateXGrid();var s=r.select(".".concat(H.xgridLines)).selectAll(".".concat(H.xgridLine)).data(t.grid_x_lines);n(s.exit()).style("opacity","0").remove();var c=s.enter().append("g");c.append("line").style("opacity","0"),c.append("text").attr("transform",o?null:"rotate(-90)").attr("dy",-5).style("opacity","0"),s=c.merge(s),n(s.attr("class",function(l){return"".concat(H.xgridLine," ").concat(l.class||"").trim()}).select("text").attr("text-anchor",Ye).attr("dx",He)).text(function(l){return l.text}).style("opacity",null),i.x=s},updateYGridLines:function(){var e=this,t=e.config,a=e.state,i=a.width,r=a.height,n=e.$el,o=e.$T,s=t.axis_rotated;t.grid_y_show&&e.updateYGrid();var c=n.main.select(".".concat(H.ygridLines)).selectAll(".".concat(H.ygridLine)).data(t.grid_y_lines);o(c.exit()).style("opacity","0").remove();var l=c.enter().append("g");l.append("line").style("opacity","0"),l.append("text").attr("transform",s?"rotate(-90)":"").style("opacity","0"),c=l.merge(c);var u=e.yv.bind(e);o(c.attr("class",function(d){return"".concat(H.ygridLine," ").concat(d.class||"").trim()}).select("line")).attr("x1",s?u:0).attr("x2",s?u:i).attr("y1",s?0:u).attr("y2",s?r:u).style("opacity",null),o(c.select("text").attr("text-anchor",Ye).attr("dx",He)).attr("dy",-5).attr("x",We(s,i,r)).attr("y",u).text(function(d){return d.text}).style("opacity",null),n.gridLines.y=c},redrawGrid:function(e){var t=this,a=t.config.axis_rotated,i=t.state,r=i.width,n=i.height,o=t.$el.gridLines,s=t.$T,c=t.xv.bind(t),l=o.x.select("line"),u=o.x.select("text");return l=s(l,e).attr("x1",a?0:c).attr("x2",a?r:c).attr("y1",a?c:0).attr("y2",a?c:n),u=s(u,e).attr("x",We(!a,r,n)).attr("y",c).text(function(d){return d.text}),[l.style("opacity",null),u.style("opacity",null)]},initFocusGrid:function(){var e=this,t=e.config,a=e.state.clip,i=e.$el,r=t.grid_front,n=".".concat(r&&i.gridLines.main?H.gridLines:z.chart).concat(r?" + *":""),o=i.main.insert("g",n).attr("clip-path",a.pathGrid).attr("class",H.grid);i.grid.main=o,t.grid_x_show&&o.append("g").attr("class",H.xgrids),t.grid_y_show&&o.append("g").attr("class",H.ygrids),t.interaction_enabled&&t.grid_focus_show&&(o.append("g").attr("class",U.xgridFocus).append("line").attr("class",U.xgridFocus),t.grid_focus_y&&!t.tooltip_grouped&&o.append("g").attr("class",U.ygridFocus).append("line").attr("class",U.ygridFocus))},showGridFocus:function(e){var t,a=this,i=a.config,r=a.state,n=r.width,o=r.height,s=i.axis_rotated,c=a.$el.main.selectAll("line.".concat(U.xgridFocus,", line.").concat(U.ygridFocus)),l=(e||[c.datum()]).filter(function(f){return f&&O(a.getBaseValue(f))});if(!(!i.tooltip_show||l.length===0||a.hasType("bubble")||a.hasArcType())){var u=i.grid_focus_edge&&!i.tooltip_grouped,d=a.xx.bind(a);c.style("visibility",null).data(l.concat(l)).each(function(f){var v=L(this),g={x:d(f),y:a.getYScaleById(f.id)(f.value)},h;if(v.classed(U.xgridFocus))h=s?[null,g.x,u?g.y:n,g.x]:[g.x,u?g.y:null,g.x,o];else{var p=a.axis.getId(f.id)==="y2";h=s?[g.y,u&&!p?g.x:null,g.y,u&&p?g.x:o]:[u&&p?g.x:null,g.y,u&&!p?g.x:n,g.y]}["x1","y1","x2","y2"].forEach(function(x,m){return v.attr(x,h[m])})}),Ue(c,"grid"),(t=a.showCircleFocus)===null||t===void 0||t.call(a,e)}},hideGridFocus:function(){var e,t=this,a=t.state,i=a.inputType,r=a.resizing,n=t.$el.main;(i==="mouse"||!r)&&(n.selectAll("line.".concat(U.xgridFocus,", line.").concat(U.ygridFocus)).style("visibility","hidden"),(e=t.hideCircleFocus)===null||e===void 0||e.call(t))},updateGridFocus:function(){var e,t=this,a=t.state,i=a.inputType,r=a.width,n=a.height,o=a.resizing,s=t.$el.grid,c=s.main.select("line.".concat(U.xgridFocus));if(i==="touch")c.empty()?o&&((e=t.showCircleFocus)===null||e===void 0||e.call(t)):t.showGridFocus();else{var l=t.config.axis_rotated;c.attr("x1",l?0:-10).attr("x2",l?r:-10).attr("y1",l?-10:0).attr("y2",l?-10:n)}return!0},generateGridData:function(e,t){var a=this,i=a.$el.main.select(".".concat(at.axisX)).selectAll(".tick").size(),r=[];if(e==="year")for(var n=a.getXDomain(),o=n.map(function(u){return u.getFullYear()}),s=o[0],c=o[1],l=s;l<=c;l++)r.push(new Date("".concat(l,"-01-01 00:00:00")));else r=t.ticks(10),r.length>i&&(r=r.filter(function(u){return String(u).indexOf(".")<0}));return r},getGridFilterToRemove:function(e){return e?function(t){var a=!1;return(N(e)?e.concat():[e]).forEach(function(i){("value"in i&&t.value===i.value||"class"in i&&t.class===i.class)&&(a=!0)}),a}:function(){return!0}},removeGridLines:function(e,t){var a=this,i=a.config,r=a.$T,n=a.getGridFilterToRemove(e),o=function(u){return!n(u)},s=t?H.xgridLines:H.ygridLines,c=t?H.xgridLine:H.ygridLine;r(a.$el.main.select(".".concat(s)).selectAll(".".concat(c)).filter(n)).style("opacity","0").remove();var l="grid_".concat(t?"x":"y","_lines");i[l]=i[l].filter(o)}},tn={initRegion:function(){var e=this,t=e.$el;t.region.main=t.main.insert("g",":first-child").attr("clip-path",e.state.clip.path).attr("class",Jt.regions)},updateRegion:function(){var e=this,t=e.config,a=e.$el.region,i=e.$T;a.main||e.initRegion(),a.main.style("visibility",e.hasArcType()?"hidden":null);var r=a.main.selectAll(".".concat(Jt.region)).data(t.regions);i(r.exit()).style("opacity","0").remove();var n=r.enter().append("g");n.append("rect").style("fill-opacity","0"),a.list=n.merge(r).attr("class",e.classRegion.bind(e))},redrawRegion:function(e){var t=this,a=t.$el.region,i=t.$T,r=a.list.select("rect");return r=i(r,e).attr("x",t.regionX.bind(t)).attr("y",t.regionY.bind(t)).attr("width",t.regionWidth.bind(t)).attr("height",t.regionHeight.bind(t)),[r.style("fill-opacity",function(n){return O(n.opacity)?n.opacity:null}).on("end",function(){L(this.parentNode).selectAll("rect:not([x])").remove()})]},getRegionXY:function(e,t){var a=this,i=a.config,r=a.scale,n=i.axis_rotated,o=e==="x",s="start",c,l=0;return t.axis==="y"||t.axis==="y2"?(o||(s="end"),(o?n:!n)&&s in t&&(c=r[t.axis],l=c(t[s]))):(o?!n:n)&&s in t&&(c=r.zoom||r.x,l=c(a.axis.isTimeSeries()?_t.call(a,t[s]):t[s])),l},regionX:function(e){return this.getRegionXY("x",e)},regionY:function(e){return this.getRegionXY("y",e)},getRegionSize:function(e,t){var a=this,i=a.config,r=a.scale,n=a.state,o=i.axis_rotated,s=e==="width",c=a[s?"regionX":"regionY"](t),l,u="end",d=n[e];return t.axis==="y"||t.axis==="y2"?(s||(u="start"),(s?o:!o)&&u in t&&(l=r[t.axis],d=l(t[u]))):(s?!o:o)&&u in t&&(l=r.zoom||r.x,d=l(a.axis.isTimeSeries()?_t.call(a,t[u]):t[u])),d<c?0:d-c},regionWidth:function(e){return this.getRegionSize("width",e)},regionHeight:function(e){return this.getRegionSize("height",e)},isRegionOnX:function(e){return!e.axis||e.axis==="x"}},en={getAxisSize:function(e){var t=this,a=t.config.axis_rotated;return a&&e==="x"||!a&&/y2?/.test(e)?t.getAxisWidthByAxisId(e,!0):t.getHorizontalAxisHeight(e)},getAxisWidthByAxisId:function(e,t){var a,i,r=this;if(r.axis){var n=(a=r.axis)===null||a===void 0?void 0:a.getLabelPositionById(e),o=r.axis.getMaxTickWidth(e,t),s=o===0?.5:0;return o+(((i=r.config.padding)===null||i===void 0?void 0:i.mode)==="fit"?n.isInner?10+s:10:n.isInner?20+s:40)}else return 40},getHorizontalAxisHeight:function(e){var t,a,i=this,r=i.config,n=i.state,o=n.current,s=n.rotatedPadding,c=n.isLegendRight,l=n.isLegendInset,u=r.axis_rotated,d=((t=r.padding)===null||t===void 0?void 0:t.mode)==="fit",f=r["axis_".concat(e,"_inner")],v=r["axis_".concat(e,"_label")].text,g=((a=r.padding)===null||a===void 0?void 0:a.mode)==="fit"?f&&!v?e==="y"?1:0:20:30;if(e==="x"&&!r.axis_x_show)return 8;if(e==="x"&&r.axis_x_height)return r.axis_x_height;if(e==="y"&&!r.axis_y_show)return r.legend_show&&!c&&!l?10:1;if(e==="y2"&&!r.axis_y2_show)return d?0:s.top;var h=i.getAxisTickRotate(e);return(e==="x"&&!u||/y2?/.test(e)&&u)&&h&&(g=30+i.axis.getMaxTickWidth(e)*Math.cos(Math.PI*(90-Math.abs(h))/180),!r.axis_x_tick_multiline&&o.height&&g>o.height/2&&(g=o.height/2)),g+(i.axis.getLabelPositionById(e).isInner?0:10)+(e==="y2"&&!u?-10:0)},getEventRectWidth:function(){var e=this,t=e.config,a=e.axis,i=t.axis_x_inverted,r=a.x.tickInterval();return Math.max(0,i?Math.abs(r):r)},getAxisTickRotate:function(e){var t=this,a=t.axis,i=t.config,r=t.state,n=t.$el,o=i["axis_".concat(e,"_tick_rotate")];if(e==="x"){var s=a.isCategorized()||a.isTimeSeries();if(i.axis_x_tick_fit&&s){var c=i.axis_x_tick_count,l=r.current.maxTickWidths.x.ticks.length,u=0;if(c?u=c>l?l:c:l&&(u=l),u!==r.axis.x.tickCount){var d=t.data.targets;r.axis.x.padding=t.getXDomainPadding([t.getXDomainMinMax(d,"min"),t.getXDomainMinMax(d,"max")],u)}r.axis.x.tickCount=u}n.svg&&i.axis_x_tick_fit&&!i.axis_x_tick_multiline&&!i.axis_x_tick_culling&&i.axis_x_tick_autorotate&&s&&(o=t.needToRotateXAxisTickTexts()?i.axis_x_tick_rotate:0)}return o},needToRotateXAxisTickTexts:function(){var e=this,t=e.state,a=t.axis,i=t.current,r=i.width-e.getCurrentPaddingLeft(!1)-e.getCurrentPaddingRight(),n=a.x.tickCount+a.x.padding.left+a.x.padding.right,o=e.axis.getMaxTickWidth("x"),s=n?r/n:0;return o>s}},an={data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_axes:{},data_regions:{},data_stack_normalize:!1},rn={axis_x_clipPath:!0,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_culling_lines:!0,axis_x_tick_count:void 0,axis_x_tick_show:!0,axis_x_tick_text_show:!0,axis_x_tick_text_position:{x:0,y:0},axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_autorotate:!1,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_tick_tooltip:!1,axis_x_max:void 0,axis_x_min:void 0,axis_x_inverted:!1,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_axes:[]},nn={axis_y_clipPath:!0,axis_y_show:!0,axis_y_type:"indexed",axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:!1,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_culling:!1,axis_y_tick_culling_max:5,axis_y_tick_culling_lines:!0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_show:!0,axis_y_tick_stepSize:null,axis_y_tick_text_show:!0,axis_y_tick_text_position:{x:0,y:0},axis_y_tick_time_value:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y_axes:[]},on={axis_y2_show:!1,axis_y2_type:"indexed",axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:!1,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_culling:!1,axis_y2_tick_culling_max:5,axis_y2_tick_culling_lines:!0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_rotate:0,axis_y2_tick_count:void 0,axis_y2_tick_show:!0,axis_y2_tick_stepSize:null,axis_y2_tick_text_show:!0,axis_y2_tick_text_position:{x:0,y:0},axis_y2_padding:{},axis_y2_default:void 0,axis_y2_axes:[]},sn=D(D(D({axis_rotated:!1},rn),nn),on),cn={grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:void 0,grid_focus_edge:!1,grid_focus_show:!0,grid_focus_y:!1,grid_front:!1,grid_lines_front:!0},ln=[Xr,Nr,Wr,Gr,Vr,Yr,Hr],un=[Zr,Jr,qr,Kr,Qr,tn,en],dn=[an,sn,cn];function Ze(e){e===void 0&&(e=0);var t=this,a=t.config,i=t.state,r=t.hasMultiArcGauge(),n=i.gaugeArcWidth/t.filterTargetsToShow(t.data.targets).length,o=e?Math.min(i.radiusExpanded*e-i.radius,n*.8-(1-e)*100):0;return{inner:function(s){var c=t.getRadius(s).innerRadius;return r?i.radius-n*(s.index+1):k(c)?c:0},outer:function(s){var c=t.getRadius(s).outerRadius,l;if(r)l=i.radius-n*s.index+o;else if(t.hasType("polar")&&!e)l=t.getPolarOuterRadius(s,c);else if(l=c,e){var u=i.radiusExpanded;i.radius!==c&&(u-=Math.abs(i.radius-c)),l=u*e}return l},corner:function(s,c){var l=a.arc_cornerRadius_ratio,u=l===void 0?0:l,d=a.arc_cornerRadius,f=d===void 0?0:d,v=s.data.id,g=s.value,h=0;return u?h=u*c:h=k(f)?f:f.call(t.api,v,g,c),h}}}function pe(e){return function(t){var a=ta(this._current,t);return this._current=t,function(i){var r=a(i);return e(r)}}}var fn={initPie:function(){var e=this,t=e.config,a=t.data_type,i=t["".concat(a,"_padding")],r=t["".concat(a,"_startingAngle")]||0,n=(i?i*.01:t["".concat(a,"_padAngle")])||0;e.pie=oi().startAngle(r).endAngle(r+2*Math.PI).padAngle(n).value(function(o){return o.values.reduce(function(s,c){return s+c.value},0)}).sort(e.getSortCompareFn.bind(e)(!0))},updateRadius:function(){var e=this,t=e.config,a=e.state,i=t.data_type,r=t["".concat(i,"_padding")],n=t.gauge_width||t.donut_width,o=e.filterTargetsToShow(e.data.targets).length*t.gauge_arcs_minWidth;a.radiusExpanded=Math.min(a.arcWidth,a.arcHeight)/2*(e.hasMultiArcGauge()&&t.gauge_label_show?.85:1),a.radius=a.radiusExpanded*.95,a.innerRadiusRatio=n?(a.radius-n)/a.radius:.6,a.gaugeArcWidth=n||(o<=a.radius-a.innerRadius?a.radius-a.innerRadius:o<=a.radius?o:a.radius);var s=t.pie_innerRadius||(r?r*(a.innerRadiusRatio+.1):0);a.outerRadius=t.pie_outerRadius,a.innerRadius=e.hasType("donut")||e.hasType("gauge")?a.radius*a.innerRadiusRatio:s},getRadius:function(e){var t=this,a=e?.data,i=t.state,r=i.innerRadius,n=i.outerRadius;return!k(r)&&a&&(r=r[a.id]||0),X(n)&&a&&a.id in n?n=n[a.id]:k(n)||(n=t.state.radius),{innerRadius:r,outerRadius:n}},updateArc:function(){var e=this;e.updateRadius(),e.svgArc=e.getSvgArc(),e.svgArcExpanded=e.getSvgArcExpanded()},getArcLength:function(){var e=this,t=e.config,a=t.gauge_arcLength*3.6,i=2*(a/360);return a<-360?i=-2:a>360&&(i=2),i*Math.PI},getStartAngle:function(){var e=this,t=e.config,a=t.gauge_fullCircle,i=-1*Math.PI/2,r=Math.PI/2,n=t.gauge_startingAngle;return!a&&n<=i?n=i:!a&&n>=r?n=r:(n>Math.PI||n<-1*Math.PI)&&(n=Math.PI),n},updateAngle:function(e){var t=this,a=t.config,i=t.state,r=t.pie,n=e,o=!1;if(!a)return null;var s=t.getStartAngle(),c=a.gauge_fullCircle?t.getArcLength():s*-2;if(n.data&&t.isGaugeType(n.data)&&!t.hasMultiArcGauge()){var l=a.gauge_min,u=a.gauge_max,d=t.getTotalDataSum(i.rendered),f=c*((d-l)/(u-l));r=r.startAngle(s).endAngle(f+s)}if(r(t.filterTargetsToShow()).forEach(function(x,m){!o&&x.data.id===n.data.id&&(o=!0,n=x,n.index=m)}),isNaN(n.startAngle)&&(n.startAngle=0),isNaN(n.endAngle)&&(n.endAngle=n.startAngle),n.data&&t.hasMultiArcGauge()){var v=a.gauge_min,g=a.gauge_max,h=c/(g-v),p=n.value<v?0:n.value<g?n.value-v:g-v;n.startAngle=s,n.endAngle=s+h*p}return o?n:null},getSvgArc:function(){var e=this,t=Ze.call(e),a=t.inner,i=t.outer,r=t.corner,n=Ee().innerRadius(a).outerRadius(i),o=function(s,c){var l,u="M 0 0";if(s.value||s.data){var d=c?s:(l=e.updateAngle(s))!==null&&l!==void 0?l:null;d&&(u=n.cornerRadius(r(d,i(d)))(d))}return u};return o.centroid=n.centroid,o},getSvgArcExpanded:function(e){e===void 0&&(e=1);var t=this,a=Ze.call(t,e),i=a.inner,r=a.outer,n=a.corner,o=Ee().innerRadius(i).outerRadius(r);return function(s){var c=t.updateAngle(s),l=r(c),u=0;return c&&(u=n(c,l)),c?o.cornerRadius(u)(c):"M 0 0"}},getArc:function(e,t,a){return a||this.isArcType(e.data)?this.svgArc(e,t):"M 0 0"},transformForArcLabel:function(e){var t,a=this,i=a.config,r=a.state.radiusExpanded,n=a.updateAngle(e),o="";if(n){if(a.hasMultiArcGauge()){var s=Math.sin(n.endAngle-Math.PI/2),c=Math.cos(n.endAngle-Math.PI/2)*(r+25),l=s*(r+15-Math.abs(s*10))+3;o="translate(".concat(c,",").concat(l,")")}else if(!a.hasType("gauge")||a.data.targets.length>1){var u=a.getRadius(e).outerRadius;a.hasType("polar")&&(u=a.getPolarOuterRadius(e,u));var d=this.svgArc.centroid(n),f=d.map(function(x){return isNaN(x)?0:x}),c=f[0],l=f[1],v=Math.sqrt(c*c+l*l),g=(t=["donut","pie","polar"].filter(a.hasType.bind(a)).map(function(x){return i["".concat(x,"_label_ratio")]}))===null||t===void 0?void 0:t[0];g?g=P(g)?g.bind(a.api)(e,u,v):g:g=u&&(v?(36/u>.375?1.175-36/u:.8)*u/v:0),o="translate(".concat(c*g,",").concat(l*g,")")}}return o},convertToArcData:function(e){return this.addName({id:"data"in e?e.data.id:e.id,value:e.value,ratio:this.getRatio("arc",e),index:e.index})},textForArcLabel:function(e){var t=this,a=t.hasType("gauge");t.shouldShowArcLabel()&&e.style("fill",t.updateTextColor.bind(t)).attr("filter",t.updateTextBacgroundColor.bind(t)).each(function(i){var r,n=L(this),o=t.updateAngle(i),s=t.getRatio("arc",o),c=t.meetsLabelThreshold(s,(r=["donut","gauge","pie","polar"].filter(t.hasType.bind(t)))===null||r===void 0?void 0:r[0]);if(c){var l=(o||i).value,u=(t.getArcLabelFormat()||t.defaultArcValueFormat)(l,s,i.data.id).toString();Kt(n,u,[-1,1],a)}else n.text("")})},expandArc:function(e){var t=this,a=t.state.transiting,i=t.$el;if(a){var r=setInterval(function(){a||(clearInterval(r),i.legend.selectAll(".".concat(U.legendItemFocused)).size()>0&&t.expandArc(e))},10);return}var n=t.mapToTargetIds(e);i.svg.selectAll(t.selectorTargets(n,".".concat(W.chartArc))).each(function(o){if(t.shouldExpand(o.data.id)){var s=t.getExpandConfig(o.data.id,"duration"),c=t.getSvgArcExpanded(t.getExpandConfig(o.data.id,"rate"));L(this).selectAll("path").transition().duration(s).attrTween("d",pe(t.svgArcExpanded.bind(t))).transition().duration(s*2).attrTween("d",pe(c.bind(t)))}})},unexpandArc:function(e){var t=this,a=t.state.transiting,i=t.$el.svg;if(!a){var r=t.mapToTargetIds(e);i.selectAll(t.selectorTargets(r,".".concat(W.chartArc))).selectAll("path").transition().duration(function(n){return t.getExpandConfig(n.data.id,"duration")}).attrTween("d",pe(t.svgArc.bind(t))),i.selectAll("".concat(W.arc)).style("opacity",null)}},getExpandConfig:function(e,t){var a=this,i=a.config,r={duration:50,rate:.98},n;return a.isDonutType(e)?n="donut":a.isGaugeType(e)?n="gauge":a.isPieType(e)&&(n="pie"),n?i["".concat(n,"_expand_").concat(t)]:r[t]},shouldExpand:function(e){var t=this,a=t.config;return t.isDonutType(e)&&a.donut_expand||t.isGaugeType(e)&&a.gauge_expand||t.isPieType(e)&&a.pie_expand},shouldShowArcLabel:function(){var e=this,t=e.config;return["donut","gauge","pie","polar"].some(function(a){return e.hasType(a)&&t["".concat(a,"_label_show")]})},getArcLabelFormat:function(){var e=this,t=e.config,a=function(i){return i};return["donut","gauge","pie","polar"].filter(e.hasType.bind(e)).forEach(function(i){a=t["".concat(i,"_label_format")]}),P(a)?a.bind(e.api):a},getArcTitle:function(){var e=this,t=e.hasType("donut")&&"donut"||e.hasType("gauge")&&"gauge";return t?e.config["".concat(t,"_title")]:""},updateTargetsForArc:function(e){var t=this,a=t.$el,i=t.hasType("gauge"),r=t.getChartClass("Arc"),n=t.getClass("arcs",!0),o=t.classFocus.bind(t),s=a.main.select(".".concat(W.chartArcs)),c=s.selectAll(".".concat(W.chartArc)).data(t.pie(e)).attr("class",function(u){return r(u)+o(u.data)}),l=c.enter().append("g").attr("class",r).call(this.setCssRule(!1,".".concat(W.chartArcs," text"),["pointer-events:none","text-anchor:middle"]));l.append("g").attr("class",n).merge(c),l.append("text").attr("dy",i&&!t.hasMultiTargets()?"-.1em":".35em").style("opacity","0").style("text-anchor",t.getStylePropValue("middle")).style("pointer-events",t.getStylePropValue("none")),a.text=s.selectAll(".".concat(z.target," text"))},initArc:function(){var e=this,t=e.$el;t.arcs=t.main.select(".".concat(z.chart)).append("g").attr("class",W.chartArcs).attr("transform",e.getTranslate("arc")),e.setArcTitle()},setArcTitle:function(){var e=this,t=e.getArcTitle(),a=e.hasType("gauge");if(t){var i=e.$el.arcs.append("text").attr("class",a?ft.chartArcsGaugeTitle:W.chartArcsTitle).style("text-anchor","middle");a&&i.attr("dy","-0.3em"),Kt(i,t,a?void 0:[-.6,1.35],!0)}},redrawArc:function(e,t,a){var i=this,r=i.config,n=i.state,o=i.$el.main,s=r.interaction_enabled,c=s&&r.data_selection_isselectable,l=o.selectAll(".".concat(W.arcs)).selectAll(".".concat(W.arc)).data(i.arcData.bind(i));l.exit().transition().duration(t).style("opacity","0").remove(),l=l.enter().append("path").attr("class",i.getClass("arc",!0)).style("fill",function(u){return i.color(u.data)}).style("cursor",function(u){var d;return!((d=c?.bind)===null||d===void 0)&&d.call(c,i.api)(u)?"pointer":null}).style("opacity","0").each(function(u){i.isGaugeType(u.data)&&(u.startAngle=r.gauge_startingAngle,u.endAngle=r.gauge_startingAngle),this._current=u}).merge(l),i.hasType("gauge")&&(i.updateGaugeMax(),i.hasMultiArcGauge()&&i.redrawMultiArcGauge()),l.attr("transform",function(u){return!i.isGaugeType(u.data)&&a?"scale(0)":""}).style("opacity",function(u){return u===this._current?"0":null}).each(function(){n.transiting=!0}).transition().duration(e).attrTween("d",function(u){var d=i.updateAngle(u);if(!d)return function(){return"M 0 0"};isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle);var f=ta(this._current,d);return this._current=f(0),function(v){var g=f(v);return g.data=u.data,i.getArc(g,!0)}}).attr("transform",a?"scale(1)":"").style("fill",function(u){var d;return i.levelColor?(d=i.levelColor(u.data.values[0].value),r.data_colors[u.data.id]=d):d=i.color(u.data),d}).style("opacity",null).call(Re,function(){if(i.levelColor){var u=L(this),d=u.datum();i.updateLegendItemColor(d.data.id,u.style("fill"))}n.transiting=!1,Z(r.onrendered,i.api)}),s&&i.bindArcEvent(l),i.hasType("polar")&&i.redrawPolar(),i.hasType("gauge")&&i.redrawBackgroundArcs(),i.redrawArcText(e)},redrawBackgroundArcs:function(){var e=this,t=e.config,a=e.state,i=e.hasMultiArcGauge(),r=t.gauge_fullCircle,n=e.filterTargetsToShow(e.data.targets).length===0&&!!t.data_empty_label_text,o=e.getStartAngle(),s=r?o+e.getArcLength():o*-1,c=e.$el.arcs.select("".concat(i?"g":"",".").concat(W.chartArcsBackground));if(i){var l=0;c=c.selectAll("path.".concat(W.chartArcsBackground)).data(e.data.targets),c.enter().append("path").attr("class",function(u,d){return"".concat(W.chartArcsBackground," ").concat(W.chartArcsBackground,"-").concat(d)}).merge(c).style("fill",t.gauge_background||null).attr("d",function(u){var d=u.id;if(n||a.hiddenTargetIds.indexOf(d)>=0)return"M 0 0";var f={data:[{value:t.gauge_max}],startAngle:o,endAngle:s,index:l++};return e.getArc(f,!0,!0)}),c.exit().remove()}else c.attr("d",n?"M 0 0":function(){var u={data:[{value:t.gauge_max}],startAngle:o,endAngle:s};return e.getArc(u,!0,!0)})},bindArcEvent:function(e){var t=this,a=t.config,i=t.state,r=i.inputType==="touch",n=i.inputType==="mouse";function o(l,u,d){t.expandArc(d),t.api.focus(d),t.toggleFocusLegend(d,!0),t.showTooltip([u],l)}function s(l){var u=l?.id||void 0;t.unexpandArc(u),t.api.revert(),t.revertLegend(),t.hideTooltip()}if(e.on("click",function(l,u,d){var f,v=t.updateAngle(u),g;v&&(g=t.convertToArcData(v),(f=t.toggleShape)===null||f===void 0||f.call(t,this,g,d),a.data_onclick.bind(t.api)(g,this))}),n&&e.on("mouseover",function(l,u){if(!i.transiting){i.event=l;var d=t.updateAngle(u),f=d?t.convertToArcData(d):null,v=f?.id||void 0;o(this,f,v),t.setOverOut(!0,f)}}).on("mouseout",function(l,u){if(!i.transiting){i.event=l;var d=t.updateAngle(u),f=d?t.convertToArcData(d):null;s(),t.setOverOut(!1,f)}}).on("mousemove",function(l,u){var d=t.updateAngle(u),f=d?t.convertToArcData(d):null;i.event=l,t.showTooltip([f],this)}),r&&t.hasArcType()&&!t.radars){var c=function(l){var u=l.changedTouches[0],d=L(K.elementFromPoint(u.clientX,u.clientY));return d};t.$el.svg.on("touchstart touchmove",function(l){if(!i.transiting){i.event=l;var u=c(l),d=u.datum(),f=d?.data&&d.data.id?t.updateAngle(d):null,v=f?t.convertToArcData(f):null,g=v?.id||void 0;t.callOverOutForTouch(v),nt(g)?s():o(this,v,g)}})}},redrawArcText:function(e){var t=this,a=t.config,i=t.state,r=t.$el,n=r.main,o=r.arcs,s=t.hasType("gauge"),c=t.hasMultiArcGauge(),l;if(s&&t.data.targets.length===1&&a.gauge_title||(l=n.selectAll(".".concat(W.chartArc)).select("text").style("opacity","0").attr("class",function(d){return t.isGaugeType(d.data)?ft.gaugeValue:null}).call(t.textForArcLabel.bind(t)).attr("transform",t.transformForArcLabel.bind(t)).style("font-size",function(d){return t.isGaugeType(d.data)&&t.data.targets.length===1&&!c?"".concat(Math.round(i.radius/5),"px"):null}).transition().duration(e).style("opacity",function(d){return t.isTargetToShow(d.data.id)&&t.isArcType(d.data)?null:"0"}),c&&l.attr("dy","-.1em")),n.select(".".concat(W.chartArcsTitle)).style("opacity",t.hasType("donut")||s?null:"0"),s){var u=a.gauge_fullCircle;u&&l?.attr("dy","".concat(c?0:Math.round(i.radius/14))),a.gauge_label_show&&(o.select(".".concat(ft.chartArcsGaugeUnit)).attr("dy","".concat(u?1.5:.75,"em")).text(a.gauge_units),o.select(".".concat(ft.chartArcsGaugeMin)).attr("dx","".concat(-1*(i.innerRadius+(i.radius-i.innerRadius)/(u?1:2)),"px")).attr("dy","1.2em").text(t.textForGaugeMinMax(a.gauge_min,!1)),!u&&o.select(".".concat(ft.chartArcsGaugeMax)).attr("dx","".concat(i.innerRadius+(i.radius-i.innerRadius)/2,"px")).attr("dy","1.2em").text(t.textForGaugeMinMax(a.gauge_max,!0)))}}},te={initArea:function(e){var t=this,a=t.config;e.insert("g",".".concat(a.area_front?st.circles:wt.lines)).attr("class",t.getClass("areas",!0))},updateAreaColor:function(e){var t=this;return t.config.area_linearGradient?t.getGradienColortUrl(e.id):t.color(e)},updateArea:function(e,t){t===void 0&&(t=!1);var a=this,i=a.config,r=a.state,n=a.$el,o=a.$T,s=t?n.subchart:n;i.area_linearGradient&&a.updateLinearGradient();var c=s.main.selectAll(".".concat(ce.areas)).selectAll(".".concat(ce.area)).data(a.lineData.bind(a));o(c.exit(),e).style("opacity","0").remove(),s.area=c.enter().append("path").attr("class",a.getClass("area",!0)).style("fill",a.updateAreaColor.bind(a)).style("opacity",function(){return r.orgAreaOpacity=L(this).style("opacity"),"0"}).merge(c),c.style("opacity",r.orgAreaOpacity),a.setRatioForGroupedData(s.area.data())},redrawArea:function(e,t,a){a===void 0&&(a=!1);var i=this,r=(a?this.$el.subchart:this.$el).area,n=i.state.orgAreaOpacity;return[i.$T(r,t,Rt()).attr("d",e).style("fill",i.updateAreaColor.bind(i)).style("opacity",function(o){return String(i.isAreaRangeType(o)?n/1.75:n)})]},generateDrawArea:function(e,t){var a=this,i=a.config,r=i.line_connectNull,n=i.axis_rotated,o=a.generateGetAreaPoints(e,t),s=a.getYScaleById.bind(a),c=function(d){return(t?a.subxx:a.xx).call(a,d)},l=function(d,f){return a.isGrouped(d.id)?o(d,f)[0][1]:s(d.id,t)(a.isAreaRangeType(d)?a.getRangedData(d,"high"):a.getShapeYMin(d.id))},u=function(d,f){return a.isGrouped(d.id)?o(d,f)[1][1]:s(d.id,t)(a.isAreaRangeType(d)?a.getRangedData(d,"low"):d.value)};return function(d){var f=r?a.filterRemoveNull(d.values):d.values,v=0,g=0,h;if(a.isAreaType(d)){var p=si();p=n?p.y(c).x0(l).x1(u):p.x(c).y0(i.area_above?0:i.area_below?a.state.height:l).y1(u),r||(p=p.defined(function(x){return a.getBaseValue(x)!==null})),a.isStepType(d)&&(f=a.convertValuesToStep(f)),h=p.curve(a.getCurve(d))(f)}else f[0]&&(v=a.scale.x(f[0].x),g=a.getYScaleById(d.id)(f[0].value)),h=n?"M ".concat(g," ").concat(v):"M ".concat(v," ").concat(g);return h||"M 0 0"}},generateGetAreaPoints:function(e,t){var a=this,i=a.config,r=a.getShapeX(0,e,t),n=a.getShapeY(!!t),o=a.getShapeOffset(a.isAreaType,e,t),s=a.getYScaleById.bind(a);return function(c,l){var u=s.call(a,c.id,t)(a.getShapeYMin(c.id)),d=o(c,l)||u,f=r(c),v=c.value,g=n(c);return i.axis_rotated&&(v>0&&g<u||v<0&&u<g)&&(g=u),[[f,d],[f,g-(u-d)],[f,g-(u-d)],[f,d]]}}},vn={initBar:function(){var e=this,t=e.$el,a=e.config,i=e.state.clip;t.bar=t.main.select(".".concat(z.chart)).insert("g",":first-child").attr("class",xt.chartBars).call(this.setCssRule(!1,".".concat(xt.chartBars),["pointer-events:none"])),a.clipPath===!1&&(a.bar_radius||a.bar_radius_ratio)&&t.bar.attr("clip-path",i.pathXAxis.replace(/#[^)]*/,"#".concat(i.id)))},updateTargetsForBar:function(e){var t=this,a=t.config,i=t.$el,r=t.getChartClass("Bar"),n=t.getClass("bars",!0),o=t.classFocus.bind(t),s=a.interaction_enabled&&a.data_selection_isselectable;i.bar||t.initBar();var c=i.main.select(".".concat(xt.chartBars)).selectAll(".".concat(xt.chartBar)).data(e.filter(function(u){return u.values.some(function(d){return k(d.value)||t.isBarRangeType(d)})})).attr("class",function(u){return r(u)+o(u)}),l=c.enter().append("g").attr("class",r).style("opacity","0").style("pointer-events",t.getStylePropValue("none"));l.append("g").attr("class",n).style("cursor",function(u){var d;return!((d=s?.bind)===null||d===void 0)&&d.call(s,t.api)(u)?"pointer":null}).call(t.setCssRule(!0," .".concat(xt.bar),["fill"],t.color))},updateBar:function(e,t){t===void 0&&(t=!1);var a=this,i=a.config,r=a.$el,n=a.$T,o=t?r.subchart:r,s=a.getClass("bar",!0),c=a.initialOpacity.bind(a);i.bar_linearGradient&&a.updateLinearGradient();var l=o.main.selectAll(".".concat(xt.bars)).selectAll(".".concat(xt.bar)).data(a.labelishData.bind(a));n(l.exit(),e).style("opacity","0").remove(),o.bar=l.enter().append("path").attr("class",s).style("fill",a.updateBarColor.bind(a)).merge(l).style("opacity",c),a.setRatioForGroupedData(o.bar.data())},updateBarColor:function(e){var t=this,a=t.getStylePropValue(t.color);return t.config.bar_linearGradient?t.getGradienColortUrl(e.id):a?a(e):null},redrawBar:function(e,t,a){a===void 0&&(a=!1);var i=this,r=(a?i.$el.subchart:i.$el).bar;return[i.$T(r,t,Rt()).attr("d",function(n){return(k(n.value)||i.isBarRangeType(n))&&e(n)}).style("fill",i.updateBarColor.bind(i)).style("opacity",null)]},generateDrawBar:function(e,t){var a=this,i=a.config,r=a.generateGetBarPoints(e,t),n=i.axis_rotated,o=i.bar_radius,s=i.bar_radius_ratio,c=k(o)&&o>0?function(){return o}:k(s)?function(l){return l*s}:null;return function(l,u){var d=r(l,u),f=+n,v=+!f,g=l.value<0,h=i["axis_".concat(a.axis.getId(l.id),"_inverted")],p=!h&&g||h&&!g,x=["",""],m=0,_=a.isGrouped(l.id),y=c&&_?a.isStackingRadiusData(l):!1;if(c){var b=n?v:f,T=d[2][b]-d[0][b];m=!_||y?c(T):0;var $="a".concat(m,",").concat(m," ").concat(p?"1 0 0":"0 0 1"," ");x[+!n]="".concat($).concat(m,",").concat(m),x[+n]="".concat($).concat([-m,m][n?"sort":"reverse"]()),p&&x.reverse()}var A=n?"H".concat(d[1][f]+(p?m:-m)," ").concat(x[0],"V").concat(d[2][v]-m," ").concat(x[1],"H").concat(d[3][f]):"V".concat(d[1][v]+(p?-m:m)," ").concat(x[0],"H").concat(d[2][f]-m," ").concat(x[1],"V").concat(d[3][v]);return"M".concat(d[0][f],",").concat(d[0][v]).concat(A,"z")}},isStackingRadiusData:function(e){var t=this,a=t.$el,i=t.config,r=t.data,n=t.state,o=e.id,s=e.index,c=e.value;if(n.hiddenTargetIds.indexOf(o)>-1){var l=a.bar.filter(function(v){return v.id===o&&v.value===c});return!l.empty()&&/a\d+/i.test(l.attr("d"))}var u=i.data_groups.find(function(v){return v.indexOf(o)>-1}),d=t.orderTargets(t.filterTargetsToShow(r.targets.filter(t.isBarType,t))).filter(function(v){return u.indexOf(v.id)>-1}),f=d.map(function(v){return v.values.filter(function(g){return g.index===s&&(k(c)&&c>0?g.value>0:g.value<0)})[0]}).filter(Boolean).map(function(v){return v.id});return c!==0&&f.indexOf(o)===f.length-1},generateGetBarPoints:function(e,t){var a=this,i=a.config,r=t?a.axis.subX:a.axis.x,n=a.getIndicesMax(e)+1,o=a.getBarW("bar",r,n),s=a.getShapeX(o,e,!!t),c=a.getShapeY(!!t),l=a.getShapeOffset(a.isBarType,e,!!t),u=a.getYScaleById.bind(a);return function(d,f){var v=d.id,g=u.call(a,v,t)(a.getShapeYMin(v)),h=l(d,f)||g,p=k(o)?o:o[d.id]||o._$width,x=i["axis_".concat(a.axis.getId(v),"_inverted")],m=d.value,_=s(d),y=c(d);i.axis_rotated&&!x&&(m>0&&y<g||m<0&&g<y)&&(y=g),a.isBarRangeType(d)||(y-=g-h);var b=_+p;return[[_,h],[_,y],[b,y],[b,h]]}}},gn={initCandlestick:function(){var e=this.$el;e.candlestick=e.main.select(".".concat(z.chart)).append("g").attr("class",At.chartCandlesticks)},updateTargetsForCandlestick:function(e){var t=this,a=t.$el,i=t.getChartClass("Candlestick"),r=t.classFocus.bind(t);a.candlestick||t.initCandlestick();var n=t.$el.main.select(".".concat(At.chartCandlesticks)).selectAll(".".concat(At.chartCandlestick)).data(e).attr("class",function(o){return i(o)+r(o)});n.enter().append("g").attr("class",i).style("pointer-events","none")},updateCandlestick:function(e,t){t===void 0&&(t=!1);var a=this,i=a.$el,r=a.$T,n=t?i.subchart:i,o=a.getClass("candlestick",!0),s=a.initialOpacity.bind(a),c=n.main.selectAll(".".concat(At.chartCandlestick)).selectAll(".".concat(At.candlestick)).data(a.labelishData.bind(a));r(c.exit(),e).style("opacity","0").remove();var l=c.enter().filter(function(u){return u.value}).append("g").attr("class",o);l.append("line"),l.append("path"),n.candlestick||(n.candlestick={}),n.candlestick=c.merge(l).style("opacity",s)},generateDrawCandlestick:function(e,t){var a=this,i=a.config,r=a.generateGetCandlestickPoints(e,t),n=i.axis_rotated,o=i.candlestick_color_down;return function(s,c,l){var u=r(s,c),d=a.getCandlestickData(s),f=d?._isUp,v=+n,g=+!v;l.classed&&l.classed(At[f?"valueUp":"valueDown"],!0);var h=n?"H".concat(u[1][1]," V").concat(u[1][0]," H").concat(u[0][1]):"V".concat(u[1][1]," H").concat(u[1][0]," V").concat(u[0][1]);l.select("path").attr("d","M".concat(u[0][v],",").concat(u[0][g]).concat(h,"z")).style("fill",function(_){var y=f?a.color(_):X(o)?o[_.id]:o;return y||a.color(_)});var p=l.select("line"),x=n?{x1:u[2][1],x2:u[2][2],y1:u[2][0],y2:u[2][0]}:{x1:u[2][0],x2:u[2][0],y1:u[2][1],y2:u[2][2]};for(var m in x)p.attr(m,x[m])}},generateGetCandlestickPoints:function(e,t){t===void 0&&(t=!1);var a=this,i=a.config,r=t?a.axis.subX:a.axis.x,n=a.getIndicesMax(e)+1,o=a.getBarW("candlestick",r,n),s=a.getShapeX(o,e,!!t),c=a.getShapeY(!!t),l=a.getShapeOffset(a.isBarType,e,!!t),u=a.getYScaleById.bind(a);return function(d,f){var v=u.call(a,d.id,t)(a.getShapeYMin(d.id)),g=l(d,f)||v,h=k(o)?o:o[d.id]||o._$width,p=a.getCandlestickData(d),x;if(p){var m={start:s(d),end:0};m.end=m.start+h;var _={start:c(p.open),end:c(p.close)},y={x:m.start+h/2,high:c(p.high),low:c(p.low)};i.axis_rotated&&(d.value>0&&_.start<v||d.value<0&&v<_.start)&&(_.start=v),_.start-=v-g,x=[[m.start,_.start],[m.end,_.end],[y.x,y.low,y.high]]}else x=[[0,0],[0,0],[0,0,0]];return x}},redrawCandlestick:function(e,t,a){a===void 0&&(a=!1);var i=this,r=i.$el,n=i.$T,o=(a?r.subchart:r).candlestick,s=Rt(!0);return[o.each(function(c,l){var u=n(L(this),t,s);e(c,l,u)}).style("opacity",null)]},getCandlestickData:function(e){var t=e.value,a;if(N(t)){var i=t[0],r=t[1],n=t[2],o=t[3],s=t[4],c=s===void 0?!1:s;a={open:i,high:r,low:n,close:o},c!==!1&&(a.volume=c)}else X(t)&&(a=D({},t));return a&&(a._isUp=a.close>=a.open),a||null}},hn={initGauge:function(){var e=this,t=e.config,a=e.$el.arcs,i=function(n){a.append("text").attr("class",n).style("text-anchor","middle").style("pointer-events","none")};if(e.hasType("gauge")){var r=e.hasMultiArcGauge();a.append(r?"g":"path").attr("class",W.chartArcsBackground).style("fill",!r&&t.gauge_background||null),t.gauge_units&&i(ft.chartArcsGaugeUnit),t.gauge_label_show&&(i(ft.chartArcsGaugeMin),!t.gauge_fullCircle&&i(ft.chartArcsGaugeMax))}},updateGaugeMax:function(){var e=this,t=e.config,a=e.state,i=e.hasMultiArcGauge(),r=i?e.getMinMaxData().max[0].value:e.getTotalDataSum(a.rendered);r+t.gauge_min*(t.gauge_min>0?-1:1)>t.gauge_max&&(t.gauge_max=r-t.gauge_min)},redrawMultiArcGauge:function(){var e=this,t=e.config,a=e.state,i=e.$el,r=e.state.hiddenTargetIds,n=i.main.selectAll(".".concat(W.arcs)).selectAll(".".concat(W.arcLabelLine)).data(e.arcData.bind(e)),o=n.enter().append("rect").attr("class",function(s){return"".concat(W.arcLabelLine," ").concat(z.target," ").concat(z.target,"-").concat(s.data.id)}).merge(n);o.style("fill",function(s){return e.levelColor?e.levelColor(s.data.values[0].value):e.color(s.data)}).style("display",t.gauge_label_show?null:"none").each(function(s){var c=0,l=2,u=0,d=0,f="";if(r.indexOf(s.data.id)<0){var v=e.updateAngle(s),g=a.gaugeArcWidth/e.filterTargetsToShow(e.data.targets).length*(v.index+1),h=v.endAngle-Math.PI/2,p=a.radius-g,x=h-(p===0?0:1/p);c=a.radiusExpanded-a.radius+g,u=Math.cos(x)*p,d=Math.sin(x)*p,f="rotate(".concat(h*180/Math.PI,", ").concat(u,", ").concat(d,")")}L(this).attr("x",u).attr("y",d).attr("width",c).attr("height",l).attr("transform",f).style("stroke-dasharray","0, ".concat(c+l,", 0"))})},textForGaugeMinMax:function(e,t){var a=this,i=a.config,r=i.gauge_label_extents;return P(r)?r.bind(a.api)(e,t):e},getGaugeLabelHeight:function(){var e=this.config;return this.config.gauge_label_show&&!e.gauge_fullCircle?20:0},getPaddingBottomForGauge:function(){var e=this;return e.getGaugeLabelHeight()*(e.config.gauge_label_show?2:2.5)}},pn={initBubble:function(){var e=this,t=e.config;e.hasType("bubble")&&(t.point_show=!0,t.point_type="circle",t.point_sensitivity=25)},getBaseLength:function(){var e=this,t=e.state,a=t.width,i=t.height,r=gt.bubbleBaseLength,n=e.cache.get(r);return n||e.cache.add(r,n=mt("min",[a,i])),n},getBubbleR:function(e){var t=this,a=t.config.bubble_maxR;P(a)?a=a.bind(t.api)(e):k(a)||(a=t.getBaseLength()/(t.getMaxDataCount()*2)+12);var i=mt("max",t.getMinMaxData().max.map(function(o){return t.isBubbleZType(o)?t.getBubbleZData(o.value,"y"):X(o.value)?o.value.mid:o.value})),r=a*a*Math.PI,n=(t.isBubbleZType(e)?t.getBubbleZData(e.value,"z"):e.value)*(r/i);return Math.sqrt(n/Math.PI)},getBubbleZData:function(e,t){return X(e)?e[t]:e[t==="y"?0:1]}},xn={initLine:function(){var e=this.$el;e.line=e.main.select(".".concat(z.chart)).append("g").attr("class",wt.chartLines).call(this.setCssRule(!1,".".concat(wt.chartLines),["pointer-events:none"]))},updateTargetsForLine:function(e){var t=this,a=t.$el,i=a.area,r=a.line,n=a.main,o=t.getChartClass("Line"),s=t.getClass("lines",!0),c=t.classFocus.bind(t);r||t.initLine();var l=e.filter(function(v){return!(t.isScatterType(v)||t.isBubbleType(v))}),u=n.select(".".concat(wt.chartLines)).selectAll(".".concat(wt.chartLine)).data(l).attr("class",function(v){return o(v)+c(v)}),d=u.enter().append("g").attr("class",o).style("opacity","0").style("pointer-events",t.getStylePropValue("none"));if(d.append("g").attr("class",s),t.hasTypeOf("Area")){var f=(!i&&d.empty()?u:d).filter(t.isAreaType.bind(t));t.initArea(f)}t.updateTargetForCircle(l,d)},updateLine:function(e,t){t===void 0&&(t=!1);var a=this,i=a.format.extraLineClasses,r=a.$el,n=a.$T,o=t?r.subchart:r,s=o.main.selectAll(".".concat(wt.lines)).selectAll(".".concat(wt.line)).data(a.lineData.bind(a));n(s.exit(),e).style("opacity","0").remove(),o.line=s.enter().append("path").attr("class",function(c){return"".concat(a.getClass("line",!0)(c)," ").concat(i(c)||"")}).style("stroke",a.color).merge(s).style("opacity",a.initialOpacity.bind(a)).style("shape-rendering",function(c){return a.isStepType(c)?"crispEdges":""}).attr("transform",null)},redrawLine:function(e,t,a){a===void 0&&(a=!1);var i=this,r=i.$el,n=i.$T,o=(a?r.subchart:r).line;return[n(o,t,Rt()).attr("d",e).style("stroke",this.color).style("opacity",null)]},getCurve:function(e){var t=this,a=t.config.axis_rotated&&t.isStepType(e);return a?function(i){var r=t.getInterpolate(e)(i);return r.orgPoint=r.point,r.pointRotated=function(n,o){this._point===1&&(this._point=2);var s=this._y*(1-this._t)+o*this._t;this._context.lineTo(this._x,s),this._context.lineTo(n,s),this._x=n,this._y=o},r.point=function(n,o){this._point===0?this.orgPoint(n,o):this.pointRotated(n,o)},r}:t.getInterpolate(e)},generateDrawLine:function(e,t){var a=this,i=a.config,r=a.scale,n=i.line_connectNull,o=i.axis_rotated,s=a.generateGetLinePoints(e,t),c=a.getYScaleById.bind(a),l=function(v){return(t?a.subxx:a.xx).call(a,v)},u=function(v,g){return a.isGrouped(v.id)?s(v,g)[0][1]:c(v.id,t)(a.getBaseValue(v))},d=ci();d=o?d.x(u).y(l):d.x(l).y(u),n||(d=d.defined(function(v){return a.getBaseValue(v)!==null}));var f=t?r.subX:r.x;return function(v){var g=c(v.id,t),h=n?a.filterRemoveNull(v.values):v.values,p=0,x=0,m;if(a.isLineType(v)){var _=i.data_regions[v.id];_?m=a.lineWithRegions(h,r.zoom||f,g,_):(a.isStepType(v)&&(h=a.convertValuesToStep(h)),m=d.curve(a.getCurve(v))(h))}else h[0]&&(p=f(h[0].x),x=g(h[0].value)),m=o?"M ".concat(x," ").concat(p):"M ".concat(p," ").concat(x);return m||"M 0 0"}},lineWithRegions:function(e,t,a,i){var r=this,n=r.config,o=n.axis_rotated,s=r.axis.isTimeSeries(),c=[],l="2 2",u,d,f,v;if(G(i))for(var g=function(B,vt){return nt(B)?vt:s?_t.call(r,B):B},h=0,p=void 0;p=i[h];h++){var x=g(p.start,e[0].x),m=g(p.end,e[e.length-1].x),_=p.style||{dasharray:l};c[h]={start:x,end:m,style:_}}for(var y=o?function(B){return a(B.value)}:function(B){return t(B.x)},b=o?function(B){return t(B.x)}:function(B){return a(B.value)},T=function(B){return"M".concat(B[0][0],",").concat(B[0][1],"L").concat(B[1][0],",").concat(B[1][1])},$=s?function(B,vt,et,dt){var yt=B.x.getTime(),Ot=vt.x-B.x,Nt=new Date(yt+Ot*et),Y=new Date(yt+Ot*(et+dt)),bt=o?[[a(d(et)),t(Nt)],[a(d(et+f)),t(Y)]]:[[t(Nt),a(d(et))],[t(Y),a(d(et+f))]];return T(bt)}:function(B,vt,et,dt){var yt=o?[[a(d(et),!0),t(u(et))],[a(d(et+dt),!0),t(u(et+dt))]]:[[t(u(et),!0),a(d(et))],[t(u(et+dt),!0),a(d(et+dt))]];return T(yt)},A={x:r.axis.getAxisType("x"),y:r.axis.getAxisType("y")},R="",h=0,w=void 0;w=e[h];h++){var I=e[h-1],q=I&&O(I.value),_=r.isWithinRegions(w.x,c);if(O(w.value)){if(nt(c)||!_||!q)R+="".concat(h&&q?"L":"M").concat(y(w),",").concat(b(w));else if(q){try{_=_.dasharray.split(" ")}catch{_=l.split(" ")}u=Mt(A.x,I.x,w.x),d=Mt(A.y,I.value,w.value);var C=t(w.x)-t(I.x),E=a(w.value)-a(I.value),tt=Math.sqrt(Math.pow(C,2)+Math.pow(E,2));f=_[0]/tt,v=f*_[1];for(var rt=f;rt<=1;rt+=v)R+=$(I,w,rt,f),rt+v>=1&&(R+=$(I,w,1,0))}}}return R},isWithinRegions:function(e,t){for(var a=0,i=void 0;i=t[a];a++)if(i.start<e&&e<=i.end)return i.style;return!1},isWithinStep:function(e,t){return Math.abs(t-ht(this.state.event,e)[1])<30},shouldDrawPointsForLine:function(e){var t=this.config.line_point;return t===!0||N(t)&&t.indexOf(e.id)!==-1}},Gt=function(){return Rt()},le={hasValidPointType:function(e){return/^(circle|rect(angle)?|polygon|ellipse|use)$/i.test(e||this.config.point_type)},hasValidPointDrawMethods:function(e){var t=e||this.config.point_type;return Tt(t)&&P(t.create)&&P(t.update)},initialOpacityForCircle:function(e){var t=this,a=t.config,i=t.state.withoutFadeIn,r=a.point_opacity;return nt(r)&&(r=this.getBaseValue(e)!==null&&i[e.id]?this.opacityForCircle(e):"0"),r},opacityForCircle:function(e){var t=this.config,a=t.point_opacity;return nt(a)&&(a=t.point_show&&!t.point_focus_only?null:"0",a=O(this.getBaseValue(e))?this.isBubbleType(e)||this.isScatterType(e)?"0.5":a:"0"),a},initCircle:function(){var e=this,t=e.$el.main;e.point=e.generatePoint(),(e.hasType("bubble")||e.hasType("scatter"))&&t.select(".".concat(st.chartCircles)).empty()&&t.select(".".concat(z.chart)).append("g").attr("class",st.chartCircles)},updateTargetForCircle:function(e,t){var a=this,i=this,r=i.config,n=i.data,o=i.$el,s=r.interaction_enabled&&r.data_selection_enabled,c=s&&r.data_selection_isselectable,l=i.getClass("circles",!0);if(r.point_show){!o.circle&&i.initCircle();var u=e,d=t;if(!u){u=n.targets.filter(function(v){return a.isScatterType(v)||a.isBubbleType(v)});var f=o.main.select(".".concat(st.chartCircles)).style("pointer-events","none").selectAll(".".concat(st.circles)).data(u);f.exit().remove(),d=f.enter()}s&&d.append("g").attr("class",function(v){return i.generateClass(j.selectedCircles,v.id)}),d.append("g").attr("class",l).call(function(v){i.setCssRule(!0,".".concat(st.circles),["cursor:pointer"],c)(v),i.setCssRule(!0," .".concat(st.circle),["fill","stroke"],i.color)(v)}).style("opacity",function(){var v=L(this.parentNode);return v.attr("class").indexOf(st.chartCircles)>-1?"0":null}),s&&u.forEach(function(v){o.main.selectAll(".".concat(j.selectedCircles).concat(i.getTargetSelectorSuffix(v.id))).selectAll("".concat(j.selectedCircle)).each(function(g){g.value=v.values[g.index].value})})}},updateCircle:function(e){e===void 0&&(e=!1);var t=this,a=t.config,i=t.state,r=t.$el,n=a.point_focus_only,o=e?r.subchart:r;if(a.point_show&&!i.toggling){var s=o.main.selectAll(".".concat(st.circles)).selectAll(".".concat(st.circle)).data(function(c){return t.isLineType(c)&&t.shouldDrawPointsForLine(c)||t.isBubbleType(c)||t.isRadarType(c)||t.isScatterType(c)?n?[c.values[0]]:c.values:[]});s.exit().remove(),s.enter().filter(Boolean).append(t.point("create",this,t.pointR.bind(t),t.getStylePropValue(t.color))),o.circle=o.main.selectAll(".".concat(st.circles," .").concat(st.circle)).style("stroke",t.getStylePropValue(t.color)).style("opacity",t.initialOpacityForCircle.bind(t))}},redrawCircle:function(e,t,a,i,r){r===void 0&&(r=!1);var n=this,o=n.state.rendered,s=n.$el,c=n.$T,l=r?s.subchart:s,u=l.main.selectAll(".".concat(j.selectedCircle));if(!n.config.point_show)return[];var d=n.point("update",n,e,t,n.getStylePropValue(n.color),a,i,u),f=n.isCirclePoint()?"c":"",v=Rt(),g=n.opacityForCircle.bind(n),h=[];return l.circle.each(function(p){var x=d.bind(this)(p);x=c(x,a||!o,v).style("opacity",g),h.push(x)}),[h,c(u,a).attr("".concat(f,"x"),e).attr("".concat(f,"y"),t)]},showCircleFocus:function(e){var t=this,a=t.config,i=t.state,r=i.hasRadar,n=i.resizing,o=i.toggling,s=i.transiting,c=t.$el,l=c.circle;if(s===!1&&a.point_focus_only&&l){var u=(r?t.radarCircleX:t.circleX).bind(t),d=(r?t.radarCircleY:t.circleY).bind(t),f=o||nt(e),v=t.point("update",t,u,d,t.getStylePropValue(t.color),n?!1:f);e&&(l=l.filter(function(g){var h,p=(h=e.filter)===null||h===void 0?void 0:h.call(e,function(x){return x.id===g.id});return p.length?L(this).datum(p[0]):!1})),l.attr("class",this.updatePointClass.bind(this)).style("opacity",null).each(function(g){var h=g.id,p=g.index,x=g.value,m="hidden";O(x)&&(v.bind(this)(g),t.expandCircles(p,h),m=""),this.style.visibility=m})}},hideCircleFocus:function(){var e=this,t=e.config,a=e.$el.circle;t.point_focus_only&&a&&(e.unexpandCircles(),a.style("visibility","hidden"))},circleX:function(e){return this.xx(e)},updateCircleY:function(e){e===void 0&&(e=!1);var t=this,a=t.generateGetLinePoints(t.getShapeIndices(t.isLineType),e);return function(i,r){var n=i.id;return t.isGrouped(n)?a(i,r)[0][1]:t.getYScaleById(n,e)(t.getBaseValue(i))}},expandCircles:function(e,t,a){var i=this,r=i.pointExpandedR.bind(i);a&&i.unexpandCircles();var n=i.getShapeByIndex("circle",e,t).classed(z.EXPANDED,!0),o=r(n)/i.config.point_r,s=1-o;i.isCirclePoint()?n.attr("r",r):n.each(function(){var c=L(this);if(this.tagName==="circle")c.attr("r",r);else{var l=this.getBBox(),u=l.width,d=l.height,f=s*(+c.attr("x")+u/2),v=s*(+c.attr("y")+d/2);c.attr("transform","translate(".concat(f," ").concat(v,") scale(").concat(o,")"))}})},unexpandCircles:function(e){var t=this,a=t.pointR.bind(t),i=t.getShapeByIndex("circle",e).filter(function(){return L(this).classed(z.EXPANDED)}).classed(z.EXPANDED,!1);if(i.attr("r",a),!t.isCirclePoint()){var r=a(i)/t.config.point_r;i.attr("transform",r!==1?"scale(".concat(r,")"):null)}},pointR:function(e){var t=this,a=t.config,i=a.point_r,r=i;return t.isBubbleType(e)?r=t.getBubbleR(e):P(i)&&(r=i.bind(t.api)(e)),r},pointExpandedR:function(e){var t=this,a=t.config,i=t.isBubbleType(e)?1.15:1.75;return a.point_focus_expand_enabled?a.point_focus_expand_r||t.pointR(e)*i:t.pointR(e)},pointSelectR:function(e){var t=this,a=t.config.point_select_r;return P(a)?a(e):a||t.pointR(e)*4},isWithinCircle:function(e,t){var a=ht(this.state.event,e),i=L(e),r=this.isCirclePoint(e)?"c":"",n=+i.attr("".concat(r,"x")),o=+i.attr("".concat(r,"y"));if(!(n||o)&&e.nodeType===1){var s=qt(e),c=s.x,l=s.y;n=c,o=l}return Math.sqrt(Math.pow(n-a[0],2)+Math.pow(o-a[1],2))<(t||this.config.point_sensitivity)},insertPointInfoDefs:function(e,t){var a,i=this,r=function(l,u){for(var d=l.attributes,f=0,v;v=d[f];f++)v=v.name,u.setAttribute(v,l.getAttribute(v))},n=new DOMParser().parseFromString(e,"image/svg+xml"),o=n.documentElement,s=K.createElementNS(se.svg,o.nodeName.toLowerCase());if(s.id=t,s.style.fill="inherit",s.style.stroke="inherit",r(o,s),!((a=o.childNodes)===null||a===void 0)&&a.length){var c=L(s);"innerHTML"in s?c.html(o.innerHTML):kt(o.childNodes).forEach(function(l){r(l,c.append(l.tagName).node())})}i.$el.defs.node().appendChild(s)},pointFromDefs:function(e){return this.$el.defs.select("#".concat(e))},updatePointClass:function(e){var t=this,a=t.$el.circle,i=!1;return(X(e)||a)&&(i=e===!0?a.each(function(r){var n=t.getClass("circle",!0)(r);this.getAttribute("class").indexOf(z.EXPANDED)>-1&&(n+=" ".concat(z.EXPANDED)),this.setAttribute("class",n)}):t.getClass("circle",!0)(e)),i},generateGetLinePoints:function(e,t){var a=this,i=a.config,r=a.getShapeX(0,e,t),n=a.getShapeY(t),o=a.getShapeOffset(a.isLineType,e,t),s=a.getYScaleById.bind(a);return function(c,l){var u=s.call(a,c.id,t)(a.getShapeYMin(c.id)),d=o(c,l)||u,f=r(c),v=n(c);i.axis_rotated&&(c.value>0&&v<u||c.value<0&&u<v)&&(v=u);var g=[f,v-(u-d)];return[g,g,g,g]}},generatePoint:function(){var e=this,t=e.config,a=e.state.datetimeId,i=[],r=J(t.point_pattern)?t.point_pattern:[t.point_type];return function(n,o){for(var s=[],c=2;c<arguments.length;c++)s[c-2]=arguments[c];return function(l){var u,d=e.getTargetSelectorSuffix(l.id||((u=l.data)===null||u===void 0?void 0:u.id)||l),f=L(this);i.indexOf(d)<0&&i.push(d);var v=r[i.indexOf(d)%r.length];if(e.hasValidPointType(v))v=e[v];else if(!e.hasValidPointDrawMethods(v)){var g="".concat(a,"-point").concat(d),h=e.pointFromDefs(g);if(h.size()<1&&e.insertPointInfoDefs(v,g),n==="create")return e.custom.create.bind(o).apply(void 0,ct([f,g],s,!1));if(n==="update")return e.custom.update.bind(o).apply(void 0,ct([f],s,!1))}return v[n].bind(o).apply(void 0,ct([f],s,!1))}}},custom:{create:function(e,t,a){return e.append("use").attr("xlink:href","#".concat(t)).attr("class",this.updatePointClass.bind(this)).style("fill",a).node()},update:function(e,t,a,i,r,n,o){var s=this,c=e.node().getBBox(),l=c.width,u=c.height,d=function(g){return O(g.value)?t(g)-l/2:0},f=function(g){return O(g.value)?a(g)-u/2:0},v=e;return r&&(n&&v.attr("x",d),v=s.$T(v,r,Gt()),o&&s.$T(o,r,Gt())),v.attr("x",d).attr("y",f).style("fill",i)}},circle:{create:function(e,t,a){return e.append("circle").attr("class",this.updatePointClass.bind(this)).attr("r",t).style("fill",a).node()},update:function(e,t,a,i,r,n,o){var s=this,c=e;return s.hasType("bubble")&&c.attr("r",s.pointR.bind(s)),r&&(n&&c.attr("cx",t),c.attr("cx")&&(c=s.$T(c,r,Gt())),o&&s.$T(c,r,Gt())),c.attr("cx",t).attr("cy",a).style("fill",i)}},rectangle:{create:function(e,t,a){var i=function(r){return t(r)*2};return e.append("rect").attr("class",this.updatePointClass.bind(this)).attr("width",i).attr("height",i).style("fill",a).node()},update:function(e,t,a,i,r,n,o){var s=this,c=s.config.point_r,l=function(f){return t(f)-c},u=function(f){return a(f)-c},d=e;return r&&(n&&d.attr("x",l),d=s.$T(d,r,Gt()),o&&s.$T(o,r,Gt())),d.attr("x",l).attr("y",u).style("fill",i)}}};function je(e){var t=e.config.polar_level_max,a=e.getMinMaxData().max[0].value;return t&&t>a&&(a=t),a}var mn={initPolar:function(){var e=this,t=e.$el.arcs,a=e.config,i=a.polar_level_text_show,r=a.polar_level_text_backgroundColor;t.levels=t.append("g").attr("class",Et.levels),i&&r&&e.generateDataLabelBackgroundColorFilter(r)},getPolarOuterRadius:function(e,t){var a,i=je(this);return((a=e?.data.values[0].value)!==null&&a!==void 0?a:0)/i*t},updateTargetsForPolar:function(e){this.updateTargetsForArc(e)},redrawPolar:function(){var e=this,t=e.config;t.polar_level_show&&e.updatePolarLevel()},updatePolarLevel:function(){var e=this,t=e.config,a=e.state,i=e.$el.arcs.levels,r=t.polar_level_depth,n=je(e),o=ne(0,r),s=a.radius,c=o.map(function(g){return s*((g+1)/r)}),l=(t.polar_level_text_format||function(){}).bind(e.api),u=i.selectAll(".".concat(Et.level)).data(o);u.exit().remove();var d=u.enter().append("g").attr("class",function(g,h){return"".concat(Et.level," ").concat(Et.level,"-").concat(h)});if(d.append("circle"),d.merge(u).selectAll("circle").style("visibility",t.polar_level_show?null:"hidden").attr("cx",0).attr("cy",0).attr("r",function(g){return c[g]}),t.polar_level_text_show){var f=t.polar_level_text_backgroundColor,v="#".concat(a.datetimeId,"-labels-bg").concat(e.getTargetSelectorSuffix(f));d.append("text").style("text-anchor","middle"),d.merge(u).selectAll("text").attr("dy",function(g){return-c[g]+5}).attr("filter",f?"url(".concat(v,")"):null).text(function(g){return l(n/o.length*(g+1))})}}};function _n(e,t,a,i,r,n){var o=e&&i>0?a-i:i,s=2*Math.PI,c=t==="x"?Math.sin:Math.cos;return r*(1-n*c(o*s/a))}var Vt=gt.radarPoints,yn={initRadar:function(){var e=this,t=e.config,a=e.state.current,i=e.$el;e.hasType("radar")&&(i.radar=i.main.select(".".concat(z.chart)).append("g").attr("class",ua.chartRadars),i.radar.levels=i.radar.append("g").attr("class",Et.levels),i.radar.axes=i.radar.append("g").attr("class",at.axis),i.radar.shapes=i.radar.append("g").attr("class",it.shapes),a.dataMax=t.radar_axis_max||e.getMinMaxData().max[0].value)},getRadarSize:function(){var e=this,t=e.config,a=e.state,i=a.arcWidth,r=a.arcHeight,n=t.axis_x_categories.length<4?-20:10,o=(Math.min(i,r)-n)/2;return[o,o]},updateTargetsForRadar:function(e){var t=this,a=t.config;Ft(a.axis_x_categories)&&(a.axis_x_categories=ne(0,mt("max",e.map(function(i){return i.values.length})))),t.generateRadarPoints()},getRadarPosition:function(e,t,a,i){var r=this,n=r.config,o=r.getRadarSize(),s=o[0],c=o[1],l=n.axis_x_categories.length,u=n.radar_direction_clockwise,d=kt(e).map(function(f){return _n(u,f,l,t,G(a)?a:e==="x"?s:c,k(i)?i:n.radar_size_ratio)});return d.length===1?d[0]:d},generateRadarPoints:function(){var e=this,t=e.data.targets,a=e.getRadarSize(),i=a[0],r=a[1],n=e.cache.get(Vt)||{},o=n._size;(!o||o.width!==i&&o.height!==r)&&(t.forEach(function(s){n[s.id]=s.values.map(function(c,l){return e.getRadarPosition(["x","y"],l,void 0,e.getRatio("radar",c))})}),n._size={width:i,height:r},e.cache.add(Vt,n))},redrawRadar:function(){var e=this,t=e.$el,a=t.radar,i=t.main,r=e.getTranslate("radar");r&&(a.attr("transform",r),i.select(".".concat(lt.chartTexts)).attr("transform",r),e.generateRadarPoints(),e.updateRadarLevel(),e.updateRadarAxes(),e.updateRadarShape())},generateGetRadarPoints:function(){var e=this.cache.get(Vt);return function(t,a){var i=e[t.id][a];return[i,i,i,i]}},updateRadarLevel:function(){var e=this,t=e.config,a=e.state,i=e.$el.radar,r=e.getRadarSize(),n=r[0],o=r[1],s=t.radar_level_depth,c=t.axis_x_categories.length,l=t.radar_level_text_show,u=i.levels,d=ne(0,s),f=t.radar_size_ratio*Math.min(n,o),v=d.map(function(m){return f*((m+1)/s)}),g=(t.radar_level_text_format||function(){}).bind(e.api),h=d.map(function(m){var _=v[m],y=ne(0,c).map(function(b){return e.getRadarPosition(["x","y"],b,_,1).join(",")});return y.join(" ")}),p=u.selectAll(".".concat(Et.level)).data(d);p.exit().remove();var x=p.enter().append("g").attr("class",function(m,_){return"".concat(Et.level," ").concat(Et.level,"-").concat(_)});x.append("polygon").style("visibility",t.radar_level_show?null:"hidden"),l&&(u.select("text").empty()&&u.append("text").attr("dx","-.5em").attr("dy","-.7em").style("text-anchor","end").text(function(){return g(0)}),x.append("text").attr("dx","-.5em").style("text-anchor","end").text(function(m){return g(a.current.dataMax/d.length*(m+1))})),x.merge(p).attr("transform",function(m){return"translate(".concat(n-v[m],", ").concat(o-v[m],")")}).selectAll("polygon").attr("points",function(m){return h[m]}),l&&u.selectAll("text").attr("x",function(m){return nt(m)?n:h[m].split(",")[0]}).attr("y",function(m){return nt(m)?o:0})},updateRadarAxes:function(){var e=this,t=e.config,a=e.$el.radar,i=e.getRadarSize(),r=i[0],n=i[1],o=t.axis_x_categories,s=a.axes.selectAll("g").data(o);s.exit().remove();var c=s.enter().append("g").attr("class",function(g,h){return"".concat(at.axis,"-").concat(h)});if(t.radar_axis_line_show&&c.append("line"),t.radar_axis_text_show&&c.append("text"),s=c.merge(s),t.radar_axis_line_show&&s.select("line").attr("x1",r).attr("y1",n).attr("x2",function(g,h){return e.getRadarPosition("x",h)}).attr("y2",function(g,h){return e.getRadarPosition("y",h)}),t.radar_axis_text_show){var l=t.radar_axis_text_position,u=l.x,d=u===void 0?0:u,f=l.y,v=f===void 0?0:f;s.select("text").style("text-anchor","middle").attr("dy",".5em").call(function(g){g.each(function(h){Kt(L(this),String(h),[-.6,1.2])})}).datum(function(g,h){return{index:h}}).attr("transform",function(g){nt(this.width)&&(this.width=this.getBoundingClientRect().width/2);var h=e.getRadarPosition("x",g.index,void 0,1),p=Math.round(e.getRadarPosition("y",g.index,void 0,1));return h>r?h+=this.width+d:Math.round(h)<r&&(h-=this.width+d),p>n?(p/2===n&&this.firstChild.tagName==="tspan"&&this.firstChild.setAttribute("dy","0em"),p+=v):p<n&&(p-=v),"translate(".concat(h," ").concat(p,")")})}e.bindRadarEvent()},bindRadarEvent:function(){var e=this,t=e.config,a=e.state,i=e.$el,r=i.radar,n=i.svg,o=t.point_focus_only,s=a.inputType,c=a.transiting;if(t.interaction_enabled){var l=s==="mouse",u=function(f){var v=f.target;/tspan/i.test(v.tagName)&&(v=v.parentNode);var g=L(v).datum();return g&&Object.keys(g).length===1?g.index:void 0},d=function(f){a.event=f;var v=u(f),g=nt(v);(l||g)&&(e.hideTooltip(),o?e.hideCircleFocus():e.unexpandCircles(),l?e.setOverOut(!1,v):g&&e.callOverOutForTouch())};r.axes.selectAll("text").on(l?"mouseover ":"touchstart",function(f){if(!c){a.event=f;var v=u(f);e.selectRectForSingle(n.node(),null,v),l?e.setOverOut(!0,v):e.callOverOutForTouch(v)}}).on("mouseout",l?d:null),l||n.on("touchstart",d)}},updateRadarShape:function(){var e=this,t=e.data.targets.filter(function(n){return e.isRadarType(n)}),a=e.cache.get(Vt),i=e.$el.radar.shapes.selectAll("polygon").data(t),r=i.enter().append("g").attr("class",e.getChartClass("Radar"));e.$T(i.exit()).remove(),r.append("polygon").merge(i).style("fill",e.color).style("stroke",e.color).attr("points",function(n){return a[n.id].join(" ")}),e.updateTargetForCircle(t,r)},radarCircleX:function(e){return this.cache.get(Vt)[e.id][e.index][0]},radarCircleY:function(e){return this.cache.get(Vt)[e.id][e.index][1]}};function Tn(e,t){var a=this,i=a.scale,r=i.x,n=i.y,o=a.state.width;e.selectAll("g").attr("transform",function(s){return"translate(".concat(s===t?"0,0":"".concat(r(s.x0),",").concat(n(s.y0)),")")}).select("rect").attr("width",function(s){return s===t?o:r(s.x1)-r(s.x0)}).attr("height",function(s){return s===t?0:n(s.y1)-n(s.y0)})}function bn(e){var t=this;return e.map(function(a){var i=a.id,r=a.values,n=r[0].value;return{name:i,id:i,value:n,ratio:t.getRatio("treemap",r[0])}})}var $n={initTreemap:function(){var e=this,t=e.$el,a=e.state,i=a.current,r=i.width,n=i.height,o=a.clip,s=a.datetimeId;o.id="".concat(s,"-clip"),e.treemap=fi().tile(e.getTreemapTile()),e.treemapFn=function(c){var l=vi(c).sum(function(d){return d.value}),u=e.getSortCompareFn(!0);return e.treemap(u?l.sort(u):l)},t.defs.append("clipPath").attr("id",o.id).append("rect").attr("width",r).attr("height",n),t.treemap=t.main.select(".".concat(z.chart)).attr("clip-path","url(#".concat(o.id,")")).append("g").classed(Ce.chartTreemaps,!0),e.bindTreemapEvent()},bindTreemapEvent:function(){var e=this,t=e.$el,a=e.config,i=e.state,r=function(o){var s,c=o.isTrusted?o.target:(s=i.eventReceiver.rect)===null||s===void 0?void 0:s.node(),l;return/^rect$/i.test(c.tagName)&&(i.event=o,l=L(c).datum()),l?.data};if(a.interaction_enabled){var n=i.inputType==="touch";t.treemap.on(n?"touchstart":"mousemove",function(o){var s=r(o);s&&(e.showTooltip([s],o.currentTarget),o.type==="mouseover"&&e.setOverOut(!0,s))}).on(n?"touchend":"mouseout",function(o){var s=r(o);e.hideTooltip(),e.setOverOut(!1,s)})}},getTreemapTile:function(){var e,t,a=this,i=a.config,r=a.state.current,n=r.width,o=r.height,s=(t={binary:Oe,dice:gi,slice:hi,sliceDice:pi,squarify:xi,resquarify:mi}[(e=i.treemap_tile)!==null&&e!==void 0?e:"binary"])!==null&&t!==void 0?t:Oe;return function(c,l,u,d,f){s(c,0,0,n,o);for(var v=0,g=c.children;v<g.length;v++){var h=g[v];h.x0=l+h.x0/n*(d-l),h.x1=l+h.x1/n*(d-l),h.y0=u+h.y0/o*(f-u),h.y1=u+h.y1/o*(f-u)}}},getTreemapData:function(e){var t=this;return{name:"root",children:bn.bind(t)(t.filterTargetsToShow(e.filter(t.isTreemapType,t)))}},updateTargetsForTreemap:function(e){var t=this,a=t.$el.treemap,i=t.treemapFn(t.getTreemapData(e??t.data.targets));a.data(i)},updateTreemap:function(e){var t=this,a=t.$el,i=t.$T,r=a.treemap.datum(),n=t.getChartClass("Treemap"),o=a.treemap.selectAll("g").data(r.children);i(o.exit(),e).style("opacity","0").remove(),o.enter().append("g").append("rect"),a.treemap.selectAll("g").attr("class",n).select("rect").attr("fill",function(s){return t.color(s.data.name)})},generateGetTreemapPoints:function(){var e=this,t=e.$el,a=e.scale,i=a.x,r=a.y,n={};return t.treemap.selectAll("g").each(function(o){n[o.data.name]=[[i(o.x0),r(o.y0)],[i(o.x1),r(o.y1)]]}),function(o){return n[o.id]}},redrawTreemap:function(e){var t=this,a=t.$el,i=t.state.current,r=i.width,n=i.height;return a.defs.select("rect").attr("width",r).attr("height",n),[t.$T(a.treemap,e,Rt()).call(Tn.bind(t),a.treemap.datum())]},treemapDataLabelFormat:function(e){var t=this,a=t.config,i=e.id,r=e.value,n=a.treemap_label_format,o=t.getRatio("treemap",e),s=(o*100).toFixed(2),c=a.treemap_label_show&&t.meetsLabelThreshold(o,"treemap")?null:"0";return function(l){return l.style("opacity",c),P(n)?n.bind(t.api)(r,o,i):"".concat(i,`
`).concat(s,"%")}}},ue={point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_focus_only:!1,point_opacity:void 0,point_pattern:[],point_select_r:void 0,point_type:"circle"},ee={area_above:!1,area_below:!1,area_front:!0,area_linearGradient:!1,area_zerobased:!0},An={bar_label_threshold:0,bar_linearGradient:!1,bar_indices_removeNull:!1,bar_overlap:!1,bar_padding:0,bar_radius:void 0,bar_radius_ratio:void 0,bar_sensitivity:2,bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0},wn={bubble_maxR:35,bubble_zerobased:!1},Rn={candlestick_width:void 0,candlestick_width_ratio:.6,candlestick_width_max:void 0,candlestick_color_down:"red"},Cn={line_connectNull:!1,line_step_type:"step",line_step_tooltipMatch:!1,line_zerobased:!1,line_classes:void 0,line_point:!0},Sn={scatter_zerobased:!1},Le={spline_interpolation_type:"cardinal"},de={arc_cornerRadius:0,arc_cornerRadius_ratio:0},Ln={donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_rate:.98,donut_expand_duration:50,donut_padAngle:0,donut_startingAngle:0},En={gauge_background:"",gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_label_extents:void 0,gauge_label_threshold:0,gauge_min:0,gauge_max:100,gauge_type:"single",gauge_startingAngle:-1*Math.PI/2,gauge_arcLength:100,gauge_title:"",gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_rate:.98,gauge_expand_duration:50},kn={pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_rate:.98,pie_expand_duration:50,pie_innerRadius:0,pie_outerRadius:void 0,pie_padAngle:0,pie_padding:0,pie_startingAngle:0},In={polar_label_show:!0,polar_label_format:void 0,polar_label_threshold:.05,polar_label_ratio:void 0,polar_level_depth:3,polar_level_max:void 0,polar_level_show:!0,polar_level_text_backgroundColor:"#fff",polar_level_text_format:function(e){return e%1===0?e:e.toFixed(2)},polar_level_text_show:!0,polar_padAngle:0,polar_padding:0,polar_startingAngle:0},On={radar_axis_max:void 0,radar_axis_line_show:!0,radar_axis_text_show:!0,radar_axis_text_position:{},radar_level_depth:3,radar_level_show:!0,radar_level_text_format:function(e){return e%1===0?e:e.toFixed(2)},radar_level_text_show:!0,radar_size_ratio:.87,radar_direction_clockwise:!1},Pn={treemap_tile:"binary",treemap_label_format:void 0,treemap_label_threshold:.05,treemap_label_show:!0};function Ut(e,t){ot(Xt.prototype,un.concat(e)),ot(Wt.prototype,ln),Bt.setOptions(dn.concat(t||[]))}function It(e,t){Ut([le,xn].concat(e||[])),Bt.setOptions([ue,Cn].concat(t||[]))}function ae(e,t){ot(Xt.prototype,[fn].concat(e||[])),Bt.setOptions(t)}var zn=function(){return It(te,[ee]),(zn=function(){return S.AREA})()},Dn=function(){return It(te,[ee]),(Dn=function(){return S.AREA_LINE_RANGE})()},Mn=function(){return It(te,[ee,Le]),(Mn=function(){return S.AREA_SPLINE})()},Fn=function(){return It(te,[ee,Le]),(Fn=function(){return S.AREA_SPLINE_RANGE})()},Bn=function(){return It(te,[ee]),(Bn=function(){return S.AREA_STEP})()},Xn=function(){return It(),(Xn=function(){return S.LINE})()},Nn=function(){return It(void 0,[Le]),(Nn=function(){return S.SPLINE})()},Gn=function(){return It(),(Gn=function(){return S.STEP})()},Vn=function(){return ae(void 0,[de,Ln]),(Vn=function(){return S.DONUT})()},Yn=function(){return ae([hn],[de,En]),(Yn=function(){return S.GAUGE})()},Hn=function(){return ae(void 0,[de,kn]),(Hn=function(){return S.PIE})()},Wn=function(){return ae([mn],[de,In]),(Wn=function(){return S.POLAR})()},Un=function(){return ae([le,yn],[ue,On]),(Un=function(){return S.RADAR})()},Zn=function(){return Ut([vn],An),(Zn=function(){return S.BAR})()},jn=function(){return Ut([le,pn],[wn,ue]),(jn=function(){return S.BUBBLE})()},qn=function(){return Ut([gn],[Rn]),(qn=function(){return S.CANDLESTICK})()},Kn=function(){return Ut([le],[ue,Sn]),(Kn=function(){return S.SCATTER})()},Jn=function(){return Ut([$n],[Pn]),(Jn=function(){return S.TREEMAP})()};function qe(e,t,a,i){e===void 0&&(e=!1);var r=this,n=r.config,o=r.$el.main,s=n.data_selection_grouped,c=n.data_selection_isselectable.bind(r.api);n.data_selection_enabled&&o.selectAll(".".concat(it.shapes)).selectAll(".".concat(it.shape)).each(function(l){var u=L(this),d=l.data?l.data:l,f=d.id,v=d.index,g=r.getToggle(this,l).bind(r),h=s||!t||t.indexOf(f)>=0,p=!a||a.indexOf(v)>=0,x=u.classed(j.SELECTED);u.classed(wt.line)||u.classed(ce.area)||(e?h&&p&&c(l)&&!x?g(!0,u.classed(j.SELECTED,!0),l,v):G(i)&&i&&x&&g(!1,u.classed(j.SELECTED,!1),l,v):h&&p&&c(l)&&x&&g(!1,u.classed(j.SELECTED,!1),l,v))})}var Qn={selected:function(e){var t=this.internal,a=[];return t.$el.main.selectAll(".".concat(it.shapes+t.getTargetSelectorSuffix(e))).selectAll(".".concat(it.shape)).filter(function(){return L(this).classed(j.SELECTED)}).each(function(i){return a.push(i)}),a},select:function(e,t,a){var i=this.internal;qe.bind(i)(!0,e,t,a)},unselect:function(e,t){var a=this.internal;qe.bind(a)(!1,e,t)}},to={subchart:{show:function(){var e,t,a=this.internal,i=a.$el.subchart,r=a.config,n=r.subchart_show;if(!n){a.unbindZoomEvent(),r.subchart_show=!n,!i.main&&a.initSubchart();var o=i.main.selectAll(".".concat(z.target));a.data.targets.length!==o.size()&&(a.updateSizes(),a.updateTargetsForSubchart(a.data.targets),o=(e=i.main)===null||e===void 0?void 0:e.selectAll(".".concat(z.target))),o?.style("opacity",null),(t=i.main)===null||t===void 0||t.style("display",null),this.resize()}},hide:function(){var e=this.internal,t=e.$el.subchart.main,a=e.config;a.subchart_show&&t?.style("display")!=="none"&&(a.subchart_show=!1,t.style("display","none"),this.resize())},toggle:function(){var e=this.internal,t=e.config;this.subchart[t.subchart_show?"hide":"show"]()}}};function eo(e,t,a,i){i===void 0&&(i=!1);var r=a[0],n=a[1];return e.every(function(o,s){return(s===0?i?+o<=r:+o>=r:i?+o>=n:+o<=n)&&!e.every(function(c,l){return c===t[l]})})}var $a=function(e){var t,a=this.internal,i=a.$el,r=a.axis,n=a.config,o=a.org,s=a.scale,c=n.axis_rotated,l=n.axis_x_inverted,u=r.isCategorized(),d=e;if(n.zoom_enabled&&d){r.isTimeSeries()&&(d=d.map(function(p){return _t.bind(a)(p)}));var f=eo(d,a.getZoomDomain(!0),a.getZoomDomain(),l);if(f){if(u&&(d=d.map(function(p,x){return Number(p)+(x===0?0:1)})),a.api.tooltip.hide(),n.subchart_show){var v=s.zoom||s.x;a.brush.getSelection().call(a.brush.move,d.map(v))}else{var v=u?s.x.orgScale():o.xScale||s.x,g=[-v(d[0]),0],h=(t=zt.scale(v.range()[1]/(v(d[1])-v(d[0])))).translate.apply(t,c?g.reverse():g);i.eventRect.call(a.zoom.transform,h)}a.setZoomResetButton()}}else d=s.zoom?s.zoom.domain():s.x.orgDomain();return d};ot($a,{enable:function(e){var t=this.internal,a=t.config;/^(drag|wheel)$/.test(e)&&(a.zoom_type=e),a.zoom_enabled=!!e,t.zoom?e===!1&&t.bindZoomEvent(!1):(t.initZoom(),t.bindZoomEvent()),t.updateAndRedraw()},max:function(e){var t=this.internal,a=t.config,i=t.org.xDomain;return(e===0||e)&&(a.zoom_x_max=mt("max",[i[1],e])),a.zoom_x_max},min:function(e){var t=this.internal,a=t.config,i=t.org.xDomain;return(e===0||e)&&(a.zoom_x_min=mt("min",[i[0],e])),a.zoom_x_min},range:function(e){var t=this.zoom;if(X(e)){var a=e.min,i=e.max;G(a)&&t.min(a),G(i)&&t.max(i)}return{min:t.min(),max:t.max()}}});var ao={zoom:$a,unzoom:function(){var e=this.internal,t=e.config,a=e.$el,i=a.eventRect,r=a.zoomResetBtn;e.scale.zoom&&(t.subchart_show?e.brush.getSelection().call(e.brush.move,null):e.zoom.updateTransformScale(zt),e.updateZoom(!0),r?.style("display","none"),_i(i.node())!==zt&&e.zoom.transform(i,zt))}},io={drag:function(e){var t=this,a=t.config,i=t.state,r=t.$el.main,n=a.data_selection_grouped,o=a.interaction_enabled&&a.data_selection_isselectable;if(!(t.hasArcType()||!a.data_selection_enabled||a.zoom_enabled&&!t.zoom.altDomain||!a.data_selection_multiple)){var s=i.dragStart||[0,0],c=s[0],l=s[1],u=e[0],d=e[1],f=Math.min(c,u),v=Math.max(c,u),g=n?i.margin.top:Math.min(l,d),h=n?i.height:Math.max(l,d);r.select(".".concat(Pt.dragarea)).attr("x",f).attr("y",g).attr("width",v-f).attr("height",h-g),r.selectAll(".".concat(it.shapes)).selectAll(".".concat(it.shape)).filter(function(p){return o?.bind(t.api)(p)}).each(function(p,x){var m=L(this),_=m.classed(j.SELECTED),y=m.classed(Pt.INCLUDED),b=!1,T;if(m.classed(st.circle)){var $=+m.attr("cx")*1,A=+m.attr("cy")*1;T=t.togglePoint,b=f<$&&$<v&&g<A&&A<h}else if(m.classed(xt.bar)){var R=$i(this),$=R.x,A=R.y,w=R.width,I=R.height;T=t.togglePath,b=!(v<$||$+w<f)&&!(h<A||A+I<g)}else return;b^y&&(m.classed(Pt.INCLUDED,!y),m.classed(j.SELECTED,!_),T.call(t,!_,m,p,x))})}},dragstart:function(e){var t=this,a=t.config,i=t.state,r=t.$el.main;t.hasArcType()||!a.data_selection_enabled||(i.dragStart=e,r.select(".".concat(z.chart)).append("rect").attr("class",Pt.dragarea).style("opacity","0.1"),t.setDragStatus(!0))},dragend:function(){var e=this,t=e.config,a=e.$el.main,i=e.$T;e.hasArcType()||!t.data_selection_enabled||(i(a.select(".".concat(Pt.dragarea))).style("opacity","0").remove(),a.selectAll(".".concat(it.shape)).classed(Pt.INCLUDED,!1),e.setDragStatus(!1))}},ro=D(D({},io),{selectPoint:function(e,t,a){var i=this,r=i.config,n=i.$el.main,o=i.$T,s=r.axis_rotated,c=(s?i.circleY:i.circleX).bind(i),l=(s?i.circleX:i.circleY).bind(i),u=i.pointSelectR.bind(i);Z(r.data_onselected,i.api,t,e.node()),o(n.select(".".concat(j.selectedCircles).concat(i.getTargetSelectorSuffix(t.id))).selectAll(".".concat(j.selectedCircle,"-").concat(a)).data([t]).enter().append("circle").attr("class",function(){return i.generateClass(j.selectedCircle,a)}).attr("cx",c).attr("cy",l).attr("stroke",i.color).attr("r",function(d){return i.pointSelectR(d)*1.4})).attr("r",u)},unselectPoint:function(e,t,a){var i=this,r=i.config,n=i.$el.main,o=i.$T;Z(r.data_onunselected,i.api,t,e?.node()),o(n.select(".".concat(j.selectedCircles).concat(i.getTargetSelectorSuffix(t.id))).selectAll(".".concat(j.selectedCircle,"-").concat(a))).attr("r",0).remove()},togglePoint:function(e,t,a,i){var r="".concat(e?"":"un","selectPoint");this[r](t,a,i)},selectPath:function(e,t){var a=this,i=a.config;Z(i.data_onselected,a.api,t,e.node()),i.interaction_brighten&&e.style("filter","brightness(1.25)")},unselectPath:function(e,t){var a=this,i=a.config;Z(i.data_onunselected,a.api,t,e.node()),i.interaction_brighten&&e.style("filter",null)},togglePath:function(e,t,a,i){this["".concat(e?"":"un","selectPath")](t,a,i)},getToggle:function(e,t){var a=this;return e.nodeName==="path"?a.togglePath:a.isStepType(t)?function(){}:a.togglePoint},toggleShape:function(e,t,a){var i=this,r=i.config,n=i.$el.main;if(r.data_selection_enabled&&r.data_selection_isselectable.bind(i.api)(t)){var o=L(e),s=o.classed(j.SELECTED),c=i.getToggle(e,t).bind(i),l;if(!r.data_selection_multiple){var u=r.point_focus_only,d=".".concat(u?j.selectedCircles:it.shapes);r.data_selection_grouped&&(d+=i.getTargetSelectorSuffix(t.id)),n.selectAll(d).selectAll(u?".".concat(j.selectedCircle):".".concat(it.shape,".").concat(j.SELECTED)).classed(j.SELECTED,!1).each(function(f){var v=L(this);l=v,c(!1,v,f,f.index)})}(!l||l.node()!==o.node())&&(o.classed(j.SELECTED,!s),c(!s,o,t,a))}}}),no={initBrush:function(){var e=this,t=e.config,a=e.scale,i=e.$el.subchart,r=t.axis_rotated,n,o;e.brush=(r?Ea():ka()).handleSize(5);var s=function(){var c=e.$el.svg.select(".".concat(F.brush," .overlay")),l={width:0,height:0};return c.size()&&(l.width=+c.attr("width"),l.height=+c.attr("height")),l[r?"width":"height"]};e.brush.on("start brush end",function(c){var l=c.selection,u=c.target,d=c.type;d==="start"&&e.state.inputType==="touch"&&e.hideTooltip(),/(start|brush)/.test(d)&&e.redrawForBrush(),d==="end"&&(n=a.x.orgDomain()),u?.handle&&(l===null?e.brush.handle.attr("display","none"):e.brush.handle.attr("display",null).attr("transform",function(f,v){var g=r?[33,l[v]-(v===0?30:24)]:[l[v],3];return"translate(".concat(g,")")}))}),e.brush.updateResize=function(){var c=this;o&&clearTimeout(o),o=setTimeout(function(){var l=c.getSelection();n&&Je(l.node())&&c.move(l,n.map(a.subX.orgScale()))},0)},e.brush.update=function(){var c,l=this.extent()();return l[1].filter(function(u){return isNaN(u)}).length===0&&((c=i.main)===null||c===void 0||c.select(".".concat(F.brush)).call(this)),this},e.brush.scale=function(c){var l=t.subchart_size_height||s(),u=e.getExtent();!u&&c.range?u=[[0,0],[c.range()[1],l]]:N(u)&&(u=u.map(function(d,f){return[d,f>0?l:f]})),r&&u[1].reverse(),this.extent(u),this.update()},e.brush.getSelection=function(){return i.main?i.main.select(".".concat(F.brush)):L([])}},initSubchart:function(){var e=this,t=e.config,a=e.state,i=a.clip,r=a.hasAxis,n=e.$el,o=n.defs,s=n.svg,c=n.subchart,l=n.axis;if(r){var u=t.subchart_show?null:"hidden",d="".concat(i.id,"-subchart"),f=e.getClipPath(d);i.idSubchart=d,e.appendClip(o,d),e.initBrush(),c.main=s.append("g").classed(F.subchart,!0).attr("transform",e.getTranslate("context"));var v=c.main;v.style("visibility",u),v.append("g").attr("clip-path",f).attr("class",F.chart),["bar","line","bubble","candlestick","scatter"].forEach(function(h){var p=ut(/^(bubble|scatter)$/.test(h)?"circle":h);if(e.hasType(h)||e.hasTypeOf(p)){var x=v.select(".".concat(F.chart)),m=F["chart".concat(p,"s")];x.select(".".concat(m)).empty()&&x.append("g").attr("class",m)}});var g=v.append("g").attr("clip-path",f).attr("class",F.brush).call(e.brush);t.subchart_showHandle&&e.addBrushHandle(g),l.subX=v.append("g").attr("class",F.axisX).attr("transform",e.getTranslate("subX")).attr("clip-path",t.axis_rotated?"":i.pathXAxis).style("visibility",t.subchart_axis_x_show?u:"hidden")}},addBrushHandle:function(e){var t=this,a=t.config,i=a.axis_rotated,r=a.subchart_init_range,n="handle--custom",o=i?["M 5.2491724,29.749209 a 6,6 0 0 0 -5.50000003,-6.5 H -5.7508276 a 6,6 0 0 0 -6.0000004,6.5 z m -5.00000003,-2 H -6.7508276 m 6.99999997,-2 H -6.7508276Z","M 5.2491724,23.249172 a 6,-6 0 0 1 -5.50000003,6.5 H -5.7508276 a 6,-6 0 0 1 -6.0000004,-6.5 z m -5.00000003,2 H -6.7508276 m 6.99999997,2 H -6.7508276Z"]:["M 0 18 A 6 6 0 0 0 -6.5 23.5 V 29 A 6 6 0 0 0 0 35 Z M -2 23 V 30 M -4 23 V 30Z","M 0 18 A 6 6 0 0 1 6.5 23.5 V 29 A 6 6 0 0 1 0 35 Z M 2 23 V 30 M 4 23 V 30Z"];t.brush.handle=e.selectAll(".".concat(n)).data(i?[{type:"n"},{type:"s"}]:[{type:"w"},{type:"e"}]).enter().append("path").attr("class",n).attr("cursor","".concat(i?"ns":"ew","-resize")).attr("d",function(s){return o[+/[se]/.test(s.type)]}).attr("display",r?null:"none")},updateTargetsForSubchart:function(e){var t=this,a=t.config,i=t.state,r=t.$el.subchart.main;a.subchart_show&&(["bar","line","bubble","candlestick","scatter"].filter(function(n){return t.hasType(n)||t.hasTypeOf(ut(n))}).forEach(function(n){var o=/^(bubble|scatter)$/.test(n),s=ut(o?"circle":n),c=t.getChartClass(s,!0),l=t.getClass(o?"circles":"".concat(n,"s"),!0),u=r.select(".".concat(F["chart".concat("".concat(s,"s"))]));if(o){var d=u.selectAll(".".concat(F.circles)).data(e.filter(t["is".concat(ut(n),"Type")].bind(t))).attr("class",l);d.exit().remove(),d.enter().append("g").attr("class",l)}else{var f=u.selectAll(".".concat(F["chart".concat(s)])).attr("class",c).data(e.filter(t["is".concat(s,"Type")].bind(t))),v=f.enter().append("g").style("opacity","0").attr("class",c).append("g").attr("class",l);f.exit().remove(),n==="line"&&t.hasTypeOf("Area")&&v.append("g").attr("class",t.getClass("areas",!0))}}),r.selectAll(".".concat(F.brush," rect")).attr(a.axis_rotated?"width":"height",a.axis_rotated?i.width2:i.height2))},redrawSubchart:function(e,t,a){var i,r=this,n=r.config,o=r.$el.subchart.main,s=r.state,c=!!t;if(o.style("visibility",n.subchart_show?null:"hidden"),n.subchart_show&&(((i=s.event)===null||i===void 0?void 0:i.type)==="zoom"&&r.brush.update(),e)){var l=n.subchart_init_range;if(!ca(r)&&r.brush.update(),Object.keys(a.type).forEach(function(f){var v=ut(f),g=r["generateDraw".concat(v)](a.indices[f],!0);r["update".concat(v)](c,!0),r["redraw".concat(v)](g,c,!0)}),r.hasType("bubble")||r.hasType("scatter")){var u=a.pos.cx,d=r.updateCircleY(!0);r.updateCircle(!0),r.redrawCircle(u,d,c,void 0,!0)}!s.rendered&&l&&r.brush.move(r.brush.getSelection(),l.map(r.scale.x))}},redrawForBrush:function(){var e=this,t=e.config,a=t.subchart_onbrush,i=t.zoom_rescale,r=e.scale;e.redraw({withTransition:!1,withY:i,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),a.bind(e.api)(r.x.orgDomain())},transformContext:function(e,t){var a=this,i=a.$el.subchart,r=a.$T,n=t?.axisSubX?t.axisSubX:r(i.main.select(".".concat(F.axisX)),e);i.main.attr("transform",a.getTranslate("context")),n.attr("transform",a.getTranslate("subX"))},getExtent:function(){var e=this,t=e.config,a=e.scale,i=t.axis_x_extent;if(i){if(P(i))i=i.bind(e.api)(e.getXDomain(e.data.targets),a.subX);else if(e.axis.isTimeSeries()&&i.every(isNaN)){var r=_t.bind(e);i=i.map(function(n){return a.subX(r(n))})}}return i}},oo={initZoom:function(){var e=this;e.scale.zoom=null,e.generateZoom(),e.initZoomBehaviour()},bindZoomEvent:function(e){e===void 0&&(e=!0);var t=this,a=t.config,i=a.zoom_enabled;i&&e?!a.subchart_show&&t.bindZoomOnEventRect():e===!1&&(t.api.unzoom(),t.unbindZoomEvent())},generateZoom:function(){var e=this,t=e.config,a=e.org,i=e.scale,r=yi().duration(0).on("start",e.onZoomStart.bind(e)).on("zoom",e.onZoom.bind(e)).on("end",e.onZoomEnd.bind(e));r.orgScaleExtent=function(){var n=t.zoom_extent||[1,10];return[n[0],Math.max(e.getMaxDataCount()/n[1],n[1])]},r.updateScaleExtent=function(){var n=Dt(e.scale.x.orgDomain())/Dt(e.getZoomDomain()),o=this.orgScaleExtent();return this.scaleExtent([o[0]*n,o[1]*n]),this},r.updateTransformScale=function(n,o){var s,c=t.axis_rotated;(s=a.xScale)===null||s===void 0||s.range(i.x.range());var l=n[c?"rescaleY":"rescaleX"](a.xScale||i.x),u=e.trimXDomain(l.domain()),d=t.zoom_rescale;if(l.domain(u,a.xDomain),o){var f=l(i.x.domain()[0]),v=c?n.x:f,g=c?f:n.y;e.$el.eventRect.property("__zoom",zt.translate(v,g).scale(n.k))}e.state.xTickOffset||(e.state.xTickOffset=e.axis.x.tickOffset()),i.zoom=e.getCustomizedXScale(l),e.axis.x.scale(i.zoom),d&&(!a.xScale&&(a.xScale=i.x.copy()),i.x.domain(u))},r.getDomain=function(){var n=i[i.zoom?"zoom":"subX"].domain(),o=e.axis.isCategorized();return o&&(n[1]-=2),n},e.zoom=r},onZoomStart:function(e){var t=this,a=e.sourceEvent;a&&(t.zoom.startEvent=a,t.state.zooming=!0,Z(t.config.zoom_onzoomstart,t.api,e))},onZoom:function(e){var t=this,a=t.config,i=t.scale,r=t.state,n=t.org,o=e.sourceEvent,s=e?.transform===zt;if(!(!a.zoom_enabled||t.filterTargetsToShow(t.data.targets).length===0||!i.zoom&&o?.type.indexOf("touch")>-1&&o?.touches.length===1)){e.sourceEvent&&(r.zooming=!0);var c=o?.type==="mousemove",l=o?.wheelDelta<0,u=e.transform;!c&&l&&i.x.domain().every(function(f,v){return f!==n.xDomain[v]})&&i.x.domain(n.xDomain),t.zoom.updateTransformScale(u,a.zoom_type==="wheel"&&o);var d=a.transition_duration>0&&!a.subchart_show&&(r.dragging||s||!e.sourceEvent);t.redraw({withTransition:d,withY:a.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),t.state.cancelClick=c,!s&&Z(a.zoom_onzoom,t.api,t.zoom.getDomain())}},onZoomEnd:function(e){var t,a=this,i=a.config,r=a.state,n=a.zoom.startEvent,o=e?.sourceEvent,s=e?.transform===zt;n?.type.indexOf("touch")>-1&&(n=n.changedTouches[0],o=(t=o?.changedTouches)===null||t===void 0?void 0:t[0]),!(i.zoom_type==="drag"&&o&&n.clientX===o.clientX&&n.clientY===o.clientY)&&(a.redrawEventRect(),a.updateZoom(),r.zooming=!1,!s&&(o||r.dragging)&&Z(i.zoom_onzoomend,a.api,a.zoom.getDomain()))},updateZoom:function(e){var t=this,a=t.scale,i=a.subX,r=a.x,n=a.zoom;if(n){var o=n.domain(),s=i.domain(),c=.015,l=t.config.axis_x_inverted?(o[0]>=s[0]||o[0]+c>=s[0])&&(s[1]>=o[1]||s[1]>=o[1]+c):(o[0]<=s[0]||o[0]-c<=s[0])&&(s[1]<=o[1]||s[1]<=o[1]-c);(e||l)&&(t.axis.x.scale(i),r.domain(i.orgDomain()),t.scale.zoom=null)}},bindZoomOnEventRect:function(){var e=this,t=e.config,a=e.$el.eventRect,i=t.zoom_type==="drag"?e.zoomBehaviour:e.zoom;e.$el.svg.on("wheel",function(){}),a.call(i).on("dblclick.zoom",null)},initZoomBehaviour:function(){var e=this,t=e.config,a=e.state,i=t.axis_rotated,r=0,n=0,o,s={axis:i?"y":"x",attr:i?"height":"width",index:i?1:0};e.zoomBehaviour=Qe().clickDistance(4).on("start",function(c){a.event=c,e.setDragStatus(!0),e.unselectRect(),o||(o=e.$el.main.append("rect").attr("clip-path",a.clip.path).attr("class",$e.zoomBrush).attr("width",i?a.width:0).attr("height",i?0:a.height)),r=ht(c,this)[s.index],n=r,o.attr(s.axis,r).attr(s.attr,0),e.onZoomStart(c)}).on("drag",function(c){n=ht(c,this)[s.index],o.attr(s.axis,Math.min(r,n)).attr(s.attr,Math.abs(n-r))}).on("end",function(c){var l,u=e.scale.zoom||e.scale.x;a.event=c,o.attr(s.axis,0).attr(s.attr,0),r>n&&(l=[n,r],r=l[0],n=l[1]),r<0&&(n+=Math.abs(r),r=0),r!==n&&e.api.zoom([r,n].map(function(d){return u.invert(d)})),e.setDragStatus(!1)})},setZoomResetButton:function(){var e=this,t=e.config,a=e.$el,i=t.zoom_resetButton;i&&t.zoom_type==="drag"&&(a.zoomResetBtn?a.zoomResetBtn.style("display",null):a.zoomResetBtn=e.$el.chart.append("div").classed(z.button,!0).append("span").on("click",function(){P(i.onclick)&&i.onclick.bind(e.api)(this),e.api.unzoom()}).classed($e.buttonZoomReset,!0).text(i.text||"Reset Zoom"))}},so={data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onselected:function(){},data_onunselected:function(){}},co={subchart_show:!1,subchart_showHandle:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_axis_x_tick_show:!0,subchart_axis_x_tick_format:void 0,subchart_axis_x_tick_text_show:!0,subchart_init_range:void 0,subchart_onbrush:function(){}},lo={zoom_enabled:!1,zoom_type:"wheel",zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:void 0,zoom_onzoomstart:void 0,zoom_onzoomend:void 0,zoom_resetButton:!0,zoom_x_min:void 0,zoom_x_max:void 0},uo=function(){return ot(Xt.prototype,ro),ot(Wt.prototype,Qn),Bt.setOptions([so]),(uo=function(){return!0})()},fo=function(){return ot(Xt.prototype,no),ot(Wt.prototype,to),Bt.setOptions([co]),(fo=function(){return!0})()},vo=function(){return ot(Xt.prototype,oo),ot(Wt.prototype,ao),Bt.setOptions([lo]),(vo=function(){return!0})()},xe={},Co={version:"3.8.2",generate:function(e){var t=Yt({},xe,e),a=new Wt(t);return a.internal.charts=this.instance,this.instance.push(a),a},defaults:function(e){return X(e)&&(xe=e),xe},instance:[],plugin:{}};export{zn as area,Dn as areaLineRange,Mn as areaSpline,Fn as areaSplineRange,Bn as areaStep,Zn as bar,Co as bb,jn as bubble,qn as candlestick,Co as default,Vn as donut,Yn as gauge,Xn as line,Hn as pie,Wn as polar,Un as radar,Kn as scatter,uo as selection,Nn as spline,Gn as step,fo as subchart,Jn as treemap,vo as zoom};
/*! Bundled license information:

billboard.js/dist-esm/billboard.js:
  (*!
  * Copyright (c) 2017 ~ present NAVER Corp.
   * billboard.js project is licensed under the MIT license
   * 
   * billboard.js, JavaScript chart library
   * https://naver.github.io/billboard.js/
   * 
   * @version 3.8.2
  *)
*/
//# sourceMappingURL=billboard.mjs.map